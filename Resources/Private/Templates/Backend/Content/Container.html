{namespace neos=TYPO3\Neos\ViewHelpers}
<f:security.ifAccess resource="TYPO3_Neos_Backend_BackendController">
	<f:if condition="{0: 'live'} != {0: node.context.workspace.name}">
		<!-- TODO: remove this from HTML as it should not be shown in preview mode for example, this causes 'flickering' -->
		<div id="neos-application" class="neos" role="application">
			<div id="neos-top">
				<ul id="neos-top-bar">
					<li class="neos-active">
						<f:link.action package="TYPO3.Neos" controller="Backend\Backend" action="index">Content</f:link.action>
					</li>
					<f:for each="{modules}" as="module" key="path">
						<f:if condition="{module.hideInMenu}">
							<f:then></f:then>
							<f:else>
								<f:if condition="{module.role}">
									<f:then>
										<f:security.ifHasRole role="{module.role}">
											<li>
												<neos:link.module path="{path}">{module.label}</neos:link.module>
											</li>
										</f:security.ifHasRole>
									</f:then>
									<f:else>
										<li>
											<neos:link.module path="{path}">{module.label}</neos:link.module>
										</li>
									</f:else>
								</f:if>
							</f:else>
						</f:if>
					</f:for>
				</ul>
				<f:render partial="Backend/UserMenu" arguments="{_all}" />
			</div>
		</div>
	</f:if>
</f:security.ifAccess>