{namespace typo3=F3\TYPO3\ViewHelpers}
<f:render section="itemList" arguments="{items: items}" />

<f:section name="itemList">
	<ul>
		<f:for each="{items}" as="item">
			<li class="{f:if(condition: item.state.active, then: 'active')}">
				<f:link.action package="TYPO3" controller="Node" arguments="{node: item.node}">{item.label}</f:link.action>
				<f:if condition="{item.subItems}">
					<f:render section="itemList" arguments="{items: item.subItems}" />
				</f:if>
			</li>
		</f:for>
	</ul>
</f:section>
