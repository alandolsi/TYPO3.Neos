/*!
 * jQuery JavaScript Library v1.9.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2012 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-2-4
 */

/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */

/*

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/

// ==========================================================================
// Project:   Ember - JavaScript Application Framework
// Copyright: ©2011-2013 Tilde Inc. and contributors
//            Portions ©2006-2011 Strobe Inc.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license
//            See https://raw.github.com/emberjs/ember.js/master/LICENSE
// ==========================================================================

// Copyright: ©2011 My Company Inc. All rights reserved.

/*! jQuery UI - v1.9.0-beta.1 - 2012-06-28
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */

/*!
 * jQuery Color Animations
 * http://jquery.org/
 *
 * Copyright 2012 John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */

/* VIE.js 2.1.0 - Semantic Interaction Toolkit
by Henri Bergius and the IKS Project. Available under the MIT license.
See http://viejs.org for more information
*/

//     VIE - Vienna IKS Editables
//     (c) 2011 Henri Bergius, IKS Consortium
//     (c) 2011 Sebastian Germesin, IKS Consortium
//     (c) 2011 Szaby Grünwald, IKS Consortium
//     VIE may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://viejs.org/

//     VIE - Vienna IKS Editables
//     (c) 2011 Henri Bergius, IKS Consortium
//     (c) 2011 Sebastian Germesin, IKS Consortium
//     (c) 2011 Szaby Grünwald, IKS Consortium
//     VIE may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://viejs.org/
//

/* Hallo 1.0.2 - rich text editor for jQuery UI
* by Henri Bergius and contributors. Available under the MIT license.
* See http://hallojs.org for more information
*/

/**
 * @license RequireJS text 2.0.0 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*

	jQuery Tags Input Plugin 1.3.3
	
	Copyright (c) 2011 XOXCO, Inc
	
	Documentation for this plugin lives here:
	http://xoxco.com/clickable/jquery-tags-input
	
	Licensed under the MIT license:
	http://www.opensource.org/licenses/mit-license.php

	ben@xoxco.com

*/

/*
 Rangy, a cross-browser JavaScript range and selection library
 http://code.google.com/p/rangy/

 Copyright 2012, Tim Down
 Licensed under the MIT license.
 Version: 1.2.3
 Build date: 26 February 2012
*/

/* Create.js 1.0.0alpha4 - Inline editing toolkit
by Henri Bergius and contributors. Available under the MIT license.
See http://createjs.org for more information
*/

/* ==========================================================
 * bootstrap-alert.js v2.2.2
 * http://twitter.github.com/bootstrap/javascript.html#alerts
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/**
 * bootstrap-notify.js v1.0.0
 * --
 * Copyright 2012 Nijiko Yonskai <nijikokun@gmail.com>
 * Copyright 2012 Goodybag, Inc.
 * --
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/*************************************************************************
	jquery.dynatree.js
	Dynamic tree view control, with support for lazy loading of branches.

	Copyright (c) 2006-2012, Martin Wendt (http://wwWendt.de)
	Dual licensed under the MIT or GPL Version 2 licenses.
	http://code.google.com/p/dynatree/wiki/LicenseInfo

	A current version and some documentation is available at
		http://dynatree.googlecode.com/

	$Version: 1.2.1$
	$Revision: 606, 2012-06-12 08:10:04$

	@depends: jquery.js
	@depends: jquery.ui.core.js
	@depends: jquery.cookie.js
*************************************************************************/

/**
 * jquery.Jcrop.min.js v0.9.12 (build:20130202)
 * jQuery Image Cropping Plugin - released under MIT License
 * Copyright (c) 2008-2013 Tapmodo Interactive LLC
 * https://github.com/tapmodo/Jcrop
 */

/**
 * plupload.html5.js
 *
 * Copyright 2009, Moxiecode Systems AB
 * Released under GPL License.
 *
 * License: http://www.plupload.com/license
 * Contributing: http://www.plupload.com/contributing
 */

/**
 * Cookie plugin
 *
 * Copyright (c) 2006 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */

/* ============================================================
 * bootstrap-dropdown.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#dropdowns
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/*
 * jQuery Hotkeys Plugin
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Based upon the plugin by Tzury Bar Yochay:
 * http://github.com/tzuryby/hotkeys
 *
 * Original idea by:
 * Binny V A, http://www.openjs.com/scripts/events/keyboard_shortcuts/
*/

function _log(e,t){if(!_canLog)return;var n=Array.prototype.slice.apply(arguments,[1]),r=new Date,i=r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()+"."+r.getMilliseconds();n[0]=i+" - "+n[0];try{switch(e){case"info":window.console.info.apply(window.console,n);break;case"warn":window.console.warn.apply(window.console,n);break;default:window.console.log.apply(window.console,n)}}catch(s){window.console||(_canLog=!1)}}function logMsg(e){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)}(function(e,t){function P(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||n!=="function"&&(t===0||typeof t=="number"&&t>0&&t-1 in e)}function B(e){var t=H[e]={};return b.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(e,n,r,i){if(!b.acceptData(e))return;var s,o,u=b.expando,a=typeof n=="string",f=e.nodeType,c=f?b.cache:e,h=f?e[u]:e[u]&&u;if((!h||!c[h]||!i&&!c[h].data)&&a&&r===t)return;h||(f?e[u]=h=l.pop()||b.guid++:h=u),c[h]||(c[h]={},f||(c[h].toJSON=b.noop));if(typeof n=="object"||typeof n=="function")i?c[h]=b.extend(c[h],n):c[h].data=b.extend(c[h].data,n);return s=c[h],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[b.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[b.camelCase(n)])):o=s,o}function q(e,t,n){if(!b.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?b.cache:e,a=o?e[b.expando]:b.expando;if(!u[a])return;if(t){s=n?u[a]:u[a].data;if(s){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in s?t=[t]:(t=b.camelCase(t),t in s?t=[t]:t=t.split(" "));for(r=0,i=t.length;r<i;r++)delete s[t[r]];if(!(n?U:b.isEmptyObject)(s))return}}if(!n){delete u[a].data;if(!U(u[a]))return}o?b.cleanData([e],!0):b.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null}function R(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(F,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:j.test(r)?b.parseJSON(r):r}catch(s){}b.data(e,n,r)}else r=t}return r}function U(e){var t;for(t in e){if(t==="data"&&b.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function it(){return!0}function st(){return!1}function ct(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ht(e,t,n){t=t||0;if(b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if(typeof t=="string"){var r=b.grep(e,function(e){return e.nodeType===1});if(at.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function _t(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){var n,r=0;for(;(n=e[r])!=null;r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function Ht(e,t){if(t.nodeType!==1||!b.hasData(e))return;var n,r,i,s=b._data(e),o=b._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)b.event.add(t,n,u[n][r])}o.data&&(o.data=b.extend({},o.data))}function Bt(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}if(n==="script"&&t.text!==e.text)_t(t).text=e.text,Dt(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&xt.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function jt(e,n){var r,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;(s=r[o])!=null;o++)!n||b.nodeName(s,n)?u.push(s):b.merge(u,jt(s,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--){t=en[i]+n;if(t in e)return t}return r}function nn(e,t){return e=t||e,b.css(e,"display")==="none"||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=b._data(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&nn(r)&&(s[o]=b._data(r,"olddisplay",an(r.nodeName)))):s[o]||(i=nn(r),(n&&n!=="none"||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function sn(e,t,n){var r=$t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function on(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=b.css(e,n+Zt[s],!0,i)),r?(n==="content"&&(o-=b.css(e,"padding"+Zt[s],!0,i)),n!=="margin"&&(o-=b.css(e,"border"+Zt[s]+"Width",!0,i))):(o+=b.css(e,"padding"+Zt[s],!0,i),n!=="padding"&&(o+=b.css(e,"border"+Zt[s]+"Width",!0,i)));return o}function un(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=qt(e),o=b.support.boxSizing&&b.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=Rt(e,t,s);if(i<0||i==null)i=e.style[t];if(Jt.test(i))return i;r=o&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+on(e,t,n||(o?"border":"content"),r,s)+"px"}function an(e){var t=s,n=Qt[e];if(!n){n=fn(e,t);if(n==="none"||!n)It=(It||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=fn(e,t),It.detach();Qt[e]=n}return n}function fn(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}function vn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||cn.test(e)?r(e,i):vn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&b.type(t)==="object")for(i in t)vn(e+"["+i+"]",t[i],n,r);else r(e,t)}function _n(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(E)||[];if(b.isFunction(n))while(r=s[i++])r[0]==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dn(e,t,n,r){function o(u){var a;return i[u]=!0,b.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===An;return o(t.dataTypes[0])||!i["*"]&&o("*")}function Pn(e,n){var r,i,s=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}function Hn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(u in l)u in r&&(n[l[u]]=r[u]);while(f[0]==="*")f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}if(o)return o!==f[0]&&f.unshift(o),r[o]}function Bn(e,t){var n,r,i,s,o={},u=0,a=e.dataTypes.slice(),f=a[0];e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(a[1])for(i in e.converters)o[i.toLowerCase()]=e.converters[i];for(;r=a[++u];)if(r!=="*"){if(f!=="*"&&f!==r){i=o[f+" "+r]||o["* "+r];if(!i)for(n in o){s=n.split(" ");if(s[1]===r){i=o[f+" "+s[0]]||o["* "+s[0]];if(i){i===!0?i=o[n]:o[n]!==!0&&(r=s[0],a.splice(u--,0,r));break}}}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(l){return{state:"parsererror",error:i?l:"No conversion from "+f+" to "+r}}}f=r}return{state:"success",data:t}}function zn(){try{return new e.XMLHttpRequest}catch(t){}}function Wn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Yn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Gn[t]||[]).concat(Gn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,s=0,o=Qn.length,u=b.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Xn||Yn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Yn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;tr(l,f.opts.specialEasing);for(;s<o;s++){r=Qn[s].call(f,e,l,f.opts);if(r)return r}return Zn(f,l),b.isFunction(f.opts.start)&&f.opts.start.call(e,f),b.fx.timer(b.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function tr(e,t){var n,r,i,s,o;for(i in e){r=b.camelCase(i),s=t[r],n=e[i],b.isArray(n)&&(s=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),o=b.cssHooks[r];if(o&&"expand"in o){n=o.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=s)}else t[r]=s}}function nr(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},v=[],m=e.nodeType&&nn(e);n.queue||(l=b._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,b.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],b.css(e,"display")==="inline"&&b.css(e,"float")==="none"&&(!b.support.inlineBlockNeedsLayout||an(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",b.support.shrinkWrapBlocks||h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t){o=t[i];if($n.exec(o)){delete t[i],a=a||o==="toggle";if(o===(m?"hide":"show"))continue;v.push(i)}}s=v.length;if(s){u=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in u&&(m=u.hidden),a&&(u.hidden=!m),m?b(e).show():h.done(function(){b(e).hide()}),h.done(function(){var t;b._removeData(e,"fxshow");for(t in d)b.style(e,t,d[t])});for(i=0;i<s;i++)r=v[i],f=h.createTween(r,m?u[r]:0),d[r]=u[r]||b.style(e,r),r in u||(u[r]=f.start,m&&(f.end=f.start,f.start=r==="width"||r==="height"?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function sr(e){return b.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,s=e.document,o=e.location,u=e.jQuery,a=e.$,f={},l=[],c="1.9.1",h=l.concat,p=l.push,d=l.slice,v=l.indexOf,m=f.toString,g=f.hasOwnProperty,y=c.trim,b=function(e,t){return new b.fn.init(e,t,r)},w=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,E=/\S+/g,S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,x=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,T=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,N=/^[\],:{}\s]*$/,C=/(?:^|:|,)(?:\s*\[)+/g,k=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,L=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,A=/^-ms-/,O=/-([\da-z])/gi,M=function(e,t){return t.toUpperCase()},_=function(e){if(s.addEventListener||e.type==="load"||s.readyState==="complete")D(),b.ready()},D=function(){s.addEventListener?(s.removeEventListener("DOMContentLoaded",_,!1),e.removeEventListener("load",_,!1)):(s.detachEvent("onreadystatechange",_),e.detachEvent("onload",_))};b.fn=b.prototype={jquery:c,constructor:b,init:function(e,n,r){var i,o;if(!e)return this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=x.exec(e);if(i&&(i[1]||!n)){if(i[1]){n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:s,!0));if(T.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}o=s.getElementById(i[2]);if(o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=s,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return d.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:p,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!b.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((s=arguments[a])!=null)for(i in s){e=u[i],r=s[i];if(u===r)continue;l&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,o=e&&b.isArray(e)?e:[]):o=e&&b.isPlainObject(e)?e:{},u[i]=b.extend(l,o,r)):r!==t&&(u[i]=r)}return u},b.extend({noConflict:function(t){return e.$===b&&(e.$=a),t&&e.jQuery===b&&(e.jQuery=u),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?--b.readyWait:b.isReady)return;if(!s.body)return setTimeout(b.ready);b.isReady=!0;if(e!==!0&&--b.readyWait>0)return;n.resolveWith(s,[b]),b.fn.trigger&&b(s).trigger("ready").off("ready")},isFunction:function(e){return b.type(e)==="function"},isArray:Array.isArray||function(e){return b.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):typeof e=="object"||typeof e=="function"?f[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||b.type(e)!=="object"||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!g.call(e,"constructor")&&!g.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||g.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||s;var r=T.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(t===null)return t;if(typeof t=="string"){t=b.trim(t);if(t&&N.test(t.replace(k,"@").replace(L,"]").replace(C,"")))return(new Function("return "+t))()}b.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(A,"ms-").replace(O,M)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=P(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:y&&!y.call("﻿ ")?function(e){return e==null?"":y.call(e)}:function(e){return e==null?"":(e+"").replace(S,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(P(Object(e))?b.merge(n,typeof e=="string"?[e]:e):p.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(v)return v.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=P(e),u=[];if(o)for(;i<s;i++)r=t(e[i],i,n),r!=null&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),r!=null&&(u[u.length]=r);return h.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(s=e[n],n=e,e=s),b.isFunction(e)?(r=d.call(arguments,2),i=function(){return e.apply(n||this,r.concat(d.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=r==null;if(b.type(r)==="object"){s=!0;for(a in r)b.access(e,n,a,r[a],!0,o,u)}else if(i!==t){s=!0,b.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(b(e),n)}));if(n)for(;a<f;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)))}return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n){n=b.Deferred();if(s.readyState==="complete")setTimeout(b.ready);else if(s.addEventListener)s.addEventListener("DOMContentLoaded",_,!1),e.addEventListener("load",_,!1);else{s.attachEvent("onreadystatechange",_),e.attachEvent("onload",_);var r=!1;try{r=e.frameElement==null&&s.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(o,50)}D(),b.ready()}}()}}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){f["[object "+t+"]"]=t.toLowerCase()}),r=b(s);var H={};b.Callbacks=function(e){e=typeof e=="string"?H[e]||B(e):b.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;for(;a&&o<s;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);r==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&r!=="string"&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,a,r))>-1)a.splice(r,1),n&&(r<=s&&s--,r<=o&&o--)}),this},has:function(e){return e?b.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!i||f)&&(n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,s){var o=s[0],u=b.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=d.call(arguments),r=n.length,i=r!==1||e&&b.isFunction(e.promise)?r:0,s=i===1?e:b.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),b.support=function(){var t,n,r,o,u,a,f,l,c,h,p=s.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};u=s.createElement("select"),f=u.appendChild(s.createElement("option")),o=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:p.className!=="t",leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!o.value,optSelected:f.selected,enctype:!!s.createElement("form").enctype,html5Clone:s.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:s.compatMode==="CSS1Compat",deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}o=s.createElement("input"),o.setAttribute("value",""),t.input=o.getAttribute("value")==="",o.value="t",o.setAttribute("type","radio"),t.radioValue=o.value==="t",o.setAttribute("checked","t"),o.setAttribute("name","t"),a=s.createDocumentFragment(),a.appendChild(o),t.appendChecked=o.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;return p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle=p.style.backgroundClip==="content-box",b(function(){var n,r,o,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=s.getElementsByTagName("body")[0];if(!a)return;n=s.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=p.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",c=o[0].offsetHeight===0,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=c&&o[0].offsetHeight===0,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=p.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(p,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(p,null)||{width:"4px"}).width==="4px",r=p.appendChild(s.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=p.offsetWidth!==3,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=o=r=null}),n=u=a=f=r=o=null,t}();var j=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,F=/([A-Z])/g;b.extend({cache:{},expando:"jQuery"+(c+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!U(e)},data:function(e,t,n){return I(e,t,n)},removeData:function(e,t){return q(e,t)},_data:function(e,t,n){return I(e,t,n,!0)},_removeData:function(e,t){return q(e,t,!0)},acceptData:function(e){if(e.nodeType&&e.nodeType!==1&&e.nodeType!==9)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,s=this[0],o=0,u=null;if(e===t){if(this.length){u=b.data(s);if(s.nodeType===1&&!b._data(s,"parsedAttrs")){r=s.attributes;for(;o<r.length;o++)i=r[o].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),R(s,i,u[i]));b._data(s,"parsedAttrs",!0)}}return u}return typeof e=="object"?this.each(function(){b.data(this,e)}):b.access(this,function(n){if(n===t)return s?R(s,e,b.data(s,e)):null;this.each(function(){b.data(this,e,n)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}}),b.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=b._data(e,t),n&&(!r||b.isArray(n)?r=b._data(e,t,b.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),s=b._queueHooks(e,t),o=function(){b.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),s.cur=i,i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=b.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=b._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var z,W,X=/[\t\r\n]/g,V=/\r/g,$=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,K=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Q=/^(?:checked|selected)$/i,G=b.support.getSetAttribute,Y=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=typeof e=="string"&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(a){t=(e||"").match(E)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(X," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=b.trim(r)}}}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=arguments.length===0||typeof e=="string"&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(a){t=(e||"").match(E)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(X," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var s,o=0,u=b(this),a=t,f=e.match(E)||[];while(s=f[o++])a=r?a:!u.hasClass(s),u[a?"addClass":"removeClass"](s)}else if(n===i||n==="boolean")this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return r=b.valHooks[s.type]||b.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,typeof n=="string"?n.replace(V,""):n==null?"":n);return}return i=b.isFunction(e),this.each(function(n){var s,o=b(this);if(this.nodeType!==1)return;i?s=e.call(this,n,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":b.isArray(s)&&(s=b.map(s,function(e){return e==null?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()];if(!r||!("set"in r)||r.set(this,s,"value")===t)this.value=s})}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(b.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!b.nodeName(n.parentNode,"optgroup"))){t=b(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(typeof e.getAttribute===i)return b.prop(e,n,r);o=a!==1||!b.isXMLDoc(e),o&&(n=n.toLowerCase(),s=b.attrHooks[n]||(K.test(n)?W:z));if(r===t)return s&&o&&"get"in s&&(u=s.get(e,n))!==null?u:(typeof e.getAttribute!==i&&(u=e.getAttribute(n)),u==null?t:u);if(r!==null)return s&&o&&"set"in s&&(u=s.set(e,r,n))!==t?u:(e.setAttribute(n,r+""),r);b.removeAttr(e,n)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(E);if(s&&e.nodeType===1)while(n=s[i++])r=b.propFix[n]||n,K.test(n)?!G&&Q.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&t==="radio"&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!b.isXMLDoc(e),o&&(n=b.propFix[n]||n,s=b.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):$.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:t}}}}),W={get:function(e,n){var r=b.prop(e,n),i=typeof r=="boolean"&&e.getAttribute(n),s=typeof r=="boolean"?Y&&G?i!=null:Q.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return s&&s.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}};if(!Y||!G)b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,t,n){if(!b.nodeName(e,"input"))return z&&z.set(e,t,n);e.defaultValue=t}};G||(z=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&(n==="id"||n==="name"||n==="coords"?r.value!=="":r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="",r==="value"||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:z.get,set:function(e,t,n){z.set(e,t===""?!1:t,n)}},b.each(["width","height"],function(e,t){b.attrHooks[t]=b.extend(b.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r==null?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,t){if(b.isArray(t))return e.checked=b.inArray(b(e).val(),t)>=0}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;b.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=b._data(e);if(!y)return;r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=b.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof b===i||!!e&&b.event.triggered===e.type?t:b.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(E)||[""],f=n.length;while(f--){u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort(),c=b.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=b.event.special[v]||{},p=b.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&b.expr.match.needsContext.test(o),namespace:m.join(".")},l);if(!(d=a[v])){d=a[v]=[],d.delegateCount=0;if(!c.setup||c.setup.call(e,s,m,h)===!1)e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h)}c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),b.event.global[v]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=b.hasData(e)&&b._data(e);if(!m||!(l=m.events))return;t=(t||"").match(E)||[""],f=t.length;while(f--){u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p){for(p in l)b.event.remove(e,p+t[f],n,r,!0);continue}c=b.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],(i||v===o.origType)&&(!n||n.guid===o.guid)&&(!u||u.test(o.namespace))&&(!r||r===o.selector||r==="**"&&o.selector)&&(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&((!c.teardown||c.teardown.call(e,d,m.handle)===!1)&&b.removeEvent(e,p,m.handle),delete l[p])}b.isEmptyObject(l)&&(delete m.handle,b._removeData(e,"events"))},trigger:function(n,r,i,o){var u,a,f,l,c,h,p,d=[i||s],v=g.call(n,"type")?n.type:n,m=g.call(n,"namespace")?n.namespace.split("."):[];f=h=i=i||s;if(i.nodeType===3||i.nodeType===8)return;if(nt.test(v+b.event.triggered))return;v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=v.indexOf(":")<0&&"on"+v,n=n[b.expando]?n:new b.Event(v,typeof n=="object"&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=r==null?[n]:b.makeArray(r,[n]),c=b.event.special[v]||{};if(!o&&c.trigger&&c.trigger.apply(i,r)===!1)return;if(!o&&!c.noBubble&&!b.isWindow(i)){l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);for(;f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||s)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(b._data(f,"events")||{})[n.type]&&b._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&b.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();n.type=v;if(!o&&!n.isDefaultPrevented()&&(!c._default||c._default.apply(i.ownerDocument,r)===!1)&&(v!=="click"||!b.nodeName(i,"a"))&&b.acceptData(i)&&a&&i[v]&&!b.isWindow(i)){h=i[a],h&&(i[a]=null),b.event.triggered=v;try{i[v]()}catch(y){}b.event.triggered=t,h&&(i[a]=h)}return n.result},dispatch:function(e){e=b.event.fix(e);var n,r,i,s,o,u=[],a=d.call(arguments),f=(b._data(this,"events")||{})[e.type]||[],l=b.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=b.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(i.namespace))e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||e.type!=="click"))for(;f!=this;f=f.parentNode||this)if(f.nodeType===1&&(f.disabled!==!0||e.type!=="click")){s=[];for(o=0;o<a;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?b(r,this).index(f)>=0:b.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return a<n.length&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,o=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new b.Event(o),t=r.length;while(t--)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||s),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(i=e.target.ownerDocument||s,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){if(b.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1}},focus:{trigger:function(){if(this!==s.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===s.activeElement&&this.blur)return this.blur(),!1},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=s.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,t){if(!(this instanceof b.Event))return new b.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,t&&b.extend(this,t),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0},b.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!b.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){if(b.nodeName(this,"form"))return!1;b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(b.nodeName(this,"form"))return!1;b.event.remove(this,"._submit")}}),b.support.changeBubbles||(b.event.special.change={setup:function(){if(Z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")b.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)});return!1}b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){n++===0&&s.addEventListener(e,r,!0)},teardown:function(){--n===0&&s.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=st;else if(!i)return this;return s===1&&(u=i,i=function(e){return b().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=st),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return b.event.trigger(e,t,n,!0)}}),function(e,t){function rt(e){return J.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function st(e){return e[w]=!0,e}function ot(e){var t=c.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function ut(e,t,n,r){var i,s,o,u,a,f,h,v,m,y;(t?t.ownerDocument||t:E)!==c&&l(t),t=t||c,n=n||[];if(!e||typeof e!="string")return n;if((u=t.nodeType)!==1&&u!==9)return[];if(!p&&!r){if(i=K.exec(e))if(o=i[1]){if(u===9){s=t.getElementById(o);if(!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&g(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return _.apply(n,D.call(t.getElementsByTagName(e),0)),n;if((o=i[3])&&S.getByClassName&&t.getElementsByClassName)return _.apply(n,D.call(t.getElementsByClassName(o),0)),n}if(S.qsa&&!d.test(e)){h=!0,v=w,m=t,y=u===9&&e;if(u===1&&t.nodeName.toLowerCase()!=="object"){f=ht(e),(h=t.getAttribute("id"))?v=h.replace(Y,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",a=f.length;while(a--)f[a]=v+pt(f[a]);m=$.test(e)&&t.parentNode||t,y=f.join(",")}if(y)try{return _.apply(n,D.call(m.querySelectorAll(y),0)),n}catch(b){}finally{h||t.removeAttribute("id")}}}return Et(e.replace(R,"$1"),t,n,r)}function at(e,t){var n=t&&e,r=n&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e,t){var n,r,s,o,u,a,f,l=C[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=U.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=z.exec(u))n=r.shift(),s.push({value:n,type:r[0].replace(R," ")}),u=u.slice(n.length);for(o in i.filter)(r=V[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(n=r.shift(),s.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ut.error(e):C(e,a).slice(0)}function pt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function dt(e,t,n){var i=t.dir,s=n&&i==="parentNode",o=T++;return t.first?function(t,n,r){while(t=t[i])if(t.nodeType===1||s)return e(t,n,r)}:function(t,n,u){var a,f,l,c=x+" "+o;if(u){while(t=t[i])if(t.nodeType===1||s)if(e(t,n,u))return!0}else while(t=t[i])if(t.nodeType===1||s){l=t[w]||(t[w]={});if((f=l[i])&&f[0]===c){if((a=f[1])===!0||a===r)return a===!0}else{f=l[i]=[c],f[1]=e(t,n,u)||r;if(f[1]===!0)return!0}}}}function vt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function gt(e,t,n,r,i,s){return r&&!r[w]&&(r=gt(r)),i&&!i[w]&&(i=gt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?mt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=mt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=mt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function yt(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,l=dt(function(e){return e===t},u,!0),c=dt(function(e){return P.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[dt(vt(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[w]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return gt(a>1&&vt(h),a>1&&pt(e.slice(0,a-1)).replace(R,"$1"),n,a<r&&yt(e.slice(a,r)),r<s&&yt(e=e.slice(r)),r<s&&pt(e))}h.push(n)}return vt(h)}function bt(e,t){var n=0,s=t.length>0,o=e.length>0,u=function(u,a,l,h,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=p!=null,S=f,T=u||o&&i.find.TAG("*",p&&a.parentNode||a),N=x+=S==null?1:Math.random()||.1;E&&(f=a!==c&&a,r=n);for(;(d=T[b])!=null;b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){h.push(d);break}E&&(x=N,r=++n)}s&&((d=!m&&d)&&y--,u&&w.push(d))}y+=b;if(s&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)!w[b]&&!g[b]&&(g[b]=M.call(h));g=mt(g)}_.apply(h,g),E&&!u&&g.length>0&&y+t.length>1&&ut.uniqueSort(h)}return E&&(x=N,f=S),w};return s?st(u):u}function wt(e,t,n){var r=0,i=t.length;for(;r<i;r++)ut(e,t[r],n);return n}function Et(e,t,n,r){var s,o,a,f,l,c=ht(e);if(!r&&c.length===1){o=c[0]=c[0].slice(0);if(o.length>2&&(a=o[0]).type==="ID"&&t.nodeType===9&&!p&&i.relative[o[1].type]){t=i.find.ID(a.matches[0].replace(et,tt),t)[0];if(!t)return n;e=e.slice(o.shift().value.length)}s=V.needsContext.test(e)?0:o.length;while(s--){a=o[s];if(i.relative[f=a.type])break;if(l=i.find[f])if(r=l(a.matches[0].replace(et,tt),$.test(o[0].type)&&t.parentNode||t)){o.splice(s,1),e=r.length&&pt(o);if(!e)return _.apply(n,D.call(r,0)),n;break}}}return u(e,c)(r,t,p,n,$.test(e)),n}function St(){}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,w="sizzle"+ -(new Date),E=e.document,S={},x=0,T=0,N=it(),C=it(),k=it(),L=typeof t,A=1<<31,O=[],M=O.pop,_=O.push,D=O.slice,P=O.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},H="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j=B.replace("w","w#"),F="([*^$|!~]?=)",I="\\["+H+"*("+B+")"+H+"*(?:"+F+H+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+j+")|)|)"+H+"*\\]",q=":("+B+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=new RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),U=new RegExp("^"+H+"*,"+H+"*"),z=new RegExp("^"+H+"*([\\x20\\t\\r\\n\\f>+~])"+H+"*"),W=new RegExp(q),X=new RegExp("^"+j+"$"),V={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),NAME:new RegExp("^\\[name=['\"]?("+B+")['\"]?\\]"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),needsContext:new RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},$=/[\x20\t\r\n\f]*[+~]/,J=/^[^{]+\{\s*\[native code/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)};try{D.call(E.documentElement.childNodes,0)[0].nodeType}catch(nt){D=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}o=ut.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},l=ut.setDocument=function(e){var n=e?e.ownerDocument||e:E;if(n===c||n.nodeType!==9||!n.documentElement)return c;c=n,h=n.documentElement,p=o(n),S.tagNameNoComments=ot(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),S.attributes=ot(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),S.getByClassName=ot(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),S.getByName=ot(function(e){e.id=w+0,e.innerHTML="<a name='"+w+"'></a><div name='"+w+"'></div>",h.insertBefore(e,h.firstChild);var t=n.getElementsByName&&n.getElementsByName(w).length===2+n.getElementsByName(w+0).length;return S.getIdNotName=!n.getElementById(w),h.removeChild(e),t}),i.attrHandle=ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==L&&e.firstChild.getAttribute("href")==="#"})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},S.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==L&&!p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==L&&!p){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==L&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=S.tagNameNoComments?function(e,t){if(typeof t.getElementsByTagName!==L)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},i.find.NAME=S.getByName&&function(e,t){if(typeof t.getElementsByName!==L)return t.getElementsByName(name)},i.find.CLASS=S.getByClassName&&function(e,t){if(typeof t.getElementsByClassName!==L&&!p)return t.getElementsByClassName(e)},v=[],d=[":focus"];if(S.qsa=rt(n.querySelectorAll))ot(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+H+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||d.push(":checked")}),ot(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&d.push("[*^$]="+H+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")});return(S.matchesSelector=rt(m=h.matchesSelector||h.mozMatchesSelector||h.webkitMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ot(function(e){S.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),v.push("!=",q)}),d=new RegExp(d.join("|")),v=new RegExp(v.join("|")),g=rt(h.contains)||h.compareDocumentPosition?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},y=h.compareDocumentPosition?function(e,t){var r;if(e===t)return a=!0,0;if(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))return r&1||e.parentNode&&e.parentNode.nodeType===11?e===n||g(E,e)?-1:t===n||g(E,t)?1:0:r&4?-1:1;return e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],f=[t];if(e===t)return a=!0,0;if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:0;if(s===o)return at(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)f.unshift(r);while(u[i]===f[i])i++;return i?at(u[i],f[i]):u[i]===E?-1:f[i]===E?1:0},a=!1,[0,0].sort(y),S.detectDuplicates=a,c},ut.matches=function(e,t){return ut(e,null,null,t)},ut.matchesSelector=function(e,t){(e.ownerDocument||e)!==c&&l(e),t=t.replace(Z,"='$1']");if(S.matchesSelector&&!p&&(!v||!v.test(t))&&!d.test(t))try{var n=m.call(e,t);if(n||S.disconnectedMatch||e.document&&e.document.nodeType!==11)return n}catch(r){}return ut(t,c,null,[e]).length>0},ut.contains=function(e,t){return(e.ownerDocument||e)!==c&&l(e),g(e,t)},ut.attr=function(e,t){var n;return(e.ownerDocument||e)!==c&&l(e),p||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):p||S.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},ut.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ut.uniqueSort=function(e){var t,n=[],r=1,i=0;a=!S.detectDuplicates,e.sort(y);if(a){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},s=ut.getText=function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r];r++)n+=s(t);else if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue;return n},i=ut.selectors={cacheLength:50,createPseudo:st,match:V,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||ut.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&ut.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return V.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&W.test(n)&&(t=ht(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=N[e+" "];return t||(t=new RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&N(e,function(e){return t.test(e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ut.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===x&&f[1],h=f[0]===x&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[x,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===x)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[w]||(c[w]={}))[e]=[x,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ut.error("unsupported pseudo: "+e);return r[w]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=P.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:st(function(e){var t=[],n=[],r=u(e.replace(R,"$1"));return r[w]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return ut(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:st(function(e){return X.test(e||"")||ut.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=p?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()===e.type)},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[n<0?n+t:n]}),even:ct(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:ct(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=lt(n);u=ut.compile=function(e,t){var n,r=[],i=[],s=k[e+" "];if(!s){t||(t=ht(e)),n=t.length;while(n--)s=yt(t[n]),s[w]?r.push(s):i.push(s);s=k(e,bt(i,r))}return s},i.pseudos.nth=i.pseudos.eq,i.filters=St.prototype=i.pseudos,i.setFilters=new St,l(),ut.attr=b.attr,b.find=ut,b.expr=ut.selectors,b.expr[":"]=b.expr.pseudos,b.unique=ut.uniqueSort,b.text=ut.getText,b.isXMLDoc=ut.isXML,b.contains=ut.contains}(e);var ot=/Until$/,ut=/^(?:parents|prev(?:Until|All))/,at=/^.[^:#\[\.,]*$/,ft=b.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if(typeof e!="string")return r=this,this.pushStack(b(e).filter(function(){for(t=0;t<i;t++)if(b.contains(r[t],this))return!0}));n=[];for(t=0;t<i;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e,!1))},filter:function(e){return this.pushStack(ht(this,e,!0))},is:function(e){return!!e&&(typeof e=="string"?ft.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||typeof e!="string"?b(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:b.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return this.pushStack(s.length>1?b.unique(s):s)},index:function(e){return e?typeof e=="string"?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack,b.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return ot.test(e)||(r=n),r&&typeof r=="string"&&(i=b.filter(r,i)),i=this.length>1&&!lt[e]?b.unique(i):i,this.length>1&&ut.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!b(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",vt=/ jQuery\d+="(?:null|\d+)"/g,mt=new RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(s),Ot=At.appendChild(s.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||b.filter(e,[n]).length>0)!t&&n.nodeType===1&&b.cleanData(jt(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&b.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(vt,""):t;if(typeof e=="string"&&!St.test(e)&&(b.support.htmlSerialize||!mt.test(e))&&(b.support.leadingWhitespace||!gt.test(e))&&!Lt[(bt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(yt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(b.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return!t&&typeof e!="string"&&(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=h.apply([],e);var i,s,o,u,a,f,l=0,c=this.length,p=this,d=c-1,v=e[0],m=b.isFunction(v);if(m||!(c<=1||typeof v!="string"||b.support.checkClone||!Tt.test(v)))return this.each(function(i){var s=p.eq(i);m&&(e[0]=v.call(this,i,n?s.html():t)),s.domManip(e,n,r)});if(c){f=b.buildFragment(e,this[0].ownerDocument,!1,this),i=f.firstChild,f.childNodes.length===1&&(f=i);if(i){n=n&&b.nodeName(i,"tr"),u=b.map(jt(f,"script"),_t),o=u.length;for(;l<c;l++)s=f,l!==d&&(s=b.clone(s,!0,!0),o&&b.merge(u,jt(s,"script"))),r.call(n&&b.nodeName(this[l],"table")?Mt(this[l],"tbody"):this[l],s,l);if(o){a=u[u.length-1].ownerDocument,b.map(u,Dt);for(l=0;l<o;l++)s=u[l],Nt.test(s.type||"")&&!b._data(s,"globalEval")&&b.contains(a,s)&&(s.src?b.ajax({url:s.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((s.text||s.textContent||s.innerHTML||"").replace(kt,"")))}f=i=null}}return this}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],s=b(e),o=s.length-1;for(;r<=o;r++)n=r===o?this:this.clone(!0),b(s[r])[t](n),p.apply(i,n.get());return this.pushStack(i)}}),b.extend({clone:function(e,t,n){var r,i,s,o,u,a=b.contains(e.ownerDocument,e);b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild));if((!b.support.noCloneEvent||!b.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!b.isXMLDoc(e)){r=jt(s),u=jt(e);for(o=0;(i=u[o])!=null;++o)r[o]&&Bt(i,r[o])}if(t)if(n){u=u||jt(e),r=r||jt(s);for(o=0;(i=u[o])!=null;o++)Ht(i,r[o])}else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;d<c;d++){s=e[d];if(s||s===0)if(b.type(s)==="object")b.merge(p,s.nodeType?[s]:s);else if(!Et.test(s))p.push(t.createTextNode(s));else{u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;!b.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0]));if(!b.support.tbody){s=a==="table"&&!wt.test(s)?u.firstChild:l[1]==="<table>"&&!wt.test(s)?u:0,i=s&&s.childNodes.length;while(i--)b.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}b.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}}u&&h.removeChild(u),b.support.appendChecked||b.grep(jt(p,"input"),Ft),d=0;while(s=p[d++]){if(r&&b.inArray(s,r)!==-1)continue;o=b.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u);if(n){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=b.expando,f=b.cache,c=b.support.deleteExpando,h=b.event.special;for(;(n=e[u])!=null;u++)if(t||b.acceptData(n)){s=n[a],o=s&&f[s];if(o){if(o.events)for(r in o.events)h[r]?b.event.remove(n,r):b.removeEvent(n,r,o.handle);f[s]&&(delete f[s],c?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,l.push(s))}}}});var It,qt,Rt,Ut=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/,Wt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,$t=new RegExp("^("+w+")(.*)$","i"),Jt=new RegExp("^("+w+")(?!px)[a-z%]+$","i"),Kt=new RegExp("^([+-])=("+w+")","i"),Qt={BODY:"block"},Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,s,o={},u=0;if(b.isArray(n)){s=qt(e),i=n.length;for(;u<i;u++)o[n[u]]=b.css(e,n[u],!1,s);return o}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t=typeof e=="boolean";return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=b.camelCase(n),f=e.style;n=b.cssProps[a]||(b.cssProps[a]=tn(f,a)),u=b.cssHooks[n]||b.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=Kt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(b.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!b.cssNumber[a]&&(r+="px"),!b.support.clearCloneStyle&&r===""&&n.indexOf("background")===0&&(f[n]="inherit");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=b.camelCase(n);return n=b.cssProps[a]||(b.cssProps[a]=tn(e.style,a)),u=b.cssHooks[n]||b.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Rt(e,n,i)),o==="normal"&&n in Yt&&(o=Yt[n]),r===""||r?(s=parseFloat(o),r===!0||b.isNumeric(s)?s||0:o):o},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),e.getComputedStyle?(qt=function(t){return e.getComputedStyle(t,null)},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(a===""&&!b.contains(e.ownerDocument,e)&&(a=b.style(e,n)),Jt.test(a)&&Vt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):s.documentElement.currentStyle&&(qt=function(e){return e.currentStyle},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u[n]:t,f=e.style;return a==null&&f&&f[n]&&(a=f[n]),Jt.test(a)&&!Wt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left=n==="fontSize"?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),a===""?"auto":a}),b.each(["height","width"],function(e,t){b.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&Xt.test(b.css(e,"display"))?b.swap(e,Gt,function(){return un(e,t,r)}):un(e,t,r)},set:function(e,n,r){var i=r&&qt(e);return sn(e,n,r?on(e,t,r,b.support.boxSizing&&b.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return zt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if((t>=1||t==="")&&b.trim(s.replace(Ut,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(t===""||r&&!r.filter)return}n.filter=Ut.test(s)?s.replace(Ut,i):s+" "+i}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,t){if(t)return b.swap(e,{display:"inline-block"},Rt,[e,"marginRight"])}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,t){b.cssHooks[t]={get:function(e,n){if(n)return n=Rt(e,t),Jt.test(n)?b(e).position()[t]+"px":n}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!b.support.reliableHiddenOffsets&&(e.style&&e.style.display||b.css(e,"display"))==="none"},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+Zt[r]+t]=s[r]||s[r-2]||s[0];return i}},Vt.test(e)||(b.cssHooks[e+t].set=sn)});var ln=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&dn.test(this.nodeName)&&!pn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=b(this).val();return n==null?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],s=function(e,t){t=b.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional);if(b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){s(this.name,this.value)});else for(r in e)vn(r,e[r],n,s);return i.join("&").replace(ln,"+")},b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,gn,yn=b.now(),bn=/\?/,wn=/#.*$/,En=/([?&])_=[^&]*/,Sn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Nn=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kn=b.fn.load,Ln={},An={},On="*/".concat("*");try{gn=o.href}catch(Mn){gn=s.createElement("a"),gn.href="",gn=gn.href}mn=Cn.exec(gn.toLowerCase())||[],b.fn.load=function(e,n,r){if(typeof e!="string"&&kn)return kn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),b.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(o="POST"),u.length>0&&b.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,s){return b.isFunction(r)&&(s=s||i,i=r,r=t),b.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":On,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Pn(Pn(e,b.ajaxSettings),t):Pn(b.ajaxSettings,e)},ajaxPrefilter:_n(Ln),ajaxTransport:_n(An),ajax:function(e,n){function N(e,n,r,i){var l,g,y,E,S,T=n;if(w===2)return;w=2,u&&clearTimeout(u),f=t,o=i||"",x.readyState=e>0?4:0,r&&(E=Hn(c,x,r));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(b.lastModified[s]=S),S=x.getResponseHeader("etag"),S&&(b.etag[s]=S)),e===204?(l=!0,T="nocontent"):e===304?(l=!0,T="notmodified"):(l=Bn(c,E),T=l.state,g=l.data,y=l.error,l=!y);else{y=T;if(e||!T)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,y]),x.statusCode(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:y]),v.fireWith(h,[x,T]),a&&(p.trigger("ajaxComplete",[x,c]),--b.active||b.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=b.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?b(h):b.event,d=b.Deferred(),v=b.Callbacks("once memory"),m=c.statusCode||{},g={},y={},w=0,S="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(w===2){if(!l){l={};while(t=Sn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return w===2?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return w||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(w<2)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||S;return f&&f.abort(t),N(0,t),this}};d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||gn)+"").replace(wn,"").replace(Nn,mn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=b.trim(c.dataType||"*").toLowerCase().match(E)||[""],c.crossDomain==null&&(r=Cn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||(r[1]==="http:"?80:443))==(mn[3]||(mn[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=b.param(c.data,c.traditional)),Dn(Ln,c,n,x);if(w===2)return x;a=c.global,a&&b.active++===0&&b.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Tn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(bn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=En.test(s)?s.replace(En,"$1_="+yn++):s+(bn.test(s)?"&":"?")+"_="+yn++)),c.ifModified&&(b.lastModified[s]&&x.setRequestHeader("If-Modified-Since",b.lastModified[s]),b.etag[s]&&x.setRequestHeader("If-None-Match",b.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+On+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)x.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&w!==2){S="abort";for(i in{success:1,error:1,complete:1})x[i](c[i]);f=Dn(An,c,n,x);if(!f)N(-1,"No Transport");else{x.readyState=1,a&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{w=1,f.send(g,N)}catch(T){if(!(w<2))throw T;N(-1,T)}}return x}return x.abort()},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=s.head||b("head")[0]||s.documentElement;return{send:function(t,i){n=s.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){if(t||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jn=[],Fn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||b.expando+"_"+yn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Fn.test(n.url)?"url":typeof n.data=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(n.data)&&"data");if(a||n.dataTypes[0]==="jsonp")return s=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Fn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||b.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,jn.push(s)),u&&b.isFunction(o)&&o(u[0]),u=o=t}),"script"});var In,qn,Rn=0,Un=e.ActiveXObject&&function(){var e;for(e in In)In[e](t,!0)};b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&zn()||Wn()}:zn,qn=b.ajaxSettings.xhr(),b.support.cors=!!qn&&"withCredentials"in qn,qn=b.support.ajax=!!qn,qn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=b.noop,Un&&delete In[o]);if(i)a.readyState!==4&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),typeof a.responseText=="string"&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?a.readyState===4?setTimeout(r):(o=++Rn,Un&&(In||(In={},b(e).unload(Un)),In[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Vn,$n=/^(?:toggle|show|hide)$/,Jn=new RegExp("^(?:([+-])=|)("+w+")([a-z%]*)$","i"),Kn=/queueHooks$/,Qn=[nr],Gn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=Jn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(b.cssNumber[e]?"":"px");if(r!=="px"&&u){u=b.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,b.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Gn[n]=Gn[n]||[],Gn[n].unshift(t)},prefilter:function(e,t){t?Qn.unshift(e):Qn.push(e)}}),b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.options.duration?this.pos=t=b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=b.css(e.elem,e.prop,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(e.elem.style[b.cssProps[e.prop]]!=null||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),s=b.speed(t,n,r),o=function(){var t=er(this,b.extend({},e),s);o.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=b.timers,o=b._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Kn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=b.timers,o=r?r.length:0;n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&typeof e=="object"?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};r.duration=b.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;Xn=b.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Vn||(Vn=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Vn),Vn=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,s={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(!u)return;return n=u.documentElement,b.contains(n,o)?(typeof o.getBoundingClientRect!==i&&(s=o.getBoundingClientRect()),r=sr(u),{top:s.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");r==="static"&&(e.style.position="relative");var i=b(e),s=i.offset(),o=b.css(e,"top"),u=b.css(e,"left"),a=(r==="absolute"||r==="fixed")&&b.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),b.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},b.fn.extend({position:function(){if(!this[0])return;var e,t,n={top:0,left:0},r=this[0];return b.css(r,"position")==="fixed"?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||s.documentElement;while(e&&!b.nodeName(e,"html")&&b.css(e,"position")==="static")e=e.offsetParent;return e||s.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,s){var o=sr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?b(o).scrollLeft():s,r?s:b(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return b.access(this,function(n,r,i){var s;return b.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?b.css(n,r,u):b.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=b,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})})(window),define("Library/jquery/jquery-1.9.1",function(){}),define("jquery",["Library/jquery/jquery-1.9.1"],function(){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("jquery"),window.jQuery.browser=window.jQuery.browser||{},window.jQuery.noConflict()});var Handlebars={};(function(e,t){e.VERSION="1.0.0-rc.3",e.COMPILER_REVISION=2,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:">= 1.0.0-rc.3"},e.helpers={},e.partials={},e.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},e.registerPartial=function(e,t){this.partials[e]=t},e.registerHelper("helperMissing",function(e){if(arguments.length===2)return t;throw new Error("Could not find property '"+e+"'")});var n=Object.prototype.toString,r="[object Function]";e.registerHelper("blockHelperMissing",function(t,i){var s=i.inverse||function(){},o=i.fn,u=n.call(t);return u===r&&(t=t.call(this)),t===!0?o(this):t===!1||t==null?s(this):u==="[object Array]"?t.length>0?e.helpers.each(t,i):s(this):o(t)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(e.logger.level<=t){var r=e.logger.methodMap[t];typeof console!="undefined"&&console[r]&&console[r].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,n){var r=n.fn,i=n.inverse,s=0,o="",u;n.data&&(u=e.createFrame(n.data));if(t&&typeof t=="object")if(t instanceof Array)for(var a=t.length;s<a;s++)u&&(u.index=s),o+=r(t[s],{data:u});else for(var f in t)t.hasOwnProperty(f)&&(u&&(u.key=f),o+=r(t[f],{data:u}),s++);return s===0&&(o=i(this)),o}),e.registerHelper("if",function(t,i){var s=n.call(t);return s===r&&(t=t.call(this)),!t||e.Utils.isEmpty(t)?i.inverse(this):i.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn})}),e.registerHelper("with",function(t,n){if(!e.Utils.isEmpty(t))return n.fn(t)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)});var i=function(){function n(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,partialName:25,params:26,hash:27,DATA:28,param:29,STRING:30,INTEGER:31,BOOLEAN:32,hashSegments:33,hashSegment:34,ID:35,EQUALS:36,PARTIAL_NAME:37,pathSegments:38,SEP:39,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"DATA",30:"STRING",31:"INTEGER",32:"BOOLEAN",35:"ID",36:"EQUALS",37:"PARTIAL_NAME",39:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[26,2],[26,1],[29,1],[29,1],[29,1],[29,1],[29,1],[27,1],[33,2],[33,1],[34,3],[34,3],[34,3],[34,3],[34,3],[25,1],[21,1],[38,3],[38,1]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return o[a-1];case 2:this.$=new i.ProgramNode([],o[a]);break;case 3:this.$=new i.ProgramNode(o[a-2],o[a]);break;case 4:this.$=new i.ProgramNode(o[a-1],[]);break;case 5:this.$=new i.ProgramNode(o[a]);break;case 6:this.$=new i.ProgramNode([],[]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=[o[a]];break;case 9:o[a-1].push(o[a]),this.$=o[a-1];break;case 10:this.$=new i.BlockNode(o[a-2],o[a-1].inverse,o[a-1],o[a]);break;case 11:this.$=new i.BlockNode(o[a-2],o[a-1],o[a-1].inverse,o[a]);break;case 12:this.$=o[a];break;case 13:this.$=o[a];break;case 14:this.$=new i.ContentNode(o[a]);break;case 15:this.$=new i.CommentNode(o[a]);break;case 16:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 17:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 18:this.$=o[a-1];break;case 19:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 20:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],!0);break;case 21:this.$=new i.PartialNode(o[a-1]);break;case 22:this.$=new i.PartialNode(o[a-2],o[a-1]);break;case 23:break;case 24:this.$=[[o[a-2]].concat(o[a-1]),o[a]];break;case 25:this.$=[[o[a-1]].concat(o[a]),null];break;case 26:this.$=[[o[a-1]],o[a]];break;case 27:this.$=[[o[a]],null];break;case 28:this.$=[[new i.DataNode(o[a])],null];break;case 29:o[a-1].push(o[a]),this.$=o[a-1];break;case 30:this.$=[o[a]];break;case 31:this.$=o[a];break;case 32:this.$=new i.StringNode(o[a]);break;case 33:this.$=new i.IntegerNode(o[a]);break;case 34:this.$=new i.BooleanNode(o[a]);break;case 35:this.$=new i.DataNode(o[a]);break;case 36:this.$=new i.HashNode(o[a]);break;case 37:o[a-1].push(o[a]),this.$=o[a-1];break;case 38:this.$=[o[a]];break;case 39:this.$=[o[a-2],o[a]];break;case 40:this.$=[o[a-2],new i.StringNode(o[a])];break;case 41:this.$=[o[a-2],new i.IntegerNode(o[a])];break;case 42:this.$=[o[a-2],new i.BooleanNode(o[a])];break;case 43:this.$=[o[a-2],new i.DataNode(o[a])];break;case 44:this.$=new i.PartialNameNode(o[a]);break;case 45:this.$=new i.IdNode(o[a]);break;case 46:o[a-2].push(o[a]),this.$=o[a-2];break;case 47:this.$=[o[a]]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],24:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],24:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],24:[1,16]},{17:23,18:[1,22],21:24,28:[1,25],35:[1,27],38:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{4:28,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{17:30,21:24,28:[1,25],35:[1,27],38:26},{17:31,21:24,28:[1,25],35:[1,27],38:26},{17:32,21:24,28:[1,25],35:[1,27],38:26},{25:33,37:[1,34]},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],24:[1,16]},{17:23,21:24,28:[1,25],35:[1,27],38:26},{5:[2,4],7:35,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],24:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],24:[2,23]},{18:[1,36]},{18:[2,27],21:41,26:37,27:38,28:[1,45],29:39,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,28]},{18:[2,45],28:[2,45],30:[2,45],31:[2,45],32:[2,45],35:[2,45],39:[1,48]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],39:[2,47]},{10:49,20:[1,50]},{10:51,20:[1,50]},{18:[1,52]},{18:[1,53]},{18:[1,54]},{18:[1,55],21:56,35:[1,27],38:26},{18:[2,44],35:[2,44]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],24:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{18:[2,25],21:41,27:57,28:[1,45],29:58,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,26]},{18:[2,30],28:[2,30],30:[2,30],31:[2,30],32:[2,30],35:[2,30]},{18:[2,36],34:59,35:[1,60]},{18:[2,31],28:[2,31],30:[2,31],31:[2,31],32:[2,31],35:[2,31]},{18:[2,32],28:[2,32],30:[2,32],31:[2,32],32:[2,32],35:[2,32]},{18:[2,33],28:[2,33],30:[2,33],31:[2,33],32:[2,33],35:[2,33]},{18:[2,34],28:[2,34],30:[2,34],31:[2,34],32:[2,34],35:[2,34]},{18:[2,35],28:[2,35],30:[2,35],31:[2,35],32:[2,35],35:[2,35]},{18:[2,38],35:[2,38]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],36:[1,61],39:[2,47]},{35:[1,62]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{21:63,35:[1,27],38:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],24:[2,21]},{18:[1,64]},{18:[2,24]},{18:[2,29],28:[2,29],30:[2,29],31:[2,29],32:[2,29],35:[2,29]},{18:[2,37],35:[2,37]},{36:[1,61]},{21:65,28:[1,69],30:[1,66],31:[1,67],32:[1,68],35:[1,27],38:26},{18:[2,46],28:[2,46],30:[2,46],31:[2,46],32:[2,46],35:[2,46],39:[2,46]},{18:[1,70]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],24:[2,22]},{18:[2,39],35:[2,39]},{18:[2,40],35:[2,40]},{18:[2,41],35:[2,41]},{18:[2,42],35:[2,42]},{18:[2,43],35:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]}],defaultActions:{17:[2,1],25:[2,28],38:[2,26],57:[2,24]},parseError:function(t,n){throw new Error(t)},parse:function(t){function v(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function m(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p);var d=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var g,y,b,w,E,S,x={},T,N,C,k;for(;;){b=r[r.length-1];if(this.defaultActions[b])w=this.defaultActions[b];else{if(g===null||typeof g=="undefined")g=m();w=o[b]&&o[b][g]}if(typeof w=="undefined"||!w.length||!w[0]){var L="";if(!l){k=[];for(T in o[b])this.terminals_[T]&&T>2&&k.push("'"+this.terminals_[T]+"'");this.lexer.showPosition?L="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'":L="Parse error on line "+(a+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(L,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:k})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+g);switch(w[0]){case 1:r.push(g),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(w[1]),g=null,y?(g=y,y=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:N=this.productions_[w[1]][1],x.$=i[i.length-N],x._$={first_line:s[s.length-(N||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(N||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(N||1)].range[0],s[s.length-1].range[1]]),S=this.performAction.call(x,u,f,a,this.yy,w[1],i,s);if(typeof S!="undefined")return S;N&&(r=r.slice(0,-1*N*2),i=i.slice(0,-1*N),s=s.slice(0,-1*N)),r.push(this.productions_[w[1]][0]),i.push(x.$),s.push(x._$),C=o[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i,s;this._more||(this.yytext="",this.match="");var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(e)return e;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.options={},e.performAction=function(t,n,r,i){var s=i;switch(r){case 0:return n.yytext="\\",14;case 1:n.yytext.slice(-1)!=="\\"&&this.begin("mu"),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1),this.begin("emu"));if(n.yytext)return 14;break;case 2:return 14;case 3:return n.yytext.slice(-1)!=="\\"&&this.popState(),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1)),14;case 4:return n.yytext=n.yytext.substr(0,n.yyleng-4),this.popState(),15;case 5:return this.begin("par"),24;case 6:return 16;case 7:return 20;case 8:return 19;case 9:return 19;case 10:return 23;case 11:return 23;case 12:this.popState(),this.begin("com");break;case 13:return n.yytext=n.yytext.substr(3,n.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 36;case 16:return 35;case 17:return 35;case 18:return 39;case 19:break;case 20:return this.popState(),18;case 21:return this.popState(),18;case 22:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\"/g,'"'),30;case 23:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\'/g,"'"),30;case 24:return n.yytext=n.yytext.substr(1),28;case 25:return 32;case 26:return 32;case 27:return 31;case 28:return 35;case 29:return n.yytext=n.yytext.substr(1,n.yyleng-2),35;case 30:return"INVALID";case 31:break;case 32:return this.popState(),37;case 33:return 5}},e.rules=[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:\s+)/,/^(?:[a-zA-Z0-9_$-/]+)/,/^(?:$)/],e.conditions={mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,33],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},par:{rules:[31,32],inclusive:!1},INITIAL:{rules:[0,1,2,33],inclusive:!0}},e}();return e.lexer=t,n.prototype=e,e.Parser=n,new n}();e.Parser=i,e.parse=function(t){return t.constructor===e.AST.ProgramNode?t:(e.Parser.yy=e.AST,e.Parser.parse(t))},e.AST={},e.AST.ProgramNode=function(t,n){this.type="program",this.statements=t,n&&(this.inverse=new e.AST.ProgramNode(n))},e.AST.MustacheNode=function(e,t,n){this.type="mustache",this.escaped=!n,this.hash=t;var r=this.id=e[0],i=this.params=e.slice(1),s=this.eligibleHelper=r.isSimple;this.isHelper=s&&(i.length||t)},e.AST.PartialNode=function(e,t){this.type="partial",this.partialName=e,this.context=t},e.AST.BlockNode=function(t,n,r,i){var s=function(t,n){if(t.original!==n.original)throw new e.Exception(t.original+" doesn't match "+n.original)};s(t.id,i),this.type="block",this.mustache=t,this.program=n,this.inverse=r,this.inverse&&!this.program&&(this.isInverse=!0)},e.AST.ContentNode=function(e){this.type="content",this.string=e},e.AST.HashNode=function(e){this.type="hash",this.pairs=e},e.AST.IdNode=function(t){this.type="ID",this.original=t.join(".");var n=[],r=0;for(var i=0,s=t.length;i<s;i++){var o=t[i];if(o===".."||o==="."||o==="this"){if(n.length>0)throw new e.Exception("Invalid path: "+this.original);o===".."?r++:this.isScoped=!0}else n.push(o)}this.parts=n,this.string=n.join("."),this.depth=r,this.isSimple=t.length===1&&!this.isScoped&&r===0,this.stringModeValue=this.string},e.AST.PartialNameNode=function(e){this.type="PARTIAL_NAME",this.name=e},e.AST.DataNode=function(e){this.type="DATA",this.id=e},e.AST.StringNode=function(e){this.type="STRING",this.string=e,this.stringModeValue=e},e.AST.IntegerNode=function(e){this.type="INTEGER",this.integer=e,this.stringModeValue=Number(e)},e.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e,this.stringModeValue=e==="true"},e.AST.CommentNode=function(e){this.type="comment",this.comment=e};var s=["description","fileName","lineNumber","message","name","number","stack"];e.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n=0;n<s.length;n++)this[s[n]]=t[s[n]]},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,a=/[&<>"'`]/,f=function(e){return o[e]||"&amp;"};e.Utils={escapeExpression:function(t){return t instanceof e.SafeString?t.toString():t==null||t===!1?"":a.test(t)?t.replace(u,f):t},isEmpty:function(e){return!e&&e!==0?!0:n.call(e)==="[object Array]"&&e.length===0?!0:!1}};var l=e.Compiler=function(){},c=e.JavaScriptCompiler=function(){};l.prototype={compiler:l,disassemble:function(){var e=this.opcodes,t,n=[],r,i;for(var s=0,o=e.length;s<o;s++){t=e[s];if(t.opcode==="DECLARE")n.push("DECLARE "+t.name+"="+t.value);else{r=[];for(var u=0;u<t.args.length;u++)i=t.args[u],typeof i=="string"&&(i='"'+i.replace("\n","\\n")+'"'),r.push(i);n.push(t.opcode+" "+r.join(" "))}}return n.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||r.args.length!==i.args.length)return!1;for(var s=0;s<r.args.length;s++)if(r.args[s]!==i.args[s])return!1}t=this.children.length;if(e.children.length!==t)return!1;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t=e.statements,n;this.opcodes=[];for(var r=0,i=t.length;r<i;r++)n=t[r],this[n.type](n);return this.isSimple=i===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++,r;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var i=0,s=t.depths.list.length;i<s;i++){r=t.depths.list[i];if(r<2)continue;this.addDepth(r-1)}return n},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var i=this.classifyMustache(t);i==="helper"?this.helperMustache(t,n,r):i==="simple"?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("pushHash");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.options.stringParams?this.opcode("pushStringParam",r.stringModeValue,r.type):this.accept(r),this.opcode("assignToHash",n[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,n=this.classifyMustache(e);n==="simple"?this.simpleMustache(e):n==="helper"?this.helperMustache(e):this.ambiguousMustache(e),e.escaped&&!t.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(e,t,n){var r=e.id,i=r.parts[0],s=t!=null||n!=null;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",i,s)},simpleMustache:function(e){var t=e.id;t.type==="DATA"?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),i=e.id.parts[0];if(this.options.knownHelpers[i])this.opcode("invokeKnownHelper",r.length,i);else{if(this.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+i);this.opcode("invokeHelper",r.length,i)}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,r=e.parts.length;n<r;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){this.options.data=!0,this.opcode("lookupData",e.id)},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(isNaN(e))throw new Error("EWOT");if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},classifyMustache:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var i=e.id.parts[0];r.knownHelpers[i]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this[n.type](n)},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("emptyHash"),t},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),r}};var h=function(e){this.value=e};c.prototype={nameLookup:function(e,t){return/^[0-9]+$/.test(t)?e+"["+t+"]":c.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,n,r,i){this.environment=t,this.options=n||{},e.log(e.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!r,this.context=r||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(t,n);var s=t.opcodes,o;this.i=0;for(m=s.length;this.i<m;this.i++)o=s[this.i],o.opcode==="DECLARE"?this[o.name]=o.value:this[o.opcode].apply(this,o.args);return this.createFunctionContext(i)},nextOpcode:function(){var e=this.environment.opcodes;return e[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var e=[];if(!this.isChild){var t=this.namespace,n="helpers = helpers || "+t+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+t+".partials;"),this.options.data&&(n+=" data = data || {};"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(t){var n=this.stackVars.concat(this.registers.list);n.length>0&&(this.source[1]=this.source[1]+", "+n.join(", "));if(!this.isChild)for(var r in this.context.aliases)this.source[1]=this.source[1]+", "+r+"="+this.context.aliases[r];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var s=0,o=this.environment.depths.list.length;s<o;s++)i.push("depth"+this.environment.depths.list[s]);var u=this.mergeSource();if(!this.isChild){var a=e.COMPILER_REVISION,f=e.REVISION_CHANGES[a];u="this.compilerInfo = ["+a+",'"+f+"'];\n"+u}if(t)return i.push(u),Function.apply(this,i);var l="function "+(this.name||"")+"("+i.join(",")+") {\n  "+u+"}";return e.log(e.logger.DEBUG,l+"\n\n"),l},mergeSource:function(){var e="",n;for(var r=0,i=this.source.length;r<i;r++){var s=this.source[r];s.appendToBuffer?n?n=n+"\n    + "+s.content:n=s.content:(n&&(e+="buffer += "+n+";\n  ",n=t),e+=s+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),e[e.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){this.flushInline();var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(e){this.push(this.nameLookup("data",e,"data"))},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),typeof e=="string"?this.pushString(e):this.pushStackLiteral(e)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&this.register("hashTypes","{}")},pushHash:function(){this.hash={values:[],types:[]}},popHash:function(){var e=this.hash;this.hash=t,this.options.stringParams&&this.register("hashTypes","{"+e.types.join(",")+"}"),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(e,t,!0);this.push(n.name),this.replaceStack(function(e){return e+" ? "+e+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,e,t),r=this.lastHelper=this.nameLookup("helpers",e,"helper"),i=this.nameLookup("depth"+this.lastContext,e,"context"),s=this.nextStack();this.source.push("if ("+s+" = "+r+") { "+s+" = "+s+".call("+n.callParams+"); }"),this.source.push("else { "+s+" = "+i+"; "+s+" = typeof "+s+" === functionType ? "+s+".apply(depth0) : "+s+"; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t=this.popStack(),n;this.options.stringParams&&(n=this.popStack(),this.popStack());var r=this.hash;n&&r.types.push("'"+e+"': "+n),r.values.push("'"+e+"': ("+t+")")},compiler:c,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler;var u=this.matchExistingProgram(r);u==null?(this.context.programs.push(""),u=this.context.programs.length,r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context),this.context.environments[u]=r):(r.index=u,r.name="program"+u)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){this.context.aliases.self="this";if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r,i=[t.index,t.name,"data"];for(var s=0,o=n.length;s<o;s++)r=n[s],r===1?i.push("depth0"):i.push("depth"+(r-1));return n.length===0?"self.program("+i.join(", ")+")":(i.shift(),"self.programWithDepth("+i.join(", ")+")")},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new h(e))},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.source.push(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t="",n=this.isInline(),r;if(n){var i=this.popStack(!0);if(i instanceof h)r=i.value;else{var s=this.stackSlot?this.topStackName():this.incrStack();t="("+this.push(s)+" = "+i+"),",r=this.topStack()}}else r=this.topStack();var o=e.call(this,r);return n?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+t+o+")")):(/^stack/.test(r)||(r=this.nextStack()),this.source.push(r+" = ("+t+o+");")),r},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];r instanceof h?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();return!e&&n instanceof h?n.value:(t||this.stackSlot--,n)},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];return!e&&n instanceof h?n.value:n},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(e,t,n){var r=[];this.setupParams(e,r,n);var i=this.nameLookup("helpers",t,"helper");return{params:r,name:i,callParams:["depth0"].concat(r).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(r).join(", ")}},setupParams:function(e,t,n){var r=[],i=[],s=[],o,u,a;r.push("hash:"+this.popStack()),u=this.popStack(),a=this.popStack();if(a||u)a||(this.context.aliases.self="this",a="self.noop"),u||(this.context.aliases.self="this",u="self.noop"),r.push("inverse:"+u),r.push("fn:"+a);for(var f=0;f<e;f++)o=this.popStack(),t.push(o),this.options.stringParams&&(s.push(this.popStack()),i.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+i.join(",")+"]"),r.push("types:["+s.join(",")+"]"),r.push("hashTypes:hashTypes")),this.options.data&&r.push("data:data"),r="{"+r.join(",")+"}",n?(this.register("options",r),t.push("options")):t.push(r),t.join(", ")}};var p="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),d=c.RESERVED_WORDS={};for(var v=0,m=p.length;v<m;v++)d[p[v]]=!0;c.isValidJavaScriptVariableName=function(e){return!c.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1},e.precompile=function(t,n){if(!t||typeof t!="string"&&t.constructor!==e.AST.ProgramNode)throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);n=n||{},"data"in n||(n.data=!0);var r=e.parse(t),i=(new l).compile(r,n);return(new c).compile(i,n)},e.compile=function(n,r){function s(){var i=e.parse(n),s=(new l).compile(i,r),o=(new c).compile(s,r,t,!0);return e.template(o)}if(!n||typeof n!="string"&&n.constructor!==e.AST.ProgramNode)throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+n);r=r||{},"data"in r||(r.data=!0);var i;return function(e,t){return i||(i=s()),i.call(this,e,t)}},e.VM={template:function(t){var n={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,n,r){var i=this.programs[t];return r?e.VM.program(n,r):i?i:(i=this.programs[t]=e.VM.program(n),i)},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(r,i){i=i||{};var s=t.call(n,e,r,i.helpers,i.partials,i.data),o=n.compilerInfo||[],u=o[0]||1,a=e.COMPILER_REVISION;if(u!==a){if(u<a){var f=e.REVISION_CHANGES[a],l=e.REVISION_CHANGES[u];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+f+") or downgrade your runtime to an older version ("+l+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+o[1]+")."}return s}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,2);return function(n,i){return i=i||{},e.apply(this,[n,i.data||t].concat(r))}},program:function(e,t){return function(n,r){return r=r||{},e(n,r.data||t)}},noop:function(){return""},invokePartial:function(n,r,i,s,o,u){var a={helpers:s,partials:o,data:u};if(n===t)throw new e.Exception("The partial "+r+" could not be found");if(n instanceof Function)return n(i,a);if(!e.compile)throw new e.Exception("The partial "+r+" could not be compiled when running in runtime-only mode");return o[r]=e.compile(n,{data:u!==t}),o[r](i,a)}},e.template=e.VM.template})(Handlebars),define("handlebars",function(){}),function(){var e,t;(function(){var n={},r={};e=function(e,t,r){n[e]={deps:t,callback:r}},t=function(e){if(r[e])return r[e];r[e]={};for(var i,s=n[e],o=s.deps,u=s.callback,a=[],f=0,l=o.length;l>f;f++)"exports"===o[f]?a.push(i={}):a.push(t(o[f]));var c=u.apply(this,a);return r[e]=i||c}})(),function(){function e(e){return t.console&&t.console[e]?t.console[e].apply?function(){t.console[e].apply(t.console,arguments)}:function(){var n=Array.prototype.join.call(arguments,", ");t.console[e](n)}:void 0}"undefined"==typeof Ember&&(Ember={});var t=Ember.imports=Ember.imports||this,n=Ember.exports=Ember.exports||this;Ember.lookup=Ember.lookup||this,n.Em=n.Ember=Em=Ember,Ember.isNamespace=!0,Ember.toString=function(){return"Ember"},Ember.VERSION="1.0.0-rc.3",Ember.ENV=Ember.ENV||("undefined"==typeof ENV?{}:ENV),Ember.config=Ember.config||{},Ember.EXTEND_PROTOTYPES=Ember.ENV.EXTEND_PROTOTYPES,"undefined"==typeof Ember.EXTEND_PROTOTYPES&&(Ember.EXTEND_PROTOTYPES=!0),Ember.LOG_STACKTRACE_ON_DEPRECATION=Ember.ENV.LOG_STACKTRACE_ON_DEPRECATION!==!1,Ember.SHIM_ES5=Ember.ENV.SHIM_ES5===!1?!1:Ember.EXTEND_PROTOTYPES,Ember.LOG_VERSION=Ember.ENV.LOG_VERSION===!1?!1:!0,Ember.K=function(){return this},"undefined"==typeof Ember.assert&&(Ember.assert=Ember.K),"undefined"==typeof Ember.warn&&(Ember.warn=Ember.K),"undefined"==typeof Ember.debug&&(Ember.debug=Ember.K),"undefined"==typeof Ember.deprecate&&(Ember.deprecate=Ember.K),"undefined"==typeof Ember.deprecateFunc&&(Ember.deprecateFunc=function(e,t){return t}),Ember.uuid=0,Ember.Logger={log:e("log")||Ember.K,warn:e("warn")||Ember.K,error:e("error")||Ember.K,info:e("info")||Ember.K,debug:e("debug")||e("info")||Ember.K},Ember.onerror=null,Ember.handleErrors=function(e,t){if("function"!=typeof Ember.onerror)return e.call(t||this);try{return e.call(t||this)}catch(n){Ember.onerror(n)}},Ember.merge=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},Ember.isNone=function(e){return null===e||void 0===e},Ember.none=Ember.deprecateFunc("Ember.none is deprecated. Please use Ember.isNone instead.",Ember.isNone),Ember.isEmpty=function(e){return null===e||void 0===e||0===e.length&&"function"!=typeof e||"object"==typeof e&&0===Ember.get(e,"length")},Ember.empty=Ember.deprecateFunc("Ember.empty is deprecated. Please use Ember.isEmpty instead.",Ember.isEmpty)}(),function(){var e=Ember.platform={};if(Ember.create=Object.create,!Ember.create||Ember.ENV.STUB_OBJECT_CREATE){var t=function(){};Ember.create=function(e,n){if(t.prototype=e,e=new t,n){t.prototype=e;for(var r in n)t.prototype[r]=n[r].value;e=new t}return t.prototype=null,e},Ember.create.isSimulated=!0}var n,r,i=Object.defineProperty;if(i)try{i({},"a",{get:function(){}})}catch(s){i=null}i&&(n=function(){var e={};return i(e,"a",{configurable:!0,enumerable:!0,get:function(){},set:function(){}}),i(e,"a",{configurable:!0,enumerable:!0,writable:!0,value:!0}),e.a===!0}(),r=function(){try{return i(document.createElement("div"),"definePropertyOnDOM",{}),!0}catch(e){}return!1}(),n?r||(i=function(e,t,n){var r;return r="object"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName,r?e[t]=n.value:Object.defineProperty(e,t,n)}):i=null),e.defineProperty=i,e.hasPropertyAccessors=!0,e.defineProperty||(e.hasPropertyAccessors=!1,e.defineProperty=function(e,t,n){n.get||(e[t]=n.value)},e.defineProperty.isSimulated=!0),Ember.ENV.MANDATORY_SETTER&&!e.hasPropertyAccessors&&(Ember.ENV.MANDATORY_SETTER=!1)}(),function(){var e=function(e){return e&&Function.prototype.toString.call(e).indexOf("[native code]")>-1},t=e(Array.prototype.map)?Array.prototype.map:function(e){if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=new Array(n),i=arguments[1],s=0;n>s;s++)s in t&&(r[s]=e.call(i,t[s],s,t));return r},n=e(Array.prototype.forEach)?Array.prototype.forEach:function(e){if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=arguments[1],i=0;n>i;i++)i in t&&e.call(r,t[i],i,t)},r=e(Array.prototype.indexOf)?Array.prototype.indexOf:function(e,t){null===t||void 0===t?t=0:0>t&&(t=Math.max(0,this.length+t));for(var n=t,r=this.length;r>n;n++)if(this[n]===e)return n;return-1};Ember.ArrayPolyfills={map:t,forEach:n,indexOf:r},Ember.SHIM_ES5&&(Array.prototype.map||(Array.prototype.map=t),Array.prototype.forEach||(Array.prototype.forEach=n),Array.prototype.indexOf||(Array.prototype.indexOf=r))}(),function(){function e(e){this.descs={},this.watching={},this.cache={},this.source=e}function t(e,t){return!!e&&"function"==typeof e[t]}var n=Ember.platform.defineProperty,r=Ember.create,i="__ember"+ +(new Date),s=0,o=[],u={},a=Ember.ENV.MANDATORY_SETTER;Ember.GUID_KEY=i;var f={writable:!1,configurable:!1,enumerable:!1,value:null};Ember.generateGuid=function(e,t){t||(t="ember");var r=t+s++;return e&&(f.value=r,n(e,i,f)),r},Ember.guidFor=function(e){if(void 0===e)return"(undefined)";if(null===e)return"(null)";var t,r=typeof e;switch(r){case"number":return t=o[e],t||(t=o[e]="nu"+e),t;case"string":return t=u[e],t||(t=u[e]="st"+s++),t;case"boolean":return e?"(true)":"(false)";default:return e[i]?e[i]:e===Object?"(Object)":e===Array?"(Array)":(t="ember"+s++,f.value=t,n(e,i,f),t)}};var l={writable:!0,configurable:!1,enumerable:!1,value:null},c=Ember.GUID_KEY+"_meta";Ember.META_KEY=c;var h={descs:{},watching:{}};a&&(h.values={}),Ember.EMPTY_META=h,Object.freeze&&Object.freeze(h);var p=Ember.platform.defineProperty.isSimulated;p&&(e.prototype.__preventPlainObject__=!0,e.prototype.toJSON=function(){}),Ember.meta=function(t,i){var s=t[c];return i===!1?s||h:(s?s.source!==t&&(p||n(t,c,l),s=r(s),s.descs=r(s.descs),s.watching=r(s.watching),s.cache={},s.source=t,a&&(s.values=r(s.values)),t[c]=s):(p||n(t,c,l),s=new e(t),a&&(s.values={}),t[c]=s,s.descs.constructor=null),s)},Ember.getMeta=function(e,t){var n=Ember.meta(e,!1);return n[t]},Ember.setMeta=function(e,t,n){var r=Ember.meta(e,!0);return r[t]=n,n},Ember.metaPath=function(e,t,n){for(var i,s,o=Ember.meta(e,n),u=0,a=t.length;a>u;u++){if(i=t[u],s=o[i]){if(s.__ember_source__!==e){if(!n)return void 0;s=o[i]=r(s),s.__ember_source__=e}}else{if(!n)return void 0;s=o[i]={__ember_source__:e}}o=s}return s},Ember.wrap=function(e,t){function n(){}function r(){var r,i=this._super;return this._super=t||n,r=e.apply(this,arguments),this._super=i,r}return r.wrappedFunction=e,r.__ember_observes__=e.__ember_observes__,r.__ember_observesBefore__=e.__ember_observesBefore__,r},Ember.isArray=function(e){return!e||e.setInterval?!1:Array.isArray&&Array.isArray(e)?!0:Ember.Array&&Ember.Array.detect(e)?!0:void 0!==e.length&&"object"==typeof e?!0:!1},Ember.makeArray=function(e){return null===e||void 0===e?[]:Ember.isArray(e)?e:[e]},Ember.canInvoke=t,Ember.tryInvoke=function(e,n,r){return t(e,n)?e[n].apply(e,r||[]):void 0};var d=function(){var e=0;try{try{}finally{throw e++,new Error("needsFinallyFixTest")}}catch(t){}return 1!==e}();Ember.tryFinally=d?function(e,t,n){var r,i,s;n=n||this;try{r=e.call(n)}finally{try{i=t.call(n)}catch(o){s=o}}if(s)throw s;return void 0===i?r:i}:function(e,t,n){var r,i;n=n||this;try{r=e.call(n)}finally{i=t.call(n)}return void 0===i?r:i},Ember.tryCatchFinally=d?function(e,t,n,r){var i,s,o;r=r||this;try{i=e.call(r)}catch(u){i=t.call(r,u)}finally{try{s=n.call(r)}catch(a){o=a}}if(o)throw o;return void 0===s?i:s}:function(e,t,n,r){var i,s;r=r||this;try{i=e.call(r)}catch(o){i=t.call(r,o)}finally{s=n.call(r)}return void 0===s?i:s};var v={},m="Boolean Number String Function Array Date RegExp Object".split(" ");Ember.ArrayPolyfills.forEach.call(m,function(e){v["[object "+e+"]"]=e.toLowerCase()});var g=Object.prototype.toString;Ember.typeOf=function(e){var t;return t=null===e||void 0===e?String(e):v[g.call(e)]||"object","function"===t?Ember.Object&&Ember.Object.detect(e)&&(t="class"):"object"===t&&(t=e instanceof Error?"error":Ember.Object&&e instanceof Ember.Object?"instance":"object"),t}}(),function(){Ember.Instrumentation={};var e=[],t={},n=function(n){for(var r,i=[],s=0,o=e.length;o>s;s++)r=e[s],r.regex.test(n)&&i.push(r.object);return t[n]=i,i},r=function(){var e="undefined"!=typeof window?window.performance||{}:{},t=e.now||e.mozNow||e.webkitNow||e.msNow||e.oNow;return t?t.bind(e):function(){return+(new Date)}}();Ember.Instrumentation.instrument=function(e,i,s,o){function u(){for(d=0,v=h.length;v>d;d++)p=h[d],m[d]=p.before(e,r(),i);return s.call(o)}function a(e){i=i||{},i.exception=e}function f(){for(d=0,v=h.length;v>d;d++)p=h[d],p.after(e,r(),i,m[d]);Ember.STRUCTURED_PROFILE&&console.timeEnd(l)}var l,c,h=t[e];if(Ember.STRUCTURED_PROFILE&&(l=e+": "+i.object,console.time(l)),h||(h=n(e)),0===h.length)return c=s.call(o),Ember.STRUCTURED_PROFILE&&console.timeEnd(l),c;var p,d,v,m=[];return Ember.tryCatchFinally(u,a,f)},Ember.Instrumentation.subscribe=function(n,r){for(var i,s=n.split("."),o=[],u=0,a=s.length;a>u;u++)i=s[u],"*"===i?o.push("[^\\.]*"):o.push(i);o=o.join("\\."),o+="(\\..*)?";var f={pattern:n,regex:new RegExp("^"+o+"$"),object:r};return e.push(f),t={},f},Ember.Instrumentation.unsubscribe=function(n){for(var r,i=0,s=e.length;s>i;i++)e[i]===n&&(r=i);e.splice(r,1),t={}},Ember.Instrumentation.reset=function(){e=[],t={}},Ember.instrument=Ember.Instrumentation.instrument,Ember.subscribe=Ember.Instrumentation.subscribe}(),function(){var e,t,n,r;r=Array.prototype.concat,e=Array.prototype.map||Ember.ArrayPolyfills.map,t=Array.prototype.forEach||Ember.ArrayPolyfills.forEach,n=Array.prototype.indexOf||Ember.ArrayPolyfills.indexOf;var i=Ember.EnumerableUtils={map:function(t,n,r){return t.map?t.map.call(t,n,r):e.call(t,n,r)},forEach:function(e,n,r){return e.forEach?e.forEach.call(e,n,r):t.call(e,n,r)},indexOf:function(e,t,r){return e.indexOf?e.indexOf.call(e,t,r):n.call(e,t,r)},indexesOf:function(e,t){return void 0===t?[]:i.map(t,function(t){return i.indexOf(e,t)})},addObject:function(e,t){var n=i.indexOf(e,t);-1===n&&e.push(t)},removeObject:function(e,t){var n=i.indexOf(e,t);-1!==n&&e.splice(n,1)},replace:function(e,t,n,i){if(e.replace)return e.replace(t,n,i);var s=r.apply([t,n],i);return e.splice.apply(e,s)},intersection:function(e,t){var n=[];return i.forEach(e,function(e){i.indexOf(t,e)>=0&&n.push(e)}),n}}}(),function(){var e=Ember.guidFor,t=Ember.ArrayPolyfills.indexOf,n=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},r=function(e,t){var r=e.keys.copy(),i=n(e.values);return t.keys=r,t.values=i,t},i=Ember.OrderedSet=function(){this.clear()};i.create=function(){return new i},i.prototype={clear:function(){this.presenceSet={},this.list=[]},add:function(t){var n=e(t),r=this.presenceSet,i=this.list;n in r||(r[n]=!0,i.push(t))},remove:function(n){var r=e(n),i=this.presenceSet,s=this.list;delete i[r];var o=t.call(s,n);o>-1&&s.splice(o,1)},isEmpty:function(){return 0===this.list.length},has:function(t){var n=e(t),r=this.presenceSet;return n in r},forEach:function(e,t){for(var n=this.toArray(),r=0,i=n.length;i>r;r++)e.call(t,n[r])},toArray:function(){return this.list.slice()},copy:function(){var e=new i;return e.presenceSet=n(this.presenceSet),e.list=this.toArray(),e}};var s=Ember.Map=function(){this.keys=Ember.OrderedSet.create(),this.values={}};s.create=function(){return new s},s.prototype={get:function(t){var n=this.values,r=e(t);return n[r]},set:function(t,n){var r=this.keys,i=this.values,s=e(t);r.add(t),i[s]=n},remove:function(t){var n=this.keys,r=this.values,i=e(t);return r.hasOwnProperty(i)?(n.remove(t),delete r[i],!0):!1},has:function(t){var n=this.values,r=e(t);return n.hasOwnProperty(r)},forEach:function(t,n){var r=this.keys,i=this.values;r.forEach(function(r){var s=e(r);t.call(n,r,i[s])})},copy:function(){return r(this,new s)}};var o=Ember.MapWithDefault=function(e){s.call(this),this.defaultValue=e.defaultValue};o.create=function(e){return e?new o(e):new s},o.prototype=Ember.create(s.prototype),o.prototype.get=function(e){var t=this.has(e);if(t)return s.prototype.get.call(this,e);var n=this.defaultValue(e);return this.set(e,n),n},o.prototype.copy=function(){return r(this,new o({defaultValue:this.defaultValue}))}}(),function(){function e(e){return e.match(u)[0]}function t(t,r){var i,u=o.test(r),a=!u&&s.test(r);if((!t||a)&&(t=Ember.lookup),u&&(r=r.slice(5)),t===Ember.lookup&&(i=e(r),t=n(t,i),r=r.slice(i.length+1)),!r||0===r.length)throw new Error("Invalid Path");return[t,r]}var n,r=Ember.META_KEY,i=Ember.ENV.MANDATORY_SETTER,s=/^([A-Z$]|([0-9][A-Z$])).*[\.\*]/,o=/^this[\.\*]/,u=/^([^\.\*]+)/;n=function f(e,t){if(""===t)return e;if(t||"string"!=typeof e||(t=e,e=null),!e||-1!==t.indexOf("."))return a(e,t);var f,n=e[r],s=n&&n.descs[t];return s?s.get(e,t):(f=i&&n&&n.watching[t]>0?n.values[t]:e[t],void 0!==f||"object"!=typeof e||t in e||"function"!=typeof e.unknownProperty?f:e.unknownProperty(t))},Ember.config.overrideAccessors&&(Ember.get=n,Ember.config.overrideAccessors(),n=Ember.get);var a=Ember._getPath=function(e,r){var i,s,u,a,f;if(null===e&&-1===r.indexOf("."))return n(Ember.lookup,r);for(i=o.test(r),(!e||i)&&(u=t(e,r),e=u[0],r=u[1],u.length=0),s=r.split("."),f=s.length,a=0;e&&f>a;a++)if(e=n(e,s[a],!0),e&&e.isDestroyed)return void 0;return e};Ember.normalizeTuple=function(e,n){return t(e,n)},Ember.getWithDefault=function(e,t,r){var i=n(e,t);return void 0===i?r:i},Ember.get=n,Ember.getPath=Ember.deprecateFunc("getPath is deprecated since get now supports paths",Ember.get)}(),function(){function e(e,t,n){for(var r=-1,i=0,s=e.length;s>i;i++)if(t===e[i][0]&&n===e[i][1]){r=i;break}return r}function t(e,t){var n,r=p(e,!0);return r.listeners||(r.listeners={}),r.hasOwnProperty("listeners")||(r.listeners=h(r.listeners)),n=r.listeners[t],n&&!r.listeners.hasOwnProperty(t)?n=r.listeners[t]=r.listeners[t].slice():n||(n=r.listeners[t]=[]),n}function n(t,n,r){var i=t[d],s=i&&i.listeners&&i.listeners[n];if(s)for(var o=s.length-1;o>=0;o--){var u=s[o][0],a=s[o][1],f=s[o][2],l=s[o][3],c=e(r,u,a);-1===c&&r.push([u,a,f,l])}}function r(t,n,r){var i=t[d],s=i&&i.listeners&&i.listeners[n],o=[];if(s){for(var u=s.length-1;u>=0;u--){var a=s[u][0],f=s[u][1],l=s[u][2],c=s[u][3],h=e(r,a,f);-1===h&&(r.push([a,f,l,c]),o.push([a,f,l,c]))}return o}}function i(n,r,i,s,o){s||"function"!=typeof i||(s=i,i=null);var u=t(n,r),a=e(u,i,s);-1===a&&(u.push([i,s,o,void 0]),"function"==typeof n.didAddListener&&n.didAddListener(r,i,s))}function s(n,r,i,s){function o(i,s){var o=t(n,r),u=e(o,i,s);-1!==u&&(o.splice(u,1),"function"==typeof n.didRemoveListener&&n.didRemoveListener(r,i,s))}if(s||"function"!=typeof i||(s=i,i=null),s)o(i,s);else{var u=n[d],a=u&&u.listeners&&u.listeners[r];if(!a)return;for(var f=a.length-1;f>=0;f--)o(a[f][0],a[f][1])}}function o(n,r,i,s,o){function u(){return o.call(i)}function a(){f&&(f[3]=void 0)}s||"function"!=typeof i||(s=i,i=null);var f,l=t(n,r),c=e(l,i,s);return-1!==c&&(f=l[c].slice(),f[3]=!0,l[c]=f),Ember.tryFinally(u,a)}function u(n,r,i,s,o){function u(){return o.call(i)}function a(){for(h=0,p=d.length;p>h;h++)d[h][3]=void 0}s||"function"!=typeof i||(s=i,i=null);var f,l,c,h,p,d=[];for(h=0,p=r.length;p>h;h++){f=r[h],l=t(n,f);var v=e(l,i,s);-1!==v&&(c=l[v].slice(),c[3]=!0,l[v]=c,d.push(c))}return Ember.tryFinally(u,a)}function a(e){var t=e[d].listeners,n=[];if(t)for(var r in t)t[r]&&n.push(r);return n}function f(e,t,n,r){if(e!==Ember&&"function"==typeof e.sendEvent&&e.sendEvent(t,n),!r){var i=e[d];r=i&&i.listeners&&i.listeners[t]}if(r){for(var o=r.length-1;o>=0;o--)if(r[o]&&r[o][3]!==!0){var u=r[o][0],a=r[o][1],f=r[o][2];f&&s(e,t,u,a),u||(u=e),"string"==typeof a&&(a=u[a]),n?a.apply(u,n):a.call(u)}return!0}}function l(e,t){var n=e[d],r=n&&n.listeners&&n.listeners[t];return!!r&&!!r.length}function c(e,t){var n=[],r=e[d],i=r&&r.listeners&&r.listeners[t];if(!i)return n;for(var s=0,o=i.length;o>s;s++){var u=i[s][0],a=i[s][1];n.push([u,a])}return n}var h=Ember.create,p=Ember.meta,d=Ember.META_KEY;Ember.addListener=i,Ember.removeListener=s,Ember._suspendListener=o,Ember._suspendListeners=u,Ember.sendEvent=f,Ember.hasListeners=l,Ember.watchedEvents=a,Ember.listenersFor=c,Ember.listenersDiff=r,Ember.listenersUnion=n}(),function(){var e=Ember.guidFor,t=Ember.sendEvent,n=Ember._ObserverSet=function(){this.clear()};n.prototype.add=function(t,n,r){var i,s=this.observerSet,o=this.observers,u=e(t),a=s[u];return a||(s[u]=a={}),i=a[n],void 0===i&&(i=o.push({sender:t,keyName:n,eventName:r,listeners:[]})-1,a[n]=i),o[i].listeners},n.prototype.flush=function(){var e,n,r,i,s=this.observers;for(this.clear(),e=0,n=s.length;n>e;++e)r=s[e],i=r.sender,i.isDestroying||i.isDestroyed||t(i,r.eventName,[i,r.keyName],r.listeners)},n.prototype.clear=function(){this.observerSet={},this.observers=[]}}(),function(){function e(e,t,i){if(!e.isDestroying){var s=r,o=!s;o&&(s=r={}),n(v,e,t,s,i),o&&(r=null)}}function t(e,t,r){if(!e.isDestroying){var s=i,o=!s;o&&(s=i={}),n(m,e,t,s,r),o&&(i=null)}}function n(e,t,n,r,i){var s=o(t);if(r[s]||(r[s]={}),!r[s][n]){r[s][n]=!0;var u=i.deps;if(u=u&&u[n])for(var a in u){var f=i.descs[a];f&&f._suspended===t||e(t,a)}}}var r,i,s=Ember.meta,o=Ember.guidFor,u=Ember.tryFinally,a=Ember.sendEvent,f=Ember.listenersUnion,l=Ember.listenersDiff,c=Ember._ObserverSet,h=new c,p=new c,d=0,v=Ember.propertyWillChange=function(t,n){var r=s(t,!1),i=r.watching[n]>0||"length"===n,o=r.proto,u=r.descs[n];i&&o!==t&&(u&&u.willChange&&u.willChange(t,n),e(t,n,r),g(t,n,r),E(t,n))},m=Ember.propertyDidChange=function(e,n){var r=s(e,!1),i=r.watching[n]>0||"length"===n,o=r.proto,u=r.descs[n];o!==e&&(u&&u.didChange&&u.didChange(e,n),(i||"length"===n)&&(t(e,n,r),y(e,n,r),S(e,n)))},g=function(e,t,n,r){if(n.hasOwnProperty("chainWatchers")){var i=n.chainWatchers;if(i=i[t])for(var s=0,o=i.length;o>s;s++)i[s].willChange(r)}},y=function(e,t,n,r){if(n.hasOwnProperty("chainWatchers")){var i=n.chainWatchers;if(i=i[t])for(var s=i.length-1;s>=0;s--)i[s].didChange(r)}};Ember.overrideChains=function(e,t,n){y(e,t,n,!0)};var b=Ember.beginPropertyChanges=function(){d++},w=Ember.endPropertyChanges=function(){d--,0>=d&&(h.clear(),p.flush())};Ember.changeProperties=function(e,t){b(),u(e,w,t)};var E=function(e,t){if(!e.isDestroying){var n,r,i=t+":before";d?(n=h.add(e,t,i),r=l(e,i,n),a(e,i,[e,t],r)):a(e,i,[e,t])}},S=function(e,t){if(!e.isDestroying){var n,r=t+":change";d?(n=p.add(e,t,r),f(e,r,n)):a(e,r,[e,t])}}}(),function(){function e(e,t,n,s){var o;if(o=t.slice(t.lastIndexOf(".")+1),t=t.slice(0,t.length-(o.length+1)),"this"!==t&&(e=r(e,t)),!o||0===o.length)throw new Error("You passed an empty path");if(!e){if(s)return;throw new Error("Object in path "+t+" could not be found or was destroyed.")}return i(e,o,n)}var t=Ember.META_KEY,n=Ember.ENV.MANDATORY_SETTER,r=Ember._getPath,i=function s(r,s,i,o){if("string"==typeof r&&(i=s,s=r,r=null),!r||-1!==s.indexOf("."))return e(r,s,i,o);var u,a,f=r[t],l=f&&f.descs[s];return l?l.set(r,s,i):(u="object"==typeof r&&!(s in r),u&&"function"==typeof r.setUnknownProperty?r.setUnknownProperty(s,i):f&&f.watching[s]>0?(a=n?f.values[s]:r[s],i!==a&&(Ember.propertyWillChange(r,s),n?void 0!==a||s in r?f.values[s]=i:Ember.defineProperty(r,s,null,i):r[s]=i,Ember.propertyDidChange(r,s))):r[s]=i),i};Ember.config.overrideAccessors&&(Ember.set=i,Ember.config.overrideAccessors(),i=Ember.set),Ember.set=i,Ember.setPath=Ember.deprecateFunc("setPath is deprecated since set now supports paths",Ember.set),Ember.trySet=function(e,t,n){return i(e,t,n,!0)},Ember.trySetPath=Ember.deprecateFunc("trySetPath has been renamed to trySet",Ember.trySet)}(),function(){var e=Ember.META_KEY,t=Ember.meta,n=Ember.platform.defineProperty,r=Ember.ENV.MANDATORY_SETTER;Ember.Descriptor=function(){};var i=Ember.MANDATORY_SETTER_FUNCTION=function(){},s=Ember.DEFAULT_GETTER_FUNCTION=function(t){return function(){var n=this[e];return n&&n.values[t]}};Ember.defineProperty=function(e,u,a,f,l){var c,h,p,d;return l||(l=t(e)),c=l.descs,h=l.descs[u],p=l.watching[u]>0,h instanceof Ember.Descriptor&&h.teardown(e,u),a instanceof Ember.Descriptor?(d=a,c[u]=a,r&&p?n(e,u,{configurable:!0,enumerable:!0,writable:!0,value:void 0}):e[u]=void 0,a.setup(e,u)):(c[u]=void 0,null==a?(d=f,r&&p?(l.values[u]=f,n(e,u,{configurable:!0,enumerable:!0,set:i,get:s(u)})):e[u]=f):(d=a,n(e,u,a))),p&&Ember.overrideChains(e,u,l),e.didDefineProperty&&e.didDefineProperty(e,u,d),this}}(),function(){var e=Ember.changeProperties,t=Ember.set;Ember.setProperties=function(n,r){return e(function(){for(var e in r)r.hasOwnProperty(e)&&t(n,e,r[e])}),n}}(),function(){var e=Ember.meta,t=Ember.typeOf,n=Ember.ENV.MANDATORY_SETTER,r=Ember.platform.defineProperty;Ember.watchKey=function(i,s){if("length"!==s||"array"!==t(i)){var o,u=e(i),a=u.watching;a[s]?a[s]=(a[s]||0)+1:(a[s]=1,o=u.descs[s],o&&o.willWatch&&o.willWatch(i,s),"function"==typeof i.willWatchProperty&&i.willWatchProperty(s),n&&s in i&&(u.values[s]=i[s],r(i,s,{configurable:!0,enumerable:!0,set:Ember.MANDATORY_SETTER_FUNCTION,get:Ember.DEFAULT_GETTER_FUNCTION(s)})))}},Ember.unwatchKey=function(t,i){var s,o=e(t),u=o.watching;1===u[i]?(u[i]=0,s=o.descs[i],s&&s.didUnwatch&&s.didUnwatch(t,i),"function"==typeof t.didUnwatchProperty&&t.didUnwatchProperty(i),n&&i in t&&(r(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o.values[i]}),delete o.values[i])):u[i]>1&&u[i]--}}(),function(){function e(e){return e.match(h)[0]}function t(e,t,n){if(e&&"object"==typeof e){var i=r(e),s=i.chainWatchers;i.hasOwnProperty("chainWatchers")||(s=i.chainWatchers={}),s[t]||(s[t]=[]),s[t].push(n),a(e,t)}}function n(e){return r(e,!1).proto===e}var r=Ember.meta,i=Ember.get,s=Ember.normalizeTuple,o=Ember.ArrayPolyfills.forEach,u=Ember.warn,a=Ember.watchKey,f=Ember.unwatchKey,l=Ember.propertyWillChange,c=Ember.propertyDidChange,h=/^([^\.\*]+)/,p=[];Ember.flushPendingChains=function(){if(0!==p.length){var e=p;p=[],o.call(e,function(e){e[0].add(e[1])}),u("Watching an undefined global, Ember expects watched globals to be setup by the time the run loop is flushed, check for typos",0===p.length)}};var d=Ember.removeChainWatcher=function(e,t,n){if(e&&"object"==typeof e){var i=r(e,!1);if(i.hasOwnProperty("chainWatchers")){var s=i.chainWatchers;if(s[t]){s=s[t];for(var o=0,u=s.length;u>o;o++)s[o]===n&&s.splice(o,1)}f(e,t)}}},v=Ember._ChainNode=function(e,n,r){this._parent=e,this._key=n,this._watching=void 0===r,this._value=r,this._paths={},this._watching&&(this._object=e.value(),this._object&&t(this._object,this._key,this)),this._parent&&"@each"===this._parent._key&&this.value()},m=v.prototype;m.value=function(){if(void 0===this._value&&this._watching){var e=this._parent.value();this._value=e&&!n(e)?i(e,this._key):void 0}return this._value},m.destroy=function(){if(this._watching){var e=this._object;e&&d(e,this._key,this),this._watching=!1}},m.copy=function(e){var t,n=new v(null,null,e),r=this._paths;for(t in r)0>=r[t]||n.add(t);return n},m.add=function(t){var n,r,i,o,u;if(u=this._paths,u[t]=(u[t]||0)+1,n=this.value(),r=s(n,t),r[0]&&r[0]===n)t=r[1],i=e(t),t=t.slice(i.length+1);else{if(!r[0])return p.push([this,t]),r.length=0,void 0;o=r[0],i=t.slice(0,0-(r[1].length+1)),t=r[1]}r.length=0,this.chain(i,t,o)},m.remove=function(t){var n,r,i,o,u;u=this._paths,u[t]>0&&u[t]--,n=this.value(),r=s(n,t),r[0]===n?(t=r[1],i=e(t),t=t.slice(i.length+1)):(o=r[0],i=t.slice(0,0-(r[1].length+1)),t=r[1]),r.length=0,this.unchain(i,t)},m.count=0,m.chain=function(t,n,r){var i,s=this._chains;s||(s=this._chains={}),i=s[t],i||(i=s[t]=new v(this,t,r)),i.count++,n&&n.length>0&&(t=e(n),n=n.slice(t.length+1),i.chain(t,n))},m.unchain=function(t,n){var r=this._chains,i=r[t];n&&n.length>1&&(t=e(n),n=n.slice(t.length+1),i.unchain(t,n)),i.count--,0>=i.count&&(delete r[i._key],i.destroy())},m.willChange=function(){var e=this._chains;if(e)for(var t in e)e.hasOwnProperty(t)&&e[t].willChange();this._parent&&this._parent.chainWillChange(this,this._key,1)},m.chainWillChange=function(e,t,n){this._key&&(t=this._key+"."+t),this._parent?this._parent.chainWillChange(this,t,n+1):(n>1&&l(this.value(),t),t="this."+t,this._paths[t]>0&&l(this.value(),t))},m.chainDidChange=function(e,t,n){this._key&&(t=this._key+"."+t),this._parent?this._parent.chainDidChange(this,t,n+1):(n>1&&c(this.value(),t),t="this."+t,this._paths[t]>0&&c(this.value(),t))},m.didChange=function(e){if(this._watching){var n=this._parent.value();n!==this._object&&(d(this._object,this._key,this),this._object=n,t(n,this._key,this)),this._value=void 0,this._parent&&"@each"===this._parent._key&&this.value()}var r=this._chains;if(r)for(var i in r)r.hasOwnProperty(i)&&r[i].didChange(e);e||this._parent&&this._parent.chainDidChange(this,this._key,1)},Ember.finishChains=function(e){var t=r(e,!1),n=t.chains;n&&(n.value()!==e&&(t.chains=n=n.copy(e)),n.didChange(!0))}}(),function(){function e(e){var n=t(e),i=n.chains;return i?i.value()!==e&&(i=n.chains=i.copy(e)):i=n.chains=new r(null,null,e),i}var t=Ember.meta,n=Ember.typeOf,r=Ember._ChainNode;Ember.watchPath=function(r,i){if("length"!==i||"array"!==n(r)){var s=t(r),o=s.watching;o[i]?o[i]=(o[i]||0)+1:(o[i]=1,e(r).add(i))}},Ember.unwatchPath=function(n,r){var i=t(n),s=i.watching;1===s[r]?(s[r]=0,e(n).remove(r)):s[r]>1&&s[r]--}}(),function(){function e(e){return"*"===e||!c.test(e)}var t=Ember.meta,n=Ember.GUID_KEY,r=Ember.META_KEY,i=Ember.removeChainWatcher,s=Ember.watchKey,o=Ember.unwatchKey,u=Ember.watchPath,a=Ember.unwatchPath,f=Ember.typeOf,l=Ember.generateGuid,c=/[\.\*]/;Ember.watch=function(t,n){("length"!==n||"array"!==f(t))&&(e(n)?s(t,n):u(t,n))},Ember.isWatching=function(e,t){var n=e[r];return(n&&n.watching[t])>0},Ember.watch.flushPending=Ember.flushPendingChains,Ember.unwatch=function(t,n){("length"!==n||"array"!==f(t))&&(e(n)?o(t,n):a(t,n))},Ember.rewatch=function(e){var r=t(e,!1),i=r.chains;n in e&&!e.hasOwnProperty(n)&&l(e,"ember"),i&&i.value()!==e&&(r.chains=i.copy(e))};var h=[];Ember.destroy=function(e){var t,n,s,o,u=e[r];if(u&&(e[r]=null,t=u.chains))for(h.push(t);h.length>0;){if(t=h.pop(),n=t._chains)for(s in n)n.hasOwnProperty(s)&&h.push(n[s]);t._watching&&(o=t._object,o&&i(o,t._key,t))}}}(),function(){function e(e,t){var n=e[t];return n?e.hasOwnProperty(t)||(n=e[t]=h(n)):n=e[t]={},n}function t(t){return e(t,"deps")}function n(n,r,i,s){var o,u,a,f,l,c=n._dependentKeys;if(c)for(o=t(s),u=0,a=c.length;a>u;u++)f=c[u],l=e(o,f),l[i]=(l[i]||0)+1,d(r,f)}function r(n,r,i,s){var o,u,a,f,l,c=n._dependentKeys;if(c)for(o=t(s),u=0,a=c.length;a>u;u++)f=c[u],l=e(o,f),l[i]=(l[i]||0)-1,v(r,f)}function i(e,t){this.func=e,this._cacheable=t&&void 0!==t.cacheable?t.cacheable:!0,this._dependentKeys=t&&t.dependentKeys,this._readOnly=t&&(void 0!==t.readOnly||!!t.readOnly)}function s(e,t){for(var n={},r=0;t.length>r;r++)n[t[r]]=a(e,t[r]);return n}function o(e,t){Ember.computed[e]=function(e){var n=c.call(arguments);return Ember.computed(e,function(){return t.apply(this,n)})}}function u(e,t){Ember.computed[e]=function(){var e=c.call(arguments),n=Ember.computed(function(){return t.apply(this,[s(this,e)])});return n.property.apply(n,e)}}var a=Ember.get,f=Ember.set,l=Ember.meta,c=[].slice,h=Ember.create,p=Ember.META_KEY,d=Ember.watch,v=Ember.unwatch;Ember.ComputedProperty=i,i.prototype=new Ember.Descriptor;var m=i.prototype;m.cacheable=function(e){return this._cacheable=e!==!1,this},m.volatile=function(){return this.cacheable(!1)},m.readOnly=function(e){return this._readOnly=void 0===e||!!e,this},m.property=function(){for(var e=[],t=0,n=arguments.length;n>t;t++)e.push(arguments[t]);return this._dependentKeys=e,this},m.meta=function(e){return 0===arguments.length?this._meta||{}:(this._meta=e,this)},m.willWatch=function(e,t){var r=e[p];t in r.cache||n(this,e,t,r)},m.didUnwatch=function(e,t){var n=e[p];t in n.cache||r(this,e,t,n)},m.didChange=function(e,t){if(this._cacheable&&this._suspended!==e){var n=l(e);t in n.cache&&(delete n.cache[t],n.watching[t]||r(this,e,t,n))}},m.get=function(e,t){var r,i,s;if(this._cacheable){if(s=l(e),i=s.cache,t in i)return i[t];r=i[t]=this.func.call(e,t),s.watching[t]||n(this,e,t,s)}else r=this.func.call(e,t);return r},m.set=function(e,t,r){var i,s,o=this._cacheable,u=this.func,a=l(e,o),f=a.watching[t],c=this._suspended,h=!1,p=a.cache;if(this._readOnly)throw new Error("Cannot Set: "+t+" on: "+e.toString());this._suspended=e;try{if(o&&p.hasOwnProperty(t)&&(i=p[t],h=!0),u.wrappedFunction&&(u=u.wrappedFunction),3===u.length)s=u.call(e,t,r,i);else{if(2!==u.length)return Ember.defineProperty(e,t,null,i),Ember.set(e,t,r),void 0;s=u.call(e,t,r)}if(h&&i===s)return;f&&Ember.propertyWillChange(e,t),h&&delete p[t],o&&(f||h||n(this,e,t,a),p[t]=s),f&&Ember.propertyDidChange(e,t)}finally{this._suspended=c}return s},m.setup=function(e,t){var r=e[p];r&&r.watching[t]&&n(this,e,t,l(e))},m.teardown=function(e,t){var n=l(e);return(n.watching[t]||t in n.cache)&&r(this,e,t,n),this._cacheable&&delete n.cache[t],null},Ember.computed=function(e){var t;if(arguments.length>1&&(t=c.call(arguments,0,-1),e=c.call(arguments,-1)[0]),"function"!=typeof e)throw new Error("Computed Property declared without a property function");var n=new i(e);return t&&n.property.apply(n,t),n},Ember.cacheFor=function(e,t){var n=l(e,!1).cache;return n&&t in n?n[t]:void 0},o("empty",function(e){return Ember.isEmpty(a(this,e))}),o("notEmpty",function(e){return!Ember.isEmpty(a(this,e))}),o("none",function(e){return Ember.isNone(a(this,e))}),o("not",function(e){return!a(this,e)}),o("bool",function(e){return!!a(this,e)}),o("match",function(e,t){var n=a(this,e);return"string"==typeof n?!!n.match(t):!1}),o("equal",function(e,t){return a(this,e)===t}),o("gt",function(e,t){return a(this,e)>t}),o("gte",function(e,t){return a(this,e)>=t}),o("lt",function(e,t){return t>a(this,e)}),o("lte",function(e,t){return t>=a(this,e)}),u("and",function(e){for(var t in e)if(e.hasOwnProperty(t)&&!e[t])return!1;return!0}),u("or",function(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!0;return!1}),u("any",function(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return e[t];return null}),u("map",function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&(Ember.isNone(e[n])?t.push(null):t.push(e[n]));return t}),Ember.computed.alias=function(e){return Ember.computed(e,function(t,n){return arguments.length>1?(f(this,e,n),n):a(this,e)})},Ember.computed.defaultTo=function(e){return Ember.computed(function(t,n,r){return 1===arguments.length?null!=r?r:a(this,e):null!=n?n:a(this,e)})}}(),function(){function e(e){return e+n}function t(e){return e+r}var n=":change",r=":before";Ember.guidFor,Ember.addObserver=function(t,n,r,i){return Ember.addListener(t,e(n),r,i),Ember.watch(t,n),this},Ember.observersFor=function(t,n){return Ember.listenersFor(t,e(n))},Ember.removeObserver=function(t,n,r,i){return Ember.unwatch(t,n),Ember.removeListener(t,e(n),r,i),this},Ember.addBeforeObserver=function(e,n,r,i){return Ember.addListener(e,t(n),r,i),Ember.watch(e,n),this},Ember._suspendBeforeObserver=function(e,n,r,i,s){return Ember._suspendListener(e,t(n),r,i,s)},Ember._suspendObserver=function(t,n,r,i,s){return Ember._suspendListener(t,e(n),r,i,s)};var i=Ember.ArrayPolyfills.map;Ember._suspendBeforeObservers=function(e,n,r,s,o){var u=i.call(n,t);return Ember._suspendListeners(e,u,r,s,o)},Ember._suspendObservers=function(t,n,r,s,o){var u=i.call(n,e);return Ember._suspendListeners(t,u,r,s,o)},Ember.beforeObserversFor=function(e,n){return Ember.listenersFor(e,t(n))},Ember.removeBeforeObserver=function(e,n,r,i){return Ember.unwatch(e,n),Ember.removeListener(e,t(n),r,i),this}}(),function(){function e(e,t,n,r){return void 0===t&&(t=e,e=void 0),"string"==typeof t&&(t=e[t]),n&&r>0&&(n=n.length>r?s.call(n,r):null),Ember.handleErrors(function(){return t.apply(e||this,n||[])},this)}function t(){f=null,a.currentRunLoop&&a.end()}function n(){l=null,a(function(){var t=+(new Date),r=-1;for(var i in h)if(h.hasOwnProperty(i)){var s=h[i];s&&s.expires&&(t>=s.expires?(delete h[i],e(s.target,s.method,s.args,2)):(0>r||r>s.expires)&&(r=s.expires))}r>0&&(l=setTimeout(n,r-t),c=r)})}function r(t,n){n[this.tguid]&&delete n[this.tguid][this.mguid],h[t]&&e(this.target,this.method,this.args),delete h[t]}function i(e,t,n,i){var s,o=Ember.guidFor(t),u=Ember.guidFor(n),f=a.autorun().onceTimers,l=f[o]&&f[o][u];return l&&h[l]?h[l].args=i:(s={target:t,method:n,args:i,tguid:o,mguid:u},l=Ember.guidFor(s),h[l]=s,f[o]||(f[o]={}),f[o][u]=l,a.schedule(e,s,r,l,f)),l}var s=[].slice,o=Ember.ArrayPolyfills.forEach,u=function(e){this._prev=e||null,this.onceTimers={}};u.prototype={end:function(){this.flush()},prev:function(){return this._prev},schedule:function(e,t,n){var r,i=this._queues;i||(i=this._queues={}),r=i[e],r||(r=i[e]=[]);var o=arguments.length>3?s.call(arguments,3):null;return r.push({target:t,method:n,args:o}),this},flush:function(t){function n(t){e(t.target,t.method,t.args)}function r(){o.call(a,n)}var i,s,u,a,f;if(!this._queues)return this;if(Ember.watch.flushPending(),t)for(;this._queues&&(a=this._queues[t]);)this._queues[t]=null,"sync"===t?(f=Ember.LOG_BINDINGS,f&&Ember.Logger.log("Begin: Flush Sync Queue"),Ember.beginPropertyChanges(),Ember.tryFinally(r,Ember.endPropertyChanges),f&&Ember.Logger.log("End: Flush Sync Queue")):o.call(a,n);else{i=Ember.run.queues,u=i.length,s=0;e:for(;u>s;){t=i[s],a=this._queues&&this._queues[t],delete this._queues[t],a&&("sync"===t?(f=Ember.LOG_BINDINGS,f&&Ember.Logger.log("Begin: Flush Sync Queue"),Ember.beginPropertyChanges(),Ember.tryFinally(r,Ember.endPropertyChanges),f&&Ember.Logger.log("End: Flush Sync Queue")):o.call(a,n));for(var l=0;s>=l;l++)if(this._queues&&this._queues[i[l]]){s=l;continue e}s++}}return this}},Ember.RunLoop=u,Ember.run=function(t,n){function r(){return t||n?e(t,n,i,2):void 0}var i=arguments;return a.begin(),Ember.tryFinally(r,a.end)};var a=Ember.run;Ember.run.begin=function(){a.currentRunLoop=new u(a.currentRunLoop)},Ember.run.end=function(){function e(){a.currentRunLoop.end()}function t(){a.currentRunLoop=a.currentRunLoop.prev()}Ember.tryFinally(e,t)},Ember.run.queues=["sync","actions","destroy"],Ember.run.schedule=function(){var e=a.autorun();e.schedule.apply(e,arguments)};var f;Ember.run.hasScheduledTimers=function(){return!!f||!!l},Ember.run.cancelTimers=function(){f&&(clearTimeout(f),f=null),l&&(clearTimeout(l),l=null),h={}},Ember.run.autorun=function(){return a.currentRunLoop||(a.begin(),f||(f=setTimeout(t,1))),a.currentRunLoop},Ember.run.sync=function(){a.autorun(),a.currentRunLoop.flush("sync")};var l,c,h={};Ember.run.later=function(e,t){var r,i,o,u,a;return 2===arguments.length&&"function"==typeof e?(a=t,t=e,e=void 0,r=[e,t]):(r=s.call(arguments),a=r.pop()),i=+(new Date)+a,o={target:e,method:t,expires:i,args:r},u=Ember.guidFor(o),h[u]=o,l&&c>i&&(clearTimeout(l),l=null),l||(l=setTimeout(n,a),c=i),u},Ember.run.once=function(e,t){return i("actions",e,t,s.call(arguments,2))},Ember.run.scheduleOnce=function(e,t,n){return i(e,t,n,s.call(arguments,3))},Ember.run.next=function(){var e=s.call(arguments);return e.push(1),a.later.apply(this,e)},Ember.run.cancel=function(e){delete h[e]}}(),function(){function e(e,t){return n(s(t)?Ember.lookup:e,t)}function t(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}Ember.LOG_BINDINGS=!!Ember.ENV.LOG_BINDINGS;var n=Ember.get,r=(Ember.set,Ember.guidFor),i=/^([A-Z$]|([0-9][A-Z$]))/,s=Ember.isGlobalPath=function(e){return i.test(e)},o=function(e,t){this._direction="fwd",this._from=t,this._to=e,this._directionMap=Ember.Map.create()};o.prototype={copy:function(){var e=new o(this._to,this._from);return this._oneWay&&(e._oneWay=!0),e},from:function(e){return this._from=e,this},to:function(e){return this._to=e,this},oneWay:function(){return this._oneWay=!0,this},toString:function(){var e=this._oneWay?"[oneWay]":"";return"Ember.Binding<"+r(this)+">("+this._from+" -> "+this._to+")"+e},connect:function(t){var n=this._from,r=this._to;return Ember.trySet(t,r,e(t,n)),Ember.addObserver(t,n,this,this.fromDidChange),this._oneWay||Ember.addObserver(t,r,this,this.toDidChange),this._readyToSync=!0,this},disconnect:function(e){var t=!this._oneWay;return Ember.removeObserver(e,this._from,this,this.fromDidChange),t&&Ember.removeObserver(e,this._to,this,this.toDidChange),this._readyToSync=!1,this},fromDidChange:function(e){this._scheduleSync(e,"fwd")},toDidChange:function(e){this._scheduleSync(e,"back")},_scheduleSync:function(e,t){var n=this._directionMap,r=n.get(e);r||(Ember.run.schedule("sync",this,this._sync,e),n.set(e,t)),"back"===r&&"fwd"===t&&n.set(e,"fwd")},_sync:function(t){var r=Ember.LOG_BINDINGS;if(!t.isDestroyed&&this._readyToSync){var i=this._directionMap,s=i.get(t),o=this._from,u=this._to;if(i.remove(t),"fwd"===s){var a=e(t,this._from);r&&Ember.Logger.log(" ",this.toString(),"->",a,t),this._oneWay?Ember.trySet(t,u,a):Ember._suspendObserver(t,u,this,this.toDidChange,function(){Ember.trySet(t,u,a)})}else if("back"===s){var f=n(t,this._to);r&&Ember.Logger.log(" ",this.toString(),"<-",f,t),Ember._suspendObserver(t,o,this,this.fromDidChange,function(){Ember.trySet(Ember.isGlobalPath(o)?Ember.lookup:t,o,f)})}}}},t(o,{from:function(){var e=this,t=new e;return t.from.apply(t,arguments)},to:function(){var e=this,t=new e;return t.to.apply(t,arguments)},oneWay:function(e,t){var n=this,r=new n(null,e);return r.oneWay(t)}}),Ember.Binding=o,Ember.bind=function(e,t,n){return(new Ember.Binding(t,n)).connect(e)},Ember.oneWay=function(e,t,n){return(new Ember.Binding(t,n)).oneWay().connect(e)}}(),function(){function e(e){var t=Ember.meta(e,!0),n=t.mixins;return n?t.hasOwnProperty("mixins")||(n=t.mixins=C(n)):n=t.mixins={},n}function t(e,t){return t&&t.length>0&&(e.mixins=S.call(t,function(e){if(e instanceof b)return e;var t=new b;return t.properties=e,t})),e}function n(e){return"function"==typeof e&&e.isMethod!==!1&&e!==Boolean&&e!==Object&&e!==Number&&e!==Array&&e!==Date&&e!==String}function r(e,t){var n;return t instanceof b?(n=L(t),e[n]?A:(e[n]=t,t.properties)):t}function i(e,t,n){var r;return r=t.concatenatedProperties||n.concatenatedProperties,e.concatenatedProperties&&(r=r?r.concat(e.concatenatedProperties):e.concatenatedProperties),r}function s(e,t,n,r,i){var s;return void 0===r[t]&&(s=i[t]),s=s||e.descs[t],s&&s instanceof Ember.ComputedProperty?(n=C(n),n.func=Ember.wrap(n.func,s.func),n):n}function o(e,t,n,r,i){var s;return void 0===i[t]&&(s=r[t]),s=s||e[t],"function"!=typeof s?n:Ember.wrap(n,s)}function u(e,t,n,r){var i=r[t]||e[t];return i?"function"==typeof i.concat?i.concat(n):Ember.makeArray(i).concat(n):Ember.makeArray(n)}function a(e,t,r,i,a,f,l){if(r instanceof Ember.Descriptor){if(r===w&&a[t])return A;r.func&&(r=s(i,t,r,f,a)),a[t]=r,f[t]=void 0}else n(r)?r=o(e,t,r,f,a):(l&&x.call(l,t)>=0||"concatenatedProperties"===t)&&(r=u(e,t,r,f)),a[t]=void 0,f[t]=r}function f(e,t,n,s,o,u){function l(e){delete n[e],delete s[e]}for(var c,h,p,d,v,m=0,g=e.length;g>m;m++)if(c=e[m],h=r(t,c),h!==A)if(h){v=Ember.meta(o),d=i(h,s,o);for(p in h)h.hasOwnProperty(p)&&(u.push(p),a(o,p,h[p],v,n,s,d));h.hasOwnProperty("toString")&&(o.toString=h.toString)}else c.mixins&&(f(c.mixins,t,n,s,o,u),c._without&&T.call(c._without,l))}function l(e,t,n,r){if(O.test(t)){var i=r.bindings;i?r.hasOwnProperty("bindings")||(i=r.bindings=C(r.bindings)):i=r.bindings={},i[t]=n}}function c(e,t){var n,r,i,s=t.bindings;if(s){for(n in s)r=s[n],r&&(i=n.slice(0,-7),r instanceof Ember.Binding?(r=r.copy(),r.to(i)):r=new Ember.Binding(i,r),r.connect(e),e[n]=r);t.bindings={}}}function h(e,t){return c(e,t||Ember.meta(e)),e}function p(e,t,n,r,i){var s,o=t.methodName;return r[o]||i[o]?(s=i[o],t=r[o]):n.descs[o]?(t=n.descs[o],s=void 0):(t=void 0,s=e[o]),{desc:t,value:s}}function d(e,t,n,r,i){if("function"==typeof n){var s=n[r];if(s)for(var o=0,u=s.length;u>o;o++)Ember[i](e,s[o],null,t)}}function v(e,t,n){var r=e[t];d(e,t,r,"__ember_observesBefore__","removeBeforeObserver"),d(e,t,r,"__ember_observes__","removeObserver"),d(e,t,n,"__ember_observesBefore__","addBeforeObserver"),d(e,t,n,"__ember_observes__","addObserver")}function m(t,n,r){var i,s,o,u={},a={},c=Ember.meta(t),d=[];f(n,e(t),u,a,t,d);for(var m=0,g=d.length;g>m;m++)if(i=d[m],"constructor"!==i&&a.hasOwnProperty(i)&&(o=u[i],s=a[i],o!==w)){for(;o&&o instanceof E;){var y=p(t,o,c,u,a);o=y.desc,s=y.value}(void 0!==o||void 0!==s)&&(v(t,i,s),l(t,i,s,c),k(t,i,o,s,c))}return r||h(t,c),t}function g(e,t,n){var r=L(e);if(n[r])return!1;if(n[r]=!0,e===t)return!0;for(var i=e.mixins,s=i?i.length:0;--s>=0;)if(g(i[s],t,n))return!0;return!1}function y(e,t,n){if(!n[L(t)])if(n[L(t)]=!0,t.properties){var r=t.properties;for(var i in r)r.hasOwnProperty(i)&&(e[i]=!0)}else t.mixins&&T.call(t.mixins,function(t){y(e,t,n)})}var b,w,E,S=Ember.ArrayPolyfills.map,x=Ember.ArrayPolyfills.indexOf,T=Ember.ArrayPolyfills.forEach,N=[].slice,C=Ember.create,k=Ember.defineProperty,L=Ember.guidFor,A={},O=Ember.IS_BINDING=/^.+Binding$/;Ember.mixin=function(e){var t=N.call(arguments,1);return m(e,t,!1),e},Ember.Mixin=function(){return t(this,arguments)},b=Ember.Mixin,b.prototype={properties:null,mixins:null,ownerConstructor:null},b._apply=m,b.applyPartial=function(e){var t=N.call(arguments,1);return m(e,t,!0)},b.finishPartial=h,Ember.anyUnprocessedMixins=!1,b.create=function(){Ember.anyUnprocessedMixins=!0;var e=this;return t(new e,arguments)};var M=b.prototype;M.reopen=function(){var e,t;this.properties?(e=b.create(),e.properties=this.properties,delete this.properties,this.mixins=[e]):this.mixins||(this.mixins=[]);var n,r=arguments.length,i=this.mixins;for(n=0;r>n;n++)e=arguments[n],e instanceof b?i.push(e):(t=b.create(),t.properties=e,i.push(t));return this},M.apply=function(e){return m(e,[this],!1)},M.applyPartial=function(e){return m(e,[this],!0)},M.detect=function(e){if(!e)return!1;if(e instanceof b)return g(e,this,{});var t=Ember.meta(e,!1).mixins;return t?!!t[L(this)]:!1},M.without=function(){var e=new b(this);return e._without=N.call(arguments),e},M.keys=function(){var e={},t={},n=[];y(e,this,t);for(var r in e)e.hasOwnProperty(r)&&n.push(r);return n},b.mixins=function(e){var t=Ember.meta(e,!1).mixins,n=[];if(!t)return n;for(var r in t){var i=t[r];i.properties||n.push(i)}return n},w=new Ember.Descriptor,w.toString=function(){return"(Required Property)"},Ember.required=function(){return w},E=function(e){this.methodName=e},E.prototype=new Ember.Descriptor,Ember.alias=function(e){return new E(e)},Ember.alias=Ember.deprecateFunc("Ember.alias is deprecated. Please use Ember.aliasMethod or Ember.computed.alias instead.",Ember.alias),Ember.aliasMethod=function(e){return new E(e)},Ember.observer=function(e){var t=N.call(arguments,1);return e.__ember_observes__=t,e},Ember.immediateObserver=function(){for(var e=0,t=arguments.length;t>e;e++)arguments[e];return Ember.observer.apply(this,arguments)},Ember.beforeObserver=function(e){var t=N.call(arguments,1);return e.__ember_observesBefore__=t,e}}(),function(){e("rsvp",[],function(){function e(e,t){r.async(function(){e.trigger("promise:resolved",{detail:t}),e.isResolved=!0,e.resolvedValue=t})}function t(e,t){r.async(function(){e.trigger("promise:failed",{detail:t}),e.isRejected=!0,e.rejectedValue=t})}function n(e){var t,n=[],r=new d,i=e.length;0===i&&r.resolve([]);var s=function(e){return function(t){o(e,t)}},o=function(e,t){n[e]=t,0===--i&&r.resolve(n)},u=function(e){r.reject(e)};for(t=0;i>t;t++)e[t].then(s(t),u);return r}var r,i,s="undefined"!=typeof window?window:{},o=s.MutationObserver||s.WebKitMutationObserver;if("undefined"!=typeof process&&"[object process]"==={}.toString.call(process))i=function(e,t){process.nextTick(function(){e.call(t)})};else if(o){var u=[],a=new o(function(){var e=u.slice();u=[],e.forEach(function(e){var t=e[0],n=e[1];t.call(n)})}),f=document.createElement("div");a.observe(f,{attributes:!0}),window.addEventListener("unload",function(){a.disconnect(),a=null}),i=function(e,t){u.push([e,t]),f.setAttribute("drainQueue","drainQueue")}}else i=function(e,t){setTimeout(function(){e.call(t)},1)};var l=function(e,t){this.type=e;for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])},c=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n][0]===t)return n;return-1},h=function(e){var t=e._promiseCallbacks;return t||(t=e._promiseCallbacks={}),t},p={mixin:function(e){return e.on=this.on,e.off=this.off,e.trigger=this.trigger,e},on:function(e,t,n){var r,i,s=h(this);for(e=e.split(/\s+/),n=n||this;i=e.shift();)r=s[i],r||(r=s[i]=[]),-1===c(r,t)&&r.push([t,n])},off:function(e,t){var n,r,i,s=h(this);for(e=e.split(/\s+/);r=e.shift();)t?(n=s[r],i=c(n,t),-1!==i&&n.splice(i,1)):s[r]=[]},trigger:function(e,t){var n,r,i,s,o,u=h(this);if(n=u[e])for(var a=0;n.length>a;a++)r=n[a],i=r[0],s=r[1],"object"!=typeof t&&(t={detail:t}),o=new l(e,t),i.call(s,o)}},d=function(){this.on("promise:resolved",function(e){this.trigger("success",{detail:e.detail})},this),this.on("promise:failed",function(e){this.trigger("error",{detail:e.detail})},this)},v=function(){},m=function(e,t,n,r){var i,s,o,u,a="function"==typeof n;if(a)try{i=n(r.detail),o=!0}catch(f){u=!0,s=f}else i=r.detail,o=!0;i&&"function"==typeof i.then?i.then(function(e){t.resolve(e)},function(e){t.reject(e)}):a&&o?t.resolve(i):u?t.reject(s):t[e](i)};return d.prototype={then:function(e,t){var n=new d;return this.isResolved&&r.async(function(){m("resolve",n,e,{detail:this.resolvedValue})},this),this.isRejected&&r.async(function(){m("reject",n,t,{detail:this.rejectedValue})},this),this.on("promise:resolved",function(t){m("resolve",n,e,t)}),this.on("promise:failed",function(e){m("reject",n,t,e)}),n},resolve:function(t){e(this,t),this.resolve=v,this.reject=v},reject:function(e){t(this,e),this.resolve=v,this.reject=v}},p.mixin(d.prototype),r={async:i,Promise:d,Event:l,EventTarget:p,all:n,raiseOnUncaughtExceptions:!0}})}(),function(){e("container",[],function(){function e(e){this.parent=e,this.dict={}}function t(t){this.parent=t,this.children=[],this.resolver=t&&t.resolver||function(){},this.registry=new e(t&&t.registry),this.cache=new e(t&&t.cache),this.typeInjections=new e(t&&t.typeInjections),this.injections={},this._options=new e(t&&t._options),this._typeOptions=new e(t&&t._typeOptions)}function n(e){throw new Error(e+" is not currently supported on child containers")}function r(e,t){var n=s(e,t,"singleton");return n!==!1}function i(e,t){var n={};if(!t)return n;for(var r,i,s=0,o=t.length;o>s;s++)r=t[s],i=e.lookup(r.fullName),n[r.property]=i;return n}function s(e,t,n){var r=e._options.get(t);if(r&&void 0!==r[n])return r[n];var i=t.split(":")[0];return r=e._typeOptions.get(i),r?r[n]:void 0}function o(e,t){var n=e.normalize(t);return e.resolve(n)}function u(e,t){var n,r=o(e,t),u=t.split(":"),a=u[0];if(s(e,t,"instantiate")===!1)return r;if(r){var f=[];f=f.concat(e.typeInjections.get(a)||[]),f=f.concat(e.injections[t]||[]);var l=i(e,f);return l.container=e,l._debugContainerKey=t,n=r.create(l)}}function a(e,t){e.cache.eachLocal(function(n,r){s(e,n,"instantiate")!==!1&&t(r)})}function f(e){e.cache.eachLocal(function(t,n){s(e,t,"instantiate")!==!1&&n.destroy()}),e.cache.dict={}}return e.prototype={get:function(e){var t=this.dict;return t.hasOwnProperty(e)?t[e]:this.parent?this.parent.get(e):void 0},set:function(e,t){this.dict[e]=t},has:function(e){var t=this.dict;return t.hasOwnProperty(e)?!0:this.parent?this.parent.has(e):!1},eachLocal:function(e,t){var n=this.dict;for(var r in n)n.hasOwnProperty(r)&&e.call(t,r,n[r])}},t.prototype={child:function(){var e=new t(this);return this.children.push(e),e},set:function(e,t,n){e[t]=n},register:function(e,t,n,r){var i;-1!==e.indexOf(":")?(r=n,n=t,i=e):i=e+":"+t;var s=this.normalize(i);this.registry.set(s,n),this._options.set(s,r||{})},resolve:function(e){return this.resolver(e)||this.registry.get(e)},normalize:function(e){return e},lookup:function(e,t){if(e=this.normalize(e),t=t||{},this.cache.has(e)&&t.singleton!==!1)return this.cache.get(e);var n=u(this,e);return n?(r(this,e)&&t.singleton!==!1&&this.cache.set(e,n),n):void 0},has:function(e){return this.cache.has(e)?!0:!!o(this,e)},optionsForType:function(e,t){this.parent&&n("optionsForType"),this._typeOptions.set(e,t)},options:function(e,t){this.optionsForType(e,t)},typeInjection:function(e,t,r){this.parent&&n("typeInjection");var i=this.typeInjections.get(e);i||(i=[],this.typeInjections.set(e,i)),i.push({property:t,fullName:r})},injection:function(e,t,r){if(this.parent&&n("injection"),-1===e.indexOf(":"))return this.typeInjection(e,t,r);var i=this.injections[e]=this.injections[e]||[];i.push({property:t,fullName:r})},destroy:function(){this.isDestroyed=!0;for(var e=0,t=this.children.length;t>e;e++)this.children[e].destroy();this.children=[],a(this,function(e){e.isDestroying=!0}),a(this,function(e){e.destroy()}),delete this.parent,this.isDestroyed=!0},reset:function(){for(var e=0,t=this.children.length;t>e;e++)f(this.children[e]);f(this)}},t})}(),function(){function e(n,r,i,s){var o,u,a;if("object"!=typeof n||null===n)return n;if(r&&(u=t(i,n))>=0)return s[u];if("array"===Ember.typeOf(n)){if(o=n.slice(),r)for(u=o.length;--u>=0;)o[u]=e(o[u],r,i,s)}else if(Ember.Copyable&&Ember.Copyable.detect(n))o=n.copy(r,i,s);else{o={};for(a in n)n.hasOwnProperty(a)&&"__"!==a.substring(0,2)&&(o[a]=r?e(n[a],r,i,s):n[a])}return r&&(i.push(n),s.push(o)),o}var t=Ember.EnumerableUtils.indexOf;Ember.compare=function r(e,t){if(e===t)return 0;var n=Ember.typeOf(e),i=Ember.typeOf(t),s=Ember.Comparable;if(s){if("instance"===n&&s.detect(e.constructor))return e.constructor.compare(e,t);if("instance"===i&&s.detect(t.constructor))return 1-t.constructor.compare(t,e)}var o=Ember.ORDER_DEFINITION_MAPPING;if(!o){var u=Ember.ORDER_DEFINITION;o=Ember.ORDER_DEFINITION_MAPPING={};var a,f;for(a=0,f=u.length;f>a;++a)o[u[a]]=a;delete Ember.ORDER_DEFINITION}var l=o[n],c=o[i];if(c>l)return-1;if(l>c)return 1;switch(n){case"boolean":case"number":return t>e?-1:e>t?1:0;case"string":var h=e.localeCompare(t);return 0>h?-1:h>0?1:0;case"array":for(var p=e.length,d=t.length,v=Math.min(p,d),m=0,g=0;0===m&&v>g;)m=r(e[g],t[g]),g++;return 0!==m?m:d>p?-1:p>d?1:0;case"instance":return Ember.Comparable&&Ember.Comparable.detect(e)?e.compare(e,t):0;case"date":var y=e.getTime(),b=t.getTime();return b>y?-1:y>b?1:0;default:return 0}},Ember.copy=function(t,n){return"object"!=typeof t||null===t?t:Ember.Copyable&&Ember.Copyable.detect(t)?t.copy(n):e(t,n,n?[]:null,n?[]:null)},Ember.inspect=function(e){if("object"!=typeof e||null===e)return e+"";var t,n=[];for(var r in e)if(e.hasOwnProperty(r)){if(t=e[r],"toString"===t)continue;"function"===Ember.typeOf(t)&&(t="function() { ... }"),n.push(r+": "+t)}return"{"+n.join(", ")+"}"},Ember.isEqual=function(e,t){return e&&"function"==typeof e.isEqual?e.isEqual(t):e===t},Ember.ORDER_DEFINITION=Ember.ENV.ORDER_DEFINITION||["undefined","null","boolean","number","string","array","object","instance","function","class","date"],Ember.keys=Object.keys,Ember.keys||(Ember.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t});var n=["description","fileName","lineNumber","message","name","number","stack"];Ember.Error=function(){for(var e=Error.prototype.constructor.apply(this,arguments),t=0;n.length>t;t++)this[n[t]]=e[n[t]]},Ember.Error.prototype=Ember.create(Error.prototype)}(),function(){Ember.RSVP=t("rsvp")}(),function(){var e=/[ _]/g,t={},n=/([a-z])([A-Z])/g,r=/(\-|_|\.|\s)+(.)?/g,i=/([a-z\d])([A-Z]+)/g,s=/\-|\s+/g;Ember.STRINGS={},Ember.String={fmt:function(e,t){var n=0;return e.replace(/%@([0-9]+)?/g,function(e,r){return r=r?parseInt(r,0)-1:n++,e=t[r],(null===e?"(null)":void 0===e?"":e).toString()})},loc:function(e,t){return e=Ember.STRINGS[e]||e,Ember.String.fmt(e,t)},w:function(e){return e.split(/\s+/)},decamelize:function(e){return e.replace(n,"$1_$2").toLowerCase()},dasherize:function(n){var r,i=t,s=i.hasOwnProperty(n);return s?i[n]:(r=Ember.String.decamelize(n).replace(e,"-"),i[n]=r,r)},camelize:function(e){return e.replace(r,function(e,t,n){return n?n.toUpperCase():""}).replace(/^([A-Z])/,function(e){return e.toLowerCase()})},classify:function(e){for(var t=e.split("."),n=[],r=0,i=t.length;i>r;r++){var s=Ember.String.camelize(t[r]);n.push(s.charAt(0).toUpperCase()+s.substr(1))}return n.join(".")},underscore:function(e){return e.replace(i,"$1_$2").replace(s,"_").toLowerCase()},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substr(1)}}}(),function(){var e=Ember.String.fmt,t=Ember.String.w,n=Ember.String.loc,r=Ember.String.camelize,i=Ember.String.decamelize,s=Ember.String.dasherize,o=Ember.String.underscore,u=Ember.String.capitalize,a=Ember.String.classify;(Ember.EXTEND_PROTOTYPES===!0||Ember.EXTEND_PROTOTYPES.String)&&(String.prototype.fmt=function(){return e(this,arguments)},String.prototype.w=function(){return t(this)},String.prototype.loc=function(){return n(this,arguments)},String.prototype.camelize=function(){return r(this)},String.prototype.decamelize=function(){return i(this)},String.prototype.dasherize=function(){return s(this)},String.prototype.underscore=function(){return o(this)},String.prototype.classify=function(){return a(this)},String.prototype.capitalize=function(){return u(this)})}(),function(){var e=Array.prototype.slice;(Ember.EXTEND_PROTOTYPES===!0||Ember.EXTEND_PROTOTYPES.Function)&&(Function.prototype.property=function(){var e=Ember.computed(this);return e.property.apply(e,arguments)},Function.prototype.observes=function(){return this.__ember_observes__=e.call(arguments),this},Function.prototype.observesBefore=function(){return this.__ember_observesBefore__=e.call(arguments),this})}(),function(){function e(){return 0===u.length?{}:u.pop()}function t(e){return u.push(e),null}function n(e,t){function n(n){var s=r(n,e);return i?t===s:!!s}var i=2===arguments.length;return n}var r=Ember.get,i=Ember.set,s=Array.prototype.slice,o=Ember.EnumerableUtils.indexOf,u=[];Ember.Enumerable=Ember.Mixin.create({isEnumerable:!0,nextObject:Ember.required(Function),firstObject:Ember.computed(function(){if(0===r(this,"length"))return void 0;var n,i=e();return n=this.nextObject(0,null,i),t(i),n}).property("[]"),lastObject:Ember.computed(function(){var n=r(this,"length");if(0===n)return void 0;var i,s=e(),o=0,u=null;do u=i,i=this.nextObject(o++,u,s);while(void 0!==i);return t(s),u}).property("[]"),contains:function(e){return void 0!==this.find(function(t){return t===e})},forEach:function(n,i){if("function"!=typeof n)throw new TypeError;var s=r(this,"length"),o=null,u=e();void 0===i&&(i=null);for(var a=0;s>a;a++){var f=this.nextObject(a,o,u);n.call(i,f,a,this),o=f}return o=null,u=t(u),this},getEach:function(e){return this.mapProperty(e)},setEach:function(e,t){return this.forEach(function(n){i(n,e,t)})},map:function(e,t){var n=Ember.A([]);return this.forEach(function(r,i,s){n[i]=e.call(t,r,i,s)}),n},mapProperty:function(e){return this.map(function(t){return r(t,e)})},filter:function(e,t){var n=Ember.A([]);return this.forEach(function(r,i,s){e.call(t,r,i,s)&&n.push(r)}),n},reject:function(e,t){return this.filter(function(){return!e.apply(t,arguments)})},filterProperty:function(){return this.filter(n.apply(this,arguments))},rejectProperty:function(e,t){var n=function(n){return r(n,e)===t},i=function(t){return!!r(t,e)},s=2===arguments.length?n:i;return this.reject(s)},find:function(n,i){var s=r(this,"length");void 0===i&&(i=null);for(var o,u,a=null,f=!1,l=e(),c=0;s>c&&!f;c++)o=this.nextObject(c,a,l),(f=n.call(i,o,c,this))&&(u=o),a=o;return o=a=null,l=t(l),u},findProperty:function(){return this.find(n.apply(this,arguments))},every:function(e,t){return!this.find(function(n,r,i){return!e.call(t,n,r,i)})},everyProperty:function(){return this.every(n.apply(this,arguments))},some:function(e,t){return!!this.find(function(n,r,i){return!!e.call(t,n,r,i)})},someProperty:function(){return this.some(n.apply(this,arguments))},reduce:function(e,t,n){if("function"!=typeof e)throw new TypeError;var r=t;return this.forEach(function(t,i){r=e.call(null,r,t,i,this,n)},this),r},invoke:function(e){var t,n=Ember.A([]);return arguments.length>1&&(t=s.call(arguments,1)),this.forEach(function(r,i){var s=r&&r[e];"function"==typeof s&&(n[i]=t?s.apply(r,t):s.call(r))},this),n},toArray:function(){var e=Ember.A([]);return this.forEach(function(t,n){e[n]=t}),e},compact:function(){return this.filter(function(e){return null!=e})},without:function(e){if(!this.contains(e))return this;var t=Ember.A([]);return this.forEach(function(n){n!==e&&(t[t.length]=n)}),t},uniq:function(){var e=Ember.A([]);return this.forEach(function(t){0>o(e,t)&&e.push(t)}),e},"[]":Ember.computed(function(){return this}),addEnumerableObserver:function(e,t){var n=t&&t.willChange||"enumerableWillChange",i=t&&t.didChange||"enumerableDidChange",s=r(this,"hasEnumerableObservers");return s||Ember.propertyWillChange(this,"hasEnumerableObservers"),Ember.addListener(this,"@enumerable:before",e,n),Ember.addListener(this,"@enumerable:change",e,i),s||Ember.propertyDidChange(this,"hasEnumerableObservers"),this},removeEnumerableObserver:function(e,t){var n=t&&t.willChange||"enumerableWillChange",i=t&&t.didChange||"enumerableDidChange",s=r(this,"hasEnumerableObservers");return s&&Ember.propertyWillChange(this,"hasEnumerableObservers"),Ember.removeListener(this,"@enumerable:before",e,n),Ember.removeListener(this,"@enumerable:change",e,i),s&&Ember.propertyDidChange(this,"hasEnumerableObservers"),this},hasEnumerableObservers:Ember.computed(function(){return Ember.hasListeners(this,"@enumerable:change")||Ember.hasListeners(this,"@enumerable:before")}),enumerableContentWillChange:function(e,t){var n,i,s;return n="number"==typeof e?e:e?r(e,"length"):e=-1,i="number"==typeof t?t:t?r(t,"length"):t=-1,s=0>i||0>n||0!==i-n,-1===e&&(e=null),-1===t&&(t=null),Ember.propertyWillChange(this,"[]"),s&&Ember.propertyWillChange(this,"length"),Ember.sendEvent(this,"@enumerable:before",[this,e,t]),this},enumerableContentDidChange:function(e,t){var n,i,s;return n="number"==typeof e?e:e?r(e,"length"):e=-1,i="number"==typeof t?t:t?r(t,"length"):t=-1,s=0>i||0>n||0!==i-n,-1===e&&(e=null),-1===t&&(t=null),Ember.sendEvent(this,"@enumerable:change",[this,e,t]),s&&Ember.propertyDidChange(this,"length"),Ember.propertyDidChange(this,"[]"),this}})}(),function(){function e(e){return null===e||void 0===e}var t=Ember.get,n=(Ember.set,Ember.EnumerableUtils.map),r=Ember.cacheFor;Ember.Array=Ember.Mixin.create(Ember.Enumerable,{isSCArray:!0,length:Ember.required(),objectAt:function(e){return 0>e||e>=t(this,"length")?void 0:t(this,e)},objectsAt:function(e){var t=this;return n(e,function(e){return t.objectAt(e)})},nextObject:function(e){return this.objectAt(e)},"[]":Ember.computed(function(e,n){return void 0!==n&&this.replace(0,t(this,"length"),n),this}),firstObject:Ember.computed(function(){return this.objectAt(0)}),lastObject:Ember.computed(function(){return this.objectAt(t(this,"length")-1)}),contains:function(e){return this.indexOf(e)>=0},slice:function(n,r){var i=Ember.A([]),s=t(this,"length");for(e(n)&&(n=0),(e(r)||r>s)&&(r=s),0>n&&(n=s+n),0>r&&(r=s+r);r>n;)i[i.length]=this.objectAt(n++);return i},indexOf:function(e,n){var r,i=t(this,"length");for(void 0===n&&(n=0),0>n&&(n+=i),r=n;i>r;r++)if(this.objectAt(r,!0)===e)return r;return-1},lastIndexOf:function(e,n){var r,i=t(this,"length");for((void 0===n||n>=i)&&(n=i-1),0>n&&(n+=i),r=n;r>=0;r--)if(this.objectAt(r)===e)return r;return-1},addArrayObserver:function(e,n){var r=n&&n.willChange||"arrayWillChange",i=n&&n.didChange||"arrayDidChange",s=t(this,"hasArrayObservers");return s||Ember.propertyWillChange(this,"hasArrayObservers"),Ember.addListener(this,"@array:before",e,r),Ember.addListener(this,"@array:change",e,i),s||Ember.propertyDidChange(this,"hasArrayObservers"),this},removeArrayObserver:function(e,n){var r=n&&n.willChange||"arrayWillChange",i=n&&n.didChange||"arrayDidChange",s=t(this,"hasArrayObservers");return s&&Ember.propertyWillChange(this,"hasArrayObservers"),Ember.removeListener(this,"@array:before",e,r),Ember.removeListener(this,"@array:change",e,i),s&&Ember.propertyDidChange(this,"hasArrayObservers"),this},hasArrayObservers:Ember.computed(function(){return Ember.hasListeners(this,"@array:change")||Ember.hasListeners(this,"@array:before")}),arrayContentWillChange:function(e,n,r){void 0===e?(e=0,n=r=-1):(void 0===n&&(n=-1),void 0===r&&(r=-1)),Ember.isWatching(this,"@each")&&t(this,"@each"),Ember.sendEvent(this,"@array:before",[this,e,n,r]);var i,s;if(e>=0&&n>=0&&t(this,"hasEnumerableObservers")){i=[],s=e+n;for(var o=e;s>o;o++)i.push(this.objectAt(o))}else i=n;return this.enumerableContentWillChange(i,r),this},arrayContentDidChange:function(e,n,i){void 0===e?(e=0,n=i=-1):(void 0===n&&(n=-1),void 0===i&&(i=-1));var s,o;if(e>=0&&i>=0&&t(this,"hasEnumerableObservers")){s=[],o=e+i;for(var u=e;o>u;u++)s.push(this.objectAt(u))}else s=i;this.enumerableContentDidChange(n,s),Ember.sendEvent(this,"@array:change",[this,e,n,i]);var a=t(this,"length"),f=r(this,"firstObject"),l=r(this,"lastObject");return this.objectAt(0)!==f&&(Ember.propertyWillChange(this,"firstObject"),Ember.propertyDidChange(this,"firstObject")),this.objectAt(a-1)!==l&&(Ember.propertyWillChange(this,"lastObject"),Ember.propertyDidChange(this,"lastObject")),this},"@each":Ember.computed(function(){return this.__each||(this.__each=new Ember.EachProxy(this)),this.__each})})}(),function(){Ember.Comparable=Ember.Mixin.create({isComparable:!0,compare:Ember.required(Function)})}(),function(){var e=Ember.get;Ember.set,Ember.Copyable=Ember.Mixin.create({copy:Ember.required(Function),frozenCopy:function(){if(Ember.Freezable&&Ember.Freezable.detect(this))return e(this,"isFrozen")?this:this.copy().freeze();throw new Error(Ember.String.fmt("%@ does not support freezing",[this]))}})}(),function(){var e=Ember.get,t=Ember.set;Ember.Freezable=Ember.Mixin.create({isFrozen:!1,freeze:function(){return e(this,"isFrozen")?this:(t(this,"isFrozen",!0),this)}}),Ember.FROZEN_ERROR="Frozen object cannot be modified."}(),function(){var e=Ember.EnumerableUtils.forEach;Ember.MutableEnumerable=Ember.Mixin.create(Ember.Enumerable,{addObject:Ember.required(Function),addObjects:function(t){return Ember.beginPropertyChanges(this),e(t,function(e){this.addObject(e)},this),Ember.endPropertyChanges(this),this},removeObject:Ember.required(Function),removeObjects:function(t){return Ember.beginPropertyChanges(this),e(t,function(e){this.removeObject(e)},this),Ember.endPropertyChanges(this),this}})}(),function(){var e="Index out of range",t=[],n=Ember.get;Ember.set,Ember.MutableArray=Ember.Mixin.create(Ember.Array,Ember.MutableEnumerable,{replace:Ember.required(),clear:function(){var e=n(this,"length");return 0===e?this:(this.replace(0,e,t),this)},insertAt:function(t,i){if(t>n(this,"length"))throw new Error(e);return this.replace(t,0,[i]),this},removeAt:function(i,s){if("number"==typeof i){if(0>i||i>=n(this,"length"))throw new Error(e);void 0===s&&(s=1),this.replace(i,s,t)}return this},pushObject:function(e){return this.insertAt(n(this,"length"),e),e},pushObjects:function(e){return this.replace(n(this,"length"),0,e),this},popObject:function(){var e=n(this,"length");if(0===e)return null;var t=this.objectAt(e-1);return this.removeAt(e-1,1),t},shiftObject:function(){if(0===n(this,"length"))return null;var e=this.objectAt(0);return this.removeAt(0),e},unshiftObject:function(e){return this.insertAt(0,e),e},unshiftObjects:function(e){return this.replace(0,0,e),this},reverseObjects:function(){var e=n(this,"length");if(0===e)return this;var t=this.toArray().reverse();return this.replace(0,e,t),this},setObjects:function(e){if(0===e.length)return this.clear();var t=n(this,"length");return this.replace(0,t,e),this},removeObject:function(e){for(var t=n(this,"length")||0;--t>=0;){var i=this.objectAt(t);i===e&&this.removeAt(t)}return this},addObject:function(e){return this.contains(e)||this.pushObject(e),this}})}(),function(){var e=Ember.get,t=Ember.set;Ember.Observable=Ember.Mixin.create({get:function(t){return e(this,t)},getProperties:function(){var t={},n=arguments;1===arguments.length&&"array"===Ember.typeOf(arguments[0])&&(n=arguments[0]);for(var r=0;n.length>r;r++)t[n[r]]=e(this,n[r]);return t},set:function(e,n){return t(this,e,n),this},setProperties:function(e){return Ember.setProperties(this,e)},beginPropertyChanges:function(){return Ember.beginPropertyChanges(),this},endPropertyChanges:function(){return Ember.endPropertyChanges(),this},propertyWillChange:function(e){return Ember.propertyWillChange(this,e),this},propertyDidChange:function(e){return Ember.propertyDidChange(this,e),this},notifyPropertyChange:function(e){return this.propertyWillChange(e),this.propertyDidChange(e),this},addBeforeObserver:function(e,t,n){Ember.addBeforeObserver(this,e,t,n)},addObserver:function(e,t,n){Ember.addObserver(this,e,t,n)},removeObserver:function(e,t,n){Ember.removeObserver(this,e,t,n)},hasObserverFor:function(e){return Ember.hasListeners(this,e+":change")},getPath:function(e){return this.get(e)},setPath:function(e,t){return this.set(e,t)},getWithDefault:function(e,t){return Ember.getWithDefault(this,e,t)},incrementProperty:function(n,r){return r||(r=1),t(this,n,(e(this,n)||0)+r),e(this,n)},decrementProperty:function(n,r){return r||(r=1),t(this,n,(e(this,n)||0)-r),e(this,n)},toggleProperty:function(n){return t(this,n,!e(this,n)),e(this,n)},cacheFor:function(e){return Ember.cacheFor(this,e)},observersForKey:function(e){return Ember.observersFor(this,e)}})}(),function(){var e=Ember.get;Ember.set,Ember.TargetActionSupport=Ember.Mixin.create({target:null,action:null,actionContext:null,targetObject:Ember.computed(function(){var t=e(this,"target");if("string"===Ember.typeOf(t)){var n=e(this,t);return void 0===n&&(n=e(Ember.lookup,t)),n}return t}).property("target"),actionContextObject:Ember.computed(function(){var t=e(this,"actionContext");if("string"===Ember.typeOf(t)){var n=e(this,t);return void 0===n&&(n=e(Ember.lookup,t)),n}return t}).property("actionContext"),triggerAction:function(t){t=t||{};var n=t.action||e(this,"action"),r=t.target||e(this,"targetObject"),i=t.actionContext||e(this,"actionContextObject")||this;if(r&&n){var s;return s=r.send?r.send.apply(r,[n,i]):r[n].apply(r,[i]),s!==!1&&(s=!0),s}return!1}})}(),function(){Ember.Evented=Ember.Mixin.create({on:function(e,t,n){return Ember.addListener(this,e,t,n),this},one:function(e,t,n){return n||(n=t,t=null),Ember.addListener(this,e,t,n,!0),this},trigger:function(e){var t,n,r=[];for(t=1,n=arguments.length;n>t;t++)r.push(arguments[t]);Ember.sendEvent(this,e,r)},fire:function(){this.trigger.apply(this,arguments)},off:function(e,t,n){return Ember.removeListener(this,e,t,n),this},has:function(e){return Ember.hasListeners(this,e)}})}(),function(){var e=t("rsvp");e.async=function(e,t){Ember.run.schedule("actions",t,e)};var n=Ember.get;Ember.DeferredMixin=Ember.Mixin.create({then:function(){var e=n(this,"promise");return e.then.apply(e,arguments)},resolve:function(e){n(this,"promise").resolve(e)},reject:function(e){n(this,"promise").reject(e)},promise:Ember.computed(function(){return new e.Promise})})}(),function(){Ember.Container=t("container"),Ember.Container.set=Ember.set}(),function(){function e(){var e,t,s=!1,o=function(){s||o.proto(),r(this,i,y),r(this,"_super",y);var a=u(this);if(a.proto=this,e){var l=e;e=null,this.reopen.apply(this,l)}if(t){var c=t;t=null;for(var h=this.concatenatedProperties,p=0,v=c.length;v>p;p++){var b=c[p];for(var w in b)if(b.hasOwnProperty(w)){var S=b[w],x=Ember.IS_BINDING;if(x.test(w)){var T=a.bindings;T?a.hasOwnProperty("bindings")||(T=a.bindings=n(a.bindings)):T=a.bindings={},T[w]=S}var N=a.descs[w];if(h&&g(h,w)>=0){var C=this[w];S=C?"function"==typeof C.concat?C.concat(S):Ember.makeArray(C).concat(S):Ember.makeArray(S)}N?N.set(this,w,S):"function"!=typeof this.setUnknownProperty||w in this?m?Ember.defineProperty(this,w,null,S):this[w]=S:this.setUnknownProperty(w,S)}}}d(this,a),delete a.proto,f(this),this.init.apply(this,arguments)};return o.toString=h.prototype.toString,o.willReopen=function(){s&&(o.PrototypeMixin=h.create(o.PrototypeMixin)),s=!1},o._initMixins=function(t){e=t},o._initProperties=function(e){t=e},o.proto=function(){var e=o.superclass;return e&&e.proto(),s||(s=!0,o.PrototypeMixin.applyPartial(o.prototype),a(o.prototype)),this.prototype},o}function t(e){return function(){return e}}var n=(Ember.set,Ember.get,Ember.create),r=Ember.platform.defineProperty,i=Ember.GUID_KEY,s=Ember.guidFor,o=Ember.generateGuid,u=Ember.meta,a=Ember.rewatch,f=Ember.finishChains,l=Ember.destroy,c=Ember.run.schedule,h=Ember.Mixin,p=h._apply,d=h.finishPartial,v=h.prototype.reopen,m=Ember.ENV.MANDATORY_SETTER,g=Ember.EnumerableUtils.indexOf,y={configurable:!0,writable:!0,enumerable:!1,value:void 0},b=e();b.toString=function(){return"Ember.CoreObject"},b.PrototypeMixin=h.create({reopen:function(){return p(this,arguments,!0),this},isInstance:!0,init:function(){},concatenatedProperties:null,isDestroyed:!1,isDestroying:!1,destroy:function(){return this._didCallDestroy?void 0:(this.isDestroying=!0,this._didCallDestroy=!0,c("destroy",this,this._scheduledDestroy),this)},willDestroy:Ember.K,_scheduledDestroy:function(){this.willDestroy&&this.willDestroy(),l(this),this.isDestroyed=!0,this.didDestroy&&this.didDestroy()},bind:function(e,t){return t instanceof Ember.Binding||(t=Ember.Binding.from(t)),t.to(e).connect(this),t},toString:function(){var e="function"==typeof this.toStringExtension,n=e?":"+this.toStringExtension():"",r="<"+this.constructor.toString()+":"+s(this)+n+">";return this.toString=t(r),r}}),b.PrototypeMixin.ownerConstructor=b,Ember.config.overridePrototypeMixin&&Ember.config.overridePrototypeMixin(b.PrototypeMixin),b.__super__=null;var w=h.create({ClassMixin:Ember.required(),PrototypeMixin:Ember.required(),isClass:!0,isMethod:!1,extend:function(){var t,r=e();return r.ClassMixin=h.create(this.ClassMixin),r.PrototypeMixin=h.create(this.PrototypeMixin),r.ClassMixin.ownerConstructor=r,r.PrototypeMixin.ownerConstructor=r,v.apply(r.PrototypeMixin,arguments),r.superclass=this,r.__super__=this.prototype,t=r.prototype=n(this.prototype),t.constructor=r,o(t,"ember"),u(t).proto=t,r.ClassMixin.apply(r),r},createWithMixins:function(){var e=this;return arguments.length>0&&this._initMixins(arguments),new e},create:function(){var e=this;return arguments.length>0&&this._initProperties(arguments),new e},reopen:function(){return this.willReopen(),v.apply(this.PrototypeMixin,arguments),this},reopenClass:function(){return v.apply(this.ClassMixin,arguments),p(this,arguments,!1),this},detect:function(e){if("function"!=typeof e)return!1;for(;e;){if(e===this)return!0;e=e.superclass}return!1},detectInstance:function(e){return e instanceof this},metaForProperty:function(e){var t=u(this.proto(),!1).descs[e];return t._meta||{}},eachComputedProperty:function(e,t){var n,r=this.proto(),i=u(r).descs,s={};for(var o in i)n=i[o],n instanceof Ember.ComputedProperty&&e.call(t||this,o,n._meta||s)}});w.ownerConstructor=b,Ember.config.overrideClassMixin&&Ember.config.overrideClassMixin(w),b.ClassMixin=w,w.apply(b),Ember.CoreObject=b}(),function(){Ember.Object=Ember.CoreObject.extend(Ember.Observable),Ember.Object.toString=function(){return"Ember.Object"}}(),function(){function e(t,n,i){var o=t.length;f[t.join(".")]=n;for(var u in n)if(l.call(n,u)){var a=n[u];if(t[o]=u,a&&a.toString===r)a.toString=s(t.join(".")),a[h]=t.join(".");else if(a&&a.isNamespace){if(i[c(a)])continue;i[c(a)]=!0,e(t,a,i)}}t.length=o}function t(){var e,t,n=Ember.Namespace,r=Ember.lookup;if(!n.PROCESSED)for(var i in r)if("parent"!==i&&"top"!==i&&"frameElement"!==i&&"webkitStorageInfo"!==i&&!("globalStorage"===i&&r.StorageList&&r.globalStorage instanceof r.StorageList||r.hasOwnProperty&&!r.hasOwnProperty(i))){try{e=Ember.lookup[i],t=e&&e.isNamespace}catch(s){continue}t&&(e[h]=i)}}function n(e){var t=e.superclass;return t?t[h]?t[h]:n(t):void 0}function r(){Ember.BOOTED||this[h]||i();var e;if(this[h])e=this[h];else{var t=n(this);e=t?"(subclass of "+t+")":"(unknown mixin)",this.toString=s(e)}return e}function i(){var n=!a.PROCESSED,r=Ember.anyUnprocessedMixins;if(n&&(t(),a.PROCESSED=!0),n||r){for(var i,s=a.NAMESPACES,o=0,u=s.length;u>o;o++)i=s[o],e([i.toString()],i,{});Ember.anyUnprocessedMixins=!1}}function s(e){return function(){return e}}var o=Ember.get,u=Ember.ArrayPolyfills.indexOf,a=Ember.Namespace=Ember.Object.extend({isNamespace:!0,init:function(){Ember.Namespace.NAMESPACES.push(this),Ember.Namespace.PROCESSED=!1},toString:function(){var e=o(this,"name");return e?e:(t(),this[Ember.GUID_KEY+"_name"])},nameClasses:function(){e([this.toString()],this,{})},destroy:function(){var e=Ember.Namespace.NAMESPACES;Ember.lookup[this.toString()]=void 0,e.splice(u.call(e,this),1),this._super()}});a.reopenClass({NAMESPACES:[Ember],NAMESPACES_BY_ID:{},PROCESSED:!1,processAll:i,byName:function(e){return Ember.BOOTED||i(),f[e]}});var f=a.NAMESPACES_BY_ID,l={}.hasOwnProperty,c=Ember.guidFor,h=Ember.NAME_KEY=Ember.GUID_KEY+"_name";Ember.Mixin.prototype.toString=r}(),function(){Ember.Application=Ember.Namespace.extend()}(),function(){var e="Index out of range",t=[],n=Ember.get;Ember.set,Ember.ArrayProxy=Ember.Object.extend(Ember.MutableArray,{content:null,arrangedContent:Ember.computed.alias("content"),objectAtContent:function(e){return n(this,"arrangedContent").objectAt(e)},replaceContent:function(e,t,i){n(this,"content").replace(e,t,i)},_contentWillChange:Ember.beforeObserver(function(){this._teardownContent()},"content"),_teardownContent:function(){var e=n(this,"content");e&&e.removeArrayObserver(this,{willChange:"contentArrayWillChange",didChange:"contentArrayDidChange"})},contentArrayWillChange:Ember.K,contentArrayDidChange:Ember.K,_contentDidChange:Ember.observer(function(){n(this,"content"),this._setupContent()},"content"),_setupContent:function(){var e=n(this,"content");e&&e.addArrayObserver(this,{willChange:"contentArrayWillChange",didChange:"contentArrayDidChange"})},_arrangedContentWillChange:Ember.beforeObserver(function(){var e=n(this,"arrangedContent"),t=e?n(e,"length"):0;this.arrangedContentArrayWillChange(this,0,t,void 0),this.arrangedContentWillChange(this),this._teardownArrangedContent(e)},"arrangedContent"),_arrangedContentDidChange:Ember.observer(function(){var e=n(this,"arrangedContent"),t=e?n(e,"length"):0;this._setupArrangedContent(),this.arrangedContentDidChange(this),this.arrangedContentArrayDidChange(this,0,void 0,t)},"arrangedContent"),_setupArrangedContent:function(){var e=n(this,"arrangedContent");e&&e.addArrayObserver(this,{willChange:"arrangedContentArrayWillChange",didChange:"arrangedContentArrayDidChange"})},_teardownArrangedContent:function(){var e=n(this,"arrangedContent");e&&e.removeArrayObserver(this,{willChange:"arrangedContentArrayWillChange",didChange:"arrangedContentArrayDidChange"})},arrangedContentWillChange:Ember.K,arrangedContentDidChange:Ember.K,objectAt:function(e){return n(this,"content")&&this.objectAtContent(e)},length:Ember.computed(function(){var e=n(this,"arrangedContent");return e?n(e,"length"):0}),_replace:function(e,t,i){var s=n(this,"content");return s&&this.replaceContent(e,t,i),this},replace:function(){if(n(this,"arrangedContent")!==n(this,"content"))throw new Ember.Error("Using replace on an arranged ArrayProxy is not allowed.");this._replace.apply(this,arguments)},_insertAt:function(t,i){if(t>n(this,"content.length"))throw new Error(e);return this._replace(t,0,[i]),this},insertAt:function(e,t){if(n(this,"arrangedContent")===n(this,"content"))return this._insertAt(e,t);throw new Ember.Error("Using insertAt on an arranged ArrayProxy is not allowed.")},removeAt:function(i,s){if("number"==typeof i){var o,u=n(this,"content"),a=n(this,"arrangedContent"),f=[];if(0>i||i>=n(this,"length"))throw new Error(e);for(void 0===s&&(s=1),o=i;i+s>o;o++)f.push(u.indexOf(a.objectAt(o)));for(f.sort(function(e,t){return t-e}),Ember.beginPropertyChanges(),o=0;f.length>o;o++)this._replace(f[o],1,t);Ember.endPropertyChanges()}return this},pushObject:function(e){return this._insertAt(n(this,"content.length"),e),e},pushObjects:function(e){return this._replace(n(this,"length"),0,e),this},setObjects:function(e){if(0===e.length)return this.clear();var t=n(this,"length");return this._replace(0,t,e),this},unshiftObject:function(e){return this._insertAt(0,e),e},unshiftObjects:function(e){return this._replace(0,0,e),this},slice:function(){var e=this.toArray();return e.slice.apply(e,arguments)},arrangedContentArrayWillChange:function(e,t,n,r){this.arrayContentWillChange(t,n,r)},arrangedContentArrayDidChange:function(e,t,n,r){this.arrayContentDidChange(t,n,r)},init:function(){this._super(),this._setupContent(),this._setupArrangedContent()},willDestroy:function(){this._teardownArrangedContent(),this._teardownContent()}})}(),function(){function e(e,t){var n=t.slice(8);n in this||a(this,n)}function t(e,t){var n=t.slice(8);n in this||f(this,n)}var n=Ember.get,r=Ember.set,i=(Ember.String.fmt,Ember.addBeforeObserver),s=Ember.addObserver,o=Ember.removeBeforeObserver,u=Ember.removeObserver,a=Ember.propertyWillChange,f=Ember.propertyDidChange;Ember.ObjectProxy=Ember.Object.extend({content:null,_contentDidChange:Ember.observer(function(){},"content"),isTruthy:Ember.computed.bool("content"),_debugContainerKey:null,willWatchProperty:function(n){var r="content."+n;i(this,r,null,e),s(this,r,null,t)},didUnwatchProperty:function(n){var r="content."+n;o(this,r,null,e),u(this,r,null,t)},unknownProperty:function(e){var t=n(this,"content");return t?n(t,e):void 0},setUnknownProperty:function(e,t){var i=n(this,"content");return r(i,e,t)}}),Ember.ObjectProxy.reopenClass({create:function(){var e,t,n,r,i,s;if(arguments.length){for(t=this.proto(),n=0,r=arguments.length;r>n;n++){i=arguments[n];for(s in i)!i.hasOwnProperty(s)||s in t||(e||(e={}),e[s]=null)}e&&this._initMixins([e])}return this._super.apply(this,arguments)}})}(),function(){function e(e,t,n,i,s){var o,u=n._objects;for(u||(u=n._objects={});--s>=i;){var a=e.objectAt(s);a&&(Ember.addBeforeObserver(a,t,n,"contentKeyWillChange"),Ember.addObserver(a,t,n,"contentKeyDidChange"),o=r(a),u[o]||(u[o]=[]),u[o].push(s))}}function t(e,t,n,i,s){var o=n._objects;o||(o=n._objects={});for(var u,a;--s>=i;){var f=e.objectAt(s);f&&(Ember.removeBeforeObserver(f,t,n,"contentKeyWillChange"),Ember.removeObserver(f,t,n,"contentKeyDidChange"),a=r(f),u=o[a],u[u.indexOf(s)]=null)}}var n=(Ember.set,Ember.get),r=Ember.guidFor,i=Ember.EnumerableUtils.forEach,s=Ember.Object.extend(Ember.Array,{init:function(e,t,n){this._super(),this._keyName=t,this._owner=n,this._content=e},objectAt:function(e){var t=this._content.objectAt(e);return t&&n(t,this._keyName)},length:Ember.computed(function(){var e=this._content;return e?n(e,"length"):0})}),o=/^.+:(before|change)$/;Ember.EachProxy=Ember.Object.extend({init:function(e){this._super(),this._content=e,e.addArrayObserver(this),i(Ember.watchedEvents(this),function(e){this.didAddListener(e)},this)},unknownProperty:function(e){var t;return t=new s(this._content,e,this),Ember.defineProperty(this,e,null,t),this.beginObservingContentKey(e),t},arrayWillChange:function(e,n,r){var i,s,o=this._keys;s=r>0?n+r:-1,Ember.beginPropertyChanges(this);for(i in o)o.hasOwnProperty(i)&&(s>0&&t(e,i,this,n,s),Ember.propertyWillChange(this,i));Ember.propertyWillChange(this._content,"@each"),Ember.endPropertyChanges(this)},arrayDidChange:function(t,n,r,i){var s,o,u=this._keys;o=i>0?n+i:-1,Ember.beginPropertyChanges(this);for(s in u)u.hasOwnProperty(s)&&(o>0&&e(t,s,this,n,o),Ember.propertyDidChange(this,s));Ember.propertyDidChange(this._content,"@each"),Ember.endPropertyChanges(this)},didAddListener:function(e){o.test(e)&&this.beginObservingContentKey(e.slice(0,-7))},didRemoveListener:function(e){o.test(e)&&this.stopObservingContentKey(e.slice(0,-7))},beginObservingContentKey:function(t){var r=this._keys;if(r||(r=this._keys={}),r[t])r[t]++;else{r[t]=1;var i=this._content,s=n(i,"length");e(i,t,this,0,s)}},stopObservingContentKey:function(e){var r=this._keys;if(r&&r[e]>0&&0>=--r[e]){var i=this._content,s=n(i,"length");t(i,e,this,0,s)}},contentKeyWillChange:function(e,t){Ember.propertyWillChange(this,t)},contentKeyDidChange:function(e,t){Ember.propertyDidChange(this,t)}})}(),function(){var e=Ember.get;Ember.set;var t=Ember.Mixin.create(Ember.MutableArray,Ember.Observable,Ember.Copyable,{get:function(e){return"length"===e?this.length:"number"==typeof e?this[e]:this._super(e)},objectAt:function(e){return this[e]},replace:function(t,n,r){if(this.isFrozen)throw Ember.FROZEN_ERROR;var i=r?e(r,"length"):0;if(this.arrayContentWillChange(t,n,i),r&&0!==r.length){var s=[t,n].concat(r);this.splice.apply(this,s)}else this.splice(t,n);return this.arrayContentDidChange(t,n,i),this},unknownProperty:function(e,t){var n;return void 0!==t&&void 0===n&&(n=this[e]=t),n},indexOf:function(e,t){var n,r=this.length;for(t=void 0===t?0:0>t?Math.ceil(t):Math.floor(t),0>t&&(t+=r),n=t;r>n;n++)if(this[n]===e)return n;return-1},lastIndexOf:function(e,t){var n,r=this.length;for(t=void 0===t?r-1:0>t?Math.ceil(t):Math.floor(t),0>t&&(t+=r),n=t;n>=0;n--)if(this[n]===e)return n;return-1},copy:function(e){return e?this.map(function(e){return Ember.copy(e,!0)}):this.slice()}}),n=["length"];Ember.EnumerableUtils.forEach(t.keys(),function(e){Array.prototype[e]&&n.push(e)}),n.length>0&&(t=t.without.apply(t,n)),Ember.NativeArray=t,Ember.A=function(e){return void 0===e&&(e=[]),Ember.Array.detect(e)?e:Ember.NativeArray.apply(e)},Ember.NativeArray.activate=function(){t.apply(Array.prototype),Ember.A=function(e){return e||[]}},(Ember.EXTEND_PROTOTYPES===!0||Ember.EXTEND_PROTOTYPES.Array)&&Ember.NativeArray.activate()}(),function(){var e=Ember.get,t=Ember.set,n=Ember.guidFor,r=Ember.isNone,i=Ember.String.fmt;Ember.Set=Ember.CoreObject.extend(Ember.MutableEnumerable,Ember.Copyable,Ember.Freezable,{length:0,clear:function(){if(this.isFrozen)throw new Error(Ember.FROZEN_ERROR);var r=e(this,"length");if(0===r)return this;var i;this.enumerableContentWillChange(r,0),Ember.propertyWillChange(this,"firstObject"),Ember.propertyWillChange(this,"lastObject");for(var s=0;r>s;s++)i=n(this[s]),delete this[i],delete this[s];return t(this,"length",0),Ember.propertyDidChange(this,"firstObject"),Ember.propertyDidChange(this,"lastObject"),this.enumerableContentDidChange(r,0),this},isEqual:function(t){if(!Ember.Enumerable.detect(t))return!1;var n=e(this,"length");if(e(t,"length")!==n)return!1;for(;--n>=0;)if(!t.contains(this[n]))return!1;return!0},add:Ember.aliasMethod("addObject"),remove:Ember.aliasMethod("removeObject"),pop:function(){if(e(this,"isFrozen"))throw new Error(Ember.FROZEN_ERROR);var t=this.length>0?this[this.length-1]:null;return this.remove(t),t},push:Ember.aliasMethod("addObject"),shift:Ember.aliasMethod("pop"),unshift:Ember.aliasMethod("push"),addEach:Ember.aliasMethod("addObjects"),removeEach:Ember.aliasMethod("removeObjects"),init:function(e){this._super(),e&&this.addObjects(e)},nextObject:function(e){return this[e]},firstObject:Ember.computed(function(){return this.length>0?this[0]:void 0}),lastObject:Ember.computed(function(){return this.length>0?this[this.length-1]:void 0}),addObject:function(i){if(e(this,"isFrozen"))throw new Error(Ember.FROZEN_ERROR);if(r(i))return this;var s,o=n(i),u=this[o],a=e(this,"length");return u>=0&&a>u&&this[u]===i?this:(s=[i],this.enumerableContentWillChange(null,s),Ember.propertyWillChange(this,"lastObject"),a=e(this,"length"),this[o]=a,this[a]=i,t(this,"length",a+1),Ember.propertyDidChange(this,"lastObject"),this.enumerableContentDidChange(null,s),this)},removeObject:function(i){if(e(this,"isFrozen"))throw new Error(Ember.FROZEN_ERROR);if(r(i))return this;var s,o,u=n(i),a=this[u],f=e(this,"length"),l=0===a,c=a===f-1;return a>=0&&f>a&&this[a]===i&&(o=[i],this.enumerableContentWillChange(o,null),l&&Ember.propertyWillChange(this,"firstObject"),c&&Ember.propertyWillChange(this,"lastObject"),f-1>a&&(s=this[f-1],this[a]=s,this[n(s)]=a),delete this[u],delete this[f-1],t(this,"length",f-1),l&&Ember.propertyDidChange(this,"firstObject"),c&&Ember.propertyDidChange(this,"lastObject"),this.enumerableContentDidChange(o,null)),this},contains:function(e){return this[n(e)]>=0},copy:function(){var r=this.constructor,i=new r,s=e(this,"length");for(t(i,"length",s);--s>=0;)i[s]=this[s],i[n(this[s])]=s;return i},toString:function(){var e,t=this.length,n=[];for(e=0;t>e;e++)n[e]=this[e];return i("Ember.Set<%@>",[n.join(",")])}})}(),function(){var e=Ember.DeferredMixin,t=Ember.get,n=Ember.Object.extend(e);n.reopenClass({promise:function(e,i){var s=n.create();return e.call(i,s),t(s,"promise")}}),Ember.Deferred=n}(),function(){var e=Ember.ENV.EMBER_LOAD_HOOKS||{},t={};Ember.onLoad=function(n,r){var i;e[n]=e[n]||Ember.A(),e[n].pushObject(r),(i=t[n])&&r(i)},Ember.runLoadHooks=function(n,r){var i;t[n]=r,(i=e[n])&&e[n].forEach(function(e){e(r)})}}(),function(){var e=Ember.get;Ember.ControllerMixin=Ember.Mixin.create({isController:!0,target:null,container:null,store:null,model:Ember.computed.alias("content"),send:function(t){var n,r=[].slice.call(arguments,1);this[t]?this[t].apply(this,r):(n=e(this,"target"))&&n.send.apply(n,arguments)}}),Ember.Controller=Ember.Object.extend(Ember.ControllerMixin)}(),function(){var e=Ember.get,t=(Ember.set,Ember.EnumerableUtils.forEach);Ember.SortableMixin=Ember.Mixin.create(Ember.MutableEnumerable,{sortProperties:null,sortAscending:!0,orderBy:function(n,r){var i=0,s=e(this,"sortProperties"),o=e(this,"sortAscending");return t(s,function(t){0===i&&(i=Ember.compare(e(n,t),e(r,t)),0===i||o||(i=-1*i))}),i},destroy:function(){var n=e(this,"content"),r=e(this,"sortProperties");return n&&r&&t(n,function(e){t(r,function(t){Ember.removeObserver(e,t,this,"contentItemSortPropertyDidChange")},this)},this),this._super()},isSorted:Ember.computed.bool("sortProperties"),arrangedContent:Ember.computed("content","sortProperties.@each",function(){var n=e(this,"content"),r=e(this,"isSorted"),i=e(this,"sortProperties"),s=this;return n&&r?(n=n.slice(),n.sort(function(e,t){return s.orderBy(e,t)}),t(n,function(e){t(i,function(t){Ember.addObserver(e,t,this,"contentItemSortPropertyDidChange")},this)},this),Ember.A(n)):n}),_contentWillChange:Ember.beforeObserver(function(){var n=e(this,"content"),r=e(this,"sortProperties");n&&r&&t(n,function(e){t(r,function(t){Ember.removeObserver(e,t,this,"contentItemSortPropertyDidChange")},this)},this),this._super()},"content"),sortAscendingWillChange:Ember.beforeObserver(function(){this._lastSortAscending=e(this,"sortAscending")},"sortAscending"),sortAscendingDidChange:Ember.observer(function(){if(e(this,"sortAscending")!==this._lastSortAscending){var t=e(this,"arrangedContent");t.reverseObjects()}},"sortAscending"),contentArrayWillChange:function(n,r,i,s){var o=e(this,"isSorted");if(o){var u=e(this,"arrangedContent"),a=n.slice(r,r+i),f=e(this,"sortProperties");t(a,function(e){u.removeObject(e),t(f,function(t){Ember.removeObserver(e,t,this,"contentItemSortPropertyDidChange")},this)},this)}return this._super(n,r,i,s)},contentArrayDidChange:function(n,r,i,s){var o=e(this,"isSorted"),u=e(this,"sortProperties");if(o){var a=n.slice(r,r+s);t(a,function(e){this.insertItemSorted(e),t(u,function(t){Ember.addObserver(e,t,this,"contentItemSortPropertyDidChange")},this)},this)}return this._super(n,r,i,s)},insertItemSorted:function(t){var n=e(this,"arrangedContent"),r=e(n,"length"),i=this._binarySearch(t,0,r);n.insertAt(i,t)},contentItemSortPropertyDidChange:function(t){var n=e(this,"arrangedContent"),r=n.indexOf(t),i=n.objectAt(r-1),s=n.objectAt(r+1),o=i&&this.orderBy(t,i),u=s&&this.orderBy(t,s);(0>o||u>0)&&(n.removeObject(t),this.insertItemSorted(t))},_binarySearch:function(t,n,r){var i,s,o,u;return n===r?n:(u=e(this,"arrangedContent"),i=n+Math.floor((r-n)/2),s=u.objectAt(i),o=this.orderBy(s,t),0>o?this._binarySearch(t,i+1,r):o>0?this._binarySearch(t,n,i):i)}})}(),function(){var e=Ember.get,t=(Ember.set,Ember.EnumerableUtils.forEach),n=Ember.EnumerableUtils.replace;Ember.ArrayController=Ember.ArrayProxy.extend(Ember.ControllerMixin,Ember.SortableMixin,{itemController:null,lookupItemController:function(){return e(this,"itemController")},objectAtContent:function(t){var n=e(this,"length"),r=e(this,"arrangedContent"),i=r&&r.objectAt(t);if(t>=0&&n>t){var s=this.lookupItemController(i);if(s)return this.controllerAt(t,i,s)}return i},arrangedContentDidChange:function(){this._super(),this._resetSubControllers()},arrayContentDidChange:function(i,s,o){var u=e(this,"_subControllers"),a=u.slice(i,i+s);t(a,function(e){e&&e.destroy()}),n(u,i,s,new Array(o)),this._super(i,s,o)},init:function(){this.get("content")||Ember.defineProperty(this,"content",void 0,Ember.A()),this._super(),this.set("_subControllers",Ember.A())},controllerAt:function(t,n,r){var i=e(this,"container"),s=e(this,"_subControllers"),o=s[t];if(o||(o=i.lookup("controller:"+r,{singleton:!1}),s[t]=o),!o)throw new Error('Could not resolve itemController: "'+r+'"');return o.set("target",this),o.set("content",n),o},_subControllers:null,_resetSubControllers:function(){var n=e(this,"_subControllers");n&&t(n,function(e){e&&e.destroy()}),this.set("_subControllers",Ember.A())}})}(),function(){Ember.ObjectController=Ember.ObjectProxy.extend(Ember.ControllerMixin)}(),function(){var e=Ember.imports.jQuery;Ember.$=e}(),function(){if(Ember.$){var e=Ember.String.w("dragstart drag dragenter dragleave dragover drop dragend");Ember.EnumerableUtils.forEach(e,function(e){Ember.$.event.fixHooks[e]={props:["dataTransfer"]}})}}(),function(){function e(e){var t=e.shiftKey||e.metaKey||e.altKey||e.ctrlKey,n=e.which>1;return!t&&!n}var t=this.document&&function(){var e=document.createElement("div");return e.innerHTML="<div></div>",e.firstChild.innerHTML="<script></script>",""===e.firstChild.innerHTML}(),n=this.document&&function(){var e=document.createElement("div");return e.innerHTML="Test: <script type='text/x-placeholder'></script>Value","Test:"===e.childNodes[0].nodeValue&&" Value"===e.childNodes[2].nodeValue}(),r=function(e,t){if(e.getAttribute("id")===t)return e;var n,i,s,o=e.childNodes.length;for(n=0;o>n;n++)if(i=e.childNodes[n],s=1===i.nodeType&&r(i,t))return s},i=function(e,i){t&&(i="&shy;"+i);var s=[];if(n&&(i=i.replace(/(\s+)(<script id='([^']+)')/g,function(e,t,n,r){return s.push([r,t]),n})),e.innerHTML=i,s.length>0){var o,u=s.length;for(o=0;u>o;o++){var a=r(e,s[o][0]),f=document.createTextNode(s[o][1]);a.parentNode.insertBefore(f,a)}}if(t){for(var l=e.firstChild;1===l.nodeType&&!l.nodeName;)l=l.firstChild;3===l.nodeType&&"­"===l.nodeValue.charAt(0)&&(l.nodeValue=l.nodeValue.slice(1))}},s={},o=function(e){if(void 0!==s[e])return s[e];var t=!0;if("select"===e.toLowerCase()){var n=document.createElement("select");i(n,'<option value="test">Test</option>'),t=1===n.options.length}return s[e]=t,t},u=function(e,t){var n=e.tagName;if(o(n))i(e,t);else{var r=e.outerHTML||(new XMLSerializer).serializeToString(e),s=r.match(new RegExp("<"+n+"([^>]*)>","i"))[0],u="</"+n+">",f=document.createElement("div");for(i(f,s+t+u),e=f.firstChild;e.tagName!==n;)e=e.nextSibling}return e};Ember.ViewUtils={setInnerHTML:u,isSimpleClick:e}}(),function(){Ember.get,Ember.set;var e=function(){this.seen={},this.list=[]};e.prototype={add:function(e){e in this.seen||(this.seen[e]=!0,this.list.push(e))},toDOM:function(){return this.list.join(" ")}},Ember.RenderBuffer=function(e){return new Ember._RenderBuffer(e)},Ember._RenderBuffer=function(e){this.tagNames=[e||null],this.buffer=""},Ember._RenderBuffer.prototype={_element:null,_hasElement:!0,elementClasses:null,classes:null,elementId:null,elementAttributes:null,elementProperties:null,elementTag:null,elementStyle:null,parentBuffer:null,push:function(e){return this.buffer+=e,this},addClass:function(t){return this.elementClasses=this.elementClasses||new e,this.elementClasses.add(t),this.classes=this.elementClasses.list,this},setClasses:function(e){this.classes=e},id:function(e){return this.elementId=e,this},attr:function(e,t){var n=this.elementAttributes=this.elementAttributes||{};return 1===arguments.length?n[e]:(n[e]=t,this)},removeAttr:function(e){var t=this.elementAttributes;return t&&delete t[e],this},prop:function(e,t){var n=this.elementProperties=this.elementProperties||{};return 1===arguments.length?n[e]:(n[e]=t,this)},removeProp:function(e){var t=this.elementProperties;return t&&delete t[e],this},style:function(e,t){return this.elementStyle=this.elementStyle||{},this.elementStyle[e]=t,this},begin:function(e){return this.tagNames.push(e||null),this},pushOpeningTag:function(){var e=this.currentTagName();if(e){if(this._hasElement&&!this._element&&0===this.buffer.length)return this._element=this.generateElement(),void 0;var t,n,r=this.buffer,i=this.elementId,s=this.classes,o=this.elementAttributes,u=this.elementProperties,a=this.elementStyle;if(r+="<"+e,i&&(r+=' id="'+this._escapeAttribute(i)+'"',this.elementId=null),s&&(r+=' class="'+this._escapeAttribute(s.join(" "))+'"',this.classes=null),a){r+=' style="';for(n in a)a.hasOwnProperty(n)&&(r+=n+":"+this._escapeAttribute(a[n])+";");r+='"',this.elementStyle=null}if(o){for(t in o)o.hasOwnProperty(t)&&(r+=" "+t+'="'+this._escapeAttribute(o[t])+'"');this.elementAttributes=null}if(u){for(n in u)if(u.hasOwnProperty(n)){var f=u[n];(f||"number"==typeof f)&&(r+=f===!0?" "+n+'="'+n+'"':" "+n+'="'+this._escapeAttribute(u[n])+'"')}this.elementProperties=null}r+=">",this.buffer=r}},pushClosingTag:function(){var e=this.tagNames.pop();e&&(this.buffer+="</"+e+">")},currentTagName:function(){return this.tagNames[this.tagNames.length-1]},generateElement:function(){var e,t,n=this.tagNames.pop(),r=document.createElement(n),i=Ember.$(r),s=this.elementId,o=this.classes,u=this.elementAttributes,a=this.elementProperties,f=this.elementStyle,l="";if(s&&(i.attr("id",s),this.elementId=null),o&&(i.attr("class",o.join(" ")),this.classes=null),f){for(t in f)f.hasOwnProperty(t)&&(l+=t+":"+f[t]+";");i.attr("style",l),this.elementStyle=null}if(u){for(e in u)u.hasOwnProperty(e)&&i.attr(e,u[e]);this.elementAttributes=null}if(a){for(t in a)a.hasOwnProperty(t)&&i.prop(t,a[t]);this.elementProperties=null}return r},element:function(){var e=this.innerString();return e&&(this._element=Ember.ViewUtils.setInnerHTML(this._element,e)),this._element},string:function(){if(this._hasElement&&this._element){var e=this.element(),t=e.outerHTML;return"undefined"==typeof t?Ember.$("<div/>").append(e).html():t}return this.innerString()},innerString:function(){return this.buffer},_escapeAttribute:function(e){var t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/&(?!\w+;)|[<>"'`]/g,r=/[&<>"'`]/,i=function(e){return t[e]||"&amp;"},s=e.toString();return r.test(s)?s.replace(n,i):s}}}(),function(){var e=Ember.get;Ember.set,Ember.String.fmt,Ember.EventDispatcher=Ember.Object.extend({rootElement:"body",setup:function(t){var n,r={touchstart:"touchStart",touchmove:"touchMove",touchend:"touchEnd",touchcancel:"touchCancel",keydown:"keyDown",keyup:"keyUp",keypress:"keyPress",mousedown:"mouseDown",mouseup:"mouseUp",contextmenu:"contextMenu",click:"click",dblclick:"doubleClick",mousemove:"mouseMove",focusin:"focusIn",focusout:"focusOut",mouseenter:"mouseEnter",mouseleave:"mouseLeave",submit:"submit",input:"input",change:"change",dragstart:"dragStart",drag:"drag",dragenter:"dragEnter",dragleave:"dragLeave",dragover:"dragOver",drop:"drop",dragend:"dragEnd"};Ember.$.extend(r,t||{});var i=Ember.$(e(this,"rootElement"));i.addClass("ember-application");for(n in r)r.hasOwnProperty(n)&&this.setupHandler(i,n,r[n])},setupHandler:function(e,t,n){var r=this;e.delegate(".ember-view",t+".ember",function(e,t){return Ember.handleErrors(function(){var i=Ember.View.views[this.id],s=!0,o=null;return o=r._findNearestEventManager(i,n),o&&o!==t?s=r._dispatchEvent(o,e,n,i):i?s=r._bubbleEvent(i,e,n):e.stopPropagation(),s},this)}),e.delegate("[data-ember-action]",t+".ember",function(e){return Ember.handleErrors(function(){var t=Ember.$(e.currentTarget).attr("data-ember-action"),r=Ember.Handlebars.ActionHelper.registeredActions[t];return r&&r.eventName===n?r.handler(e):void 0},this)})},_findNearestEventManager:function(t,n){for(var r=null;t&&(r=e(t,"eventManager"),!r||!r[n]);)t=e(t,"parentView");return r},_dispatchEvent:function(e,t,n,r){var i=!0,s=e[n];return"function"===Ember.typeOf(s)?(i=s.call(e,t,r),t.stopPropagation()):i=this._bubbleEvent(r,t,n),i},_bubbleEvent:function(e,t,n){return Ember.run(function(){return e.handleEvent(n,t)})},destroy:function(){var t=e(this,"rootElement");return Ember.$(t).undelegate(".ember").removeClass("ember-application"),this._super()}})}(),function(){var e=Ember.run.queues,t=Ember.ArrayPolyfills.indexOf;e.splice(t.call(e,"actions")+1,0,"render","afterRender")}(),function(){var e=Ember.get,t=Ember.set;Ember.ControllerMixin.reopen({target:null,namespace:null,view:null,container:null,_childContainers:null,init:function(){this._super(),t(this,"_childContainers",{})},_modelDidChange:Ember.observer(function(){var n=e(this,"_childContainers");for(var r in n)n.hasOwnProperty(r)&&n[r].destroy();t(this,"_childContainers",{})},"model")})}(),function(){function e(){Ember.run.once(Ember.View,"notifyMutationListeners")}var t={},n=Ember.get,r=Ember.set,i=Ember.guidFor,s=Ember.EnumerableUtils.forEach,o=Ember.EnumerableUtils.addObject,u=Ember.computed(function(){var e=this._childViews,t=Ember.A(),r=this;return s(e,function(e){e.isVirtual?t.pushObjects(n(e,"childViews")):t.push(e)}),t.replace=function(e,t,n){if(r instanceof Ember.ContainerView)return r.replace(e,t,n);throw new Error("childViews is immutable")},t});Ember.TEMPLATES={},Ember.CoreView=Ember.Object.extend(Ember.Evented,{isView:!0,states:t,init:function(){this._super(),this.transitionTo("preRender")},parentView:Ember.computed(function(){var e=this._parentView;return e&&e.isVirtual?n(e,"parentView"):e}).property("_parentView"),state:null,_parentView:null,concreteView:Ember.computed(function(){return this.isVirtual?n(this,"parentView"):this}).property("parentView"),instrumentName:"core_view",instrumentDetails:function(e){e.object=this.toString()},renderToBuffer:function(e,t){var n="render."+this.instrumentName,r={};return this.instrumentDetails(r),Ember.instrument(n,r,function(){return this._renderToBuffer(e,t)},this)},_renderToBuffer:function(e){var t=this.tagName;(null===t||void 0===t)&&(t="div");var n=this.buffer=e&&e.begin(t)||Ember.RenderBuffer(t);return this.transitionTo("inBuffer",!1),this.beforeRender(n),this.render(n),this.afterRender(n),n},trigger:function(e){this._super.apply(this,arguments);var t=this[e];if(t){var n,r,i=[];for(n=1,r=arguments.length;r>n;n++)i.push(arguments[n]);return t.apply(this,i)}},has:function(e){return"function"===Ember.typeOf(this[e])||this._super(e)},destroy:function(){var e=this._parentView;if(this._super())return this.removedFromDOM||this.destroyElement(),e&&e.removeChild(this),this.transitionTo("destroying",!1),this},clearRenderedChildren:Ember.K,triggerRecursively:Ember.K,invokeRecursively:Ember.K,transitionTo:Ember.K,destroyElement:Ember.K});var a=Ember._ViewCollection=function(e){var t=this.views=e||[];this.length=t.length};a.prototype={length:0,trigger:function(e){for(var t,n=this.views,r=0,i=n.length;i>r;r++)t=n[r],t.trigger&&t.trigger(e)},triggerRecursively:function(e){for(var t=this.views,n=0,r=t.length;r>n;n++)t[n].triggerRecursively(e)},invokeRecursively:function(e){for(var t,n=this.views,r=0,i=n.length;i>r;r++)t=n[r],e(t)},transitionTo:function(e,t){for(var n=this.views,r=0,i=n.length;i>r;r++)n[r].transitionTo(e,t)},push:function(){this.length+=arguments.length;var e=this.views;return e.push.apply(e,arguments)},objectAt:function(e){return this.views[e]},forEach:function(e){var t=this.views;return s(t,e)},clear:function(){this.length=0,this.views.length=0}};var f=[];Ember.View=Ember.CoreView.extend({concatenatedProperties:["classNames","classNameBindings","attributeBindings"],isView:!0,templateName:null,layoutName:null,templates:Ember.TEMPLATES,template:Ember.computed(function(e,t){if(void 0!==t)return t;var r=n(this,"templateName"),i=this.templateForName(r,"template");return i||n(this,"defaultTemplate")}).property("templateName"),controller:Ember.computed(function(){var e=n(this,"_parentView");return e?n(e,"controller"):null}).property("_parentView"),layout:Ember.computed(function(){var e=n(this,"layoutName"),t=this.templateForName(e,"layout");return t||n(this,"defaultLayout")}).property("layoutName"),templateForName:function(e){if(e){var t=this.container||Ember.Container&&Ember.Container.defaultContainer;return t&&t.lookup("template:"+e)}},context:Ember.computed(function(e,t){return 2===arguments.length?(r(this,"_context",t),t):n(this,"_context")}).volatile(),_context:Ember.computed(function(){var e,t;return(t=n(this,"controller"))?t:(e=this._parentView,e?n(e,"_context"):null)}),_contextDidChange:Ember.observer(function(){this.rerender()},"context"),isVisible:!0,childViews:u,_childViews:f,_childViewsWillChange:Ember.beforeObserver(function(){if(this.isVirtual){var e=n(this,"parentView");e&&Ember.propertyWillChange(e,"childViews")}},"childViews"),_childViewsDidChange:Ember.observer(function(){if(this.isVirtual){var e=n(this,"parentView");e&&Ember.propertyDidChange(e,"childViews")}},"childViews"),nearestInstanceOf:function(e){for(var t=n(this,"parentView");t;){if(t instanceof e)return t;t=n(t,"parentView")}},nearestOfType:function(e){for(var t=n(this,"parentView"),r=e instanceof Ember.Mixin?function(t){return e.detect(t)}:function(t){return e.detect(t.constructor)};t;){if(r(t))return t;t=n(t,"parentView")}},nearestWithProperty:function(e){for(var t=n(this,"parentView");t;){if(e in t)return t;t=n(t,"parentView")}},nearestChildOf:function(e){for(var t=n(this,"parentView");t;){if(n(t,"parentView")instanceof e)return t;t=n(t,"parentView")}},_parentViewDidChange:Ember.observer(function(){this.isDestroying||n(this,"parentView.controller")&&!n(this,"controller")&&this.notifyPropertyChange("controller")},"_parentView"),_controllerDidChange:Ember.observer(function(){this.isDestroying||(this.rerender(),this.forEachChildView(function(e){e.propertyDidChange("controller")}))},"controller"),cloneKeywords:function(){var e=n(this,"templateData"),t=e?Ember.copy(e.keywords):{};return r(t,"view",n(this,"concreteView")),r(t,"_view",this),r(t,"controller",n(this,"controller")),t},render:function(e){var t=n(this,"layout")||n(this,"template");if(t){var r,i=n(this,"context"),s=this.cloneKeywords(),o={view:this,buffer:e,isRenderData:!0,keywords:s,insideGroup:n(this,"templateData.insideGroup")};r=t(i,{data:o}),void 0!==r&&e.push(r)}},rerender:function(){return this.currentState.rerender(this)},clearRenderedChildren:function(){for(var e=this.lengthBeforeRender,t=this.lengthAfterRender,n=this._childViews,r=t-1;r>=e;r--)n[r]&&n[r].destroy()},_applyClassNameBindings:function(e){var t,n,r,i=this.classNames;s(e,function(e){var s,u=Ember.View._parsePropertyPath(e),a=function(){n=this._classStringForProperty(e),t=this.$(),s&&(t.removeClass(s),i.removeObject(s)),n?(t.addClass(n),s=n):s=null};r=this._classStringForProperty(e),r&&(o(i,r),s=r),this.registerObserver(this,u.path,a),this.one("willClearRender",function(){s&&(i.removeObject(s),s=null)})},this)},_applyAttributeBindings:function(e,t){var r,i;s(t,function(t){var s=t.split(":"),o=s[0],u=s[1]||o,a=function(){i=this.$(),r=n(this,o),Ember.View.applyAttributeBindings(i,u,r)};this.registerObserver(this,o,a),r=n(this,o),Ember.View.applyAttributeBindings(e,u,r)},this)},_classStringForProperty:function(e){var t=Ember.View._parsePropertyPath(e),r=t.path,i=n(this,r);return void 0===i&&Ember.isGlobalPath(r)&&(i=n(Ember.lookup,r)),Ember.View._classStringForValue(r,i,t.className,t.falsyClassName)},element:Ember.computed(function(e,t){return void 0!==t?this.currentState.setElement(this,t):this.currentState.getElement(this)}).property("_parentView"),$:function(e){return this.currentState.$(this,e)},mutateChildViews:function(e){for(var t,n=this._childViews,r=n.length;--r>=0;)t=n[r],e(this,t,r);return this},forEachChildView:function(e){var t=this._childViews;if(!t)return this;var n,r,i=t.length;for(r=0;i>r;r++)n=t[r],e(n);return this},appendTo:function(e){return this._insertElementLater(function(){this.$().appendTo(e)}),this},replaceIn:function(e){return this._insertElementLater(function(){Ember.$(e).empty(),this.$().appendTo(e)}),this},_insertElementLater:function(e){this._scheduledInsert=Ember.run.scheduleOnce("render",this,"_insertElement",e)},_insertElement:function(e){this._scheduledInsert=null,this.currentState.insertElement(this,e)},append:function(){return this.appendTo(document.body)},remove:function(){this.removedFromDOM||this.destroyElement(),this.invokeRecursively(function(e){e.clearRenderedChildren&&e.clearRenderedChildren()})},elementId:null,findElementInParentElement:function(e){var t="#"+this.elementId;return Ember.$(t)[0]||Ember.$(t,e)[0]},createElement:function(){if(n(this,"element"))return this;var e=this.renderToBuffer();return r(this,"element",e.element()),this},willInsertElement:Ember.K,didInsertElement:Ember.K,willClearRender:Ember.K,invokeRecursively:function(e,t){for(var n,r,i=t===!1?this._childViews:[this];i.length;){n=i.slice(),i=[];for(var s=0,o=n.length;o>s;s++)r=n[s],e(r),r._childViews&&i.push.apply(i,r._childViews)}},triggerRecursively:function(e){for(var t,n,r=[this];r.length;){t=r.slice(),r=[];for(var i=0,s=t.length;s>i;i++)n=t[i],n.trigger&&n.trigger(e),n._childViews&&r.push.apply(r,n._childViews)}},viewHierarchyCollection:function(){for(var e,t=new a([this]),n=0;t.length>n;n++)e=t.objectAt(n),e._childViews&&t.push.apply(t,e._childViews);return t},destroyElement:function(){return this.currentState.destroyElement(this)},willDestroyElement:function(){},_notifyWillDestroyElement:function(){var e=this.viewHierarchyCollection();return e.trigger("willClearRender"),e.trigger("willDestroyElement"),e},_elementWillChange:Ember.beforeObserver(function(){this.forEachChildView(function(e){Ember.propertyWillChange(e,"element")})},"element"),_elementDidChange:Ember.observer(function(){this.forEachChildView(function(e){Ember.propertyDidChange(e,"element")})},"element"),parentViewDidChange:Ember.K,instrumentName:"view",instrumentDetails:function(e){e.template=n(this,"templateName"),this._super(e)},_renderToBuffer:function(e,t){this.lengthBeforeRender=this._childViews.length;var n=this._super(e,t);return this.lengthAfterRender=this._childViews.length,n},renderToBufferIfNeeded:function(e){return this.currentState.renderToBufferIfNeeded(this,e)},beforeRender:function(e){this.applyAttributesToBuffer(e),e.pushOpeningTag()},afterRender:function(e){e.pushClosingTag()},applyAttributesToBuffer:function(e){var t=n(this,"classNameBindings");t.length&&this._applyClassNameBindings(t);var r=n(this,"attributeBindings");r.length&&this._applyAttributeBindings(e,r),e.setClasses(this.classNames),e.id(this.elementId);var i=n(this,"ariaRole");i&&e.attr("role",i),n(this,"isVisible")===!1&&e.style("display","none")},tagName:null,ariaRole:null,classNames:["ember-view"],classNameBindings:f,attributeBindings:f,init:function(){this.elementId=this.elementId||i(this),this._super(),this._childViews=this._childViews.slice(),this.classNameBindings=Ember.A(this.classNameBindings.slice()),this.classNames=Ember.A(this.classNames.slice());var e=n(this,"viewController");e&&(e=n(e),e&&r(e,"view",this))},appendChild:function(e,t){return this.currentState.appendChild(this,e,t)},removeChild:function(e){if(!this.isDestroying){r(e,"_parentView",null);var t=this._childViews;return Ember.EnumerableUtils.removeObject(t,e),this.propertyDidChange("childViews"),this}},removeAllChildren:function(){return this.mutateChildViews(function(e,t){e.removeChild(t)})},destroyAllChildren:function(){return this.mutateChildViews(function(e,t){t.destroy()})},removeFromParent:function(){var e=this._parentView;return this.remove(),e&&e.removeChild(this),this},destroy:function(){var e,t,r=this._childViews,i=n(this,"parentView"),s=this.viewName;if(this._super()){for(e=r.length,t=e-1;t>=0;t--)r[t].removedFromDOM=!0;for(s&&i&&i.set(s,null),e=r.length,t=e-1;t>=0;t--)r[t].destroy();return this}},createChildView:function(e,t){return e.isView&&e._parentView===this?e:(Ember.CoreView.detect(e)?(t=t||{},t._parentView=this,t.container=this.container,t.templateData=t.templateData||n(this,"templateData"),e=e.create(t),e.viewName&&r(n(this,"concreteView"),e.viewName,e)):(t&&e.setProperties(t),n(e,"templateData")||r(e,"templateData",n(this,"templateData")),r(e,"_parentView",this)),e)},becameVisible:Ember.K,becameHidden:Ember.K,_isVisibleDidChange:Ember.observer(function(){var e=this.$();if(e){var t=n(this,"isVisible");e.toggle(t),this._isAncestorHidden()||(t?this._notifyBecameVisible():this._notifyBecameHidden())}},"isVisible"),_notifyBecameVisible:function(){this.trigger("becameVisible"),this.forEachChildView(function(e){var t=n(e,"isVisible");(t||null===t)&&e._notifyBecameVisible()})},_notifyBecameHidden:function(){this.trigger("becameHidden"),this.forEachChildView(function(e){var t=n(e,"isVisible");(t||null===t)&&e._notifyBecameHidden()})},_isAncestorHidden:function(){for(var e=n(this,"parentView");e;){if(n(e,"isVisible")===!1)return!0;e=n(e,"parentView")}return!1},clearBuffer:function(){this.invokeRecursively(function(e){e.buffer=null})},transitionTo:function(e,t){var n=this.currentState,r=this.currentState=this.states[e];this.state=e,n&&n.exit&&n.exit(this),r.enter&&r.enter(this),t!==!1&&this.forEachChildView(function(t){t.transitionTo(e)})},handleEvent:function(e,t){return this.currentState.handleEvent(this,e,t)},registerObserver:function(e,t,n,r){r||"function"!=typeof n||(r=n,n=null);var i=this,s=function(){i.currentState.invokeObserver(this,r)},o=function(){Ember.run.scheduleOnce("render",this,s)};Ember.addObserver(e,t,n,o),this.one("willClearRender",function(){Ember.removeObserver(e,t,n,o)})}});var l={prepend:function(t,n){t.$().prepend(n),e()},after:function(t,n){t.$().after(n),e()},html:function(t,n){t.$().html(n),e()},replace:function(t){var i=n(t,"element");r(t,"element",null),t._insertElementLater(function(){Ember.$(i).replaceWith(n(t,"element")),e()})},remove:function(t){t.$().remove(),e()},empty:function(t){t.$().empty(),e()}};Ember.View.reopen({domManager:l}),Ember.View.reopenClass({_parsePropertyPath:function(e){var t,n,r=e.split(":"),i=r[0],s="";return r.length>1&&(t=r[1],3===r.length&&(n=r[2]),s=":"+t,n&&(s+=":"+n)),{path:i,classNames:s,className:""===t?void 0:t,falsyClassName:n}},_classStringForValue:function(e,t,n,r){if(n||r)return n&&t?n:r&&!t?r:null;if(t===!0){var i=e.split(".");return Ember.String.dasherize(i[i.length-1])}return t!==!1&&void 0!==t&&null!==t?t:null}});var c=Ember.Object.extend(Ember.Evented).create();Ember.View.addMutationListener=function(e){c.on("change",e)},Ember.View.removeMutationListener=function(e){c.off("change",e)},Ember.View.notifyMutationListeners=function(){c.trigger("change")},Ember.View.views={},Ember.View.childViewsProperty=u,Ember.View.applyAttributeBindings=function(e,t,n){var r=Ember.typeOf(n);"value"===t||"string"!==r&&("number"!==r||isNaN(n))?"value"===t||"boolean"===r?(void 0===n&&(n=null),n!==e.prop(t)&&e.prop(t,n)):n||e.removeAttr(t):n!==e.attr(t)&&e.attr(t,n)},Ember.View.states=t}(),function(){var e=(Ember.get,Ember.set);Ember.View.states._default={appendChild:function(){throw"You can't use appendChild outside of the rendering process"},$:function(){return void 0},getElement:function(){return null},handleEvent:function(){return!0},destroyElement:function(t){return e(t,"element",null),t._scheduledInsert&&(Ember.run.cancel(t._scheduledInsert),t._scheduledInsert=null),t},renderToBufferIfNeeded:function(){return!1},rerender:Ember.K,invokeObserver:Ember.K}}(),function(){var e=Ember.View.states.preRender=Ember.create(Ember.View.states._default);Ember.merge(e,{insertElement:function(e,t){e.createElement();var n=e.viewHierarchyCollection();n.trigger("willInsertElement"),t.call(e),n.transitionTo("inDOM",!1),n.trigger("didInsertElement")},renderToBufferIfNeeded:function(e,t){return e.renderToBuffer(t),!0},empty:Ember.K,setElement:function(e,t){return null!==t&&e.transitionTo("hasElement"),t}})}(),function(){Ember.get,Ember.set;var e=Ember.View.states.inBuffer=Ember.create(Ember.View.states._default);Ember.merge(e,{$:function(e){return e.rerender(),Ember.$()},rerender:function(){throw new Ember.Error("Something you did caused a view to re-render after it rendered but before it was inserted into the DOM.")},appendChild:function(e,t,n){var r=e.buffer,i=e._childViews;return t=e.createChildView(t,n),i.length||(i=e._childViews=i.slice()),i.push(t),t.renderToBuffer(r),e.propertyDidChange("childViews"),t},destroyElement:function(e){e.clearBuffer();var t=e._notifyWillDestroyElement();return t.transitionTo("preRender",!1),e},empty:function(){},renderToBufferIfNeeded:function(){return!1},insertElement:function(){throw"You can't insert an element that has already been rendered"},setElement:function(e,t){return null===t?e.transitionTo("preRender"):(e.clearBuffer(),e.transitionTo("hasElement")),t},invokeObserver:function(e,t){t.call(e)}})}(),function(){var e=Ember.get,t=Ember.set,n=Ember.View.states.hasElement=Ember.create(Ember.View.states._default);Ember.merge(n,{$:function(t,n){var r=e(t,"element");return n?Ember.$(n,r):Ember.$(r)},getElement:function(t){var n=e(t,"parentView");return n&&(n=e(n,"element")),n?t.findElementInParentElement(n):Ember.$("#"+e(t,"elementId"))[0]},setElement:function(e,t){if(null!==t)throw"You cannot set an element to a non-null value when the element is already in the DOM.";return e.transitionTo("preRender"),t},rerender:function(e){return e.triggerRecursively("willClearRender"),e.clearRenderedChildren(),e.domManager.replace(e),e},destroyElement:function(e){return e._notifyWillDestroyElement(),e.domManager.remove(e),t(e,"element",null),e._scheduledInsert&&(Ember.run.cancel(e._scheduledInsert),e._scheduledInsert=null),e},empty:function(e){var t,n,r=e._childViews;if(r)for(t=r.length,n=0;t>n;n++)r[n]._notifyWillDestroyElement();e.domManager.empty(e)},handleEvent:function(e,t,n){return e.has(t)?e.trigger(t,n):!0},invokeObserver:function(e,t){t.call(e)}});var r=Ember.View.states.inDOM=Ember.create(n);Ember.merge(r,{enter:function(e){e.isVirtual||(Ember.View.views[e.elementId]=e),e.addBeforeObserver("elementId",function(){throw new Error("Changing a view's elementId after creation is not allowed")})},exit:function(e){this.isVirtual||delete Ember.View.views[e.elementId]},insertElement:function(){throw"You can't insert an element into the DOM that has already been inserted"}})}(),function(){var e="You can't call %@ on a view being destroyed",t=Ember.String.fmt,n=Ember.View.states.destroying=Ember.create(Ember.View.states._default);Ember.merge(n,{appendChild:function(){throw t(e,["appendChild"])},rerender:function(){throw t(e,["rerender"])},destroyElement:function(){throw t(e,["destroyElement"])},empty:function(){throw t(e,["empty"])},setElement:function(){throw t(e,["set('element', ...)"])},renderToBufferIfNeeded:function(){return!1},insertElement:Ember.K})}(),function(){Ember.View.cloneStates=function(e){var t={};t._default={},t.preRender=Ember.create(t._default),t.destroying=Ember.create(t._default),t.inBuffer=Ember.create(t._default),t.hasElement=Ember.create(t._default),t.inDOM=Ember.create(t.hasElement);for(var n in e)e.hasOwnProperty(n)&&Ember.merge(t[n],e[n]);return t}}(),function(){function e(e,t,n,r){t.triggerRecursively("willInsertElement"),n?n.domManager.after(n,r.string()):e.domManager.prepend(e,r.string()),t.forEach(function(e){e.transitionTo("inDOM"),e.propertyDidChange("element"),e.triggerRecursively("didInsertElement")})}var t=Ember.View.cloneStates(Ember.View.states),n=Ember.get,r=Ember.set,i=Ember.EnumerableUtils.forEach,s=Ember._ViewCollection;Ember.ContainerView=Ember.View.extend(Ember.MutableArray,{states:t,init:function(){this._super();var e=n(this,"childViews");Ember.defineProperty(this,"childViews",Ember.View.childViewsProperty);var t=this._childViews;i(e,function(e,i){var s;"string"==typeof e?(s=n(this,e),s=this.createChildView(s),r(this,e,s)):s=this.createChildView(e),t[i]=s},this);var s=n(this,"currentView");s&&(t.length||(t=this._childViews=this._childViews.slice()),t.push(this.createChildView(s)))},replace:function(e,t,r){var i=r?n(r,"length"):0;if(this.arrayContentWillChange(e,t,i),this.childViewsWillChange(this._childViews,e,t),0===i)this._childViews.splice(e,t);else{var s=[e,t].concat(r);r.length&&!this._childViews.length&&(this._childViews=this._childViews.slice()),this._childViews.splice.apply(this._childViews,s)}return this.arrayContentDidChange(e,t,i),this.childViewsDidChange(this._childViews,e,t,i),this},objectAt:function(e){return this._childViews[e]},length:Ember.computed(function(){return this._childViews.length}),render:function(e){this.forEachChildView(function(t){t.renderToBuffer(e)})},instrumentName:"render.container",childViewsWillChange:function(e,t,n){if(this.propertyWillChange("childViews"),n>0){var r=e.slice(t,t+n);this.currentState.childViewsWillChange(this,e,t,n),this.initializeViews(r,null,null)}},removeChild:function(e){return this.removeObject(e),this},childViewsDidChange:function(e,t,r,i){if(i>0){var s=e.slice(t,t+i);this.initializeViews(s,this,n(this,"templateData")),this.currentState.childViewsDidChange(this,e,t,i)}this.propertyDidChange("childViews")},initializeViews:function(e,t,s){i(e,function(e){r(e,"_parentView",t),n(e,"templateData")||r(e,"templateData",s)})},currentView:null,_currentViewWillChange:Ember.beforeObserver(function(){var e=n(this,"currentView");e&&e.destroy()},"currentView"),_currentViewDidChange:Ember.observer(function(){var e=n(this,"currentView");e&&this.pushObject(e)},"currentView"),_ensureChildrenAreInDOM:function(){this.currentState.ensureChildrenAreInDOM(this)}}),Ember.merge(t._default,{childViewsWillChange:Ember.K,childViewsDidChange:Ember.K,ensureChildrenAreInDOM:Ember.K}),Ember.merge(t.inBuffer,{childViewsDidChange:function(){throw new Error("You cannot modify child views while in the inBuffer state")}}),Ember.merge(t.hasElement,{childViewsWillChange:function(e,t,n,r){for(var i=n;n+r>i;i++)t[i].remove()},childViewsDidChange:function(e){Ember.run.scheduleOnce("render",e,"_ensureChildrenAreInDOM")},ensureChildrenAreInDOM:function(t){var n,r,i,u,a,f=t._childViews,l=new s;for(n=0,r=f.length;r>n;n++)i=f[n],a||(a=Ember.RenderBuffer(),a._hasElement=!1),i.renderToBufferIfNeeded(a)?l.push(i):l.length?(e(t,l,u,a),a=null,u=i,l.clear()):u=i;l.length&&e(t,l,u,a)}})}(),function(){var e=Ember.get,t=Ember.set;Ember.String.fmt,Ember.CollectionView=Ember.ContainerView.extend({content:null,emptyViewClass:Ember.View,emptyView:null,itemViewClass:Ember.View,init:function(){var e=this._super();return this._contentDidChange(),e},_contentWillChange:Ember.beforeObserver(function(){var t=this.get("content");t&&t.removeArrayObserver(this);var n=t?e(t,"length"):0;this.arrayWillChange(t,0,n)},"content"),_contentDidChange:Ember.observer(function(){var t=e(this,"content");t&&t.addArrayObserver(this);var n=t?e(t,"length"):0;this.arrayDidChange(t,0,null,n)},"content"),destroy:function(){if(this._super()){var t=e(this,"content");return t&&t.removeArrayObserver(this),this._createdEmptyView&&this._createdEmptyView.destroy(),this}},arrayWillChange:function(t,n,r){var i=e(this,"emptyView");i&&i instanceof Ember.View&&i.removeFromParent();var s,o,u,a=this._childViews;u=this._childViews.length;var f=r===u;for(f&&(this.currentState.empty(this),this.invokeRecursively(function(e){e.removedFromDOM=!0},!1)),o=n+r-1;o>=n;o--)s=a[o],s.destroy()},arrayDidChange:function(n,r,i,s){var o,u,a,f,l=e(this,"itemViewClass"),c=[];if("string"==typeof l&&(l=e(l)),f=n?e(n,"length"):0)for(a=r;r+s>a;a++)u=n.objectAt(a),o=this.createChildView(l,{content:u,contentIndex:a}),c.push(o);else{var h=e(this,"emptyView");if(!h)return;var p=Ember.CoreView.detect(h);h=this.createChildView(h),c.push(h),t(this,"emptyView",h),p&&(this._createdEmptyView=h)}this.replace(r,0,c)},createChildView:function(n,r){n=this._super(n,r);var i=e(n,"tagName"),s=null===i||void 0===i?Ember.CollectionView.CONTAINER_MAP[e(this,"tagName")]:i;return t(n,"tagName",s),n}}),Ember.CollectionView.CONTAINER_MAP={ul:"li",ol:"li",table:"tr",thead:"tr",tbody:"tr",tfoot:"tr",tr:"td",select:"option"}}(),function(){Ember.ViewTargetActionSupport=Ember.Mixin.create(Ember.TargetActionSupport,{target:Ember.computed.alias("controller"),actionContext:Ember.computed.alias("context")})}(),function(){e("metamorph",[],function(){var e=function(){},t=0,n=this.document,r=n&&"createRange"in n&&"undefined"!=typeof Range&&Range.prototype.createContextualFragment,i=n&&function(){var e=n.createElement("div");return e.innerHTML="<div></div>",e.firstChild.innerHTML="<script></script>",""===e.firstChild.innerHTML}(),s=n&&function(){var e=n.createElement("div");return e.innerHTML="Test: <script type='text/x-placeholder'></script>Value","Test:"===e.childNodes[0].nodeValue&&" Value"===e.childNodes[2].nodeValue}(),o=function(n){var r;r=this instanceof o?this:new e,r.innerHTML=n;var i="metamorph-"+t++;return r.start=i+"-start",r.end=i+"-end",r};e.prototype=o.prototype;var u,a,f,l,c,h,p,d,v;if(l=function(){return this.startTag()+this.innerHTML+this.endTag()},d=function(){return"<script id='"+this.start+"' type='text/x-placeholder'></script>"},v=function(){return"<script id='"+this.end+"' type='text/x-placeholder'></script>"},r)u=function(e,t){var r=n.createRange(),i=n.getElementById(e.start),s=n.getElementById(e.end);return t?(r.setStartBefore(i),r.setEndAfter(s)):(r.setStartAfter(i),r.setEndBefore(s)),r},a=function(e,t){var n=u(this,t);n.deleteContents();var r=n.createContextualFragment(e);n.insertNode(r)},f=function(){var e=u(this,!0);e.deleteContents()},c=function(e){var t=n.createRange();t.setStart(e),t.collapse(!1);var r=t.createContextualFragment(this.outerHTML());e.appendChild(r)},h=function(e){var t=n.createRange(),r=n.getElementById(this.end);t.setStartAfter(r),t.setEndAfter(r);var i=t.createContextualFragment(e);t.insertNode(i)},p=function(e){var t=n.createRange(),r=n.getElementById(this.start);t.setStartAfter(r),t.setEndAfter(r);var i=t.createContextualFragment(e);t.insertNode(i)};else{var m={select:[1,"<select multiple='multiple'>","</select>"],fieldset:[1,"<fieldset>","</fieldset>"],table:[1,"<table>","</table>"],tbody:[2,"<table><tbody>","</tbody></table>"],tr:[3,"<table><tbody><tr>","</tr></tbody></table>"],colgroup:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],map:[1,"<map>","</map>"],_default:[0,"",""]},g=function(e,t){if(e.getAttribute("id")===t)return e;var n,r,i,s=e.childNodes.length;for(n=0;s>n;n++)if(r=e.childNodes[n],i=1===r.nodeType&&g(r,t))return i},y=function(e,t){var r=[];if(s&&(t=t.replace(/(\s+)(<script id='([^']+)')/g,function(e,t,n,i){return r.push([i,t]),n})),e.innerHTML=t,r.length>0){var i,o=r.length;for(i=0;o>i;i++){var u=g(e,r[i][0]),a=n.createTextNode(r[i][1]);u.parentNode.insertBefore(a,u)}}},b=function(e,t){var r=m[e.tagName.toLowerCase()]||m._default,s=r[0],o=r[1],u=r[2];i&&(t="&shy;"+t);var a=n.createElement("div");y(a,o+t+u);for(var f=0;s>=f;f++)a=a.firstChild;if(i){for(var l=a;1===l.nodeType&&!l.nodeName;)l=l.firstChild;3===l.nodeType&&"­"===l.nodeValue.charAt(0)&&(l.nodeValue=l.nodeValue.slice(1))}return a},w=function(e){for(;""===e.parentNode.tagName;)e=e.parentNode;return e},E=function(e,t){e.parentNode!==t.parentNode&&t.parentNode.insertBefore(e,t.parentNode.firstChild)};a=function(e,t){var r,i,s,o=w(n.getElementById(this.start)),u=n.getElementById(this.end),a=u.parentNode;for(E(o,u),r=o.nextSibling;r;){if(i=r.nextSibling,s=r===u){if(!t)break;u=r.nextSibling}if(r.parentNode.removeChild(r),s)break;r=i}for(r=b(o.parentNode,e);r;)i=r.nextSibling,a.insertBefore(r,u),r=i},f=function(){var e=w(n.getElementById(this.start)),t=n.getElementById(this.end);this.html(""),e.parentNode.removeChild(e),t.parentNode.removeChild(t)},c=function(e){for(var t,n=b(e,this.outerHTML());n;)t=n.nextSibling,e.appendChild(n),n=t},h=function(e){var t,r,i=n.getElementById(this.end),s=i.nextSibling,o=i.parentNode;for(r=b(o,e);r;)t=r.nextSibling,o.insertBefore(r,s),r=t},p=function(e){var t,r,i=n.getElementById(this.start),s=i.parentNode;r=b(s,e);for(var o=i.nextSibling;r;)t=r.nextSibling,s.insertBefore(r,o),r=t}}return o.prototype.html=function(e){return this.checkRemoved(),void 0===e?this.innerHTML:(a.call(this,e),this.innerHTML=e,void 0)},o.prototype.replaceWith=function(e){this.checkRemoved(),a.call(this,e,!0)},o.prototype.remove=f,o.prototype.outerHTML=l,o.prototype.appendTo=c,o.prototype.after=h,o.prototype.prepend=p,o.prototype.startTag=d,o.prototype.endTag=v,o.prototype.isRemoved=function(){var e=n.getElementById(this.start),t=n.getElementById(this.end);return!e||!t},o.prototype.checkRemoved=function(){if(this.isRemoved())throw new Error("Cannot perform operations on a Metamorph that is not in the DOM.")},o})}(),function(){var e=Object.create||function(e){function t(){}return t.prototype=e,new t},t=this.Handlebars||Ember.imports&&Ember.imports.Handlebars;t||"function"!=typeof require||(t=require("handlebars")),Ember.Handlebars=e(t),Ember.Handlebars.helper=function(e,t){Ember.View.detect(t)?Ember.Handlebars.registerHelper(e,function(e,n){return Ember.Handlebars.helpers.view.call(this,t,n)}):Ember.Handlebars.registerBoundHelper.apply(null,arguments)},Ember.Handlebars.helpers=e(t.helpers),Ember.Handlebars.Compiler=function(){},t.Compiler&&(Ember.Handlebars.Compiler.prototype=e(t.Compiler.prototype)),Ember.Handlebars.Compiler.prototype.compiler=Ember.Handlebars.Compiler,Ember.Handlebars.JavaScriptCompiler=function(){},t.JavaScriptCompiler&&(Ember.Handlebars.JavaScriptCompiler.prototype=e(t.JavaScriptCompiler.prototype),Ember.Handlebars.JavaScriptCompiler.prototype.compiler=Ember.Handlebars.JavaScriptCompiler),Ember.Handlebars.JavaScriptCompiler.prototype.namespace="Ember.Handlebars",Ember.Handlebars.JavaScriptCompiler.prototype.initializeBuffer=function(){return"''"},Ember.Handlebars.JavaScriptCompiler.prototype.appendToBuffer=function(e){return"data.buffer.push("+e+");"};var n="ember"+ +(new Date),r=1;Ember.Handlebars.Compiler.prototype.mustache=function(e){if(e.isHelper&&"control"===e.id.string)e.hash=e.hash||new t.AST.HashNode([]),e.hash.pairs.push(["controlID",new t.AST.StringNode(n+r++)]);else if(!e.params.length&&!e.hash){var i=new t.AST.IdNode(["_triageMustache"]);e.escaped||(e.hash=e.hash||new t.AST.HashNode([]),e.hash.pairs.push(["unescaped",new t.AST.StringNode("true")])),e=new t.AST.MustacheNode([i].concat([e.id]),e.hash,!e.escaped)}return t.Compiler.prototype.mustache.call(this,e)},Ember.Handlebars.precompile=function(e){var n=t.parse(e),r={knownHelpers:{action:!0,unbound:!0,bindAttr:!0,template:!0,view:!0,_triageMustache:!0},data:!0,stringParams:!0},i=(new Ember.Handlebars.Compiler).compile(n,r);return(new Ember.Handlebars.JavaScriptCompiler).compile(i,r,void 0,!0)},t.compile&&(Ember.Handlebars.compile=function(e){var n=t.parse(e),r={data:!0,stringParams:!0},i=(new Ember.Handlebars.Compiler).compile(n,r),s=(new Ember.Handlebars.JavaScriptCompiler).compile(i,r,void 0,!0);return Ember.Handlebars.template(s)})}(),function(){function e(e,t,n,i){var s,o,u,a,f,l,c=n.length,h=i.data,p=h.view,d=i.hash,v=d.boundOptions;u=new Ember._SimpleHandlebarsView(null,null,!d.unescaped,h),u.normalizedValue=function(){var s,o=[];for(s in v)v.hasOwnProperty(s)&&(f=r(e,v[s],h),u.path=f.path,u.pathRoot=f.root,d[s]=Ember._SimpleHandlebarsView.prototype.normalizedValue.call(u));for(a=0;c>a;++a)f=n[a],u.path=f.path,u.pathRoot=f.root,o.push(Ember._SimpleHandlebarsView.prototype.normalizedValue.call(u));return o.push(i),t.apply(e,o)},p.appendChild(u),s=[];for(o in v)v.hasOwnProperty(o)&&s.push(r(e,v[o],h));for(s=s.concat(n),a=0,l=s.length;l>a;++a)f=s[a],p.registerObserver(f.root,f.path,u,u.rerender)}function t(e,t,n,r){var i,s,o,u,a=[],f=r.hash,l=f.boundOptions;for(u in l)l.hasOwnProperty(u)&&(f[u]=Ember.Handlebars.get(e,l[u],r));for(i=0,s=n.length;s>i;++i)o=n[i],a.push(Ember.Handlebars.get(e,o.path,r));return a.push(r),t.apply(e,a)}var n=Array.prototype.slice,r=Ember.Handlebars.normalizePath=function(e,t,n){var r,i,s=n&&n.keywords||{};return r=t.split(".",1)[0],s.hasOwnProperty(r)&&(e=s[r],i=!0,t=t===r?"":t.substr(r.length+1)),{root:e,path:t,isKeyword:i}},i=Ember.Handlebars.get=function(e,t,n){var i,s=n&&n.data,o=r(e,t,s);return e=o.root,t=o.path,i=Ember.get(e,t),void 0===i&&e!==Ember.lookup&&Ember.isGlobalPath(t)&&(i=Ember.get(Ember.lookup,t)),i};Ember.Handlebars.getPath=Ember.deprecateFunc("`Ember.Handlebars.getPath` has been changed to `Ember.Handlebars.get` for consistency.",Ember.Handlebars.get),Ember.Handlebars.resolveParams=function(e,t,n){for(var r,s,o=[],u=n.types,a=0,f=t.length;f>a;a++)r=t[a],s=u[a],"ID"===s?o.push(i(e,r,n)):o.push(r);return o},Ember.Handlebars.resolveHash=function(e,t,n){var r,s={},o=n.hashTypes;for(var u in t)t.hasOwnProperty(u)&&(r=o[u],s[u]="ID"===r?i(e,t[u],n):t[u]);return s},Ember.Handlebars.registerHelper("helperMissing",function(e,t){var n,r="";throw n="%@ Handlebars error: Could not find property '%@' on object %@.",t.data&&(r=t.data.view),new Ember.Error(Ember.String.fmt(n,[r,e,this]))}),Ember.Handlebars.registerBoundHelper=function(i,s){function o(){var i,o,a,f,l,c=n.call(arguments,0,-1),h=c.length,p=arguments[arguments.length-1],d=[],v=p.data,m=p.hash,g=v.view,y=p.contexts&&p.contexts[0]||this;m.boundOptions={};for(l in m)m.hasOwnProperty(l)&&Ember.IS_BINDING.test(l)&&"string"==typeof m[l]&&(m.boundOptions[l.slice(0,-7)]=m[l]);for(v.properties=[],f=0;h>f;++f)v.properties.push(c[f]),d.push(r(y,c[f],v));if(v.isUnbound)return t(this,s,d,p);if(0===u.length)return e(y,s,d,p);i=d[0],o=i.root,a=i.path;var b=new Ember._SimpleHandlebarsView(a,o,!p.hash.unescaped,p.data);b.normalizedValue=function(){var e=Ember._SimpleHandlebarsView.prototype.normalizedValue.call(b);return s.call(g,e,p)},g.appendChild(b),g.registerObserver(o,a,b,b.rerender);for(var w=0,E=u.length;E>w;w++)g.registerObserver(o,a+"."+u[w],b,b.rerender)}var u=n.call(arguments,2);o._rawFunction=s,Ember.Handlebars.registerHelper(i,o)},Ember.Handlebars.template=function(e){var t=Handlebars.template(e);return t.isTop=!0,t}}(),function(){Ember.String.htmlSafe=function(e){return new Handlebars.SafeString(e)};var e=Ember.String.htmlSafe;(Ember.EXTEND_PROTOTYPES===!0||Ember.EXTEND_PROTOTYPES.String)&&(String.prototype.htmlSafe=function(){return e(this)})}(),function(){Ember.Handlebars.resolvePaths=function(e){for(var t=[],n=e.contexts,r=e.roots,i=e.data,s=0,o=n.length;o>s;s++)t.push(Ember.Handlebars.get(r[s],n[s],{data:i}));return t}}(),function(){function e(){Ember.run.once(Ember.View,"notifyMutationListeners")}Ember.set,Ember.get;var n=t("metamorph"),r={remove:function(t){t.morph.remove(),e()},prepend:function(t,n){t.morph.prepend(n),e()},after:function(t,n){t.morph.after(n),e()},html:function(t,n){t.morph.html(n),e()},replace:function(t){var n=t.morph;t.transitionTo("preRender"),Ember.run.schedule("render",this,function(){if(!t.isDestroying){t.clearRenderedChildren();var r=t.renderToBuffer();t.invokeRecursively(function(e){e.propertyWillChange("element")}),t.triggerRecursively("willInsertElement"),n.replaceWith(r.string()),t.transitionTo("inDOM"),t.invokeRecursively(function(e){e.propertyDidChange("element")}),t.triggerRecursively("didInsertElement"),e()}})},empty:function(t){t.morph.html(""),e()}};Ember._Metamorph=Ember.Mixin.create({isVirtual:!0,tagName:"",instrumentName:"render.metamorph",init:function(){this._super(),this.morph=n()},beforeRender:function(e){e.push(this.morph.startTag()),e.pushOpeningTag()},afterRender:function(e){e.pushClosingTag(),e.push(this.morph.endTag())},createElement:function(){var e=this.renderToBuffer();this.outerHTML=e.string(),this.clearBuffer()},domManager:r}),Ember._MetamorphView=Ember.View.extend(Ember._Metamorph),Ember._SimpleMetamorphView=Ember.CoreView.extend(Ember._Metamorph)}(),function(){function e(e,t,n,r){this.path=e,this.pathRoot=t,this.isEscaped=n,this.templateData=r,this.morph=s(),this.state="preRender",this.updateId=null}var n=Ember.get,r=Ember.set,i=Ember.Handlebars.get,s=t("metamorph");Ember._SimpleHandlebarsView=e,e.prototype={isVirtual:!0,isView:!0,destroy:function(){this.updateId&&(Ember.run.cancel(this.updateId),this.updateId=null),this.morph=null},propertyWillChange:Ember.K,propertyDidChange:Ember.K,normalizedValue:function(){var e,t,n=this.path,r=this.pathRoot;return""===n?e=r:(t=this.templateData,e=i(r,n,{data:t})),e},renderToBuffer:function(e){var t="";t+=this.morph.startTag(),t+=this.render(),t+=this.morph.endTag(),e.push(t)},render:function(){var e=this.isEscaped,t=this.normalizedValue();return null===t||void 0===t?t="":t instanceof Handlebars.SafeString||(t=String(t)),e&&(t=Handlebars.Utils.escapeExpression(t)),t},rerender:function(){switch(this.state){case"preRender":case"destroying":break;case"inBuffer":throw new Ember.Error("Something you did tried to replace an {{expression}} before it was inserted into the DOM.");case"hasElement":case"inDOM":this.updateId=Ember.run.scheduleOnce("render",this,"update")}return this},update:function(){this.updateId=null,this.morph.html(this.render())},transitionTo:function(e){this.state=e}};var o=Ember.View.cloneStates(Ember.View.states),u=Ember.merge;u(o._default,{rerenderIfNeeded:Ember.K}),u(o.inDOM,{rerenderIfNeeded:function(e){e.normalizedValue()!==e._lastNormalizedValue&&e.rerender()}}),Ember._HandlebarsBoundView=Ember._MetamorphView.extend({instrumentName:"render.boundHandlebars",states:o,shouldDisplayFunc:null,preserveContext:!1,previousContext:null,displayTemplate:null,inverseTemplate:null,path:null,pathRoot:null,normalizedValue:function(){var e,t,r=n(this,"path"),s=n(this,"pathRoot"),o=n(this,"valueNormalizerFunc");return""===r?e=s:(t=n(this,"templateData"),e=i(s,r,{data:t})),o?o(e):e},rerenderIfNeeded:function(){this.currentState.rerenderIfNeeded(this)},render:function(e){var t=n(this,"isEscaped"),i=n(this,"shouldDisplayFunc"),s=n(this,"preserveContext"),o=n(this,"previousContext"),u=n(this,"inverseTemplate"),a=n(this,"displayTemplate"),f=this.normalizedValue();if(this._lastNormalizedValue=f,i(f))if(r(this,"template",a),s)r(this,"_context",o);else{if(!a)return null===f||void 0===f?f="":f instanceof Handlebars.SafeString||(f=String(f)),t&&(f=Handlebars.Utils.escapeExpression(f)),e.push(f),void 0;r(this,"_context",f)}else u?(r(this,"template",u),s?r(this,"_context",o):r(this,"_context",f)):r(this,"template",function(){return""});return this._super(e)}})}(),function(){function e(e){return!Ember.isNone(e)}function t(e,t,n,r,o,u){var a,f,l,c=t.data,h=t.fn,p=t.inverse,d=c.view,v=this;if(a=s(v,e,c),"object"==typeof this){if(c.insideGroup){f=function(){Ember.run.once(d,"rerender")};var m,g,y=i(v,e,t);y=o(y),g=n?v:y,r(y)?m=h:p&&(m=p),m(g,{data:t.data})}else{var b=d.createChildView(Ember._HandlebarsBoundView,{preserveContext:n,shouldDisplayFunc:r,valueNormalizerFunc:o,displayTemplate:h,inverseTemplate:p,path:e,pathRoot:v,previousContext:v,isEscaped:!t.hash.unescaped,templateData:t.data});d.appendChild(b),f=function(){Ember.run.scheduleOnce("render",b,"rerenderIfNeeded")}}if(""!==a.path&&(d.registerObserver(a.root,a.path,f),u))for(l=0;u.length>l;l++)d.registerObserver(a.root,a.path+"."+u[l],f)}else c.buffer.push(i(v,e,t))}function n(e,t){var n,r,o=t.data,u=o.view,a=this;if(n=s(a,e,o),"object"==typeof this){if(o.insideGroup){r=function(){Ember.run.once(u,"rerender")};var f=i(a,e,t);(null===f||void 0===f)&&(f=""),o.buffer.push(f)}else{var l=new Ember._SimpleHandlebarsView(e,a,!t.hash.unescaped,t.data);l._parentView=u,u.appendChild(l),r=function(){Ember.run.scheduleOnce("render",l,"rerender")}}""!==n.path&&u.registerObserver(n.root,n.path,r)}else o.buffer.push(i(a,e,t))}var r=Ember.get;Ember.set,Ember.String.fmt;var i=Ember.Handlebars.get,s=Ember.Handlebars.normalizePath,o=Ember.ArrayPolyfills.forEach,u=Ember.Handlebars,a=u.helpers;u.registerHelper("_triageMustache",function(e,t){return a[e]?a[e].call(this,t):a.bind.apply(this,arguments)}),u.registerHelper("bind",function(r,i){var s=i.contexts&&i.contexts[0]||this;return i.fn?t.call(s,r,i,!1,e):n.call(s,r,i)}),u.registerHelper("boundIf",function(e,n){var i=n.contexts&&n.contexts[0]||this,s=function(e){var t=e&&r(e,"isTruthy");return"boolean"==typeof t?t:Ember.isArray(e)?0!==r(e,"length"):!!e};return t.call(i,e,n,!0,s,s,["isTruthy","length"])}),u.registerHelper("with",function(n,r){if(4===arguments.length){var i,o,u,f;if(r=arguments[3],i=arguments[2],o=arguments[0],Ember.isGlobalPath(o))Ember.bind(r.data.keywords,i,o);else{f=s(this,o,r.data),o=f.path,u=f.root;var l=Ember.$.expando+Ember.guidFor(u);r.data.keywords[l]=u;var c=o?l+"."+o:l;Ember.bind(r.data.keywords,i,c)}return t.call(this,o,r,!0,e)}return a.bind.call(r.contexts[0],n,r)}),u.registerHelper("if",function(e,t){return a.boundIf.call(t.contexts[0],e,t)}),u.registerHelper("unless",function(e,t){var n=t.fn,r=t.inverse;return t.fn=r,t.inverse=n,a.boundIf.call(t.contexts[0],e,t)}),u.registerHelper("bindAttr",function(e){var t=e.hash,n=e.data.view,r=[],a=this,f=++Ember.uuid,l=t["class"];if(null!==l&&void 0!==l){var c=u.bindClasses(this,l,n,f,e);r.push('class="'+Handlebars.Utils.escapeExpression(c.join(" "))+'"'),delete t["class"]}var h=Ember.keys(t);return o.call(h,function(o){var u,l=t[o];u=s(a,l,e.data);var c,h,p="this"===l?u.root:i(a,l,e),d=Ember.typeOf(p);c=function(){var r=i(a,l,e),s=n.$("[data-bindattr-"+f+"='"+f+"']");return s&&0!==s.length?(Ember.View.applyAttributeBindings(s,o,r),void 0):(Ember.removeObserver(u.root,u.path,h),void 0)},"this"===l||u.isKeyword&&""===u.path||n.registerObserver(u.root,u.path,c),"string"===d||"number"===d&&!isNaN(p)?r.push(o+'="'+Handlebars.Utils.escapeExpression(p)+'"'):p&&"boolean"===d&&r.push(o+'="'+o+'"')},this),r.push("data-bindattr-"+f+'="'+f+'"'),new u.SafeString(r.join(" "))}),u.bindClasses=function(e,t,n,r,u){var a,f,l,c=[],h=function(e,t,n){var r,s=t.path;return r="this"===s?e:""===s?!0:i(e,s,n),Ember.View._classStringForValue(s,r,t.className,t.falsyClassName)};return o.call(t.split(" "),function(t){var i,o,p,d,v=Ember.View._parsePropertyPath(t),g=v.path,y=e;""!==g&&"this"!==g&&(d=s(e,g,u.data),y=d.root,g=d.path),o=function(){a=h(e,v,u),l=r?n.$("[data-bindattr-"+r+"='"+r+"']"):n.$(),l&&0!==l.length?(i&&l.removeClass(i),a?(l.addClass(a),i=a):i=null):Ember.removeObserver(y,g,p)},""!==g&&"this"!==g&&n.registerObserver(y,g,o),f=h(e,v,u),f&&(c.push(f),i=f)}),c}}(),function(){Ember.get,Ember.set;var e=Ember.Handlebars;e.ViewHelper=Ember.Object.create({propertiesFromHTMLOptions:function(e){var t=e.hash,n=e.data,r={},i=t["class"],s=!1;t.id&&(r.elementId=t.id,s=!0),t.tag&&(r.tagName=t.tag,s=!0),i&&(i=i.split(" "),r.classNames=i,s=!0),t.classBinding&&(r.classNameBindings=t.classBinding.split(" "),s=!0),t.classNameBindings&&(void 0===r.classNameBindings&&(r.classNameBindings=[]),r.classNameBindings=r.classNameBindings.concat(t.classNameBindings.split(" ")),s=!0),t.attributeBindings&&(r.attributeBindings=null,s=!0),s&&(t=Ember.$.extend({},t),delete t.id,delete t.tag,delete t["class"],delete t.classBinding);var o;for(var u in t)t.hasOwnProperty(u)&&Ember.IS_BINDING.test(u)&&"string"==typeof t[u]&&(o=this.contextualizeBindingPath(t[u],n),o&&(t[u]=o));if(r.classNameBindings)for(var a in r.classNameBindings){var f=r.classNameBindings[a];if("string"==typeof f){var l=Ember.View._parsePropertyPath(f);o=this.contextualizeBindingPath(l.path,n),o&&(r.classNameBindings[a]=o+l.classNames)}}return Ember.$.extend(t,r)},contextualizeBindingPath:function(e,t){var n=Ember.Handlebars.normalizePath(null,e,t);return n.isKeyword?"templateData.keywords."+e:Ember.isGlobalPath(e)?null:"this"===e?"_parentView.context":"_parentView.context."+e},helper:function(t,n,r){var i,s=r.data,o=r.fn;i="string"==typeof n?e.get(t,n,r):n;var u=this.propertiesFromHTMLOptions(r,t),a=s.view;u.templateData=s;var f=i.proto?i.proto():i;o&&(u.template=o),f.controller||f.controllerBinding||u.controller||u.controllerBinding||(u._context=t),a.appendChild(i,u)}}),e.registerHelper("view",function(t,n){return t&&t.data&&t.data.isRenderData&&(n=t,t="Ember.View"),e.ViewHelper.helper(this,t,n)})}(),function(){var e=Ember.get,t=Ember.Handlebars.get;Ember.String.fmt,Ember.Handlebars.registerHelper("collection",function(n,r){n&&n.data&&n.data.isRenderData&&(r=n,n=void 0);var i=r.fn,s=r.data,o=r.inverse;r.data.view;var u;u=n?t(this,n,r):Ember.CollectionView;var a,f,l=r.hash,c={},h=l.itemViewClass,p=u.proto();delete l.itemViewClass,f=h?t(p,h,r):p.itemViewClass;for(var d in l)l.hasOwnProperty(d)&&(a=d.match(/^item(.)(.*)$/),a&&"itemController"!==d&&(c[a[1].toLowerCase()+a[2]]=l[d],delete l[d]));i&&(c.template=i,delete r.fn);var v;o&&o!==Handlebars.VM.noop?(v=e(p,"emptyViewClass"),v=v.extend({template:o,tagName:c.tagName})):l.emptyViewClass&&(v=t(this,l.emptyViewClass,r)),v&&(l.emptyView=v),l.keyword||(c._context=Ember.computed.alias("content"));var m=Ember.Handlebars.ViewHelper.propertiesFromHTMLOptions({data:s,hash:c},this);return l.itemViewClass=f.extend(m),Ember.Handlebars.helpers.view.call(this,u,r)})}(),function(){var e=Ember.Handlebars.get;Ember.Handlebars.registerHelper("unbound",function(t,n){var r,i,s,o=arguments[arguments.length-1];return arguments.length>2?(o.data.isUnbound=!0,r=Ember.Handlebars.helpers[arguments[0]]||Ember.Handlebars.helperMissing,s=r.apply(this,Array.prototype.slice.call(arguments,1)),delete o.data.isUnbound,s):(i=n.contexts&&n.contexts[0]||this,e(i,t,n))})}(),function(){var e=Ember.Handlebars.get,t=Ember.Handlebars.normalizePath;Ember.Handlebars.registerHelper("log",function(n,r){var i=r.contexts&&r.contexts[0]||this,s=t(i,n,r.data),o=s.root,u=s.path,a="this"===u?o:e(o,u,r);Ember.Logger.log(a)}),Ember.Handlebars.registerHelper("debugger",function(){})}(),function(){var e=Ember.get,t=Ember.set;Ember.Handlebars.EachView=Ember.CollectionView.extend(Ember._Metamorph,{init:function(){var n,r=e(this,"itemController");if(r){var i=Ember.ArrayController.create();t(i,"itemController",r),t(i,"container",e(this,"controller.container")),t(i,"_eachView",this),t(i,"target",e(this,"controller")),this.disableContentObservers(function(){t(this,"content",i),n=(new Ember.Binding("content","_eachView.dataSource")).oneWay(),n.connect(i)}),t(this,"_arrayController",i)}else this.disableContentObservers(function(){n=(new Ember.Binding("content","dataSource")).oneWay(),n.connect(this)});return this._super()},disableContentObservers:function(e){Ember.removeBeforeObserver(this,"content",null,"_contentWillChange"),Ember.removeObserver(this,"content",null,"_contentDidChange"),e.call(this),Ember.addBeforeObserver(this,"content",null,"_contentWillChange"),Ember.addObserver(this,"content",null,"_contentDidChange")},itemViewClass:Ember._MetamorphView,emptyViewClass:Ember._MetamorphView,createChildView:function(n,r){n=this._super(n,r);var i=e(this,"keyword"),s=e(n,"content");if(i){var o=e(n,"templateData");o=Ember.copy(o),o.keywords=n.cloneKeywords(),t(n,"templateData",o),o.keywords[i]=s}return s&&e(s,"isController")&&t(n,"controller",s),n},destroy:function(){if(this._super()){var t=e(this,"_arrayController");return t&&t.destroy(),this}}});var n=Ember.Handlebars.GroupedEach=function(e,t,n){var r=this,i=Ember.Handlebars.normalizePath(e,t,n.data);this.context=e,this.path=t,this.options=n,this.template=n.fn,this.containingView=n.data.view,this.normalizedRoot=i.root,this.normalizedPath=i.path,this.content=this.lookupContent(),this.addContentObservers(),this.addArrayObservers(),this.containingView.on("willClearRender",function(){r.destroy()})};n.prototype={contentWillChange:function(){this.removeArrayObservers()},contentDidChange:function(){this.content=this.lookupContent(),this.addArrayObservers(),this.rerenderContainingView()},contentArrayWillChange:Ember.K,contentArrayDidChange:function(){this.rerenderContainingView()},lookupContent:function(){return Ember.Handlebars.get(this.normalizedRoot,this.normalizedPath,this.options)},addArrayObservers:function(){this.content.addArrayObserver(this,{willChange:"contentArrayWillChange",didChange:"contentArrayDidChange"})},removeArrayObservers:function(){this.content.removeArrayObserver(this,{willChange:"contentArrayWillChange",didChange:"contentArrayDidChange"})},addContentObservers:function(){Ember.addBeforeObserver(this.normalizedRoot,this.normalizedPath,this,this.contentWillChange),Ember.addObserver(this.normalizedRoot,this.normalizedPath,this,this.contentDidChange)},removeContentObservers:function(){Ember.removeBeforeObserver(this.normalizedRoot,this.normalizedPath,this.contentWillChange),Ember.removeObserver(this.normalizedRoot,this.normalizedPath,this.contentDidChange)},render:function(){var t=this.content,n=e(t,"length"),r=this.options.data,i=this.template;r.insideEach=!0;for(var s=0;n>s;s++)i(t.objectAt(s),{data:r})},rerenderContainingView:function(){Ember.run.scheduleOnce("render",this.containingView,"rerender")},destroy:function(){this.removeContentObservers(),this.removeArrayObservers()}},Ember.Handlebars.registerHelper("each",function(e,t){if(4===arguments.length){var n=arguments[0];t=arguments[3],e=arguments[2],""===e&&(e="this"),t.hash.keyword=n}return t.hash.dataSourceBinding=e,!t.data.insideGroup||t.hash.groupedRows||t.hash.itemViewClass?Ember.Handlebars.helpers.collection.call(this,"Ember.Handlebars.EachView",t):((new Ember.Handlebars.GroupedEach(this,e,t)).render(),void 0)})}(),function(){Ember.Handlebars.registerHelper("template",function(e,t){var n=t.data.view,r=n.templateForName(e);r(this,{data:t.data})})}(),function(){Ember.Handlebars.registerHelper("partial",function(e,t){var n=e.split("/"),r=n[n.length-1];n[n.length-1]="_"+r;var i=t.data.view,s=n.join("/"),o=i.templateForName(s),u=i.templateForName(e);o=o||u,o(this,{data:t.data})})}(),function(){var e=Ember.get;Ember.set,Ember.Handlebars.registerHelper("yield",function(t){for(var n,r=t.data.view;r&&!e(r,"layout");)r=e(r,"parentView");n=e(r,"template"),n&&n(this,t)})}(),function(){var e=Ember.set;Ember.get,Ember.Checkbox=Ember.View.extend({classNames:["ember-checkbox"],tagName:"input",attributeBindings:["type","checked","disabled","tabindex","name"],type:"checkbox",checked:!1,disabled:!1,init:function(){this._super(),this.on("change",this,this._updateElementValue)},_updateElementValue:function(){e(this,"checked",this.$().prop("checked"))}})}(),function(){var e=(Ember.get,Ember.set);Ember.TextSupport=Ember.Mixin.create({value:"",attributeBindings:["placeholder","disabled","maxlength","tabindex"],placeholder:null,disabled:!1,maxlength:null,insertNewline:Ember.K,cancel:Ember.K,init:function(){this._super(),this.on("focusOut",this,this._elementValueDidChange),this.on("change",this,this._elementValueDidChange),this.on("paste",this,this._elementValueDidChange),this.on("cut",this,this._elementValueDidChange),this.on("input",this,this._elementValueDidChange),this.on("keyUp",this,this.interpretKeyEvents)},interpretKeyEvents:function(e){var t=Ember.TextSupport.KEY_EVENTS,n=t[e.keyCode];return this._elementValueDidChange(),n?this[n](e):void 0},_elementValueDidChange:function(){e(this,"value",this.$().val())}}),Ember.TextSupport.KEY_EVENTS={13:"insertNewline",27:"cancel"}}(),function(){function e(e,n,r){var i=t(n,"action"),s=t(n,"onEvent");if(i&&s===e){var o=t(n,"controller"),u=t(n,"value"),a=t(n,"bubbles");o.send(i,u,n),a||r.stopPropagation()}}var t=Ember.get;Ember.set,Ember.TextField=Ember.View.extend(Ember.TextSupport,{classNames:["ember-text-field"],tagName:"input",attributeBindings:["type","value","size","pattern","name"],value:"",type:"text",size:null,pattern:null,action:null,onEvent:"enter",bubbles:!1,insertNewline:function(t){e("enter",this,t)},keyPress:function(t){e("keyPress",this,t)}})}(),function(){var e=Ember.get,t=Ember.set;Ember.Button=Ember.View.extend(Ember.TargetActionSupport,{classNames:["ember-button"],classNameBindings:["isActive"],tagName:"button",propagateEvents:!1,attributeBindings:["type","disabled","href","tabindex"],targetObject:Ember.computed(function(){var t=e(this,"target"),n=e(this,"context"),r=e(this,"templateData");return"string"!=typeof t?t:Ember.Handlebars.get(n,t,{data:r})}).property("target"),type:Ember.computed(function(){var e=this.tagName;return"input"===e||"button"===e?"button":void 0}),disabled:!1,href:Ember.computed(function(){return"a"===this.tagName?"#":null}),mouseDown:function(){return e(this,"disabled")||(t(this,"isActive",!0),this._mouseDown=!0,this._mouseEntered=!0),e(this,"propagateEvents")},mouseLeave:function(){this._mouseDown&&(t(this,"isActive",!1),this._mouseEntered=!1)},mouseEnter:function(){this._mouseDown&&(t(this,"isActive",!0),this._mouseEntered=!0)},mouseUp:function(){return e(this,"isActive")&&(this.triggerAction(),t(this,"isActive",!1)),this._mouseDown=!1,this._mouseEntered=!1,e(this,"propagateEvents")},keyDown:function(e){(13===e.keyCode||32===e.keyCode)&&this.mouseDown()},keyUp:function(e){(13===e.keyCode||32===e.keyCode)&&this.mouseUp()},touchStart:function(e){return this.mouseDown(e)},touchEnd:function(e){return this.mouseUp(e)},init:function(){this._super()}})}(),function(){var e=Ember.get;Ember.set,Ember.TextArea=Ember.View.extend(Ember.TextSupport,{classNames:["ember-text-area"],tagName:"textarea",attributeBindings:["rows","cols","name"],rows:null,cols:null,_updateElementValue:Ember.observer(function(){var t=e(this,"value"),n=this.$();n&&t!==n.val()&&n.val(t)},"value"),init:function(){this._super(),this.on("didInsertElement",this,this._updateElementValue)}})}(),function(){var e=Ember.set,t=Ember.get,n=Ember.EnumerableUtils.indexOf,r=Ember.EnumerableUtils.indexesOf,i=Ember.EnumerableUtils.replace,s=Ember.isArray;Ember.Handlebars.compile,Ember.SelectOption=Ember.View.extend({tagName:"option",attributeBindings:["value","selected"],defaultTemplate:function(e,t){t={data:t.data,hash:{}},Ember.Handlebars.helpers.bind.call(e,"view.label",t)},init:function(){this.labelPathDidChange(),this.valuePathDidChange(),this._super()},selected:Ember.computed(function(){var e=t(this,"content"),r=t(this,"parentView.selection");return t(this,"parentView.multiple")?r&&n(r,e.valueOf())>-1:e==r}).property("content","parentView.selection"),labelPathDidChange:Ember.observer(function(){var e=t(this,"parentView.optionLabelPath");e&&Ember.defineProperty(this,"label",Ember.computed(function(){return t(this,e)}).property(e))},"parentView.optionLabelPath"),valuePathDidChange:Ember.observer(function(){var e=t(this,"parentView.optionValuePath");e&&Ember.defineProperty(this,"value",Ember.computed(function(){return t(this,e)}).property(e))},"parentView.optionValuePath")}),Ember.Select=Ember.View.extend({tagName:"select",classNames:["ember-select"],defaultTemplate:Ember.Handlebars.template(function(e,t,n,r,i){function s(e,t){var r,i="";return t.buffer.push('<option value="">'),r={},t.buffer.push(l(n._triageMustache.call(e,"view.prompt",{hash:{},contexts:[e],types:["ID"],hashTypes:r,data:t}))),t.buffer.push("</option>"),i}function o(e,t){var r;r={contentBinding:"STRING"},t.buffer.push(l(n.view.call(e,"view.optionView",{hash:{contentBinding:"this"},contexts:[e],types:["ID"],hashTypes:r,data:t})))}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||Ember.Handlebars.helpers,i=i||{};var u,a,f="",l=this.escapeExpression,c=this;return a={},u=n["if"].call(t,"view.prompt",{hash:{},inverse:c.noop,fn:c.program(1,s,i),contexts:[t],types:["ID"],hashTypes:a,data:i}),(u||0===u)&&i.buffer.push(u),a={},u=n.each.call(t,"view.content",{hash:{},inverse:c.noop,fn:c.program(3,o,i),contexts:[t],types:["ID"],hashTypes:a,data:i}),(u||0===u)&&i.buffer.push(u),f}),attributeBindings:["multiple","disabled","tabindex","name"],multiple:!1,disabled:!1,content:null,selection:null,value:Ember.computed(function(e,n){if(2===arguments.length)return n;var r=t(this,"optionValuePath").replace(/^content\.?/,"");return r?t(this,"selection."+r):t(this,"selection")}).property("selection"),prompt:null,optionLabelPath:"content",optionValuePath:"content",optionView:Ember.SelectOption,_change:function(){t(this,"multiple")?this._changeMultiple():this._changeSingle()},selectionDidChange:Ember.observer(function(){var n=t(this,"selection");if(t(this,"multiple")){if(!s(n))return e(this,"selection",Ember.A([n])),void 0;this._selectionDidChangeMultiple()}else this._selectionDidChangeSingle()},"selection.@each"),valueDidChange:Ember.observer(function(){var e,n=t(this,"content"),r=t(this,"value"),i=t(this,"optionValuePath").replace(/^content\.?/,""),s=i?t(this,"selection."+i):t(this,"selection");r!==s&&(e=n.find(function(e){return r===(i?t(e,i):e)}),this.set("selection",e))},"value"),_triggerChange:function(){var e=t(this,"selection"),n=t(this,"value");e&&this.selectionDidChange(),n&&this.valueDidChange(),this._change()},_changeSingle:function(){var n=this.$()[0].selectedIndex,r=t(this,"content"),i=t(this,"prompt");if(t(r,"length")){if(i&&0===n)return e(this,"selection",null),void 0;i&&(n-=1),e(this,"selection",r.objectAt(n))}},_changeMultiple:function(){var n=this.$("option:selected"),r=t(this,"prompt"),u=r?1:0,a=t(this,"content"),f=t(this,"selection");if(a&&n){var l=n.map(function(){return this.index-u}).toArray(),c=a.objectsAt(l);s(f)?i(f,0,t(f,"length"),c):e(this,"selection",c)}},_selectionDidChangeSingle:function(){var e=this.get("element");if(e){var r=t(this,"content"),i=t(this,"selection"),s=r?n(r,i):-1,o=t(this,"prompt");o&&(s+=1),e&&(e.selectedIndex=s)}},_selectionDidChangeMultiple:function(){var e,i=t(this,"content"),s=t(this,"selection"),o=i?r(i,s):[-1],u=t(this,"prompt"),a=u?1:0,f=this.$("option");f&&f.each(function(){e=this.index>-1?this.index-a:-1,this.selected=n(o,e)>-1})},init:function(){this._super(),this.on("didInsertElement",this,this._triggerChange),this.on("change",this,this._change)}})}(),function(){function e(e,t){for(var n in e)"ID"===t[n]&&(e[n+"Binding"]=e[n],delete e[n])}Ember.Handlebars.registerHelper("input",function(t){var n=t.hash,r=t.hashTypes,i=n.type,s=n.on;return delete n.type,delete n.on,e(n,r),"checkbox"===i?Ember.Handlebars.helpers.view.call(this,Ember.Checkbox,t):(n.type=i,n.onEvent=s||"enter",Ember.Handlebars.helpers.view.call(this,Ember.TextField,t))}),Ember.Handlebars.registerHelper("textarea",function(t){var n=t.hash,r=t.hashTypes;return e(n,r),Ember.Handlebars.helpers.view.call(this,Ember.TextArea,t)})}(),function(){function e(){Ember.Handlebars.bootstrap(Ember.$(document))}Ember.Handlebars.bootstrap=function(e){var t='script[type="text/x-handlebars"], script[type="text/x-raw-handlebars"]';Ember.$(t,e).each(function(){var e=Ember.$(this),t="text/x-raw-handlebars"===e.attr("type")?Ember.$.proxy(Handlebars.compile,Handlebars):Ember.$.proxy(Ember.Handlebars.compile,Ember.Handlebars),n=e.attr("data-template-name")||e.attr("id")||"application",r=t(e.html());Ember.TEMPLATES[n]=r,e.remove()})},Ember.onLoad("application",e)}(),function(){Ember.runLoadHooks("Ember.Handlebars",Ember.Handlebars)}(),function(){e("route-recognizer",[],function(){function e(e){this.string=e}function t(e){this.name=e}function n(e){this.name=e}function r(){}function i(i,s,o){"/"===i.charAt(0)&&(i=i.substr(1));for(var u=i.split("/"),a=[],f=0,l=u.length;l>f;f++){var c,h=u[f];(c=h.match(/^:([^\/]+)$/))?(a.push(new t(c[1])),s.push(c[1]),o.dynamics++):(c=h.match(/^\*([^\/]+)$/))?(a.push(new n(c[1])),s.push(c[1]),o.stars++):""===h?a.push(new r):(a.push(new e(h)),o.statics++)}return a}function s(e){this.charSpec=e,this.nextStates=[]}function o(e){return e.sort(function(e,t){return e.types.stars!==t.types.stars?e.types.stars-t.types.stars:e.types.dynamics!==t.types.dynamics?e.types.dynamics-t.types.dynamics:e.types.statics!==t.types.statics?e.types.statics-t.types.statics:0})}function u(e,t){for(var n=[],r=0,i=e.length;i>r;r++){var s=e[r];n=n.concat(s.match(t))}return n}function a(e,t){for(var n=e.handlers,r=e.regex,i=t.match(r),s=1,o=[],u=0,a=n.length;a>u;u++){for(var f=n[u],l=f.names,c={},h=0,p=l.length;p>h;h++)c[l[h]]=i[s++];o.push({handler:f.handler,params:c,isDynamic:!!l.length})}return o}function f(e,t){return t.eachChar(function(t){e=e.put(t)}),e}function l(e,t,n){this.path=e,this.matcher=t,this.delegate=n}function c(e){this.routes={},this.children={},this.target=e}function h(e,t,n){return function(r,i){var s=e+r;return i?(i(h(s,t,n)),void 0):new l(e+r,t,n)}}function p(e,t,n){for(var r=0,i=0,s=e.length;s>i;i++)r+=e[i].path.length;t=t.substr(r),e.push({path:t,handler:n})}function d(e,t,n,r){var i=t.routes;for(var s in i)if(i.hasOwnProperty(s)){var o=e.slice();p(o,s,i[s]),t.children[s]?d(o,t.children[s],n,r):n.call(r,o)}}var v=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],m=new RegExp("(\\"+v.join("|\\")+")","g");e.prototype={eachChar:function(e){for(var t,n=this.string,r=0,i=n.length;i>r;r++)t=n.charAt(r),e({validChars:t})},regex:function(){return this.string.replace(m,"\\$1")},generate:function(){return this.string}},t.prototype={eachChar:function(e){e({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(e){return e[this.name]}},n.prototype={eachChar:function(e){e({invalidChars:"",repeat:!0})},regex:function(){return"(.+)"},generate:function(e){return e[this.name]}},r.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},s.prototype={get:function(e){for(var t=this.nextStates,n=0,r=t.length;r>n;n++){var i=t[n],s=i.charSpec.validChars===e.validChars;if(s=s&&i.charSpec.invalidChars===e.invalidChars)return i}},put:function(e){var t;return(t=this.get(e))?t:(t=new s(e),this.nextStates.push(t),e.repeat&&t.nextStates.push(t),t)},match:function(e){for(var t,n,r,i=this.nextStates,s=[],o=0,u=i.length;u>o;o++)t=i[o],n=t.charSpec,"undefined"!=typeof (r=n.validChars)?-1!==r.indexOf(e)&&s.push(t):"undefined"!=typeof (r=n.invalidChars)&&-1===r.indexOf(e)&&s.push(t);return s}};var g=function(){this.rootState=new s,this.names={}};return g.prototype={add:function(e,t){for(var n,s=this.rootState,o="^",u={statics:0,dynamics:0,stars:0},a=[],l=[],c=!0,h=0,p=e.length;p>h;h++){var d=e[h],v=[],m=i(d.path,v,u);l=l.concat(m);for(var g=0,y=m.length;y>g;g++){var b=m[g];b instanceof r||(c=!1,s=s.put({validChars:"/"}),o+="/",s=f(s,b),o+=b.regex())}a.push({handler:d.handler,names:v})}c&&(s=s.put({validChars:"/"}),o+="/"),s.handlers=a,s.regex=new RegExp(o+"$"),s.types=u,(n=t&&t.as)&&(this.names[n]={segments:l,handlers:a})},handlersFor:function(e){var t=this.names[e],n=[];if(!t)throw new Error("There is no route named "+e);for(var r=0,i=t.handlers.length;i>r;r++)n.push(t.handlers[r]);return n},hasRoute:function(e){return!!this.names[e]},generate:function(e,t){var n=this.names[e],i="";if(!n)throw new Error("There is no route named "+e);for(var s=n.segments,o=0,u=s.length;u>o;o++){var a=s[o];a instanceof r||(i+="/",i+=a.generate(t))}return"/"!==i.charAt(0)&&(i="/"+i),i},recognize:function(e){var t,n,r=[this.rootState],i=e.length;for("/"!==e.charAt(0)&&(e="/"+e),i>1&&"/"===e.charAt(i-1)&&(e=e.substr(0,i-1)),t=0,n=e.length;n>t&&(r=u(r,e.charAt(t)),r.length);t++);var s=[];for(t=0,n=r.length;n>t;t++)r[t].handlers&&s.push(r[t]);r=o(s);var f=s[0];return f&&f.handlers?a(f,e):void 0}},l.prototype={to:function(e,t){var n=this.delegate;if(n&&n.willAddRoute&&(e=n.willAddRoute(this.matcher.target,e)),this.matcher.add(this.path,e),t){if(0===t.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,e,t,this.delegate)}}},c.prototype={add:function(e,t){this.routes[e]=t},addChild:function(e,t,n,r){var i=new c(t);this.children[e]=i;var s=h(e,i,r);r&&r.contextEntered&&r.contextEntered(t,s),n(s)}},g.prototype.map=function(e,t){var n=new c;e(h("",n,this.delegate)),d([],n,function(e){t?t(this,e):this.add(e)},this)},g})}(),function(){e("router",["route-recognizer"],function(e){function t(){this.recognizer=new e}function n(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function r(e){if(!e.isLoading){e.isLoading=!0;var t=e.getHandler("loading");t&&(t.enter&&t.enter(),t.setup&&t.setup())}}function i(e){e.isLoading=!1;var t=e.getHandler("loading");t&&t.exit&&t.exit()}function s(e,t){i(e);var n=e.getHandler("failure");n&&n.setup&&n.setup(t)}function o(e,t,n,r){var i=e._paramsForHandler(t,r,!0),s=i.params,o=i.toSetup,u=e.recognizer.generate(t,s);n.call(e,u),a(e,o)}function u(e,t,n,o){function f(r){v.context!==g&&h(v,g);var i=o.concat([{context:r,name:d.handler,handler:e.getHandler(d.handler),isDynamic:d.isDynamic}]);u(e,t,n+1,i)}if(t.length===n){var l=o[o.length-1],c=l&&l.handler;if(!c||!c.additionalHandler)return i(e),a(e,o),void 0;var p={handler:c.additionalHandler(),params:{},isDynamic:!1};t.push(p)}var d=t[n],v=e.getHandler(d.handler),g=v.deserialize&&v.deserialize(d.params);g&&"function"==typeof g.then?(r(e),g.then(f).then(null,function(t){s(e,t)})):f(g)}function a(e,t){var n=l(e.currentHandlerInfos||[],t);e.currentHandlerInfos=t,f(n.exited,function(e){delete e.context,e.exit&&e.exit()}),f(n.updatedContext,function(e,t){h(e,t),e.setup&&e.setup(t)});var r=!1;f(n.entered,function(e,t){r||(e.enter&&e.enter(),h(e,t),e.setup&&!1===e.setup(t)&&(r=!0))}),!r&&e.didTransition&&e.didTransition(t)}function f(e,t){for(var n=0,r=e.length;r>n;n++){var i=e[n],s=i.handler,o=i.context;t(s,o)}}function l(e,t){var n,r,i,s,o={updatedContext:[],exited:[],entered:[]};for(i=0,s=t.length;s>i;i++){var u=e[i],a=t[i];u&&u.handler===a.handler||(n=!0),n?(o.entered.push(a),u&&o.exited.unshift(u)):(r||u.context!==a.context)&&(r=!0,o.updatedContext.push(a))}for(i=t.length,s=e.length;s>i;i++)o.exited.unshift(e[i]);return o}function c(e,t){var n=e.currentHandlerInfos,r=t.shift();if(!n)throw new Error("Could not trigger event '"+r+"'. There are no active handlers");for(var i=n.length-1;i>=0;i--){var s=n[i],o=s.handler;if(o.events&&o.events[r])return o.events[r].apply(o,t),void 0}throw new Error("Nothing handled the event '"+r+"'.")}function h(e,t){e.context=t,e.contextDidChange&&e.contextDidChange()}return t.prototype={map:function(e){this.recognizer.delegate=this.delegate,this.recognizer.map(e,function(e,t){var n=t[t.length-1].handler,r=[t,{as:n}];e.add.apply(e,r)})},hasRoute:function(e){return this.recognizer.hasRoute(e)},handleURL:function(e){var t=this.recognizer.recognize(e);if(!t)throw new Error("No route matched the URL '"+e+"'");u(this,t,0,[])},updateURL:function(){throw"updateURL is not implemented"},replaceURL:function(e){this.updateURL(e)},transitionTo:function(e){var t=Array.prototype.slice.call(arguments,1);o(this,e,this.updateURL,t)},replaceWith:function(e){var t=Array.prototype.slice.call(arguments,1);o(this,e,this.replaceURL,t)},paramsForHandler:function(e){var t=this._paramsForHandler(e,[].slice.call(arguments,1));return t.params},generate:function(e){var t=this.paramsForHandler.apply(this,arguments);return this.recognizer.generate(e,t)},_paramsForHandler:function(e,t,r){var i,s,o,u,a,f,l=this.recognizer.handlersFor(e),c={},p=[],d=l.length,v=t.length;for(f=l.length-1;f>=0&&v>0;f--)l[f].names.length&&(v--,d=f);if(v>0)throw"More context objects were passed than there are dynamic segments for the route: "+e;for(f=0;l.length>f;f++)if(o=l[f],u=this.getHandler(o.handler),a=o.names,s=!1,a.length?(f>=d?(i=t.shift(),s=!0):i=u.context,u.serialize&&n(c,u.serialize(i,a))):r&&(f>d||!u.hasOwnProperty("context")?u.deserialize&&(i=u.deserialize({}),s=!0):i=u.context),r&&s&&h(u,i),p.push({isDynamic:!!o.names.length,name:o.handler,handler:u,context:i}),f===l.length-1){var g,y=p[p.length-1];(g=y.handler.additionalHandler)&&l.push({handler:g.call(y.handler),names:[]})}return{params:c,toSetup:p}},isActive:function(e){for(var t,n,r=[].slice.call(arguments,1),i=this.currentHandlerInfos,s=!1,o=i.length-1;o>=0;o--)if(n=i[o],n.name===e&&(s=!0),s){if(0===r.length)break;if(n.isDynamic&&(t=r.pop(),n.context!==t))return!1}return 0===r.length&&s},trigger:function(){var e=[].slice.call(arguments);c(this,e)}},t})}(),function(){function e(e){this.parent=e,this.matches=[]}e.prototype={resource:function(t,n,r){if(2===arguments.length&&"function"==typeof n&&(r=n,n={}),1===arguments.length&&(n={}),"string"!=typeof n.path&&(n.path="/"+t),r){var i=new e(t);r.call(i),this.push(n.path,t,i.generate())}else this.push(n.path,t)},push:function(e,t,n){var r=t.split(".");(""===e||"/"===e||"index"===r[r.length-1])&&(this.explicitIndex=!0),this.matches.push([e,t,n])},route:function(e,t){t=t||{},"string"!=typeof t.path&&(t.path="/"+e),this.parent&&"application"!==this.parent&&(e=this.parent+"."+e),this.push(t.path,e)},generate:function(){var e=this.matches;return this.explicitIndex||this.route("index",{path:"/"}),function(t){for(var n=0,r=e.length;r>n;n++){var i=e[n];t(i[0]).to(i[1],i[2])}}}},e.map=function(t){var n=new e;return t.call(n),n},Ember.RouterDSL=e}(),function(){Ember.controllerFor=function(e,t,n,r){return e.lookup("controller:"+t,r)||Ember.generateController(e,t,n)},Ember.generateController=function(e,t,n){var r,i,s;return n&&Ember.isArray(n)?(i=e.resolve("controller:array"),r=i.extend({content:n})):n?(i=e.resolve("controller:object"),r=i.extend({content:n})):(i=e.resolve("controller:basic"),r=i.extend()),r.toString=function(){return"(generated "+t+" controller)"},s="controller:"+t,e.register(s,r),e.lookup(s)}}(),function(){function e(e){var t=u(e,"location"),n=u(e,"rootURL"),r={};"string"==typeof n&&(r.rootURL=n),"string"==typeof t&&(r.implementation=t,t=a(e,"location",Ember.Location.create(r)))}function n(e){var t={},n=e.container,r=n.resolve("route:basic");return function(i){var s="route:"+i,o=n.lookup(s);if(t[i])return o;if(t[i]=!0,!o){if("loading"===i)return{};if("failure"===i)return e.constructor.defaultFailureHandler;n.register(s,r.extend()),o=n.lookup(s)}return o.routeName=i,o}}function r(e){for(var t=[],n=1,r=e.length;r>n;n++){var i=e[n].name,s=i.split(".");t.push(s[s.length-1])}return t.join(".")}function i(e,t,r){var i;t.getHandler=n(e);var s=function(){r.setURL(i)};if(t.updateURL=function(e){i=e,Ember.run.once(s)},r.replaceURL){var o=function(){r.replaceURL(i)};t.replaceURL=function(e){i=e,Ember.run.once(o)}}t.didTransition=function(t){e.didTransition(t)}}function s(e,t,n){var r,i=n[0];r=e.router.hasRoute(n[0])?i:n[0]=i+".index",e.router[t].apply(e.router,n),e.notifyPropertyChange("url")}var o=t("router"),u=Ember.get,a=Ember.set,f=Ember._MetamorphView;Ember.Router=Ember.Object.extend({location:"hash",init:function(){this.router=this.constructor.router,this._activeViews={},e(this)},url:Ember.computed(function(){return u(this,"location").getURL()}),startRouting:function(){this.router=this.router||this.constructor.map(Ember.K);var e=this.router,t=u(this,"location"),n=this.container,r=this;i(this,e,t),n.register("view:default",f),n.register("view:toplevel",Ember.View.extend()),t.onUpdateURL(function(e){r.handleURL(e)}),this.handleURL(t.getURL())},didTransition:function(e){var t=this.container.lookup("controller:application"),n=r(e);a(t,"currentPath",n),this.notifyPropertyChange("url"),u(this,"namespace").LOG_TRANSITIONS&&Ember.Logger.log("Transitioned into '"+n+"'")},handleURL:function(e){this.router.handleURL(e),this.notifyPropertyChange("url")},transitionTo:function(){var e=[].slice.call(arguments);s(this,"transitionTo",e)},replaceWith:function(){var e=[].slice.call(arguments);s(this,"replaceWith",e)},generate:function(){var e=this.router.generate.apply(this.router,arguments);return this.location.formatURL(e)},isActive:function(){var e=this.router;return e.isActive.apply(e,arguments)},send:function(){this.router.trigger.apply(this.router,arguments)},hasRoute:function(e){return this.router.hasRoute(e)},_lookupActiveView:function(e){var t=this._activeViews[e];return t&&t[0]},_connectActiveView:function(e,t){var n=this._activeViews[e];n&&n[0].off("willDestroyElement",this,n[1]);var r=function(){delete this._activeViews[e]};this._activeViews[e]=[t,r],t.one("willDestroyElement",this,r)}}),Ember.Router.reopenClass({defaultFailureHandler:{setup:function(e){Ember.Logger.error("Error while loading route:",e),setTimeout(function(){throw e})}}}),Ember.Router.reopenClass({map:function(e){var t=this.router=new o,n=Ember.RouterDSL.map(function(){this.resource("application",{path:"/"},function(){e.call(this)})});return t.map(n.generate()),t}})}(),function(){function e(e){for(var t,n,r=e.router.router.currentHandlerInfos,i=0,s=r.length;s>i;i++){if(n=r[i].handler,n===e)return t;t=n}}function t(n){var r,i=e(n);if(i)return(r=i.lastRenderedTemplate)?r:t(i,!0)}function n(e,n,r,i){i=i||{},i.into=i.into?i.into.replace(/\//g,"."):t(e),i.outlet=i.outlet||"main",i.name=n,i.template=r;var s,o=i.controller;return o=i.controller?i.controller:(s=e.container.lookup("controller:"+n))?s:e.routeName,"string"==typeof o&&(o=e.container.lookup("controller:"+o)),i.controller=o,i}function r(e,t,n){var r=n.into?"view:default":"view:toplevel";return e=e||t.lookup(r),a(e,"templateName")||(f(e,"template",n.template),f(e,"_debugTemplateName",n.name)),f(e,"renderedName",n.name),f(e,"controller",n.controller),e}function i(e,t,n){if(n.into){var r=e.router._lookupActiveView(n.into);e.teardownView=o(r,n.outlet),r.connectOutlet(n.outlet,t)}else{var i=a(e,"router.namespace.rootElement");e.teardownView&&e.teardownView(),e.router._connectActiveView(n.name,t),e.teardownView=s(t),t.appendTo(i)}}function s(e){return function(){e.destroy()}}function o(e,t){return function(){e.disconnectOutlet(t)}}function u(e){e.teardownView&&e.teardownView(),delete e.teardownView,delete e.lastRenderedTemplate}var a=Ember.get,f=Ember.set,l=Ember.String.classify;Ember.String.fmt,Ember.Route=Ember.Object.extend({exit:function(){this.deactivate(),u(this)},enter:function(){this.activate()},events:null,deactivate:Ember.K,activate:Ember.K,transitionTo:function(){var e=this.router;if(!e.isActive.apply(e,arguments))return this._checkingRedirect&&(this._redirected[this._redirectDepth]=!0),e.transitionTo.apply(e,arguments)},replaceWith:function(){var e=this.router;if(!e.isActive.apply(e,arguments))return this._checkingRedirect&&(this._redirected[this._redirectDepth]=!0),this.router.replaceWith.apply(this.router,arguments)},send:function(){return this.router.send.apply(this.router,arguments)},_redirectDepth:0,setup:function(e){var t;this._redirected||(t=!0,this._redirected=[]),this._checkingRedirect=!0;var n=++this._redirectDepth;void 0===e?this.redirect():this.redirect(e),this._redirectDepth--,this._checkingRedirect=!1;var r=this._redirected;if(t&&(this._redirected=null),r[n])return!1;var i=this.controllerFor(this.routeName,e);i&&(this.controller=i,f(i,"model",e)),this.setupControllers?this.setupControllers(i,e):this.setupController(i,e),this.renderTemplates?this.renderTemplates(e):this.renderTemplate(i,e)},redirect:Ember.K,deserialize:function(e){var t=this.model(e);return this.currentModel=t},contextDidChange:function(){this.currentModel=this.context},model:function(e){var t,n,r,i;for(var s in e)(t=s.match(/^(.*)_id$/))&&(n=t[1],i=e[s]),r=!0;if(!n&&r)return e;if(n){var o=l(n),u=this.router.namespace,a=u[o];return a.find(i)}},serialize:function(e,t){if(1===t.length){var n=t[0],r={};return r[n]=/_id$/.test(n)?a(e,"id"):e,r}},setupController:Ember.K,controllerFor:function(e,t){var n=this.router.container,r=n.lookup("controller:"+e);return r||(t=t||this.modelFor(e),r=Ember.generateController(n,e,t)),r},modelFor:function(e){var t=this.container.lookup("route:"+e);return t&&t.currentModel},renderTemplate:function(){this.render()},render:function(e,t){"object"!=typeof e||t||(t=e,e=this.routeName),e=e?e.replace(/\//g,"."):this.routeName;var s=this.container,o=s.lookup("view:"+e),u=s.lookup("template:"+e);(o||u)&&(t=n(this,e,u,t),o=r(o,s,t),"main"===t.outlet&&(this.lastRenderedTemplate=e),i(this,o,t))},willDestroy:function(){u(this)}})}(),function(){Ember.onLoad("Ember.Handlebars",function(){function e(e,i,s){function o(e,t){return"controller"===i[t]?e:Ember.ControllerMixin.detect(e)?o(r(e,"model")):e}var u=t(e,i,s);return n.call(u,o)}var t=Ember.Handlebars.resolveParams,n=Ember.ArrayPolyfills.map,r=Ember.get;Ember.Router.resolveParams=e})}(),function(){var e=Ember.get;Ember.set,Ember.String.fmt,Ember.onLoad("Ember.Handlebars",function(){function t(e,t){return e.hasRoute(t)||(t+=".index"),t}function n(e){var t=e.options.types.slice(1),n=e.options.data;return i(e.context,e.params,{types:t,data:n})}function r(e,r,i){var s,o=i||e.namedRoute;s=t(r,o);var u=[s];return u.concat(n(e.parameters))}var i=Ember.Router.resolveParams,s=Ember.ViewUtils.isSimpleClick,o=Ember.LinkView=Ember.View.extend({tagName:"a",namedRoute:null,currentWhen:null,title:null,activeClass:"active",replace:!1,attributeBindings:["href","title"],classNameBindings:"active",concreteView:Ember.computed(function(){return e(this,"parentView")}).property("parentView"),active:Ember.computed(function(){var t=this.get("router"),r=n(this.parameters),i=this.currentWhen+".index",s=t.isActive.apply(t,[this.currentWhen].concat(r))||t.isActive.apply(t,[i].concat(r));return s?e(this,"activeClass"):void 0}).property("namedRoute","router.url"),router:Ember.computed(function(){return this.get("controller").container.lookup("router:main")}),click:function(e){if(!s(e))return!0;e.preventDefault(),this.bubbles===!1&&e.stopPropagation();var t=this.get("router");this.get("replace")?t.replaceWith.apply(t,r(this,t)):t.transitionTo.apply(t,r(this,t))},href:Ember.computed(function(){if("a"!==this.get("tagName"))return!1;var e=this.get("router");return e.generate.apply(e,r(this,e))})});o.toString=function(){return"LinkView"},Ember.Handlebars.registerHelper("linkTo",function(e){var t=[].slice.call(arguments,-1)[0],n=[].slice.call(arguments,1,-1),r=t.hash;return r.namedRoute=e,r.currentWhen=r.currentWhen||e,r.parameters={context:this,options:t,params:n},Ember.Handlebars.helpers.view.call(this,o,t)})})}(),function(){Ember.get,Ember.set,Ember.onLoad("Ember.Handlebars",function(e){e.OutletView=Ember.ContainerView.extend(Ember._Metamorph),e.registerHelper("outlet",function(t,n){var r;for(t&&t.data&&t.data.isRenderData&&(n=t,t="main"),r=n.data.view;!r.get("template.isTop");)r=r.get("_parentView");return n.data.view.set("outletSource",r),n.hash.currentViewBinding="_view.outletSource._outlets."+t,e.helpers.view.call(this,e.OutletView,n)})})}(),function(){Ember.get,Ember.set,Ember.onLoad("Ember.Handlebars",function(){Ember.Handlebars.registerHelper("render",function(e,t,n){var r,i,s,o,u,a;2===arguments.length&&(n=t,t=void 0),"string"==typeof t&&(u=Ember.Handlebars.get(n.contexts[1],t,n),a={singleton:!1}),e=e.replace(/\//g,"."),r=n.data.keywords.controller.container,i=r.lookup("router:main"),o=r.lookup("view:"+e)||r.lookup("view:default"),s=(s=n.hash.controller)?r.lookup("controller:"+s,a):Ember.controllerFor(r,e,u,a),s&&u&&s.set("model",u);var f=n.contexts[1];f&&o.registerObserver(f,t,function(){s.set("model",Ember.Handlebars.get(f,t,n))}),s.set("target",n.data.keywords.controller),n.hash.viewName=Ember.String.camelize(e),n.hash.template=r.lookup("template:"+e),n.hash.controller=s,i&&!u&&i._connectActiveView(e,o),Ember.Handlebars.helpers.view.call(this,o,n)})})}(),function(){Ember.onLoad("Ember.Handlebars",function(){function e(e,n){var r=[];n&&r.push(n);var i=e.options.types.slice(1),s=e.options.data;return r.concat(t(e.context,e.params,{types:i,data:s}))}var t=Ember.Router.resolveParams,n=Ember.ViewUtils.isSimpleClick,r=Ember.Handlebars,i=r.get,s=r.SafeString,o=(Ember.get,Array.prototype.slice),u=r.ActionHelper={registeredActions:{}},a=["alt","shift","meta","ctrl"],f=function(e,t){if("undefined"==typeof t)return n(e);var r=!0;return a.forEach(function(n){e[n+"Key"]&&-1===t.indexOf(n)&&(r=!1)}),r};u.registerAction=function(t,n,r){var s=(++Ember.uuid).toString();return u.registeredActions[s]={eventName:n.eventName,handler:function(s){if(!f(s,r))return!0;s.preventDefault(),n.bubbles===!1&&s.stopPropagation();var o=n.target;o=o.target?i(o.root,o.target,o.options):o.root,Ember.run(function(){o.send?o.send.apply(o,e(n.parameters,t)):o[t].apply(o,e(n.parameters))})}},n.view.on("willClearRender",function(){delete u.registeredActions[s]}),s},r.registerHelper("action",function(e){var t,n=arguments[arguments.length-1],r=o.call(arguments,1,-1),i=n.hash,a={eventName:i.on||"click"};a.parameters={context:this,options:n,params:r},a.view=n.data.view;var f,l;i.target?(f=this,l=i.target):(t=n.data.keywords.controller)&&(f=t),a.target={root:f,target:l,options:n},a.bubbles=i.bubbles;var c=u.registerAction(e,a,i.allowedKeys);return new s('data-ember-action="'+c+'"')})})}(),function(){if(Ember.ENV.EXPERIMENTAL_CONTROL_HELPER){var e=Ember.get,t=Ember.set;Ember.Handlebars.registerHelper("control",function(n,r,i){function s(){var e=Ember.Handlebars.get(this,r,i);t(d,"model",e),p.rerender()}2===arguments.length&&(i=r,r=void 0);var o;r&&(o=Ember.Handlebars.get(this,r,i));var u,a,f=i.data.keywords.controller,l=(i.data.keywords.view,e(f,"_childContainers")),c=i.hash.controlID;l.hasOwnProperty(c)?a=l[c]:(u=e(f,"container"),a=u.child(),l[c]=a);var h=n.replace(/\//g,"."),p=a.lookup("view:"+h)||a.lookup("view:default"),d=a.lookup("controller:"+h),v=a.lookup("template:"+n);t(d,"target",f),t(d,"model",o),i.hash.template=v,i.hash.controller=d,Ember.addObserver(this,r,s),p.one("willDestroyElement",this,function(){Ember.removeObserver(this,r,s)}),Ember.Handlebars.helpers.view.call(this,p,i)})}}(),function(){var e=Ember.get;Ember.set,Ember.ControllerMixin.reopen({transitionToRoute:function(){var t=e(this,"target"),n=t.transitionToRoute||t.transitionTo;return n.apply(t,arguments)},transitionTo:function(){return this.transitionToRoute.apply(this,arguments)},replaceRoute:function(){var t=e(this,"target"),n=t.replaceRoute||t.replaceWith;return n.apply(t,arguments)},replaceWith:function(){return this.replaceRoute.apply(this,arguments)}})}(),function(){var e=Ember.get,t=Ember.set;Ember.View.reopen({init:function(){t(this,"_outlets",{}),this._super()},connectOutlet:function(n,r){var i=e(this,"_outlets"),s=e(this,"container"),o=s&&s.lookup("router:main"),u=e(r,"renderedName");t(i,n,r),o&&u&&o._connectActiveView(u,r)},disconnectOutlet:function(n){var r=e(this,"_outlets");t(r,n,null)}})}(),function(){Ember.get,Ember.set,Ember.Location={create:function(e){var t=e&&e.implementation,n=this.implementations[t];return n.create.apply(n,arguments)},registerImplementation:function(e,t){this.implementations[e]=t},implementations:{}}}(),function(){var e=Ember.get,t=Ember.set;Ember.NoneLocation=Ember.Object.extend({path:"",getURL:function(){return e(this,"path")},setURL:function(e){t(this,"path",e)},onUpdateURL:function(e){this.updateCallback=e},handleURL:function(e){t(this,"path",e),this.updateCallback(e)},formatURL:function(e){return e}}),Ember.Location.registerImplementation("none",Ember.NoneLocation)}(),function(){var e=Ember.get,t=Ember.set;Ember.HashLocation=Ember.Object.extend({init:function(){t(this,"location",e(this,"location")||window.location)},getURL:function(){return e(this,"location").hash.substr(1)},setURL:function(n){e(this,"location").hash=n,t(this,"lastSetURL",n)},onUpdateURL:function(n){var r=this,i=Ember.guidFor(this);Ember.$(window).bind("hashchange.ember-location-"+i,function(){Ember.run(function(){var i=location.hash.substr(1);e(r,"lastSetURL")!==i&&(t(r,"lastSetURL",null),n(i))})})},formatURL:function(e){return"#"+e},willDestroy:function(){var e=Ember.guidFor(this);Ember.$(window).unbind("hashchange.ember-location-"+e)}}),Ember.Location.registerImplementation("hash",Ember.HashLocation)}(),function(){var e=Ember.get,t=Ember.set,n=!1;Ember.HistoryLocation=Ember.Object.extend({init:function(){t(this,"location",e(this,"location")||window.location),this.initState()},initState:function(){t(this,"history",e(this,"history")||window.history),this.replaceState(this.formatURL(this.getURL()))},rootURL:"/",getURL:function(){var t=e(this,"rootURL"),n=e(this,"location").pathname;return t=t.replace(/\/$/,""),n=n.replace(t,"")},setURL:function(e){e=this.formatURL(e),this.getState()&&this.getState().path!==e&&this.pushState(e)},replaceURL:function(e){e=this.formatURL(e),this.getState()&&this.getState().path!==e&&this.replaceState(e)},getState:function(){return e(this,"history").state},pushState:function(t){e(this,"history").pushState({path:t},null,t),this._previousURL=this.getURL()},replaceState:function(t){e(this,"history").replaceState({path:t},null,t),this._previousURL=this.getURL()},onUpdateURL:function(e){var t=Ember.guidFor(this),i=this;Ember.$(window).bind("popstate.ember-location-"+t,function(){(n||(n=!0,i.getURL()!==i._previousURL))&&e(i.getURL())})},formatURL:function(t){var n=e(this,"rootURL");return""!==t&&(n=n.replace(/\/$/,"")),n+t},willDestroy:function(){var e=Ember.guidFor(this);Ember.$(window).unbind("popstate.ember-location-"+e)}}),Ember.Location.registerImplementation("history",Ember.HistoryLocation)}(),function(){function e(t,n,r,i){var s,o=t.name,u=t.incoming,a=t.incomingNames,f=a.length;if(r||(r={}),i||(i=[]),!r.hasOwnProperty(o)){for(i.push(o),r[o]=!0,s=0;f>s;s++)e(u[a[s]],n,r,i);n(t,i),i.pop()}}function t(){this.names=[],this.vertices={}}t.prototype.add=function(e){if(e){if(this.vertices.hasOwnProperty(e))return this.vertices[e];var t={name:e,incoming:{},incomingNames:[],hasOutgoing:!1,value:null};return this.vertices[e]=t,this.names.push(e),t}},t.prototype.map=function(e,t){this.add(e).value=t},t.prototype.addEdge=function(t,n){function r(e,t){if(e.name===n)throw new Error("cycle detected: "+n+" <- "+t.join(" <- "))}if(t&&n&&t!==n){var i=this.add(t),s=this.add(n);s.incoming.hasOwnProperty(t)||(e(i,r),i.hasOutgoing=!0,s.incoming[t]=i,s.incomingNames.push(t))}},t.prototype.topsort=function(t){var n,r,i={},s=this.vertices,o=this.names,u=o.length;for(n=0;u>n;n++)r=s[o[n]],r.hasOutgoing||e(r,t,i)},t.prototype.addEdges=function(e,t,n,r){var i;if(this.map(e,t),n)if("string"==typeof n)this.addEdge(e,n);else for(i=0;n.length>i;i++)this.addEdge(e,n[i]);if(r)if("string"==typeof r)this.addEdge(r,e);else for(i=0;r.length>i;i++)this.addEdge(r[i],e)},Ember.DAG=t}(),function(){var e=Ember.get,t=Ember.String.classify,n=Ember.String.capitalize,r=Ember.String.decamelize;Ember.DefaultResolver=Ember.Object.extend({namespace:null,resolve:function(e){var t=this.parseName(e),n=this[t.resolveMethodName];if(n){var r=n.call(this,t);if(r)return r}return this.resolveOther(t)},parseName:function(r){var i=r.split(":"),s=i[0],o=i[1],u=o,a=e(this,"namespace"),f=a;if("template"!==s&&-1!==u.indexOf("/")){var l=u.split("/");u=l[l.length-1];var c=n(l.slice(0,-1).join("."));f=Ember.Namespace.byName(c)}return{fullName:r,type:s,fullNameWithoutType:o,name:u,root:f,resolveMethodName:"resolve"+t(s)}},resolveTemplate:function(e){var t=e.fullNameWithoutType.replace(/\./g,"/");return Ember.TEMPLATES[t]?Ember.TEMPLATES[t]:(t=r(t),Ember.TEMPLATES[t]?Ember.TEMPLATES[t]:void 0)},useRouterNaming:function(e){e.name=e.name.replace(/\./g,"_"),"basic"===e.name&&(e.name="")},resolveController:function(e){return this.useRouterNaming(e),this.resolveOther(e)},resolveRoute:function(e){return this.useRouterNaming(e),this.resolveOther(e)},resolveView:function(e){return this.useRouterNaming(e),this.resolveOther(e)},resolveOther:function(n){var r=t(n.name)+t(n.type),i=e(n.root,r);return i?i:void 0}})}(),function(){function e(e){var t=e.get("resolver")||Ember.DefaultResolver,n=t.create({namespace:e});return function(e){return n.resolve(e)}}function t(e){var t=e.split(":"),n=t[0],r=t[1];if("template"!==n){var i=r;return i.indexOf(".")>-1&&(i=i.replace(/\.(.)/g,function(e){return e.charAt(1).toUpperCase()})),r.indexOf("_")>-1&&(i=i.replace(/_(.)/g,function(e){return e.charAt(1).toUpperCase()})),n+":"+i}return e}var n=Ember.get,r=Ember.set,i=Ember.Application=Ember.Namespace.extend(Ember.DeferredMixin,{rootElement:"body",eventDispatcher:null,customEvents:null,_readinessDeferrals:1,init:function(){this.$||(this.$=Ember.$),this.__container__=this.buildContainer(),this.Router=this.Router||this.defaultRouter(),this.Router&&(this.Router.namespace=this),this._super(),this.scheduleInitialize(),Ember.LOG_VERSION&&(Ember.LOG_VERSION=!1)},buildContainer:function(){var e=this.__container__=i.buildContainer(this);return e},defaultRouter:function(){return void 0===this.router?Ember.Router.extend():void 0},scheduleInitialize:function(){var e=this;!this.$||this.$.isReady?Ember.run.schedule("actions",e,"_initialize"):this.$().ready(function(){Ember.run(e,"_initialize")})},deferReadiness:function(){this._readinessDeferrals++},advanceReadiness:function(){this._readinessDeferrals--,0===this._readinessDeferrals&&Ember.run.once(this,this.didBecomeReady)},register:function(){var e=this.__container__;e.register.apply(e,arguments)},inject:function(){var e=this.__container__;e.injection.apply(e,arguments)},initialize:function(){},_initialize:function(){return this.isDestroyed?void 0:(this.register("router:main",this.Router),this.runInitializers(),Ember.runLoadHooks("application",this),this.advanceReadiness(),this)},reset:function(){Ember.run(this,function(){Ember.run(n(this,"__container__"),"destroy"),this.buildContainer(),this._readinessDeferrals=1,this.$(this.rootElement).removeClass("ember-application"),Ember.run.schedule("actions",this,function(){this._initialize(),this.startRouting()})})},runInitializers:function(){var e,t,r=n(this.constructor,"initializers"),i=this.__container__,s=new Ember.DAG,o=this;for(e=0;r.length>e;e++)t=r[e],s.addEdges(t.name,t.initialize,t.before,t.after);s.topsort(function(e){var t=e.value;t(i,o)})},didBecomeReady:function(){this.setupEventDispatcher(),this.ready(),this.startRouting(),Ember.testing||(Ember.Namespace.processAll(),Ember.BOOTED=!0),this.resolve(this)},setupEventDispatcher:function(){var e=this.createEventDispatcher(),t=n(this,"customEvents");e.setup(t)},createEventDispatcher:function(){var e=n(this,"rootElement"),t=Ember.EventDispatcher.create({rootElement:e});return r(this,"eventDispatcher",t),t},startRouting:function(){var e=this.__container__.lookup("router:main");e&&e.startRouting()},handleURL:function(e){var t=this.__container__.lookup("router:main");t.handleURL(e)},ready:Ember.K,resolver:null,willDestroy:function(){Ember.BOOTED=!1;var e=n(this,"eventDispatcher");e&&e.destroy(),n(this,"__container__").destroy()},initializer:function(e){this.constructor.initializer(e)}});Ember.Application.reopenClass({concatenatedProperties:["initializers"],initializers:Ember.A(),initializer:function(e){var t=n(this,"initializers");t.push(e)},buildContainer:function(n){var r=new Ember.Container;return Ember.Container.defaultContainer=Ember.Container.defaultContainer||r,r.set=Ember.set,r.normalize=t,r.resolver=e(n),r.optionsForType("view",{singleton:!1}),r.optionsForType("template",{instantiate:!1}),r.register("application:main",n,{instantiate:!1}),r.register("controller:basic",Ember.Controller,{instantiate:!1}),r.register("controller:object",Ember.ObjectController,{instantiate:!1}),r.register("controller:array",Ember.ArrayController,{instantiate:!1}),r.register("route:basic",Ember.Route,{instantiate:!1}),r.injection("router:main","namespace","application:main"),r.typeInjection("controller","target","router:main"),r.typeInjection("controller","namespace","application:main"),r.typeInjection("route","router","router:main"),r}}),Ember.runLoadHooks("Ember.Application",Ember.Application)}(),function(){function e(e){for(var n,r=t(e,"needs"),i=t(e,"container"),s=!0,o=0,u=r.length;u>o;o++)n=r[o],-1===n.indexOf(":")&&(n="controller:"+n),i.has(n)||(s=!1);return s}var t=Ember.get;Ember.set;var n=Ember.Object.extend({controller:null,unknownProperty:function(e){for(var n,r=t(this,"controller"),i=t(r,"needs"),s=r.get("container"),o=0,u=i.length;u>o;o++)if(n=i[o],n===e)return s.lookup("controller:"+e)}});Ember.ControllerMixin.reopen({concatenatedProperties:["needs"],needs:[],init:function(){this._super.apply(this,arguments),!e(this)},controllerFor:function(e){var n=t(this,"container");return n.lookup("controller:"+e)},controllers:Ember.computed(function(){return n.create({controller:this})})})}(),function(){var e=Ember.get,t=Ember.set;Ember.State=Ember.Object.extend(Ember.Evented,{isState:!0,parentState:null,start:null,name:null,path:Ember.computed(function(){var t=e(this,"parentState.path"),n=e(this,"name");return t&&(n=t+"."+n),n}),trigger:function(e){this[e]&&this[e].apply(this,[].slice.call(arguments,1)),this._super.apply(this,arguments)},init:function(){var n=e(this,"states");t(this,"childStates",Ember.A()),t(this,"eventTransitions",e(this,"eventTransitions")||{});var r,i,s;if(n)for(r in n)this.setupChild(n,r,n[r]);else{n={};for(r in this)"constructor"!==r&&(i=this[r])&&((s=i.transitionTarget)&&(this.eventTransitions[r]=s),this.setupChild(n,r,i));t(this,"states",n)}t(this,"pathsCaches",{})},setPathsCache:function(t,n,r){var i=Ember.guidFor(t.constructor),s=e(this,"pathsCaches"),o=s[i]||{};o[n]=r,s[i]=o},getPathsCache:function(t,n){var r=Ember.guidFor(t.constructor),i=e(this,"pathsCaches"),s=i[r]||{};return s[n]},setupChild:function(n,r,i){return i?(i.isState?t(i,"name",r):Ember.State.detect(i)&&(i=i.create({name:r})),i.isState?(t(i,"parentState",this),e(this,"childStates").pushObject(i),n[r]=i,i):void 0):!1},lookupEventTransition:function(e){for(var t,n=this;n&&!t;)t=n.eventTransitions[e],n=n.get("parentState");return t},isLeaf:Ember.computed(function(){return!e(this,"childStates").length}),hasContext:!0,setup:Ember.K,enter:Ember.K,exit:Ember.K}),Ember.State.reopenClass({transitionTo:function(e){var t=function(t,n){var r=[],i=Ember.$&&Ember.$.Event;n&&i&&n instanceof i?n.hasOwnProperty("contexts")&&(r=n.contexts.slice()):r=[].slice.call(arguments,1),r.unshift(e),t.transitionTo.apply(t,r)};return t.transitionTarget=e,t}})}(),function(){var e=Ember.get,t=Ember.set,n=Ember.String.fmt,r=Ember.ArrayPolyfills.forEach,i=function(e){this.enterStates=e.enterStates.slice(),this.exitStates=e.exitStates.slice(),this.resolveState=e.resolveState,this.finalState=e.enterStates[e.enterStates.length-1]||e.resolveState};i.prototype={normalize:function(e,t){return this.matchContextsToStates(t),this.addInitialStates(),this.removeUnchangedContexts(e),this},matchContextsToStates:function(t){for(var n,r,i=this.enterStates.length-1,s=[];t.length>0;){if(i>=0)n=this.enterStates[i--];else{if(this.enterStates.length){if(n=e(this.enterStates[0],"parentState"),!n)throw"Cannot match all contexts to states"}else n=this.resolveState;this.enterStates.unshift(n),this.exitStates.unshift(n)}r=e(n,"hasContext")?t.pop():null,s.unshift(r)}this.contexts=s},addInitialStates:function(){for(var t,n=this.finalState;;){if(t=e(n,"initialState")||"start",n=e(n,"states."+t),!n)break;this.finalState=n,this.enterStates.push(n),this.contexts.push(void 0)}},removeUnchangedContexts:function(e){for(;this.enterStates.length>0&&this.enterStates[0]===this.exitStates[0];){if(this.enterStates.length===this.contexts.length){if(e.getStateMeta(this.enterStates[0],"context")!==this.contexts[0])break;this.contexts.shift()}this.resolveState=this.enterStates.shift(),this.exitStates.shift()}}};var s=function(t,r,i){var u,f,l,c=this.enableLogging,h=i?"unhandledEvent":t,p=r[h];if(u=[].slice.call(arguments,3),"function"==typeof p)return c&&(i?Ember.Logger.log(n("STATEMANAGER: Unhandled event '%@' being sent to state %@.",[t,e(r,"path")])):Ember.Logger.log(n("STATEMANAGER: Sending event '%@' to state %@.",[t,e(r,"path")]))),l=u,i&&l.unshift(t),l.unshift(this),p.apply(r,l);var d=e(r,"parentState");return d?(f=u,f.unshift(t,d,i),s.apply(this,f)):i?void 0:o.call(this,t,u,!0)},o=function(t,n,r){return n.unshift(t,e(this,"currentState"),r),s.apply(this,n)};Ember.StateManager=Ember.State.extend({init:function(){this._super(),t(this,"stateMeta",Ember.Map.create());var n=e(this,"initialState");!n&&e(this,"states.start")&&(n="start"),n&&this.transitionTo(n)},stateMetaFor:function(t){var n=e(this,"stateMeta"),r=n.get(t);return r||(r={},n.set(t,r)),r},setStateMeta:function(e,n,r){return t(this.stateMetaFor(e),n,r)},getStateMeta:function(t,n){return e(this.stateMetaFor(t),n)},currentState:null,currentPath:Ember.computed.alias("currentState.path"),transitionEvent:"setup",errorOnUnhandledEvent:!0,send:function(e){var t=[].slice.call(arguments,1);return o.call(this,e,t,!1)},unhandledEvent:function(t,n){if(e(this,"errorOnUnhandledEvent"))throw new Ember.Error(this.toString()+" could not respond to event "+n+" in state "+e(this,"currentState.path")+".")},getStateByPath:function(t,n){for(var r=n.split("."),i=t,s=0,o=r.length;o>s&&(i=e(e(i,"states"),r[s]),i);s++);return i},findStateByPath:function(t,n){for(var r;!r&&t;)r=this.getStateByPath(t,n),t=e(t,"parentState");return r},getStatesInPath:function(t,n){if(!n||""===n)return void 0;for(var r,i,s=n.split("."),o=[],u=0,a=s.length;a>u;u++){if(r=e(t,"states"),!r)return void 0;if(i=e(r,s[u]),!i)return void 0;t=i,o.push(i)}return o},goToState:function(){return this.transitionTo.apply(this,arguments)},transitionTo:function(t,n){if(!Ember.isEmpty(t)){var r=n?Array.prototype.slice.call(arguments,1):[],s=e(this,"currentState")||this,o=this.contextFreeTransition(s,t),u=(new i(o)).normalize(this,r);this.enterState(u),this.triggerSetupContext(u)}},contextFreeTransition:function(t,n){var r=t.getPathsCache(this,n);if(r)return r;for(var i=this.getStatesInPath(t,n),s=[],o=t;o&&!i;){if(s.unshift(o),o=e(o,"parentState"),!o&&(i=this.getStatesInPath(this,n),!i))return;i=this.getStatesInPath(o,n)}for(;i.length>0&&i[0]===s[0];)o=i.shift(),s.shift();var u={exitStates:s,enterStates:i,resolveState:o};return t.setPathsCache(this,n,u),u},triggerSetupContext:function(t){var n=t.contexts,i=t.enterStates.length-n.length,s=t.enterStates,o=e(this,"transitionEvent");r.call(s,function(e,t){e.trigger(o,this,n[t-i])},this)},getState:function(t){var n=e(this,t),r=e(this,"parentState");return n?n:r?r.getState(t):void 0},enterState:function(n){var i=this.enableLogging,s=n.exitStates.slice(0).reverse();r.call(s,function(e){e.trigger("exit",this)},this),r.call(n.enterStates,function(t){i&&Ember.Logger.log("STATEMANAGER: Entering "+e(t,"path")),t.trigger("enter",this)},this),t(this,"currentState",n.finalState)}})}(),function(){function e(e){var t=new o;return Ember.run(EMBER_APP_BEING_TESTED,EMBER_APP_BEING_TESTED.handleURL,e),i(t,t.resolve),t}function t(e){var t=new o;return Ember.run(function(){Ember.$(e).click()}),i(t,t.resolve),t}function n(e,t){var n=new o,s=r(e);return Ember.run(function(){s.val(t)}),i(n,n.resolve),n}function r(e){return Ember.$(".ember-application").find(e)}function i(e,t){t||(t=e,e=null),stop();var n=setInterval(function(){var r=EMBER_APP_BEING_TESTED.__container__.lookup("router:main").router.isLoading;r||u||Ember.run.hasScheduledTimers()||Ember.run.currentRunLoop||(clearInterval(n),start(),Ember.run(e,t))},200)}var s,o=Ember.RSVP.Promise,u=0;Ember.Application.reopen({setupForTesting:function(){this.deferReadiness(),this.Router.reopen({location:"none"}),window.EMBER_APP_BEING_TESTED=this},injectTestHelpers:function(){Ember.$(document).ajaxStart(function(){u++}),Ember.$(document).ajaxStop(function(){u--}),window.visit=e,window.click=t,window.fillIn=n,s=window.find,window.find=r},removeTestHelpers:function(){window.visit=null,window.click=null,window.fillIn=null,window.find=s}})}()}(),"undefined"==typeof location||"localhost"!==location.hostname&&"127.0.0.1"!==location.hostname||console.warn("You are running a production build of Ember on localhost and won't receive detailed error messages. If you want full error messages please use the non-minified build provided on the Ember website."),define("emberjs-lib",function(){}),define("emberjs",["emberjs-lib"],function(){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("emberjs"),window.localStorage.showDevelopmentFeatures&&(Ember.CP_DEFAULT_CACHEABLE=!0,Ember.RAISE_ON_DEPRECATION=!0),Ember}),function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.0-beta.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})}(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(n[u]=e.isPlainObject(a)?e.widget.extend({},n[u],a):a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():new i(o,this)}),f}},e.Widget=function(e,t){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on({remove:"destroy"}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n){n?(t=e(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element);var r=this;e.each(n,function(n,i){function s(){if(r.options.disabled===!0||e(this).hasClass("ui-state-disabled"))return;return(typeof i=="string"?r[i]:i).apply(r,arguments)}typeof i!="string"&&(s.guid=i.guid=i.guid||s.guid||e.guid++);var o=n.match(/^(\w+)\s*(.*)$/),u=o[1]+r.eventNamespace,a=o[2];a?r.widget().delegate(a,u,s):t.bind(u,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{version:"1.9.0-beta.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.0-beta.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);var r=this.element[0],i=!1;while(r&&(r=r.parentNode))r==document&&(i=!0);if(!i&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return this.options.iframeFix===!0&&e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var a=this.relative_container.offset();u=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var f=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?f-this.offset.click.top<u[1]||f-this.offset.click.top>u[3]?f-this.offset.click.top<u[1]?f+n.grid[1]:f-n.grid[1]:f:f;var l=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?l-this.offset.click.left<u[0]||l-this.offset.click.left>u[2]?l-this.offset.click.left<u[0]?l+n.grid[0]:l-n.grid[0]:l:l}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,a=t.top,f=t.left;return e.ui.isOver(i+n,s+r,a,f,o,u)};e.each(r.sortables,function(s){this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,a=n.offset.top,f=a+r.helperProportions.height;for(var l=r.snapElements.length-1;l>=0;l--){var c=r.snapElements[l].left,h=c+r.snapElements[l].width,p=r.snapElements[l].top,d=p+r.snapElements[l].height;if(!(c-s<o&&o<h+s&&p-s<a&&a<d+s||c-s<o&&o<h+s&&p-s<f&&f<d+s||c-s<u&&u<h+s&&p-s<a&&a<d+s||c-s<u&&u<h+s&&p-s<f&&f<d+s)){r.snapElements[l].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=!1;continue}if(i.snapMode!="inner"){var v=Math.abs(p-f)<=s,m=Math.abs(d-a)<=s,g=Math.abs(c-u)<=s,y=Math.abs(h-o)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p-r.helperProportions.height,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left)}var b=v||m||g||y;if(i.snapMode!="outer"){var v=Math.abs(p-a)<=s,m=Math.abs(d-f)<=s,g=Math.abs(c-o)<=s,y=Math.abs(h-u)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[l].snapping&&(v||m||g||y||b)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=v||m||g||y||b}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e,t){e.widget("ui.droppable",{version:"1.9.0-beta.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];for(var n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t=="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,n,r){if(!n.offset)return!1;var i=(t.positionAbs||t.position.absolute).left,s=i+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,u=o+t.helperProportions.height,a=n.offset.left,f=a+n.proportions.width,l=n.offset.top,c=l+n.proportions.height;switch(r){case"fit":return a<=i&&s<=f&&l<=o&&u<=c;case"intersect":return a<i+t.helperProportions.width/2&&s-t.helperProportions.width/2<f&&l<o+t.helperProportions.height/2&&u-t.helperProportions.height/2<c;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,d=e.ui.isOver(p,h,l,a,n.proportions.height,n.proportions.width);return d;case"touch":return(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c)&&(i>=a&&i<=f||s>=a&&s<=f||i<a&&s>f);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r=e.ui.ddmanager.droppables[t.options.scope]||[],i=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<r.length;o++){if(r[o].options.disabled||t&&!r[o].accept.call(r[o].element[0],t.currentItem||t.element))continue;for(var u=0;u<s.length;u++)if(s[u]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible=r[o].element.css("display")!="none";if(!r[o].visible)continue;i=="mousedown"&&r[o]._activate.call(r[o],n),r[o].offset=r[o].element.offset(),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r=e.ui.intersect(t,this,this.options.tolerance),i=!r&&this.isover==1?"isout":r&&this.isover==0?"isover":null;if(!i)return;var s;if(this.options.greedy){var o=this.element.parents(":data(droppable):eq(0)");o.length&&(s=e.data(o[0],"droppable"),s.greedyChild=i=="isover"?1:0)}s&&i=="isover"&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[i]=1,this[i=="isout"?"isover":"isout"]=0,this[i=="isover"?"_over":"_out"].call(this,n),s&&i=="isout"&&(s.isout=0,s.isover=1,s._over.call(s,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e,t){e.widget("ui.resizable",e.ui.mouse,{version:"1.9.0-beta.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,n=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var r=this.handles.split(",");this.handles={};for(var i=0;i<r.length;i++){var s=e.trim(r[i]),o="ui-resizable-"+s,u=e('<div class="ui-resizable-handle '+o+'"></div>');u.css({zIndex:n.zIndex}),"se"==s&&u.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(u)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[n],this.element),i=0;i=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth();var s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(s,i),this._proportionallyResize()}if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(n.disabled)return;e(this).removeClass("ui-resizable-autohide"),t._handles.show()}).mouseleave(function(){if(n.disabled)return;t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;n.after(this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var n=!1;for(var r in this.handles)e(this.handles[r])[0]==t.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var r=this.options,i=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:i.top,left:i.left}),this._renderProxy();var o=n(this.helper.css("left")),u=n(this.helper.css("top"));r.containment&&(o+=e(r.containment).scrollLeft()||0,u+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:u},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:o,top:u},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof r.aspectRatio=="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;var a=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor",a=="auto"?this.axis+"-resize":a),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(e){var t=this.helper,n=this.options,r={},i=this,s=this.originalMousePosition,o=this.axis,u=e.pageX-s.left||0,a=e.pageY-s.top||0,f=this._change[o];if(!f)return!1;var l=f.apply(this,[e,u,a]);this._updateVirtualBoundaries(e.shiftKey);if(this._aspectRatio||e.shiftKey)l=this._updateRatio(l,e);return l=this._respectSize(l,e),this._propagate("resize",e),t.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,r=this;if(this._helper){var i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:r.sizeDiff.height,u=s?0:r.sizeDiff.width,a={width:r.helper.width()-u,height:r.helper.height()-o},f=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,l=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;n.animate||this.element.css(e.extend(a,{top:l,left:f})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t=this.options,n,i,s,o,u;u={minWidth:r(t.minWidth)?t.minWidth:0,maxWidth:r(t.maxWidth)?t.maxWidth:Infinity,minHeight:r(t.minHeight)?t.minHeight:0,maxHeight:r(t.maxHeight)?t.maxHeight:Infinity};if(this._aspectRatio||e)n=u.minHeight*this.aspectRatio,s=u.minWidth/this.aspectRatio,i=u.maxHeight*this.aspectRatio,o=u.maxWidth/this.aspectRatio,n>u.minWidth&&(u.minWidth=n),s>u.minHeight&&(u.minHeight=s),i<u.maxWidth&&(u.maxWidth=i),o<u.maxHeight&&(u.maxHeight=o);this._vBoundaries=u},_updateCache:function(e){var t=this.options;this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var n=this.options,i=this.position,s=this.size,o=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),o=="sw"&&(e.left=i.left+(s.width-e.width),e.top=null),o=="nw"&&(e.top=i.top+(s.height-e.height),e.left=i.left+(s.width-e.width)),e},_respectSize:function(e,t){var n=this.helper,i=this._vBoundaries,s=this._aspectRatio||t.shiftKey,o=this.axis,u=r(e.width)&&i.maxWidth&&i.maxWidth<e.width,a=r(e.height)&&i.maxHeight&&i.maxHeight<e.height,f=r(e.width)&&i.minWidth&&i.minWidth>e.width,l=r(e.height)&&i.minHeight&&i.minHeight>e.height;f&&(e.width=i.minWidth),l&&(e.height=i.minHeight),u&&(e.width=i.maxWidth),a&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,p=/sw|nw|w/.test(o),d=/nw|ne|n/.test(o);f&&p&&(e.left=c-i.minWidth),u&&p&&(e.left=c-i.maxWidth),l&&d&&(e.top=h-i.minHeight),a&&d&&(e.top=h-i.maxHeight);var v=!e.width&&!e.height;return v&&!e.left&&e.top?e.top=null:v&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){var t=this.options;if(!this._proportionallyResizeElements.length)return;var n=this.helper||this.element;for(var r=0;r<this._proportionallyResizeElements.length;r++){var i=this._proportionallyResizeElements[r];if(!this.borderDif){var s=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],o=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var n=parseInt(e,10)||0,r=parseInt(o[t],10)||0;return n+r})}i.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var r=e.browser.msie&&e.browser.version<7,i=r?1:0,s=r?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+s,height:this.element.outerHeight()+s,position:"absolute",left:this.elementOffset.left-i+"px",top:this.elementOffset.top-i+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,n){return{width:this.originalSize.width+t}},w:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{top:s.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof i.alsoResize=="object"&&!i.alsoResize.parentNode?i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)}):s(i.alsoResize)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(t,n){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),u=o&&e.ui.hasScroll(s[0],"left")?0:r.sizeDiff.height,a=o?0:r.sizeDiff.width,f={width:r.size.width-a,height:r.size.height-u},l=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,c=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;r.element.animate(e.extend(f,c&&l?{top:c,left:l}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var n={width:parseInt(r.element.css("width"),10),height:parseInt(r.element.css("height"),10),top:parseInt(r.element.css("top"),10),left:parseInt(r.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),r._updateCache(n),r._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(t,r){var i=e(this).data("resizable"),s=i.options,o=i.element,u=s.containment,a=u instanceof e?u.get(0):/parent/.test(u)?o.parent().get(0):u;if(!a)return;i.containerElement=e(a);if(/document/.test(u)||u==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var f=e(a),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,t){l[e]=n(f.css("padding"+t))}),i.containerOffset=f.offset(),i.containerPosition=f.position(),i.containerSize={height:f.innerHeight()-l[3],width:f.innerWidth()-l[1]};var c=i.containerOffset,h=i.containerSize.height,p=i.containerSize.width,d=e.ui.hasScroll(a,"left")?a.scrollWidth:p,v=e.ui.hasScroll(a)?a.scrollHeight:h;i.parentData={element:a,left:c.left,top:c.top,width:d,height:v}}},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.containerSize,o=r.containerOffset,u=r.size,a=r.position,f=r._aspectRatio||t.shiftKey,l={top:0,left:0},c=r.containerElement;c[0]!=document&&/static/.test(c.css("position"))&&(l=o),a.left<(r._helper?o.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-o.left:r.position.left-l.left),f&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=i.helper?o.left:0),a.top<(r._helper?o.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-o.top:r.position.top),f&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?o.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var h=Math.abs((r._helper?r.offset.left-l.left:r.offset.left-l.left)+r.sizeDiff.width),p=Math.abs((r._helper?r.offset.top-l.top:r.offset.top-o.top)+r.sizeDiff.height),d=r.containerElement.get(0)==r.element.parent().get(0),v=/relative|absolute/.test(r.containerElement.css("position"));d&&v&&(h-=r.parentData.left),h+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-h,f&&(r.size.height=r.size.width/r.aspectRatio)),p+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-p,f&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.position,o=r.containerOffset,u=r.containerPosition,a=r.containerElement,f=e(r.helper),l=f.offset(),c=f.outerWidth()-r.sizeDiff.width,h=f.outerHeight()-r.sizeDiff.height;r._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h}),r._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size;r.ghost=r.originalElement.clone(),r.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:""),r.ghost.appendTo(r.helper)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.ghost.css({position:"relative",height:r.size.height,width:r.size.width})},stop:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.helper&&r.helper.get(0).removeChild(r.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size,o=r.originalSize,u=r.originalPosition,a=r.axis,f=i._aspectRatio||t.shiftKey;i.grid=typeof i.grid=="number"?[i.grid,i.grid]:i.grid;var l=Math.round((s.width-o.width)/(i.grid[0]||1))*(i.grid[0]||1),c=Math.round((s.height-o.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c):/^(ne)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c):/^(sw)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.left=u.left-l):(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c,r.position.left=u.left-l)}});var n=function(e){return parseInt(e,10)||0},r=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.9.0-beta.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var n;this.refresh=function(){n=e(t.options.filter,t.element[0]),n.addClass("ui-selectee"),n.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=n.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;var r=this.options;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().andSelf().each(function(){var r=e.data(this,"selectable-item");if(r){var i=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected");return r.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),r.unselecting=!i,r.selecting=i,r.selected=i,i?n._trigger("selecting",t,{selecting:r.element}):n._trigger("unselecting",t,{unselecting:r.element}),!1}})},_mouseDrag:function(t){var n=this;this.dragged=!0;if(this.options.disabled)return;var r=this.options,i=this.opos[0],s=this.opos[1],o=t.pageX,u=t.pageY;if(i>o){var a=o;o=i,i=a}if(s>u){var a=u;u=s,s=a}return this.helper.css({left:i,top:s,width:o-i,height:u-s}),this.selectees.each(function(){var a=e.data(this,"selectable-item");if(!a||a.element==n.element[0])return;var f=!1;r.tolerance=="touch"?f=!(a.left>o||a.right<i||a.top>u||a.bottom<s):r.tolerance=="fit"&&(f=a.left>i&&a.right<o&&a.top>s&&a.bottom<u),f?(a.selected&&(a.$element.removeClass("ui-selected"),a.selected=!1),a.unselecting&&(a.$element.removeClass("ui-unselecting"),a.unselecting=!1),a.selecting||(a.$element.addClass("ui-selecting"),a.selecting=!0,n._trigger("selecting",t,{selecting:a.element}))):(a.selecting&&((t.metaKey||t.ctrlKey)&&a.startselected?(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.$element.addClass("ui-selected"),a.selected=!0):(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.startselected&&(a.$element.addClass("ui-unselecting"),a.unselecting=!0),n._trigger("unselecting",t,{unselecting:a.element}))),a.selected&&!t.metaKey&&!t.ctrlKey&&!a.startselected&&(a.$element.removeClass("ui-selected"),a.selected=!1,a.$element.addClass("ui-unselecting"),a.unselecting=!0,n._trigger("unselecting",t,{unselecting:a.element})))}),!1},_mouseStop:function(t){var n=this;this.dragged=!1;var r=this.options;return e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e,t){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.0-beta.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var i=null,s=e(t.target).parents().each(function(){if(e.data(this,r.widgetName+"-item")==r)return i=e(this),!1});e.data(t.target,r.widgetName+"-item")==r&&(i=e(t.target));if(!i)return!1;if(this.options.handle&&!n){var o=!1;e(this.options.handle,i).find("*").andSelf().each(function(){this==t.target&&(o=!0)});if(!o)return!1}return this.currentItem=i,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var n=this.options.axis==="x"||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=this.options.axis==="y"||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o=="right"||s=="down"?2:1:s&&(s=="down"?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s=="right"&&r||s=="left"&&!r:i&&(i=="down"&&n||i=="up"&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!=0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!=0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=[],r=[],i=this._connectWith();if(i&&t)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&r.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}}r.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var s=r.length-1;s>=0;s--)r[s][0].each(function(){n.push(this)});return e(n)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");for(var t=0;t<this.items.length;t++)for(var n=0;n<e.length;n++)e[n]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],i=this._connectWith();if(i&&this.ready)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&(r.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a))}}for(var s=r.length-1;s>=0;s--){var f=r[s][1],l=r[s][0];for(var u=0,c=l.length;u<c;u++){var h=e(l[u]);h.data(this.widgetName+"-item",f),n.push({item:h,instance:f,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])continue;var i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=i.outerWidth(),r.height=i.outerHeight());var s=i.offset();r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){t=t||this;var n=t.options;if(!n.placeholder||n.placeholder.constructor==String){var r=n.placeholder;n.placeholder={element:function(){var n=e(document.createElement(t.currentItem[0].nodeName)).addClass(r||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return r||(n.style.visibility="hidden"),n},update:function(e,i){if(r&&!n.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}}}t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n=null,r=null;for(var i=this.containers.length-1;i>=0;i--){if(e.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(n&&e.contains(this.containers[i].element[0],n.element[0]))continue;n=this.containers[i],r=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!n)return;if(this.containers.length===1)this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1;else if(this.currentContainer!=this.containers[r]){var s=1e4,o=null,u=this.positionAbs[this.containers[r].floating?"left":"top"];for(var a=this.items.length-1;a>=0;a--){if(!e.contains(this.containers[r].element[0],this.items[a].item[0]))continue;var f=this.containers[r].floating?this.items[a].item.offset().left:this.items[a].item.offset().top;Math.abs(f-u)<s&&(s=Math.abs(f-u),o=this.items[a],this.direction=f-u>0?"down":"up")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[r],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper=="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(r[0].style.width==""||n.forceHelperSize)&&r.width(this.currentItem.width()),(r[0].style.height==""||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var a=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?a-this.offset.click.left<this.containment[0]||a-this.offset.click.left>this.containment[2]?a-this.offset.click.left<this.containment[0]?a+n.grid[0]:a-n.grid[0]:a:a}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i==this.counter&&this.refreshPositions(!r)})},_clear:function(t,n){this.reverting=!1;var r=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS)if(this._storedCSS[i]=="auto"||this._storedCSS[i]=="static")this._storedCSS[i]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&r.push(function(e){this._trigger("update",e,this._uiHash())});if(!e.contains(this.element[0],this.currentItem[0])){n||r.push(function(e){this._trigger("remove",e,this._uiHash())});for(var i=this.containers.length-1;i>=0;i--)e.contains(this.containers[i].element[0],this.currentItem[0])&&!n&&(r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[i])),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[i])))}for(var i=this.containers.length-1;i>=0;i--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),jQuery.effects||function(e,t){var n=e.uiBackCompat!==!1,r="ui-effects-";e.effects={effect:{}},function(e,t){function c(e,t,n){var r=u[t.type]||{},i=n||t.empty;return i&&e==null?null:t.def&&e==null?t.def:(r.floor?e=~~e:e=parseFloat(e),e==null||isNaN(e)?t.def:r.mod?(e%=r.mod,e<0?r.mod+e:e):r.min>e?r.min:r.max<e?r.max:e)}function h(t){var n=s(),r=n._rgba=[];return t=t.toLowerCase(),l(i,function(e,i){var s=i.re.exec(t),u=s&&i.parse(s),a,f=i.space||"rgba",l=o[f].cache;if(u)return a=n[f](u),n[l]=a[l],r=n._rgba=a._rgba,!1}),r.length!==0?(Math.max.apply(Math,r)===0&&e.extend(r,f.transparent),n):f[t]}function p(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*6*n:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color outlineColor".split(" "),r=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],s=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},o={rgba:{cache:"_rgba",props:{red:{idx:0,type:"byte",empty:!0},green:{idx:1,type:"byte",empty:!0},blue:{idx:2,type:"byte",empty:!0},alpha:{idx:3,type:"percent",def:1}}},hsla:{cache:"_hsla",props:{hue:{idx:0,type:"degrees",empty:!0},saturation:{idx:1,type:"percent",empty:!0},lightness:{idx:2,type:"percent",empty:!0}}}},u={"byte":{floor:!0,min:0,max:255},percent:{min:0,max:1},degrees:{mod:360,floor:!0}},a=s.support={},f,l=e.each;o.hsla.props.alpha=o.rgba.props.alpha,s.fn=e.extend(s.prototype,{parse:function(n,r,i,u){if(n===t)return this._rgba=[null,null,null,null],this;if(n.jquery||n.nodeType)n=e(n).css(r),r=t;var a=this,p=e.type(n),d=this._rgba=[],v;r!==t&&(n=[n,r,i,u],p="array");if(p==="string")return this.parse(h(n)||f._default);if(p==="array")return l(o.rgba.props,function(e,t){d[t.idx]=c(n[t.idx],t)}),this;if(p==="object")return n instanceof s?l(o,function(e,t){n[t.cache]&&(a[t.cache]=n[t.cache].slice())}):l(o,function(e,t){l(t.props,function(e,r){var i=t.cache;if(!a[i]&&t.to){if(n[e]==null||e==="alpha")return;a[i]=t.to(a._rgba)}a[i][r.idx]=c(n[e],r,!0)})}),this},is:function(e){var t=s(e),n=!0,r=this;return l(o,function(e,i){var s=t[i.cache],o;return s&&(o=r[i.cache]||i.to&&i.to(r._rgba)||[],l(i.props,function(e,t){if(s[t.idx]!=null)return n=s[t.idx]===o[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return l(o,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=s(e),r=n._space(),i=o[r],a=this[i.cache]||i.to(this._rgba),f=a.slice();return n=n[i.cache],l(i.props,function(e,r){var i=r.idx,s=a[i],o=n[i],l=u[r.type]||{};if(o===null)return;s===null?f[i]=o:(l.mod&&(o-s>l.mod/2?s+=l.mod:s-o>l.mod/2&&(s-=l.mod)),f[r.idx]=c((o-s)*t+s,r))}),this[r](f)},blend:function(t){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=s(t)._rgba;return s(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),t="rgb("),t+n.join(",")+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),t="hsl("),t+n.join(",")+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(r*255)),"#"+e.map(n,function(e,t){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),s.fn.parse.prototype=s.fn,o.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,f===0||f===1?c=f:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},o.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s,u,a,f;return[Math.round(p(o,s,t+1/3)*255),Math.round(p(o,s,t)*255),Math.round(p(o,s,t-1/3)*255),i]},l(o,function(n,i){var o=i.props,u=i.cache,a=i.to,f=i.from;s.fn[n]=function(n){a&&!this[u]&&(this[u]=a(this._rgba));if(n===t)return this[u].slice();var r=e.type(n),i=r==="array"||r==="object"?n:arguments,h=this[u].slice(),p;return l(o,function(e,t){var n=i[r==="object"?e:t.idx];n==null&&(n=h[t.idx]),h[t.idx]=c(n,t)}),f?(p=s(f(h)),p[u]=h,p):s(h)},l(o,function(t,i){if(s.fn[t])return;s.fn[t]=function(s){var o=e.type(s),u=t==="alpha"?this._hsla?"hsla":"rgba":n,a=this[u](),f=a[i.idx],l;return o==="undefined"?f:(o==="function"&&(s=s.call(this,f),o=e.type(s)),s==null&&i.empty?this:(o==="string"&&(l=r.exec(s),l&&(s=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[i.idx]=s,this[u](a)))}})}),l(n,function(t,n){e.cssHooks[n]={set:function(t,r){var i,o,u;if(e.type(r)!=="string"||(i=h(r))){r=s(i||r);if(!a.rgba&&r._rgba[3]!==1){u=n==="backgroundColor"?t.parentNode:t;do o=e.curCSS(u,"backgroundColor");while((o===""||o==="transparent")&&(u=u.parentNode)&&u.style);r=r.blend(o&&o!=="transparent"?o:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(r){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=s(t.elem,n),t.end=s(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}}),e(function(){var e=document.createElement("div"),t=e.style;t.cssText="background-color:rgba(1,1,1,.5)",a.rgba=t.backgroundColor.indexOf("rgba")>-1}),f=e.Color.names={aqua:"#00ffff",azure:"#f0ffff",beige:"#f5f5dc",black:"#000000",blue:"#0000ff",brown:"#a52a2a",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkviolet:"#9400d3",fuchsia:"#ff00ff",gold:"#ffd700",green:"#008000",indigo:"#4b0082",khaki:"#f0e68c",lightblue:"#add8e6",lightcyan:"#e0ffff",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightyellow:"#ffffe0",lime:"#00ff00",magenta:"#ff00ff",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",violet:"#800080",red:"#ff0000",silver:"#c0c0c0",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(){var t=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,n={},r,i,s;if(t&&t.length&&t[0]&&t[t[0]]){s=t.length;while(s--)r=t[s],typeof t[r]=="string"&&(n[e.camelCase(r)]=t[r])}else for(r in t)typeof t[r]=="string"&&(n[r]=t[r]);return n}function s(t,n){var i={},s,o;for(s in n)o=n[s],t[s]!==o&&!r[s]&&(e.fx.step[s]||!isNaN(parseFloat(o)))&&(i[s]=o);return i}var n=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)jQuery.style(e.elem,n,e.end),e.setAttr=!0}}),e.effects.animateClass=function(t,r,o,u){var a=e.speed(r,o,u);return this.queue(function(){var r=e(this),o=r.attr("class")||"",u,f=a.children?r.find("*").andSelf():r;f=f.map(function(){var t=e(this);return{el:t,start:i.call(this)}}),u=function(){e.each(n,function(e,n){t[n]&&r[n+"Class"](t[n])})},u(),f=f.map(function(){return this.end=i.call(this.el[0]),this.diff=s(this.start,this.end),this}),r.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=jQuery.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(r[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.apply(this,[{add:t},n,r,i]):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return n?e.effects.animateClass.apply(this,[{remove:t},n,r,i]):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,r,i,s,o){return typeof r=="boolean"||r===t?i?e.effects.animateClass.apply(this,[r?{add:n}:{remove:n},i,s,o]):this._toggleClass(n,r):e.effects.animateClass.apply(this,[{toggle:n},r,i,s])},switchClass:function(t,n,r,i,s){return e.effects.animateClass.apply(this,[{add:n,remove:t},r,i,s])}})}(),function(){function i(n,r,i,s){e.isPlainObject(n)&&(r=n,n=n.effect),n={effect:n},r===t&&(r={}),e.isFunction(r)&&(s=r,i=null,r={});if(typeof r=="number"||e.fx.speeds[r])s=i,i=r,r={};return e.isFunction(i)&&(s=i,i=null),r&&e.extend(n,r),i=i||r.duration,n.duration=e.fx.off?0:typeof i=="number"?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,n.complete=s||r.complete,n}function s(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]?n&&e.effects[t]?!1:!0:!1}e.extend(e.effects,{version:"1.9.0-beta.1",save:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.data(r+t[n],e[0].style[t[n]])},restore:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.css(t[n],e.data(r+t[n]))},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(t,r,s,o){function h(t){function s(){e.isFunction(r)&&r.call(n[0]),e.isFunction(t)&&t()}var n=e(this),r=u.complete,i=u.mode;(n.is(":hidden")?i==="hide":i==="show")?s():l.call(n[0],u,s)}var u=i.apply(this,arguments),a=u.mode,f=u.queue,l=e.effects.effect[u.effect],c=!l&&n&&e.effects[u.effect];return e.fx.off||!l&&!c?a?this[a](u.duration,u.complete):this.each(function(){u.complete&&u.complete.call(this)}):l?f===!1?this.each(h):this.queue(f||"fx",h):c.call(this,{options:u,duration:u.duration,callback:u.complete,mode:u.mode})},_show:e.fn.show,show:function(e){if(s(e))return this._show.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(s(e))return this._hide.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(s(t)||typeof t=="boolean"||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}()}(jQuery),function(e,t){var n=0,r={},i={},s={};r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.extend(s,i,{accordionHeight:"show"}),e.fx.step.accordionHeight=function(t){var n=e(t.elem),r=n.data("ui-accordion-height");n.height(r.total-n.outerHeight()-r.toHide.outerHeight()+n.height())},e.widget("ui.accordion",{version:"1.9.0-beta.1",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.accordionId="ui-accordion-"+(this.element.attr("id")||++n),r=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(r.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),!r.collapsible&&r.active===!1&&(r.active=0),r.active<0&&(r.active+=this.headers.length),this.active=this._findActive(r.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.originalHeight=this.element[0].style.height,this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each(function(n){var r=e(this),i=r.attr("id"),s=r.next(),o=s.attr("id");i||(i=t+"-header-"+n,r.attr("id",i)),o||(o=t+"-panel-"+n,s.attr("id",o)),r.attr("aria-controls",o),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(r.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this.options.heightStyle!=="content"&&(this.element.css("height",this.originalHeight),e.css("height",""))},_setOption:function(e,t){if(e==="active"){this._activate(t);return}e==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),e==="collapsible"&&!t&&this.options.active===!1&&this._activate(0),e==="icons"&&(this._destroyIcons(),t&&this._createIcons()),e==="disabled"&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)},_keydown:function(t){if(t.altKey||t.ctrlKey)return;var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[r-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t,n,r=this.options.heightStyle,i=this.element.parent();this.element.css("height",this.originalHeight),r==="fill"?(e.support.minHeight||(n=i.css("overflow"),i.css("overflow","hidden")),t=i.height(),this.element.siblings(":visible").each(function(){var n=e(this),r=n.css("position");if(r==="absolute"||r==="fixed")return;t-=n.outerHeight(!0)}),n&&i.css("overflow",n),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):r==="auto"&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).height("").height())}).height(t)),r!=="content"&&this.element.height(this.element.height())},_activate:function(t){var n=this._findActive(t)[0];if(n===this.active[0])return;n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return typeof t=="number"?this.headers.eq(t):e()},_setupEvents:function(t){var n={};if(!t)return;e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._on(this.headers,n)},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i[0]===r[0],o=s&&n.collapsible,u=o?e():i.next(),a=r.next(),f={oldHeader:r,oldPanel:a,newHeader:o?e():i,newPanel:u};t.preventDefault();if(s&&!n.collapsible||this._trigger("beforeActivate",t,f)===!1)return;n.active=o?!1:this.headers.index(i),this.active=s?e():i,this._toggle(f),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active"))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-expanded":"false","aria-hidden":"true"}),r.prev().attr("aria-selected","false"),n.length&&r.length?r.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,n){var o,u,a,f=this,l=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},h=l&&c.down||c,p=function(){e.removeData("ui-accordion-height"),f._toggleComplete(n)};typeof h=="number"&&(a=h),typeof h=="string"&&(u=h),u=u||h.easing||c.easing,a=a||h.duration||c.duration;if(!t.length)return e.animate(i,a,u,p);if(!e.length)return t.animate(r,a,u,p);o=e.show().outerHeight(),t.animate(r,a,u),e.hide().data("ui-accordion-height",{total:o,toHide:t}).animate(this.options.heightStyle==="content"?i:s,a,u,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.uiBackCompat!==!1&&(function(e,t){e.extend(t.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var n=t._create;t._create=function(){if(this.options.navigation){var t=this,r=this.element.find(this.options.header),i=r.next(),s=r.add(i).find("a").filter(this.options.navigationFilter)[0];s&&r.add(i).each(function(n){if(e.contains(this,s))return t.options.active=Math.floor(n/2),!1})}n.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var n=t._create,r=t._setOption;e.extend(t,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),n.call(this)},_setOption:function(e,t){if(e==="autoHeight"||e==="clearStyle"||e==="fillSpace")this.options.heightStyle=this._mergeHeightStyle();r.apply(this,arguments)},_mergeHeightStyle:function(){var e=this.options;if(e.fillSpace)return"fill";if(e.clearStyle)return"content";if(e.autoHeight)return"auto"}})}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var n=t._createIcons;t._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),n.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){t.activate=t._activate;var n=t._findActive;t._findActive=function(e){return e===-1&&(e=!1),e&&typeof e!="number"&&(e=this.headers.index(this.headers.filter(e)),e===-1&&(e=!1)),n.call(this,e)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(e,t){e.extend(t.options,{change:null,changestart:null});var n=t._trigger;t._trigger=function(e,t,r){var i=n.apply(this,arguments);return i?(e==="beforeActivate"?i=n.call(this,"changestart",t,{oldHeader:r.oldHeader,oldContent:r.oldPanel,newHeader:r.newHeader,newContent:r.newPanel}):e==="activate"&&(i=n.call(this,"change",t,{oldHeader:r.oldHeader,oldContent:r.oldPanel,newHeader:r.newHeader,newContent:r.newPanel})),i):!1}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{animate:null,animated:"slide"});var n=t._create;t._create=function(){var e=this.options;e.animate===null&&(e.animated?e.animated==="slide"?e.animate=300:e.animated==="bounceslide"?e.animate={duration:200,down:{easing:"easeOutBounce",duration:1e3}}:e.animate=e.animated:e.animate=!1),n.call(this)}}(jQuery,jQuery.ui.accordion.prototype))}(jQuery),function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.9.0-beta.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,r;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on({keydown:function(i){if(this.element.prop("readOnly")){t=!0,r=!0,n=!0;return}t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t){t=!1,r.preventDefault();return}if(n)return;var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}},input:function(e){if(r){r=!1,e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target!==t.element[0]&&r.target!==n&&!e.contains(n,r.target)&&t.close()})})},menufocus:function(t,n){if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}var r=n.item.data("ui-autocomplete-item")||n.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this.document.find(t||"body")[0]),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):typeof this.options.source=="string"?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e,t){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength)return this.close(t);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(r){t===n&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.blur(),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(e){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;e&&e.length?t=this.options.messages.results(e.length):t=this.options.messages.noResults,this.liveRegion.text(t)}})}(jQuery),function(e,t){var n,r,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",u="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},l=function(t){var n=t.name,r=t.form,i=e([]);return n&&(r?i=e(r).find("[name='"+n+"']"):i=e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.9.0-beta.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,u=this.options,a=this.type==="checkbox"||this.type==="radio",c="ui-state-hover"+(a?"":" ui-state-active"),h="ui-state-focus";u.label===null&&(u.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(u.disabled)return;e(this).addClass("ui-state-hover"),this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(u.disabled)return;e(this).removeClass(c)}).bind("click"+this.eventNamespace,function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(h)}),a&&(this.element.bind("change"+this.eventNamespace,function(){if(s)return;t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){if(u.disabled)return;s=!1,r=e.pageX,i=e.pageY}).bind("mouseup"+this.eventNamespace,function(e){if(u.disabled)return;if(r!==e.pageX||i!==e.pageY)s=!0})),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1;e(this).toggleClass("ui-state-active"),t.buttonElement.attr("aria-pressed",t.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];l(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",function(){n=null})}).bind("mouseup"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(u.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+u+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t);if(e==="disabled"){t?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var t=this.element.is(":disabled");t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.9.0-beta.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){e==="disabled"&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t)if(t[n]==null||t[n]==undefined)e[n]=t[n];return e}$.extend($.ui,{datepicker:{version:"1.9.0-beta.1"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName))return;this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e)},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var i=this._get(t,"showOn");(i=="focus"||i=="both")&&e.focus(this._showDatepicker);if(i=="button"||i=="both"){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(o==""?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){var t=0,n=0;for(var r=0;r<e.length;r++)e[r].length>t&&(t=e[r].length,n=r);return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName))return;n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string")return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null;var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),u=this._getMinMaxDate(r,"max");extendRemove(r.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,u)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var i=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);i[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||r<" "||!n||n.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(r){$.datepicker.log(r)}return!0},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e)return;var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),r=n?n.apply(e,[e,t]):{};if(r===!1)return;extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var i=!1;$(e).parents().each(function(){return i|=$(this).css("position")=="fixed",!i});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,i),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":i?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!t.inline){var o=$.datepicker._get(t,"showAnim"),u=$.datepicker._get(t,"duration"),a=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(!!e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),u,a):t.dpDiv[o||"show"](o?u:null,a),(!o||!u)&&a(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");!n.length||n.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r=this._getNumberOfMonths(e),i=r[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),e.dpDiv[(r[0]!=1||r[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus();if(e.yearshtml){var o=e.yearshtml;setTimeout(function(){o===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),o=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+$(document).scrollLeft(),a=document.documentElement.clientHeight+$(document).scrollTop();return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0),t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0),t},_findPos:function(e){var t=this._getInst(e),n=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1||$.expr.filters.hidden(e)))e=e[n?"previousSibling":"nextSibling"];var r=$(e).offset();return[r.left,r.top]},_hideDatepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME))return;if(this._datepickerShowing){var n=this._get(t,"showAnim"),r=this._get(t,"duration"),i=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[n]||$.effects[n])?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),r,i):t.dpDiv[n=="slideDown"?"slideUp":n=="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst)return;var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0]))return;this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0]))return;var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(i)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(e==null||t==null)throw"Invalid arguments";t=typeof t=="object"?t.toString():t+"";if(t=="")return null;var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;r=typeof r!="string"?r:(new Date).getFullYear()%100+parseInt(r,10);var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){var n=p(e),r=e=="@"?14:e=="!"?20:e=="y"&&n?4:e=="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=t.substring(g).match(i);if(!s)throw"Missing number at position "+g;return g+=s[0].length,parseInt(s[0],10)},v=function(e,n,r){var i=$.map(p(e)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;$.each(i,function(e,n){var r=n[1];if(t.substr(g,r.length).toLowerCase()==r.toLowerCase())return s=n[0],g+=r.length,!1});if(s!=-1)return s+1;throw"Unknown name at position "+g},m=function(){if(t.charAt(g)!=e.charAt(y))throw"Unexpected literal at position "+g;g++},g=0;for(var y=0;y<e.length;y++)if(h)e.charAt(y)=="'"&&!p("'")?h=!1:m();else switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"!":var b=new Date((d("!")-this._ticksTo1970)/1e4);a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}if(g<t.length){var w=t.substr(g);if(!/^\s+/.test(w))throw"Extra/unparsed characters found in date: "+w}a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var E=this._getDaysInMonth(a,f-1);if(l<=E)break;f++,l-=E}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e))while(r.length<n)r="0"+r;return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t)for(var h=0;h<e.length;h++)if(c)e.charAt(h)=="'"&&!u("'")?c=!1:l+=e.charAt(h);else switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":l+=a("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=t.getTime()*1e4+this._ticksTo1970;break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}return l},_possibleChars:function(e){var t="",n=!1,r=function(t){var n=i+1<e.length&&e.charAt(i+1)==t;return n&&i++,n};for(var i=0;i<e.length;i++)if(n)e.charAt(i)=="'"&&!r("'")?n=!1:t+=e.charAt(i);else switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":n=!0;break;default:t+=e.charAt(i)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()==e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i,s;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth(),o=r.getDate(),u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=u.exec(t);while(a){switch(a[2]||"d"){case"d":case"D":o+=parseInt(a[1],10);break;case"w":case"W":o+=parseInt(a[1],10)*7;break;case"m":case"M":s+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s))}a=u.exec(t)}return new Date(i,s,o)},s=t==null||t===""?n:typeof t=="string"?i(t):typeof t=="number"?isNaN(t)?n:r(t):new Date(t.getTime());return s=s&&s.toString()=="Invalid Date"?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id;e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=o[0]!=1||o[1]!=1,l=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-u,d=e.drawYear;p<0&&(p+=12,d--);if(h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));v=c&&v<c?c:v;while(this._daylightSavingAdjust(new Date(d,p,1))>v)p--,p<0&&(p=11,d--)}e.drawMonth=p,e.drawYear=d;var m=this._get(e,"prevText");m=s?this.formatDate(m,this._daylightSavingAdjust(new Date(d,p-a,1)),this._getFormatConfig(e)):m;var g=this._canAdjustMonth(e,-1,d,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(d,p+a,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,d,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?l:t;w=s?this.formatDate(w,E,this._getFormatConfig(e)):w;var S=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",x=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?S:"")+(this._isInRange(e,E)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(n?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;var N=this._get(e,"showWeek"),C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),P=this._get(e,"calculateWeek")||this.iso8601Week,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";this.maxRows=4;for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(d,p,e.selectedDay)),R=" ui-corner-all",U="";if(f){U+='<div class="ui-datepicker-group';if(o[1]>1)switch(I){case 0:U+=" ui-datepicker-group-first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",R=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",R=""}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&j==0?n?b:g:"")+(/all|right/.test(R)&&j==0?n?g:b:"")+this._generateMonthYearHeader(e,p,d,c,h,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var z=N?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(var W=0;W<7;W++){var X=(W+T)%7;z+="<th"+((W+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(d,p);d==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(d,p)-T+7)%7,K=Math.ceil((J+V)/7),Q=f?this.maxRows>K?this.maxRows:K:K;this.maxRows=Q;var G=this._daylightSavingAdjust(new Date(d,p,1-J));for(var Y=0;Y<Q;Y++){U+="<tr>";var Z=N?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"";for(var W=0;W<7;W++){var et=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],tt=G.getMonth()!=p,nt=tt&&!D||!et[0]||c&&G<c||h&&G>h;Z+='<td class="'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(G.getTime()==q.getTime()&&p==e.selectedMonth&&e._keyEvent||H.getTime()==G.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!_?"":" "+et[1]+(G.getTime()==l.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!tt||_)&&et[2]?' title="'+et[2]+'"':"")+(nt?"":' data-handler="selectDay" data-event="click" data-month="'+G.getMonth()+'" data-year="'+G.getFullYear()+'"')+">"+(tt&&!_?"&#xa0;":nt?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==l.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}U+=Z+"</tr>"}p++,p>11&&(p=0,d++),U+="</tbody></table>"+(f?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',h="";if(s||!a)h+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var p=r&&r.getFullYear()==n,d=i&&i.getFullYear()==n;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var v=0;v<12;v++)(!p||v>=r.getMonth())&&(!d||v<=i.getMonth())&&(h+='<option value="'+v+'"'+(v==t?' selected="selected"':"")+">"+u[v]+"</option>");h+="</select>"}l||(c+=h+(s||!a||!f?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!f)c+='<span class="ui-datepicker-year">'+n+"</span>";else{var m=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));b=r?Math.max(b,r.getFullYear()):b,w=i?Math.min(w,i.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;b<=w;b++)e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}}return c+=this._get(e,"yearSuffix"),l&&(c+=(s||!a||!f?"&#xa0;":"")+h),c+="</div>",c},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return i=r&&i>r?r:i,i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"&&e!="widget"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.0-beta.1",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(e,t){var n="ui-dialog ui-widget ui-widget-content ui-corner-all ",r={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.9.0-beta.1",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var t=this,r=this.options,i=r.title||"&#160;",s=(this.uiDialog=e("<div>")).addClass(n+r.dialogClass).css({display:"none",outline:0,zIndex:r.zIndex}).attr("tabIndex",-1).keydown(function(n){r.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}).mousedown(function(e){t.moveToTop(!1,e)}).appendTo("body"),o=this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(s),u=(this.uiDialogTitlebar=e("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").prependTo(s),a=e("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(e){e.preventDefault(),t.close(e)}).appendTo(u),f=(this.uiDialogTitlebarCloseText=e("<span>")).addClass("ui-icon ui-icon-closethick").text(r.closeText).appendTo(a),l=e("<span>").uniqueId().addClass("ui-dialog-title").html(i).prependTo(u),c=(this.uiDialogButtonPane=e("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),h=(this.uiButtonSet=e("<div>")).addClass("ui-dialog-buttonset").appendTo(c);s.attr({role:"dialog","aria-labelledby":l.attr("id")}),u.find("*").add(u).disableSelection(),this._hoverable(a),this._focusable(a),r.draggable&&e.fn.draggable&&this._makeDraggable(),r.resizable&&e.fn.resizable&&this._makeResizable(),this._createButtons(r.buttons),this._isOpen=!1,e.fn.bgiframe&&s.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var e,t=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(t){var n=this,r,i;if(!this._isOpen)return;if(!1===this._trigger("beforeClose",t))return;return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this._off(this.uiDialog,"keypress"),this.options.hide?this.uiDialog.hide(this.options.hide,function(){n._trigger("close",t)}):(this.uiDialog.hide(),this._trigger("close",t)),e.ui.dialog.overlay.resize(),this.options.modal&&(r=0,e(".ui-dialog").each(function(){this!==n.uiDialog[0]&&(i=e(this).css("z-index"),isNaN(i)||(r=Math.max(r,i)))}),e.ui.dialog.maxZ=r),this},isOpen:function(){return this._isOpen},moveToTop:function(t,n){var r=this.options,i;return r.modal&&!t||!r.stack&&!r.modal?this._trigger("focus",n):(r.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=r.zIndex),this.overlay&&(e.ui.dialog.maxZ+=1,e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ,this.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ)),i={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},e.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",e.ui.dialog.maxZ),this.element.attr(i),this._trigger("focus",n),this)},open:function(){if(this._isOpen)return;var t,n=this.options,r=this.uiDialog;return this._size(),this._position(n.position),r.show(n.show),this.overlay=n.modal?new e.ui.dialog.overlay(this):null,this.moveToTop(!0),n.modal&&this._on(r,{keydown:function(t){if(t.keyCode!==e.ui.keyCode.TAB)return;var n=e(":tabbable",this),r=n.filter(":first"),i=n.filter(":last");if(t.target===i[0]&&!t.shiftKey)return r.focus(1),!1;if(t.target===r[0]&&t.shiftKey)return i.focus(1),!1}}),t=this.element.find(":tabbable"),t.length||(t=this.uiDialogButtonPane.find(":tabbable"),t.length||(t=r)),t.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this},_createButtons:function(t){var n,r,i=this,s=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),typeof t=="object"&&t!==null&&e.each(t,function(){return!(s=!0)}),s?(e.each(t,function(t,n){n=e.isFunction(n)?{click:n,text:t}:n;var r=e("<button type='button'>").attr(n,!0).unbind("click").click(function(){n.click.apply(i.element[0],arguments)}).appendTo(i.uiButtonSet);e.fn.button&&r.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function r(e){return{position:e.position,offset:e.offset}}var t=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,i){e(this).addClass("ui-dialog-dragging"),t._trigger("dragStart",n,r(i))},drag:function(e,n){t._trigger("drag",e,r(n))},stop:function(i,s){n.position=[s.position.left-t.document.scrollLeft(),s.position.top-t.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),t._trigger("dragStop",i,r(s)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(n){function u(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}n=n===t?this.options.resizable:n;var r=this,i=this.options,s=this.uiDialog.css("position"),o=typeof n=="string"?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:o,start:function(t,n){e(this).addClass("ui-dialog-resizing"),r._trigger("resizeStart",t,u(n))},resize:function(e,t){r._trigger("resize",e,u(t))},stop:function(t,n){e(this).removeClass("ui-dialog-resizing"),i.height=e(this).height(),i.width=e(this).width(),r._trigger("resizeStop",t,u(n)),e.ui.dialog.overlay.resize()}}).css("position",s).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n.join(" "),at:n.join(" "),offset:r.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()},_setOptions:function(t){var n=this,s={},o=!1;e.each(t,function(e,t){n._setOption(e,t),e in r&&(o=!0),e in i&&(s[e]=t)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,r){var i,s,o=this.uiDialog;switch(t){case"buttons":this._createButtons(r);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+r);break;case"dialogClass":o.removeClass(this.options.dialogClass).addClass(n+r);break;case"disabled":r?o.addClass("ui-dialog-disabled"):o.removeClass("ui-dialog-disabled");break;case"draggable":i=o.is(":data(draggable)"),i&&!r&&o.draggable("destroy"),!i&&r&&this._makeDraggable();break;case"position":this._position(r);break;case"resizable":s=o.is(":data(resizable)"),s&&!r&&o.resizable("destroy"),s&&typeof r=="string"&&o.resizable("option","handles",r),!s&&r!==!1&&this._makeResizable(r);break;case"title":e(".ui-dialog-title",this.uiDialogTitlebar).html(""+(r||"&#160;"))}this._super(t,r)},_size:function(){var t,n,r,i=this.options,s=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),n=Math.max(0,i.minHeight-t),i.height==="auto"?e.support.minHeight?this.element.css({minHeight:n,height:"auto"}):(this.uiDialog.show(),r=this.element.css("height","auto").height(),s||this.uiDialog.hide(),this.element.height(Math.max(r,n))):this.element.height(Math.max(i.height-t,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){this.instances.length===0&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){if(e(t.target).zIndex()<e.ui.dialog.overlay.maxZ)return!1})},1),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var n=this.oldInstances.pop()||e("<div>").addClass("ui-widget-overlay");return e(document).bind("keydown.dialog-overlay",function(r){var i=e.ui.dialog.overlay.instances;i.length!==0&&i[i.length-1]===n&&t.options.closeOnEscape&&!r.isDefaultPrevented()&&r.keyCode&&r.keyCode===e.ui.keyCode.ESCAPE&&(t.close(r),r.preventDefault())}),n.appendTo(document.body).css({width:this.width(),height:this.height()}),e.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},destroy:function(t){var n=e.inArray(t,this.instances),r=0;n!==-1&&this.oldInstances.push(this.instances.splice(n,1)[0]),this.instances.length===0&&e([document,window]).unbind(".dialog-overlay"),t.height(0).width(0).remove(),e.each(this.instances,function(){r=Math.max(r,this.css("z-index"))}),this.maxZ=r},height:function(){var t,n;return e.browser.msie?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),t<n?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,n;return e.browser.msie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),t<n?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e,t){var n=/up|down|vertical/,r=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,i){var s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),a=t.direction||"up",f=n.test(a),l=f?"height":"width",c=f?"top":"left",h=r.test(a),p={},d=u==="show",v,m,g;s.parent().is(".ui-effects-wrapper")?e.effects.save(s.parent(),o):e.effects.save(s,o),s.show(),v=e.effects.createWrapper(s).css({overflow:"hidden"}),m=v[l](),g=parseFloat(v.css(c)),p[l]=d?m:0,h||(s.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),p[c]=d?g:m+g),d&&(v.css(l,0),h||v.css(c,g+m)),v.animate(p,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){u==="hide"&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e,t){e.effects.effect.bounce=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=s==="hide",u=s==="show",a=t.direction||"up",f=t.distance,l=t.times||5,c=l*2+(u||o?1:0),h=t.duration/c,p=t.easing,d=a==="up"||a==="down"?"top":"left",v=a==="up"||a==="left",m,g,y,b=r.queue(),w=b.length;(u||o)&&i.push("opacity"),e.effects.save(r,i),r.show(),e.effects.createWrapper(r),f||(f=r[d==="top"?"outerHeight":"outerWidth"]()/3),u&&(y={opacity:1},y[d]=0,r.css("opacity",0).css(d,v?-f*2:f*2).animate(y,h,p)),o&&(f/=Math.pow(2,l-1)),y={},y[d]=0;for(m=0;m<l;m++)g={},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p).animate(y,h,p),f=o?f*2:f/2;o&&(g={opacity:0},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p)),r.queue(function(){o&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,c+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.clip=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"vertical",a=u==="vertical",f=a?"height":"width",l=a?"top":"left",c={},h,p,d;e.effects.save(r,i),r.show(),h=e.effects.createWrapper(r).css({overflow:"hidden"}),p=r[0].tagName==="IMG"?h:r,d=p[f](),o&&(p.css(f,0),p.css(l,d/2)),c[f]=o?d:0,c[l]=o?0:d/2,p.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o||r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.drop=function(t,n){var r=e(this),i=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left"?"pos":"neg",l={opacity:o?1:0},c;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),c=t.distance||r[a==="top"?"outerHeight":"outerWidth"]({margin:!0})/2,o&&r.css("opacity",0).css(a,f==="pos"?-c:c),l[a]=(o?f==="pos"?"+=":"-=":f==="pos"?"-=":"+=")+c,r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.explode=function(t,n){function y(){c.push(this),c.length===r*i&&b()}function b(){s.css({visibility:"visible"}),e(c).remove(),u||s.hide(),n()}var r=t.pieces?Math.round(Math.sqrt(t.pieces)):3,i=r,s=e(this),o=e.effects.setMode(s,t.mode||"hide"),u=o==="show",a=s.show().css("visibility","hidden").offset(),f=Math.ceil(s.outerWidth()/i),l=Math.ceil(s.outerHeight()/r),c=[],h,p,d,v,m,g;for(h=0;h<r;h++){v=a.top+h*l,g=h-(r-1)/2;for(p=0;p<i;p++)d=a.left+p*f,m=p-(i-1)/2,s.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-p*f,top:-h*l}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:l,left:d+(u?m*f:0),top:v+(u?g*l:0),opacity:u?0:1}).animate({left:d+(u?0:m*f),top:v+(u?0:g*l),opacity:u?1:0},t.duration||500,t.easing,y)}}}(jQuery),function(e,t){e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}}(jQuery),function(e,t){e.effects.effect.fold=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=s==="hide",a=t.size||15,f=/([0-9]+)%/.exec(a),l=!!t.horizFirst,c=o!==l,h=c?["width","height"]:["height","width"],p=t.duration/2,d,v,m={},g={};e.effects.save(r,i),r.show(),d=e.effects.createWrapper(r).css({overflow:"hidden"}),v=c?[d.width(),d.height()]:[d.height(),d.width()],f&&(a=parseInt(f[1],10)/100*v[u?0:1]),o&&d.css(l?{height:0,width:a}:{height:a,width:0}),m[h[0]]=o?v[0]:a,g[h[1]]=o?v[1]:0,d.animate(m,p,t.easing).animate(g,p,t.easing,function(){u&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()})}}(jQuery),function(e,t){e.effects.effect.highlight=function(t,n){var r=e(this),i=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(r,t.mode||"show"),o={backgroundColor:r.css("backgroundColor")};s==="hide"&&(o.opacity=0),e.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),n()}})}}(jQuery),function(e,t){e.effects.effect.pulsate=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"show"),s=i==="show",o=i==="hide",u=s||i==="hide",a=(t.times||5)*2+(u?1:0),f=t.duration/a,l=0,c=r.queue(),h=c.length,p;if(s||!r.is(":visible"))r.css("opacity",0).show(),l=1;for(p=1;p<a;p++)r.animate({opacity:l},f,t.easing),l=1-l;r.animate({opacity:l},f,t.easing),r.queue(function(){o&&r.hide(),n()}),h>1&&c.splice.apply(c,[1,0].concat(c.splice(h,a+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.puff=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"hide"),s=i==="hide",o=parseInt(t.percent,10)||150,u=o/100,a={height:r.height(),width:r.width()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:s?o:100,from:s?a:{height:a.height*u,width:a.width*u}}),r.effect(t)},e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:s==="hide"?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:u!=="horizontal"?o/100:1,x:u!=="vertical"?o/100:1};i.effect="size",i.queue=!1,i.complete=n,s!=="effect"&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||(s==="show"?{height:0,width:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&(s==="show"&&(i.from.opacity=0,i.to.opacity=1),s==="hide"&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},e.effects.effect.size=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height","overflow","opacity"],s=["position","top","bottom","left","right","overflow","opacity"],o=["width","height","overflow"],u=["fontSize"],a=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],f=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],l=e.effects.setMode(r,t.mode||"effect"),c=t.restore||l!=="effect",h=t.scale||"both",p=t.origin||["middle","center"],d,v,m,g=r.css("position");l==="show"&&r.show(),d={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},r.from=t.from||d,r.to=t.to||d,m={from:{y:r.from.height/d.height,x:r.from.width/d.width},to:{y:r.to.height/d.height,x:r.to.width/d.width}};if(h==="box"||h==="both")m.from.y!==m.to.y&&(i=i.concat(a),r.from=e.effects.setTransition(r,a,m.from.y,r.from),r.to=e.effects.setTransition(r,a,m.to.y,r.to)),m.from.x!==m.to.x&&(i=i.concat(f),r.from=e.effects.setTransition(r,f,m.from.x,r.from),r.to=e.effects.setTransition(r,f,m.to.x,r.to));(h==="content"||h==="both")&&m.from.y!==m.to.y&&(i=i.concat(u),r.from=e.effects.setTransition(r,u,m.from.y,r.from),r.to=e.effects.setTransition(r,u,m.to.y,r.to)),e.effects.save(r,c?i:s),r.show(),e.effects.createWrapper(r),r.css("overflow","hidden").css(r.from),p&&(v=e.effects.getBaseline(p,d),r.from.top=(d.outerHeight-r.outerHeight())*v.y,r.from.left=(d.outerWidth-r.outerWidth())*v.x,r.to.top=(d.outerHeight-r.to.outerHeight)*v.y,r.to.left=(d.outerWidth-r.to.outerWidth)*v.x),r.css(r.from);if(h==="content"||h==="both")a=a.concat(["marginTop","marginBottom"]).concat(u),f=f.concat(["marginLeft","marginRight"]),o=i.concat(a).concat(f),r.find("*[width]").each(function(){var n=e(this),r={height:n.height(),width:n.width()};c&&e.effects.save(n,o),n.from={height:r.height*m.from.y,width:r.width*m.from.x},n.to={height:r.height*m.to.y,width:r.width*m.to.x},m.from.y!==m.to.y&&(n.from=e.effects.setTransition(n,a,m.from.y,n.from),n.to=e.effects.setTransition(n,a,m.to.y,n.to)),m.from.x!==m.to.x&&(n.from=e.effects.setTransition(n,f,m.from.x,n.from),n.to=e.effects.setTransition(n,f,m.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){c&&e.effects.restore(n,o)})});r.animate(r.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){r.to.opacity===0&&r.css("opacity",r.from.opacity),l==="hide"&&r.hide(),e.effects.restore(r,c?i:s),c||(g==="static"?r.css({position:"relative",top:r.to.top,left:r.to.left}):e.each(["top","left"],function(e,t){r.css(t,function(t,n){var i=parseInt(n,10),s=e?r.to.left:r.to.top;return n==="auto"?s+"px":i+s+"px"})})),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.shake=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=t.direction||"left",u=t.distance||20,a=t.times||3,f=a*2+1,l=t.duration,c=o==="up"||o==="down"?"top":"left",h=o==="up"||o==="left",p={},d={},v={},m,g=r.queue(),y=g.length;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),p[c]=(h?"-=":"+=")+u,d[c]=(h?"+=":"-=")+u*2,v[c]=(h?"-=":"+=")+u*2,r.animate(p,l,t.easing);for(m=1;m<a;m++)r.animate(d,l,t.easing).animate(v,l,t.easing);r.animate(d,l,t.easing).animate(p,l/2,t.easing).queue(function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),y>1&&g.splice.apply(g,[1,0].concat(g.splice(y,f+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.slide=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};e.effects.save(r,i),r.show(),l=t.distance||r[a==="top"?"outerHeight":"outerWidth"]({margin:!0}),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(a,f?isNaN(l)?"-"+l:-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,r.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s=i.css("position")==="fixed",o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})}}(jQuery),function(e,t){var n=null;e.widget("ui.menu",{version:"1.9.0-beta.1",defaultElement:"<ul>",delay:300,options:{menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var r=e(t.target);r[0]!==n&&(n=r[0],r.one("click"+this.eventNamespace,function(e){n=null}),r.closest(".ui-menu-item").is(".ui-state-disabled")||(this.select(t),this._delay(function(){this.element.is(":focus")||this.element.focus()},20)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t){var n,r=this.element,i=r.children(".ui-menu-item").eq(0);this.active?i=this.active:this._hasScroll()&&(n=r.offset().top,r.children().each(function(){var t=e(this);if(t.offset().top-n>=0)return i=t,!1})),this.focus(t,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t)}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content"),this._off(e(n),"click")},_keydown:function(t){function u(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,i,s,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active.is(".ui-state-disabled")||this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,n=this.activeMenu.children(".ui-menu-item").filter(function(){return(new RegExp("^"+u(i),"i")).test(e(this).children("a").text())}),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),n=this.activeMenu.children(".ui-menu-item").filter(function(){return(new RegExp("^"+u(i),"i")).test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});t=n.add(this.element),t.children(":not( .ui-menu-item ):has( a )").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-—–\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),n.each(function(){var t=e(this),n=t.prev("a"),r=e("<span>").addClass("ui-menu-icon ui-icon ui-icon-carat-1-e").data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(r),t.attr("aria-labelledby",n.attr("id"))})},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var n,r;this.blur(e,e&&e.type==="focus"),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&e.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.height(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},e.type(this.options.position)==="function"?this.options.position(this.active):this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(t&&t.length)return this._close(),this.focus(e,t),!0},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();if(t&&t.length)return this._open(t.parent()),this._delay(function(){this.focus(e,t)},20),!0},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active)r=this.activeMenu.children(".ui-menu-item")[t]();this.focus(n,r)},nextPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isLastItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isFirstItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){var t={item:this.active};this.collapseAll(e,!0),this._trigger("select",e,t)}})}(jQuery),function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,d,v,m,g=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),w=g[0],E=(t.collision||"flip").split(" "),S={};return w.nodeType===9?(l=g.width(),d=g.height(),v={top:0,left:0}):e.isWindow(w)?(l=g.width(),d=g.height(),v={top:g.scrollTop(),left:g.scrollLeft()}):w.preventDefault?(t.at="left top",l=d=0,v={top:w.pageY,left:w.pageX}):(l=g.outerWidth(),d=g.outerHeight(),v=g.offset()),m=e.extend({},v),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),S[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),E.length===1&&(E[1]=E[0]),t.at[0]==="right"?m.left+=l:t.at[0]==="center"&&(m.left+=l/2),t.at[1]==="bottom"?m.top+=d:t.at[1]==="center"&&(m.top+=d/2),n=h(S.at,l,d),m.left+=n[0],m.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),w=p(this,"marginLeft"),x=p(this,"marginTop"),T=f+w+p(this,"marginRight")+b.width,N=c+x+p(this,"marginBottom")+b.height,C=e.extend({},m),k=h(S.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:w,marginTop:x},e.each(["left","top"],function(r,i){e.ui.position[E[r]]&&e.ui.position[E[r]][i](C,{targetWidth:l,targetHeight:d,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:y,elem:a})}),e.fn.bgiframe&&a.bgiframe(),t.using&&(u=function(e){var n=v.left-C.left,s=n+l-f,o=v.top-C.top,u=o+d-c,h={target:{element:g,left:v.left,top:v.top,width:l,height:d},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),d<c&&i(o+u)<d&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?0:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?0:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var n=e.fn.position;e.fn.position=function(r){if(!r||!r.offset)return n.call(this,r);var i=r.offset.split(" "),s=r.at.split(" ");return i.length===1&&(i[1]=i[0]),/^\d/.test(i[0])&&(i[0]="+"+i[0]),/^\d/.test(i[1])&&(i[1]="+"+i[1]),s.length===1&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),n.call(this,e.extend(r,{at:s[0]+i[0]+" "+s[1]+i[1],offset:t}))}}(jQuery)}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.9.0-beta.1",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(e,t){e==="value"&&(this.options.value=t,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(e,t)},_value:function(){var e=this.options.value;return typeof e!="number"&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}})}(jQuery),function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{version:"1.9.0-beta.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=r.values&&r.values.length||1,u=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(r.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),r.range&&(r.range===!0&&(r.values||(r.values=[this._valueMin(),this._valueMin()]),r.values.length&&r.values.length!==2&&(r.values=[r.values[0],r.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(r.range==="min"||r.range==="max"?" ui-slider-range-"+r.range:"")));for(t=i.length;t<o;t++)u.push(s);this.handles=i.add(e(u.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){r.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){r.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._on(this.handles,{keydown:function(t){var r,i,s,o,u=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),r=this._start(t,u);if(r===!1)return}}o=this.options.step,this.options.values&&this.options.values.length?i=s=this.values(u):i=s=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(t,u,s)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));i>n&&(i=n,s=e(this),o=t)}),c.range===!0&&this.values(1)===c.min&&(o+=1,s=e(this.handles[o])),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(e){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r,i){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.9.0-beta.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,r){var i=n.attr(r);i!==undefined&&i.length&&(t[r]=i)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.uiSpinner.addClass("ui-state-active"),this.previous=this.element.val()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}this._refresh(),this.uiSpinner.removeClass("ui-state-active"),this.previous!==this.element.val()&&this._trigger("change",e)},mousewheel:function(e,t){if(!t)return;if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()},"mousedown .ui-spinner-button":function(t){function r(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),r.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,r.call(this)});if(this._start(t)===!1)return;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(!e(t.currentTarget).hasClass("ui-state-active"))return;if(this._start(t)===!1)return!1;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this._hoverable(e),this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(e.height()*.5)&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,r=e.ui.keyCode;switch(t.keyCode){case r.UP:return this._repeat(null,1,t),!0;case r.DOWN:return this._repeat(null,-1,t),!0;case r.PAGE_UP:return this._repeat(null,n.page,t),!0;case r.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-state-default ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon ui-icon-triangle-1-n'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon ui-icon-triangle-1-s'>&#9660;</span></a>"},_start:function(e){return!this.spinning&&this._trigger("start",e)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter));if(!this.spinning||this._trigger("spin",t,{value:n})!==!1)this._value(n),this.counter++},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return this.options.min!==null&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return n===-1?0:t.length-n-1},_adjustValue:function(e){var t,n,r=this.options;return t=r.min!==null?r.min:0,n=e-t,n=Math.round(n/r.step)*r.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),r.max!==null&&e>r.max?r.max:r.min!==null&&e<r.min?r.min:e},_stop:function(e){if(!this.spinning)return;clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e)},_setOption:function(e,t){if(e==="culture"||e==="numberFormat"){var n=this._parse(this.element.val());this.options[e]=t,this.element.val(this._format(n));return}(e==="max"||e==="min"||e==="step")&&typeof t=="string"&&(t=this._parse(t)),this._super(e,t),e==="disabled"&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return typeof e=="string"&&e!==""&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),e===""||isNaN(e)?null:e},_format:function(e){return e===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var n;e!==""&&(n=this._parse(e),n!==null&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._spin((e||1)*this.options.step)},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._spin((e||1)*-this.options.step)},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(){return++n}function s(e){var t=/#.*$/,n=location.href.replace(t,"");return function(e){var r=e.href.replace(location.origin+"/",location.href);return e=e.cloneNode(!1),e.hash.length>1&&r.replace(t,"")===n}}var n=0,r=/#.*$/;e.widget("ui.tabs",{version:"1.9.0-beta.1",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t,n=this,r=this.options,i=r.active;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",r.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs();if(i===null){location.hash&&this.anchors.each(function(e,t){if(t.hash===location.hash)return i=e,!1}),i===null&&(i=this.tabs.filter(".ui-tabs-active").index());if(i===null||i===-1)i=this.tabs.length?0:!1}i!==!1&&(i=this.tabs.eq(i).index(),i===-1&&(i=r.collapsible?!1:0)),r.active=i,!r.collapsible&&r.active===!1&&this.anchors.length&&(r.active=0),e.isArray(r.disabled)&&(r.disabled=e.unique(r.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return n.tabs.index(e)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(this.options.active):this.active=e(),this._refresh(),this.active.length&&this.load(r.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),r=this.tabs.index(n),i=!0;if(this._handlePageNav(t))return;switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:r++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:i=!1,r--;break;case e.ui.keyCode.END:r=this.anchors.length-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.SPACE:t.preventDefault(),clearTimeout(this.activating),this._activate(r);return;case e.ui.keyCode.ENTER:t.preventDefault(),clearTimeout(this.activating),this._activate(r===this.options.active?!1:r);return;default:return}t.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,i),t.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))},_panelKeydown:function(t){if(this._handlePageNav(t))return;t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(t,n){function i(){return t>r&&(t=0),t<0&&(t=r),t}var r=this.tabs.length-1;while(e.inArray(i(),this.options.disabled)!==-1)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){if(e==="active"){this._activate(t);return}if(e==="disabled"){this._setupDisabled(t);return}this._super(e,t),e==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",t),!t&&this.options.active===!1&&this._activate(0)),e==="event"&&this._setupEvents(t),e==="heightStyle"&&this._setupHeightStyle(t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t,n=this.options,r=this.tablist.children(":has(a[href])");n.disabled=e.map(r.filter(".ui-state-disabled"),function(e){return r.index(e)}),this._processTabs(),n.active===!1||!this.anchors.length?(n.active=!1,this.active=e()):this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===n.disabled.length?(n.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,n.active-1),!1)):n.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,r){var i,o,u,a=e(r).uniqueId().attr("id"),f=e(r).closest("li"),l=f.attr("aria-controls");s(r)?(i=r.hash,o=t.element.find(t._sanitizeSelector(i))):(u=t._tabId(f),i="#"+u,o=t.element.find(i),o.length||(o=t._createPanel(u),o.insertAfter(t.panels[n-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),l&&f.data("ui-tabs-aria-controls",l),f.attr({"aria-controls":i.substring(1),"aria-labelledby":a}),o.attr("aria-labelledby",a)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n=0,r;r=this.tabs[n];n++)t===!0||e.inArray(n,t)!==-1?e(r).addClass("ui-state-disabled").attr("aria-disabled","true"):e(r).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,r,i=this.element.parent();t==="fill"?(e.support.minHeight||(r=i.css("overflow"),i.css("overflow","hidden")),n=i.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");if(r==="absolute"||r==="fixed")return;n-=t.outerHeight(!0)}),r&&i.css("overflow",r),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):t==="auto"&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i.closest("li"),o=s[0]===r[0],u=o&&n.collapsible,a=u?e():this._getPanelForTab(s),f=r.length?this._getPanelForTab(r):e(),l={oldTab:r,oldPanel:f,newTab:u?e():s,newPanel:a};t.preventDefault();if(s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,l)===!1)return;n.active=u?!1:this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),!f.length&&!a.length&&e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),t),this._toggle(t,l)},_toggle:function(t,n){function o(){r.running=!1,r._trigger("activate",t,n)}function u(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),i.length&&r.options.show?r._show(i,r.options.show,o):(i.show(),o())}var r=this,i=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),u()),s.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),i.length&&s.length?n.oldTab.attr("tabIndex",-1):i.length&&this.tabs.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var n,r=this._findActive(t);if(r[0]===this.active[0])return;r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return typeof e=="string"&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n):t.removeAttr("aria-controls")}),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(n){var r=this.options.disabled;if(r===!1)return;n===t?r=!1:(n=this._getIndex(n),e.isArray(r)?r=e.map(r,function(e){return e!==n?e:null}):r=e.map(this.tabs,function(e,t){return t!==n?t:null})),this._setupDisabled(r)},disable:function(n){var r=this.options.disabled;if(r===!0)return;if(n===t)r=!0;else{n=this._getIndex(n);if(e.inArray(n,r)!==-1)return;e.isArray(r)?r=e.merge([n],r).sort():r=[n]}this._setupDisabled(r)},load:function(t,n){t=this._getIndex(t);var r=this,i=this.tabs.eq(t),o=i.find(".ui-tabs-anchor"),u=this._getPanelForTab(i),a={tab:i,panel:u};if(s(o[0]))return;this.xhr=e.ajax({url:o.attr("href"),beforeSend:function(t,i){return r._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:i},a))}}),this.xhr&&this.xhr.statusText!=="canceled"&&(i.addClass("ui-tabs-loading"),u.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){u.html(e),r._trigger("load",n,a)},1)}).complete(function(e,t){setTimeout(function(){t==="abort"&&r.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),u.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr},1)}))},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),e.uiBackCompat!==!1&&(e.ui.tabs.prototype._ui=function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},e.widget("ui.tabs",e.ui.tabs,{url:function(e,t){this.anchors.eq(e).attr("href",t)}}),e.widget("ui.tabs",e.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var t=this;this._on({tabsbeforeload:function(n,r){if(e.data(r.tab[0],"cache.tabs")){n.preventDefault();return}e.extend(r.ajaxSettings,t.options.ajaxOptions,{error:function(e,n,i){try{t.options.ajaxOptions.error(e,n,r.tab.closest("li").index(),r.tab[0])}catch(i){}}}),r.jqXHR.success(function(){t.options.cache&&e.data(r.tab[0],"cache.tabs",!0)})}})},_setOption:function(e,t){e==="cache"&&t===!1&&this.anchors.removeData("cache.tabs"),this._super(e,t)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(e,t){this.anchors.eq(e).removeData("cache.tabs"),this._superApply(arguments)}}),e.widget("ui.tabs",e.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),e.widget("ui.tabs",e.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(e,t){if(!this.options.spinner)return;var n=t.tab.find("span"),r=n.html();n.html(this.options.spinner),t.jqXHR.complete(function(){n.html(r)})}})}}),e.widget("ui.tabs",e.ui.tabs,{options:{enable:null,disable:null},enable:function(t){var n=this.options,r;if(t&&n.disabled===!0||e.isArray(n.disabled)&&e.inArray(t,n.disabled)!==-1)r=!0;this._superApply(arguments),r&&this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t]))},disable:function(t){var n=this.options,r;if(t&&n.disabled===!1||e.isArray(n.disabled)&&e.inArray(t,n.disabled)===-1)r=!0;this._superApply(arguments),r&&this._trigger("disable",null,this._ui(this.anchors[t],this.panels[t]))}}),e.widget("ui.tabs",e.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(n,r,i){i===t&&(i=this.anchors.length);var s,o,u=this.options,a=e(u.tabTemplate.replace(/#\{href\}/g,n).replace(/#\{label\}/g,r)),f=n.indexOf("#")?this._tabId(a):n.replace("#","");return a.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),a.attr("aria-controls",f),s=i>=this.tabs.length,o=this.element.find("#"+f),o.length||(o=this._createPanel(f),s?i>0?o.insertAfter(this.panels.eq(-1)):o.appendTo(this.element):o.insertBefore(this.panels[i])),o.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),s?a.appendTo(this.tablist):a.insertBefore(this.tabs[i]),u.disabled=e.map(u.disabled,function(e){return e>=i?++e:e}),this.refresh(),this.tabs.length===1&&u.active===!1&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[i],this.panels[i])),this},remove:function(t){t=this._getIndex(t);var n=this.options,r=this.tabs.eq(t).remove(),i=this._getPanelForTab(r).remove();return r.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(t+(t+1<this.anchors.length?1:-1)),n.disabled=e.map(e.grep(n.disabled,function(e){return e!==t}),function(e){return e>=t?--e:e}),this.refresh(),this._trigger("remove",null,this._ui(r.find("a")[0],i[0])),this}}),e.widget("ui.tabs",e.ui.tabs,{length:function(){return this.anchors.length}}),e.widget("ui.tabs",e.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(t){var n=t.is("li")?t.find("a[href]"):t;return n=n[0],e(n).closest("li").attr("aria-controls")||n.title&&n.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+i()}}),e.widget("ui.tabs",e.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(t){return e(this.options.panelTemplate).attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),e.widget("ui.tabs",e.ui.tabs,{_create:function(){var e=this.options;e.active===null&&e.selected!==t&&(e.active=e.selected===-1?!1:e.selected),this._super(),e.selected=e.active,e.selected===!1&&(e.selected=-1)},_setOption:function(e,t){if(e!=="selected")return this._super(e,t);var n=this.options;this._super("active",t===-1?!1:t),n.selected=n.active,n.selected===!1&&(n.selected=-1)},_eventHandler:function(e){this._superApply(arguments),this.options.selected=this.options.active,this.options.selected===!1&&(this.options.selected=-1)}}),e.widget("ui.tabs",e.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),this.options.active!==!1&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(e,t,n){var r=this._superApply(arguments);return r?(e==="beforeActivate"&&n.newTab.length?r=this._super("select",t,{tab:n.newTab.find(".ui-tabs-anchor")[0],panel:n.newPanel[0],index:n.newTab.closest("li").index()}):e==="activate"&&n.newTab.length&&(r=this._super("show",t,{tab:n.newTab.find(".ui-tabs-anchor")[0],panel:n.newPanel[0],index:n.newTab.closest("li").index()})),r):!1}}),e.widget("ui.tabs",e.ui.tabs,{select:function(e){e=this._getIndex(e);if(e===-1){if(!this.options.collapsible||this.options.selected===-1)return;e=this.options.selected}this.anchors.eq(e).trigger(this.options.event+this.eventNamespace)}}),function(){var t=0;e.widget("ui.tabs",e.ui.tabs,{options:{cookie:null},_create:function(){var e=this.options,t;e.active==null&&e.cookie&&(t=parseInt(this._cookie(),10),t===-1&&(t=!1),e.active=t),this._super()},_cookie:function(n){var r=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++t)];return arguments.length&&(r.push(n===!1?-1:n),r.push(this.options.cookie)),e.cookie.apply(null,r)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(e){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),e.widget("ui.tabs",e.ui.tabs,{_trigger:function(t,n,r){var i=e.extend({},r);return t==="load"&&(i.panel=i.panel[0],i.tab=i.tab.find(".ui-tabs-anchor")[0]),this._super(t,n,i)}}),e.widget("ui.tabs",e.ui.tabs,{options:{fx:null},_getFx:function(){var t,n,r=this.options.fx;return r&&(e.isArray(r)?(t=r[0],n=r[1]):t=n=r),r?{show:n,hide:t}:null},_toggle:function(e,t){function o(){n.running=!1,n._trigger("activate",e,t)}function u(){t.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&s.show?r.animate(s.show,s.show.duration,function(){o()}):(r.show(),o())}var n=this,r=t.newPanel,i=t.oldPanel,s=this._getFx();if(!s)return this._super(e,t);n.running=!0,i.length&&s.hide?i.animate(s.hide,s.hide.duration,function(){t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u()}):(t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),i.hide(),u())}}))}(jQuery),function(e){function n(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))}function r(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);i!==-1&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")}var t=0;e.widget("ui.tooltip",{version:"1.9.0-beta.1",options:{content:function(){return e(this).attr("title")},hide:!0,items:"[title]",position:{my:"left+15 center",at:"right center",collision:"flipfit flipfit"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={}},_setOption:function(e,t){if(e==="disabled"){this[t?"_disable":"_enable"](),this.options[e]=t;return}this._super(e,t)},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0)}),this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n,r=this,i=e(t?t.target:this.element).closest(this.options.items);if(!i.length)return;if(this.options.track&&i.data("ui-tooltip-id")){this._find(i).position(e.extend({of:i},this.options.position));return}i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("tooltip-open",!0),n=this.options.content.call(i[0],function(e){if(!i.data("tooltip-open"))return;setTimeout(function(){r._open(t,i,e)},1)}),n&&r._open(t,i,n)},_open:function(t,r,i){function u(e){o.of=e,s.position(o)}var s,o;if(!i)return;s=this._find(r);if(s.length){s.find(".ui-tooltip-content").html(i);return}r.is("[title]")&&(t&&t.type==="mouseover"?r.attr("title",""):r.removeAttr("title")),s=this._tooltip(r),n(r,s.attr("id")),s.find(".ui-tooltip-content").html(i),this.options.track&&/^mouse/.test(t.originalEvent.type)?(o=e.extend({},this.options.position),this._on(this.document,{mousemove:u}),u(t)):s.position(e.extend({of:r},this.options.position)),s.hide(),this._show(s,this.options.show),this._trigger("open",t,{tooltip:s}),this._on(r,{mouseleave:"close",focusout:"close",keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=r[0],this.close(n,!0)}}})},close:function(t,n){var i=this,s=e(t?t.currentTarget:this.element),o=this._find(s);if(this.closing)return;if(!n&&t&&t.type!=="focusout"&&this.document[0].activeElement===s[0])return;s.data("ui-tooltip-title")&&s.attr("title",s.data("ui-tooltip-title")),r(s),o.stop(!0),this._hide(o,this.options.hide,function(){e(this).remove(),delete i.tooltips[this.id]}),s.removeData("tooltip-open"),this._off(s,"mouseleave focusout keyup"),this._off(this.document,"mousemove"),this.closing=!0,this._trigger("close",t,{tooltip:o}),this.closing=!1},_tooltip:function(n){var r="ui-tooltip-"+t++,i=e("<div>").attr({id:r,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),e.fn.bgiframe&&i.bgiframe(),this.tooltips[r]=n,i},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_destroy:function(){e.each(this.tooltips,function(t){e("#"+t).remove()})}})}(jQuery),define("Library/jquery-ui/js/jquery-ui-1.9b1",function(){}),define("jquery-ui",["jquery","emberjs","Library/jquery-ui/js/jquery-ui-1.9b1"],function(e,t){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("jquery-ui")}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){return e instanceof x?e:this instanceof x?(this._wrapped=e,void 0):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(null!=e)if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)}),!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}if(T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)}),!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){return t.call(n,e,i,s)?(r=e,!0):void 0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return null==e?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){return(i=i&&t.call(r,e,s,o))?void 0:n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){return i||(i=t.call(r,e,s,o))?n:void 0}),!!i)};x.contains=x.include=function(e,t){return null==e?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;r.computed>o&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(r>n||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=null==n?x.identity:k(n);for(var i=n.call(r,t),s=0,o=e.length;o>s;){var u=s+o>>>1;i>n.call(r,e[u])?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){(t?r&&o[o.length-1]===n:x.contains(o,n))||(o.push(n),s.push(e[r]))}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=Array(t),r=0;t>r;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},x.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=Array(r);r>i;)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return 0===t.length&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,0>=f?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if("[object Array]"==i){if(o=e.length,u=o==t.length)for(;o--&&(u=O(e[o],t[o],n,r)););}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)&&(o++,!(u=x.has(t,c)&&O(e[c],t[c],n,r))))break;if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&1===e.nodeType},x.isArray=w||function(e){return"[object Array]"==f.call(e)},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),"function"!=typeof /./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){for(var r=Array(e),i=0;e>i;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(null==e)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscorejs",function(e){return function(){return e._}}(this)),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),define("backbone",function(){}),function(e){var t={},n=/^(([a-z][\-a-z0-9+\.]*):)?(\/\/([^\/?#]+))?([^?#]*)?(\?([^#]*))?(#(.*))?$/i,r,i=function(e){var t=e.match(n);if(t===null)throw"Malformed URI: "+e;return{scheme:t[1]?t[2].toLowerCase():undefined,authority:t[3]?t[4]:undefined,path:t[5]||"",query:t[6]?t[7]:undefined,fragment:t[8]?t[9]:undefined}},s=function(e){var t="",n=[];if(/\./.test(e)){while(e!==undefined&&e!=="")e==="."||e===".."?e="":/^\.\.\//.test(e)?e=e.substring(3):/^\.\//.test(e)?e=e.substring(2):/^\/\.(\/|$)/.test(e)?e="/"+e.substring(3):/^\/\.\.(\/|$)/.test(e)?(e="/"+e.substring(4),t=t.replace(/\/?[^\/]+$/,"")):(n=e.match(/^(\/?[^\/]*)(\/.*)?$/),e=n[2],t+=n[1]);return t}return e},o=function(e,t){return e.authority===""||e.path!==undefined&&e.path!==""?e.path.replace(/[^\/]+$/,"")+t:"/"+t};e.uri=function(n,r){var i;return n=n||"",t[n]?t[n]:(r=r||e.uri.base(),typeof r=="string"&&(r=e.uri.absolute(r)),i=new e.uri.fn.init(n,r),t[i]?t[i]:(t[i]=i,i))},e.uri.fn=e.uri.prototype={scheme:undefined,authority:undefined,path:undefined,query:undefined,fragment:undefined,init:function(t,n){var r={};n=n||{},e.extend(this,i(t)),this.scheme===undefined&&(this.scheme=n.scheme,this.authority!==undefined?this.path=s(this.path):(this.authority=n.authority,this.path===""?(this.path=n.path,this.query===undefined&&(this.query=n.query)):(/^\//.test(this.path)||(this.path=o(n,this.path)),this.path=s(this.path))));if(this.scheme===undefined)throw"Malformed URI: URI is not an absolute URI and no base supplied: "+t;return this},resolve:function(t){return e.uri(t,this)},relative:function(t){var n,r,i=0,s,o=[],u="";typeof t=="string"&&(t=e.uri(t,{}));if(t.scheme!==this.scheme||t.authority!==this.authority)return t.toString();if(t.path!==this.path){n=t.path.split("/"),r=this.path.split("/");if(n[1]!==r[1])u=t.path;else{while(n[i]===r[i])i+=1;s=i;for(;i<r.length-1;i+=1)o.push("..");for(;s<n.length;s+=1)o.push(n[s]);u=o.join("/")}return u=t.query===undefined?u:u+"?"+t.query,u=t.fragment===undefined?u:u+"#"+t.fragment,u}return t.query!==undefined&&t.query!==this.query?"?"+t.query+(t.fragment===undefined?"":"#"+t.fragment):t.fragment!==undefined&&t.fragment!==this.fragment?"#"+t.fragment:""},toString:function(){var e="";return this._string?this._string:(e=this.scheme===undefined?e:e+this.scheme+":",e=this.authority===undefined?e:e+"//"+this.authority,e+=this.path,e=this.query===undefined?e:e+"?"+this.query,e=this.fragment===undefined?e:e+"#"+this.fragment,this._string=e,e)}},e.uri.fn.init.prototype=e.uri.fn,e.uri.absolute=function(t){return e.uri(t,{})},e.uri.resolve=function(t,n){return e.uri(t,n)},e.uri.relative=function(t,n){return e.uri(n,{}).relative(t)},e.uri.base=function(){return e(document).base()},e.fn.base=function(){var t=e(this).parents().andSelf().find("base").attr("href"),n=e(this)[0].ownerDocument||document,r=e.uri.absolute(n.location===null?document.location.href:n.location.href);return t===undefined?r:e.uri(t,r)}}(jQuery),function(e){var t="http://www.w3.org/XML/1998/namespace",n="http://www.w3.org/2000/xmlns/",r=/\sxmlns(?::([^ =]+))?\s*=\s*(?:"([^"]*)"|'([^']*)')/g,i="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]",s="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]",o=new RegExp("^"+s+i+"*$");e.fn.xmlns=function(i,s,u){var f=this.eq(0),l=f.data("xmlns"),h=f[0],p,v,m,y=i?"xmlns:"+i:"xmlns",b,w,E=!1;if(s===undefined){if(i===undefined){if(!l){l={};if(h.attributes&&h.attributes.getNamedItemNS)for(m=0;m<h.attributes.length;m+=1){p=h.attributes[m];if(/^xmlns(:(.+))?$/.test(p.nodeName)){i=/^xmlns(:(.+))?$/.exec(p.nodeName)[2]||"",b=p.nodeValue;if(i===""||b!==""&&b!==t&&b!==n&&o.test(i)&&i!=="xml"&&i!=="xmlns")l[i]=e.uri(p.nodeValue),E=!0}}else{w=/<[^>]+>/.exec(h.outerHTML),p=r.exec(w);while(p!==null){i=p[1]||"",b=p[2]||p[3];if(i===""||b!==""&&b!==t&&b!==n&&o.test(i)&&i!=="xml"&&i!=="xmlns")l[i]=e.uri(p[2]||p[3]),E=!0;p=r.exec(w)}r.lastIndex=0}u=u||(h.parentNode.nodeType===1?f.parent().xmlns():{}),l=E?e.extend({},u,l):u,f.data("xmlns",l)}return l}if(typeof i=="object"){for(v in i)typeof i[v]=="string"&&o.test(v)&&this.xmlns(v,i[v]);return this.find("*").andSelf().removeData("xmlns"),this}return l||(l=f.xmlns()),l[i]}return this.find("*").andSelf().removeData("xmlns"),this.attr(y,s)},e.fn.removeXmlns=function(e){var t,n,r;if(typeof e=="object")if(e.length===undefined)for(n in e)typeof e[n]=="string"&&this.removeXmlns(n);else for(r=0;r<e.length;r+=1)this.removeXmlns(e[r]);else t=e?"xmlns:"+e:"xmlns",this.removeAttr(t);return this.find("*").andSelf().removeData("xmlns"),this},e.fn.qname=function(e){var t,n,r;e===undefined&&(this[0].outerHTML===undefined?e=this[0].nodeName.toLowerCase():e=/<([^ >]+)/.exec(this[0].outerHTML)[1].toLowerCase());if(e==="?xml:namespace")throw"XMLinHTML: Unable to get the prefix to resolve the name of this element";t=/^(([^:]+):)?([^:]+)$/.exec(e),n=t[2]||"",r=this.xmlns(n);if(r===undefined&&n!=="")throw"MalformedQName: The prefix "+n+" is not declared";return{namespace:r,localPart:t[3],prefix:n,name:e}}}(jQuery),function(e){var t=function(e){return e.replace(/[ \t\n\r]+/," ").replace(/^ +/,"").replace(/ +$/,"")};e.typedValue=function(t,n){return e.typedValue.fn.init(t,n)},e.typedValue.fn=e.typedValue.prototype={representation:undefined,value:undefined,datatype:undefined,init:function(n,r){var i=e.typedValue.types[r];return this.representation=n,this.datatype=r,this.value=i===undefined?t(n):i.value(i.strip?t(n):n),this}},e.typedValue.fn.init.prototype=e.typedValue.fn,e.typedValue.types={},e.typedValue.types["http://www.w3.org/2001/XMLSchema#string"]={regex:/^.*$/,strip:!1,value:function(e){return e}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#token"]={regex:/^.*$/,strip:!0,value:function(e){return t(e)}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#NCName"]={regex:/^[a-z_][-\.a-z0-9]+$/i,strip:!0,value:function(e){return t(e)}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#boolean"]={regex:/^(?:true|false|1|0)$/,strip:!0,value:function(e){return e==="true"||e==="1"}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#decimal"]={regex:/^[\-\+]?(?:[0-9]+\.[0-9]*|\.[0-9]+|[0-9]+)$/,strip:!0,value:function(e){return e=e.replace(/^0+/,"").replace(/0+$/,""),e===""&&(e="0.0"),e.substring(0,1)==="."&&(e="0"+e),/\.$/.test(e)?e+="0":/\./.test(e)||(e+=".0"),e}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#integer"]={regex:/^[\-\+]?[0-9]+$/,strip:!0,value:function(e){return parseInt(e,10)}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#int"]={regex:/^[\-\+]?[0-9]+$/,strip:!0,value:function(e){return parseInt(e,10)}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#float"]={regex:/^(?:[\-\+]?(?:[0-9]+\.[0-9]*|\.[0-9]+|[0-9]+)(?:[eE][\-\+]?[0-9]+)?|[\-\+]?INF|NaN)$/,strip:!0,value:function(e){return e==="-INF"?-1/0:e==="INF"||e==="+INF"?1/0:parseFloat(e)}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#double"]={regex:e.typedValue.types["http://www.w3.org/2001/XMLSchema#float"].regex,strip:!0,value:e.typedValue.types["http://www.w3.org/2001/XMLSchema#float"].value},e.typedValue.types["http://www.w3.org/2001/XMLSchema#duration"]={regex:/^([\-\+])?P(?:([0-9]+)Y)?(?:([0-9]+)M)?(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:([0-9]+(?:\.[0-9]+)?)?S)?)$/,validate:function(e){var t=this.regex.exec(e);return t[2]||t[3]||t[4]||t[5]||t[6]||t[7]},strip:!0,value:function(e){return e}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#yearMonthDuration"]={regex:/^([\-\+])?P(?:([0-9]+)Y)?(?:([0-9]+)M)?$/,validate:function(e){var t=this.regex.exec(e);return t[2]||t[3]},strip:!0,value:function(e){var t=this.regex.exec(e),n=t[2]||0,r=t[3]||0;return r+=n*12,t[1]==="-"?-1*r:r}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#dateTime"]={regex:/^(-?[0-9]{4,})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):(([0-9]{2})(\.([0-9]+))?)((?:[\-\+]([0-9]{2}):([0-9]{2}))|Z)?$/,validate:function(e){var t=this.regex.exec(e),n=parseInt(t[1],10),r=t[10]===undefined||t[10]==="Z"?"+0000":t[10].replace(/:/,""),i;if(n===0||parseInt(r,10)<-1400||parseInt(r,10)>1400)return!1;try{n=n<100?Math.abs(n)+1e3:n,month=parseInt(t[2],10),day=parseInt(t[3],10);if(day>31)return!1;if(day>30&&month!==1&&month!==3&&month!==5&&month!==7&&month!==8&&month!==10&&month!==12)return!1;if(month===2){if(day>29)return!1;if(day===29&&(n%4!==0||n%100===0&&n%400!==0))return!1}return i=""+n+"/"+t[2]+"/"+t[3]+" "+t[4]+":"+t[5]+":"+t[7]+" "+r,i=new Date(i),!0}catch(s){return!1}},strip:!0,value:function(e){return e}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#date"]={regex:/^(-?[0-9]{4,})-([0-9]{2})-([0-9]{2})((?:[\-\+]([0-9]{2}):([0-9]{2}))|Z)?$/,validate:function(e){var t=this.regex.exec(e),n=parseInt(t[1],10),r=parseInt(t[2],10),i=parseInt(t[3],10),s=t[10]===undefined||t[10]==="Z"?"+0000":t[10].replace(/:/,"");return n===0||r>12||i>31||parseInt(s,10)<-1400||parseInt(s,10)>1400?!1:!0},strip:!0,value:function(e){return e}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#gYear"]={regex:/^-?([0-9]{4,})$/,validate:function(e){var t=parseInt(e,10);return t!==0},strip:!0,value:function(e){return parseInt(e,10)}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#gMonthDay"]={regex:/^--([0-9]{2})-([0-9]{2})((?:[\-\+]([0-9]{2}):([0-9]{2}))|Z)?$/,validate:function(e){var t=this.regex.exec(e),n=parseInt(t[1],10),r=parseInt(t[2],10),i=t[3]===undefined||t[3]==="Z"?"+0000":t[3].replace(/:/,"");return n>12||r>31||parseInt(i,10)<-1400||parseInt(i,10)>1400?!1:n===2&&r>29?!1:(n===4||n===6||n===9||n===11)&&r>30?!1:!0},strip:!0,value:function(e){return e}},e.typedValue.types["http://www.w3.org/2001/XMLSchema#anyURI"]={regex:/^.*$/,strip:!0,value:function(t,n){var r=e.extend({},e.typedValue.defaults,n);return e.uri.resolve(t,r.base)}},e.typedValue.defaults={base:e.uri.base(),namespaces:{}},e.typedValue.valid=function(n,r){var i=e.typedValue.types[r];return i===undefined?!0:(n=i.strip?t(n):n,i.regex.test(n)?i.validate===undefined?!0:i.validate(n):!1)}}(jQuery),function(e){e.curie=function(t,n){var r=e.extend({},e.curie.defaults,n||{}),i=/^(([^:]*):)?(.+)$/.exec(t),s=i[2],o=i[3],u=r.namespaces[s];if(/^:.+/.test(t)){if(r.reservedNamespace===undefined||r.reservedNamespace===null)throw"Malformed CURIE: No prefix and no default namespace for unprefixed CURIE "+t;u=r.reservedNamespace}else if(s){if(u===undefined)throw"Malformed CURIE: No namespace binding for "+s+" in CURIE "+t}else{r.charcase==="lower"?t=t.toLowerCase():r.charcase==="upper"&&(t=t.toUpperCase());if(r.reserved.length&&e.inArray(t,r.reserved)>=0)u=r.reservedNamespace,o=t;else{if(r.defaultNamespace===undefined||r.defaultNamespace===null)throw"Malformed CURIE: No prefix and no default namespace for unprefixed CURIE "+t;u=r.defaultNamespace}}return e.uri(u+o)},e.curie.defaults={namespaces:{},reserved:[],reservedNamespace:undefined,defaultNamespace:undefined,charcase:"preserve"},e.safeCurie=function(t,n){var r=/^\[([^\]]+)\]$/.exec(t);return r?e.curie(r[1],n):e.uri(t)},e.createCurie=function(t,n){var r=e.extend({},e.curie.defaults,n||{}),i=r.namespaces,s;t=e.uri(t).toString(),r.reservedNamespace!==undefined&&t.substring(0,r.reservedNamespace.toString().length)===r.reservedNamespace.toString()?(s=t.substring(r.reservedNamespace.toString().length),e.inArray(s,r.reserved)===-1&&(s=":"+s)):e.each(i,function(e,n){if(t.substring(0,n.toString().length)===n.toString())return s=e+":"+t.substring(n.toString().length),null});if(s===undefined)throw"No Namespace Binding: There's no appropriate namespace binding for generating a CURIE from "+t;return s},e.fn.curie=function(t,n){var r=e.extend({},e.fn.curie.defaults,{namespaces:this.xmlns()},n||{});return e.curie(t,r)},e.fn.safeCurie=function(t,n){var r=e.extend({},e.fn.curie.defaults,{namespaces:this.xmlns()},n||{});return e.safeCurie(t,r)},e.fn.createCurie=function(t,n){var r=e.extend({},e.fn.curie.defaults,{namespaces:this.xmlns()},n||{});return e.createCurie(t,r)},e.fn.curie.defaults={reserved:["alternate","appendix","bookmark","cite","chapter","contents","copyright","first","glossary","help","icon","index","last","license","meta","next","p3pv1","prev","role","section","stylesheet","subsection","start","top","up"],reservedNamespace:"http://www.w3.org/1999/xhtml/vocab#",defaultNamespace:undefined,charcase:"lower"}}(jQuery),function(e){var t={},n={},r={},i={},s={},o="http://www.w3.org/2001/XMLSchema#",u="http://www.w3.org/1999/02/22-rdf-syntax-ns#",a="http://www.w3.org/2000/01/rdf-schema#",f=/^<(([^>]|\\>)*)>$/,l=/^("""((\\"|[^"])*)"""|"((\\"|[^"])*)")(@([a-z]+(-[a-z0-9]+)*)|\^\^(.+))?$/,c=/(("""((\\"|[^"])*)""")|("(\\"|[^"]|)*")|(<(\\>|[^>])*>)|\S)+/g,h=databankSeed=(new Date).getTime()%1e3,d=function(){return h+=1,"b"+h.toString(16)},m=function(){return databankSeed+=1,"data"+databankSeed.toString(16)},g={},y={},b=function(t,n){if(typeof t!="string")return t;try{return e.rdf.resource(t,n)}catch(r){try{return e.rdf.blank(t,n)}catch(i){throw"Bad Triple: Subject "+t+" is not a resource: "+i}}},w=function(t,n){if(t==="a")return e.rdf.type;if(typeof t!="string")return t;try{return e.rdf.resource(t,n)}catch(r){throw"Bad Triple: Property "+t+" is not a resource: "+r}},E=function(t,n){if(typeof t!="string")return t;try{return e.rdf.resource(t,n)}catch(r){try{return e.rdf.blank(t,n)}catch(i){try{return e.rdf.literal(t,n)}catch(s){throw"Bad Triple: Object "+t+" is not a resource or a literal "+s}}}},S=function(e,t,n){var r;return typeof t=="string"?(r=t.substring(1),n[r]&&n[r]!==e?null:(n[r]=e,n)):t===e?n:null},x=function(t,n){if(t.union===undefined){if(n.subject.type!==undefined)return t.subjectIndex[n.subject]===undefined?[]:e.map(t.subjectIndex[n.subject],function(e){var t=n.exec(e);return t===null?null:{bindings:t,triples:[e]}});if(n.object.type==="uri"||n.object.type==="bnode")return t.objectIndex[n.object]===undefined?[]:e.map(t.objectIndex[n.object],function(e){var t=n.exec(e);return t===null?null:{bindings:t,triples:[e]}});if(n.property.type!==undefined)return t.propertyIndex[n.property]===undefined?[]:e.map(t.propertyIndex[n.property],function(e){var t=n.exec(e);return t===null?null:{bindings:t,triples:[e]}})}return e.map(t.triples(),function(e){var t=n.exec(e);return t===null?null:{bindings:t,triples:[e]}})},T=function(t,n,r){return e.map(t,function(t,i){var s=e.map(n,function(e){var n,r,i=!0;for(n in e.bindings){r=e.bindings[n];if(t.bindings[n]!==undefined&&t.bindings[n]!==r){i=!1;break}}return i?e:null});return s.length>0?e.map(s,function(n){return{bindings:e.extend({},t.bindings,n.bindings),triples:R(t.triples.concat(n.triples))}}):r?t:null})},N=function(t,n){var r,i,s;n.filterExp!==undefined&&!e.isFunction(n.filterExp)&&(t.union===undefined?(r=typeof n.filterExp.subject=="string"?"":n.filterExp.subject,i=typeof n.filterExp.property=="string"?"":n.filterExp.property,s=typeof n.filterExp.object=="string"?"":n.filterExp.object,t.queries[r]===undefined&&(t.queries[r]={}),t.queries[r][i]===undefined&&(t.queries[r][i]={}),t.queries[r][i][s]===undefined&&(t.queries[r][i][s]=[]),t.queries[r][i][s].push(n)):e.each(t.union,function(e,t){N(t,n)}))},C=function(t){t.length=0,t.matches=[],e.each(t.children,function(e,t){C(t)}),e.each(t.partOf,function(e,t){C(t)})},k=function(t,n){n.length>0&&(e.each(t.children,function(e,t){O(t,n)}),e.each(t.partOf,function(e,t){k(t,n)}),e.each(n,function(e,n){t.matches.push(n),Array.prototype.push.call(t,n.bindings)}))},L=function(e,t){var n,r,i,s,o,u,a,f=t.length,l,c={},h={},p={},d=[];for(n=0;n<e.length;n+=1){r=e[n].bindings,i=e[n].triples,h=p;for(s=0;s<f;s+=1){u=t[s],a=r[u];if(s===f-1)if(h[a]===undefined){c={bindings:{},triples:i};for(o=0;o<f;o+=1)c.bindings[t[o]]=r[t[o]];h[a]=c,d.push(c)}else c=h[a],c.triples=c.triples.concat(i);else h[a]===undefined&&(h[a]={}),h=h[a]}}return d},A=function(e,t){var n,r,i,s={},o=[];for(n=0;n<e.length;n+=1)r=e[n],s[r.bindings[t]]===undefined?(i={bindings:{node:r.bindings[t]},triples:r.triples},o.push(i),s[r.bindings[t]]=i):(i=s[r.bindings[t]],i.triples=i.triples.concat(r.triples));return o},O=function(t,n){var r;t.union===undefined?t.top||t.parent.top?r=t.alphaMemory:(n=n||t.parent.matches,e.isFunction(t.filterExp)?r=e.map(n,function(e,n){return t.filterExp.call(e.bindings,n,e.bindings,e.triples)?e:null}):t.filterExp!==undefined?r=T(n,t.alphaMemory,t.filterExp.optional):r=n):r=e.map(t.union,function(e){return e.matches}),t.selections!==undefined?r=L(r,t.selections):t.navigate!==undefined&&(r=A(r,t.navigate)),k(t,r)},M=function(e,t){var n;e.filterExp.optional?(C(e),O(e)):(e.top||e.parent.top?n=[t]:n=T(e.parent.matches,[t],!1),k(e,n))},_=function(e,t){var n,r=e.filterExp.exec(t);r!==null&&(n={triples:[t],bindings:r},e.alphaMemory.push(n),M(e,n))},D=function(t,n){t.alphaMemory.splice(e.inArray(n,t.alphaMemory),1),C(t),O(t)},P=function(t,n){e.each(t,function(e,t){_(t,n)})},H=function(t,n){e.each(t,function(e,t){D(t,n)})},B=function(t,n){var r=n.subject,i=n.property,s=n.object;t.union===undefined?(t.queries[r]!==undefined&&(t.queries[r][i]!==undefined&&(t.queries[r][i][s]!==undefined&&P(t.queries[r][i][s],n),t.queries[r][i][""]!==undefined&&P(t.queries[r][i][""],n)),t.queries[r][""]!==undefined&&(t.queries[r][""][s]!==undefined&&P(t.queries[r][""][s],n),t.queries[r][""][""]!==undefined&&P(t.queries[r][""][""],n))),t.queries[""]!==undefined&&(t.queries[""][i]!==undefined&&(t.queries[""][i][s]!==undefined&&P(t.queries[""][i][s],n),t.queries[""][i][""]!==undefined&&P(t.queries[""][i][""],n)),t.queries[""][""]!==undefined&&(t.queries[""][""][s]!==undefined&&P(t.queries[""][""][s],n),t.queries[""][""][""]!==undefined&&P(t.queries[""][""][""],n)))):e.each(t.union,function(e,t){B(t,n)})},j=function(t,n){var r=n.subject,i=n.property,s=n.object;t.union===undefined?(t.queries[r]!==undefined&&(t.queries[r][i]!==undefined&&(t.queries[r][i][s]!==undefined&&H(t.queries[r][i][s],n),t.queries[r][i][""]!==undefined&&H(t.queries[r][i][""],n)),t.queries[r][""]!==undefined&&(t.queries[r][""][s]!==undefined&&H(t.queries[r][""][s],n),t.queries[r][""][""]!==undefined&&H(t.queries[r][""][""],n))),t.queries[""]!==undefined&&(t.queries[""][i]!==undefined&&(t.queries[""][i][s]!==undefined&&H(t.queries[""][i][s],n),t.queries[""][i][""]!==undefined&&H(t.queries[""][i][""],n)),t.queries[""][""]!==undefined&&(t.queries[""][""][s]!==undefined&&H(t.queries[""][""][s],n),t.queries[""][""][""]!==undefined&&H(t.queries[""][""][""],n)))):e.each(t.union,function(e,t){j(t,n)})},F=function(t,n,r){var i=n[0],s={},o=[],u,a;r=r||{};if(n.length===0){for(u=0;u<t.length;u+=1)for(v in t[u])r[v]===undefined&&(r[v]=[]),e.isArray(r[v])&&r[v].push(t[u][v]);return[r]}for(u=0;u<t.length;u+=1)key=t[u][i],s[key]===undefined&&(s[key]=[]),s[key].push(t[u]);n=n.splice(1,1);for(v in s)a=e.extend({},r),a[i]=s[v][0][i],o=o.concat(F(s[v],n,a));return o},I=function(e,t,n){return y[e.id]===undefined&&(y[e.id]={}),y[e.id][t]===undefined?(y[e.id][t]=n,!1):!0},q=function(t,n,r,i){var s=y[t.id][n];e.isFunction(s[r])&&s[r].call(t,i),y[t.id][n]=undefined},R=function(e){var t=[],n=e.length;for(var r=0;r<n;r++){for(var i=r+1;i<n;i++)e[r]===e[i]&&(i=++r);t.push(e[r])}return t};e.typedValue.types["http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"]={regex:/^.*$/m,strip:!1,value:function(e){return e}},e.rdf=function(t){return new e.rdf.fn.init(t)},e.rdf.fn=e.rdf.prototype={rdfquery:"1.1",init:function(t){var n,r;t=t||{},this.parent=t.parent,this.union=t.union,this.top=this.parent===undefined&&this.union===undefined,this.union===undefined?t.databank===undefined?this.databank=this.parent===undefined?e.rdf.databank(t.triples,t):this.parent.databank:this.databank=t.databank:(n=e.map(this.union,function(e){return e.databank}),n=R(n),n[1]!==undefined?this.databank=e.rdf.databank(undefined,{union:n}):this.databank=n[0]),this.children=[],this.partOf=[],this.filterExp=t.filter,this.selections=t.distinct,this.navigate=t.navigate,this.alphaMemory=[],this.matches=[],this.length=0;if(this.filterExp!==undefined)e.isFunction(this.filterExp)||(N(this.databank,this),this.alphaMemory=x(this.databank,this.filterExp));else if(t.nodes!==undefined){this.alphaMemory=[];for(r=0;r<t.nodes.length;r+=1)this.alphaMemory.push({bindings:{node:t.nodes[r]},triples:[]})}return O(this),this},base:function(e){return e===undefined?this.databank.base():(this.databank.base(e),this)},prefix:function(e,t){return t===undefined?this.databank.prefix(e):(this.databank.prefix(e,t),this)},add:function(t,n){var r,i;if(t.rdfquery!==undefined){if(t.top)return i=this.databank.add(t.databank),r=e.rdf({parent:this.parent,databank:i}),r;if(this.top)return i=t.databank.add(this.databank),r=e.rdf({parent:t.parent,databank:i}),r;if(this.union===undefined)return r=e.rdf({union:[this,t]}),this.partOf.push(r),t.partOf.push(r),r;this.union.push(t),t.partOf.push(this)}else typeof t=="string"&&(n=e.extend({},{base:this.base(),namespaces:this.prefix(),source:t},n),t=e.rdf.pattern(t,n)),t.isFixed()?this.databank.add(t.triple(),n):(r=this,this.each(function(e,i){var s=t.triple(i);s!==null&&r.databank.add(s,n)}));return this},remove:function(t,n){return typeof t=="string"&&(n=e.extend({},{base:this.base(),namespaces:this.prefix()},n),t=e.rdf.pattern(t,n)),t.isFixed()?this.databank.remove(t.triple(),n):(query=this,this.each(function(e,r){var i=t.triple(r);i!==null&&query.databank.remove(i,n)})),this},load:function(e,t){var n=this,t=t||{},r=t.success;return r!==undefined&&(t.success=function(){r.call(n)}),this.databank.load(e,t),this},except:function(t){return e.rdf({databank:this.databank.except(t.databank)})},where:function(t,n){var r,i,s,o;return n=n||{},typeof t=="string"&&(i=n.base||this.base(),s=e.extend({},this.prefix(),n.namespaces||{}),o=n.optional||!1,t=e.rdf.pattern(t,{namespaces:s,base:i,optional:o})),r=e.rdf(e.extend({},n,{parent:this,filter:t})),this.children.push(r),r},optional:function(t,n){return this.where(t,e.extend({},n||{},{optional:!0}))},about:function(e,t){return this.where(e+" ?property ?value",t)},filter:function(t,n){var r,i;return typeof t=="string"?n.constructor===RegExp?r=function(){return n.test(this[t].value)}:r=function(){return this[t].type==="literal"?this[t].value===n:this[t]===n}:r=t,i=e.rdf({parent:this,filter:r}),this.children.push(i),i},node:function(t){var n,r;return t.toString().substring(0,1)==="?"?(n=t.toString().substring(1),r=e.rdf({parent:this,navigate:n})):(typeof t=="string"&&(t=E(t,{namespaces:this.prefix(),base:this.base()})),r=e.rdf({parent:this,nodes:[t]})),this.children.push(r),r},find:function(e){return this.where("?node "+e+" ?object",{navigate:"object"})},back:function(e){return this.where("?subject "+e+" ?node",{navigate:"subject"})},group:function(t){var n={},r=[],i,s,o;return e.isArray(t)||(t=[t]),e(F(this,t))},select:function(e){var t=[],n,r;for(n=0;n<this.length;n+=1)if(e===undefined)t[n]=this[n];else{t[n]={};for(r=0;r<e.length;r+=1)t[n][e[r]]=this[n][e[r]]}return t},describe:function(e){var t,n,r,i=[];for(t=0;t<e.length;t+=1){r=e[t];if(r.substring(0,1)==="?"){r=r.substring(1);for(n=0;n<this.length;n+=1)i.push(this[n][r])}else i.push(r)}return this.databank.describe(i)},eq:function(e){return this.filter(function(t){return t===e})},reset:function(){var e=this;while(e.parent!==undefined)e=e.parent;return e},end:function(){return this.parent},size:function(){return this.length},sources:function(){return e(e.map(this.matches,function(e){return[e.triples]}))},dump:function(t){var n=e.map(this.matches,function(e){return e.triples});return t=e.extend({namespaces:this.databank.namespaces,base:this.databank.base},t||{}),e.rdf.dump(n,t)},get:function(t){return t===undefined?e.makeArray(this):this[t]},each:function(t){return e.each(this.matches,function(e,n){t.call(n.bindings,e,n.bindings,n.triples)}),this},map:function(t){return e(e.map(this.matches,function(e,n){return t.call(e.bindings,n,e.bindings,e.triples)}))},jquery:function(){return e(this)}},e.rdf.fn.init.prototype=e.rdf.fn,e.rdf.gleaners=[],e.rdf.parsers={},e.rdf.dump=function(t,n){var r=e.extend({},e.rdf.dump.defaults,n||{}),i=r.format,s=r.serialize,o,u,a;u=e.rdf.parsers[i];if(u===undefined){a=[];for(p in e.rdf.parsers)a.push(p);throw"Unrecognised dump format: "+i+". Expected one of "+a.join(", ")}return o=u.dump(t,r),s?u.serialize(o):o},e.rdf.dump.defaults={format:"application/json",serialize:!1,indent:!1,namespaces:{}},e.fn.rdf=function(t){var n=[],t=t||function(){return this};return e(this)[0]&&e(this)[0].nodeType===9?e(this).children("*").rdf(t):e(this).length>0?(n=e(this).map(function(n,r){return e.map(e.rdf.gleaners,function(n){return n.call(e(r),{callback:t})})}),e.rdf({triples:n,namespaces:e(this).xmlns()})):e.rdf()},e.extend(e.expr[":"],{about:function(t,n,r){var i=e(t),s=r[3]?i.safeCurie(r[3]):null,o=!1;return e.each(e.rdf.gleaners,function(e,t){o=t.call(i,{about:s});if(o)return null}),o},type:function(t,n,r){var i=e(t),s=r[3]?i.curie(r[3]):null,o=!1;return e.each(e.rdf.gleaners,function(e,t){if(t.call(i,{type:s}))return o=!0,null}),o}}),e.rdf.databank=function(t,n){return new e.rdf.databank.fn.init(t,n)},e.rdf.databank.fn=e.rdf.databank.prototype={init:function(t,n){var r;t=t||[],n=n||{},this.id=m(),g[this.id]=this;if(n.union===undefined){this.queries={},this.tripleStore=[],this.subjectIndex={},this.propertyIndex={},this.objectIndex={},this.baseURI=n.base||e.uri.base(),this.namespaces=e.extend({},n.namespaces||{});for(r=0;r<t.length;r+=1)this.add(t[r])}else this.union=n.union;return this},base:function(t){return this.union===undefined?t===undefined?this.baseURI:(this.baseURI=t,this):t===undefined?this.union[0].base():(e.each(this.union,function(e,n){n.base(t)}),this)},prefix:function(t,n){var r={};return this.union===undefined?t===undefined?this.namespaces:n===undefined?this.namespaces[t]:(this.namespaces[t]=n,this):n===undefined?(e.each(this.union,function(t,n){e.extend(r,n.prefix())}),t===undefined?r:r[t]):(e.each(this.union,function(e,r){r.prefix(t,n)}),this)},add:function(t,n){var r=n&&n.base||this.base(),i=e.extend({},this.prefix(),n&&n.namespaces||{}),s=n&&n.depth||e.rdf.databank.defaults.depth,o=n&&n.proxy||e.rdf.databank.defaults.proxy,u;if(t===this)return this;if(t.subjectIndex!==undefined)return this.union===undefined?(u=e.rdf.databank(undefined,{union:[this,t]}),u):(this.union.push(t),this);typeof t=="string"&&(t=e.rdf.triple(t,{namespaces:i,base:r,source:t}));if(this.union===undefined){this.subjectIndex[t.subject]===undefined&&(this.subjectIndex[t.subject]=[],s>0&&t.subject.type==="uri"&&this.load(t.subject.value,{depth:s-1,proxy:o})),this.propertyIndex[t.property]===undefined&&(this.propertyIndex[t.property]=[],s>0&&this.load(t.property.value,{depth:s-1,proxy:o}));if(e.inArray(t,this.subjectIndex[t.subject])===-1){this.tripleStore.push(t),this.subjectIndex[t.subject].push(t),this.propertyIndex[t.property].push(t);if(t.object.type==="uri"||t.object.type==="bnode")this.objectIndex[t.object]===undefined&&(this.objectIndex[t.object]=[],s>0&&t.object.type==="uri"&&this.load(t.object.value,{depth:s-1,proxy:o})),this.objectIndex[t.object].push(t);B(this,t)}}else e.each(this.union,function(e,n){n.add(t)});return this},remove:function(t,n){var r=n&&n.base||this.base(),i=e.extend({},this.prefix(),n&&n.namespaces||{}),s,o,u,a;typeof t=="string"&&(t=e.rdf.triple(t,{namespaces:i,base:r,source:t})),this.tripleStore.splice(e.inArray(t,this.tripleStore),1),s=this.subjectIndex[t.subject],s!==undefined&&(s.splice(e.inArray(t,s),1),e(s).size()===0&&delete this.subjectIndex[t.subject]),o=this.propertyIndex[t.property],o!==undefined&&(o.splice(e.inArray(t,o),1),e(o).size()===0&&delete this.propertyIndex[t.property]);if(t.object.type==="uri"||t.object.type==="bnode")u=this.objectIndex[t.object],u!==undefined&&(u.splice(e.inArray(t,u),1),e(u).size()===0&&delete this.objectIndex[t.object]);return j(this,t),this},except:function(t){var n=t.subjectIndex,r=[];return e.each(this.subjectIndex,function(t,i){var s=n[t];s===undefined?r=r.concat(i):e.each(i,function(t,n){e.inArray(n,s)===-1&&r.push(n)})}),e.rdf.databank(r)},triples:function(){var t,n=[];return this.union===undefined?n=this.tripleStore:(e.each(this.union,function(e,t){n=n.concat(t.triples().get())}),n=R(n)),e(n)},size:function(){return this.triples().length},describe:function(t){var n,r,i,s={},o=[];while(t.length>0){r=t.pop();if(s[r]===undefined){r.value===undefined&&(r=e.rdf.resource(r));if(this.subjectIndex[r]!==undefined)for(n=0;n<this.subjectIndex[r].length;n+=1)i=this.subjectIndex[r][n],o.push(i),i.object.type==="bnode"&&t.push(i.object);if(this.objectIndex[r]!==undefined)for(n=0;n<this.objectIndex[r].length;n+=1)i=this.objectIndex[r][n],o.push(i),i.subject.type==="bnode"&&t.push(i.subject);s[r]=!0}}return R(o)},dump:function(t){return t=e.extend({namespaces:this.namespaces,base:this.base},t||{}),e.rdf.dump(this.triples(),t)},load:function(t,n){var r,i,s,o,u,a,f=n&&n.format,l=n&&n.async||e.rdf.databank.defaults.async,c=n&&n.success||e.rdf.databank.defaults.success,h=n&&n.error||e.rdf.databank.defaults.error,p=n&&n.proxy||e.rdf.databank.defaults.proxy,d=n&&n.depth||e.rdf.databank.defaults.depth;s=typeof t=="string"&&t.substring(1,7)==="http://"?e.uri(t):t;if(s.scheme)return I(this,s,{success:c,error:h})||(o='<script type="text/javascript" src="'+p+"?id="+this.id+"&amp;depth="+d+"&amp;url="+encodeURIComponent(s.resolve("").toString())+'"></script>',l?setTimeout("$('head').append('"+o+"')",0):e("head").append(o)),this;f===undefined&&(typeof t=="string"?t.substring(0,1)==="{"?f="application/json":t.substring(0,14)==="<!DOCTYPE html"||t.substring(0,5)==="<html"?f="application/xhtml+xml":t.substring(0,5)==="<?xml"||t.substring(0,8)==="<rdf:RDF"?f="application/rdf+xml":f="text/turtle":t.documentElement||t.ownerDocument?(a=t.documentElement?t.documentElement:t.ownerDocument.documentElement,a.nodeName==="html"?f="application/xhtml+xml":f="application/rdf+xml"):f="application/json"),u=e.rdf.parsers[f],typeof t=="string"&&(t=u.parse(t)),i=u.triples.call(this,t);for(r=0;r<i.length;r+=1)this.add(i[r],n);return this},toString:function(){return"[Databank with "+this.size()+" triples]"}},e.rdf.databank.fn.init.prototype=e.rdf.databank.fn,e.rdf.databank.defaults={parse:!1,async:!0,success:null,error:null,depth:0,proxy:"http://www.jenitennison.com/rdfquery/proxy.php"},e.rdf.databank.load=function(e,t,n,r){n!==undefined&&g[e].load(n,r),q(g[e],t,n===undefined?"error":"success",r)},e.rdf.pattern=function(t,n,r,i){var o,u,a;if(r===undefined){i=n||{},u=e.trim(t).match(c);if(u.length!==3&&(u.length!==4||u[3]!=="."))throw"Bad Pattern: Couldn't parse string "+t;t=u[0],n=u[1],r=u[2],a=i.optional===undefined?e.rdf.pattern.defaults.optional:i.optional}return s[t]&&s[t][n]&&s[t][n][r]&&s[t][n][r][a]?s[t][n][r][a]:(o=new e.rdf.pattern.fn.init(t,n,r,i),s[o.subject]&&s[o.subject][o.property]&&s[o.subject][o.property][o.object]&&s[o.subject][o.property][o.object][o.optional]?s[o.subject][o.property][o.object][o.optional]:(s[o.subject]===undefined&&(s[o.subject]={}),s[o.subject][o.property]===undefined&&(s[o.subject][o.property]={}),s[o.subject][o.property][o.object]===undefined&&(s[o.subject][o.property][o.object]={}),s[o.subject][o.property][o.object][o.optional]=o,o))},e.rdf.pattern.fn=e.rdf.pattern.prototype={init:function(t,n,r,i){var s=e.extend({},e.rdf.pattern.defaults,i);return this.subject=t.toString().substring(0,1)==="?"?t:b(t,s),this.property=n.toString().substring(0,1)==="?"?n:w(n,s),this.object=r.toString().substring(0,1)==="?"?r:E(r,s),this.optional=s.optional,this},fill:function(t){var n=this.subject,r=this.property,i=this.object;return typeof n=="string"&&t[n.substring(1)]&&(n=t[n.substring(1)]),typeof r=="string"&&t[r.substring(1)]&&(r=t[r.substring(1)]),typeof i=="string"&&t[i.substring(1)]&&(i=t[i.substring(1)]),e.rdf.pattern(n,r,i,{optional:this.optional})},exec:function(e){var t={};return t=S(e.subject,this.subject,t),t===null?null:(t=S(e.property,this.property,t),t===null?null:(t=S(e.object,this.object,t),t))},isFixed:function(){return typeof this.subject!="string"&&typeof this.property!="string"&&typeof this.object!="string"},triple:function(t){var n=this;return this.isFixed()||(n=this.fill(t)),n.isFixed()?e.rdf.triple(n.subject,n.property,n.object,{source:this.toString()}):null},toString:function(){return this.subject+" "+this.property+" "+this.object}},e.rdf.pattern.fn.init.prototype=e.rdf.pattern.fn,e.rdf.pattern.defaults={base:e.uri.base(),namespaces:{},optional:!1},e.rdf.triple=function(t,n,r,s){var o,u,a;if(r===undefined){s=n,a=e.trim(t).match(c);if(a.length!==3&&(a.length!==4||a[3]!=="."))throw"Bad Triple: Couldn't parse string "+t;t=a[0],n=a[1],r=a[2]}return u=s&&s.graph||"",i[u]&&i[u][t]&&i[u][t][n]&&i[u][t][n][r]?i[u][t][n][r]:(o=new e.rdf.triple.fn.init(t,n,r,s),u=o.graph||"",i[u]&&i[u][o.subject]&&i[u][o.subject][o.property]&&i[u][o.subject][o.property][o.object]?i[u][o.subject][o.property][o.object]:(i[u]===undefined&&(i[u]={}),i[u][o.subject]===undefined&&(i[u][o.subject]={}),i[u][o.subject][o.property]===undefined&&(i[u][o.subject][o.property]={}),i[u][o.subject][o.property][o.object]=o,o))},e.rdf.triple.fn=e.rdf.triple.prototype={init:function(t,n,r,i){var s;return s=e.extend({},e.rdf.triple.defaults,i),this.subject=b(t,s),this.property=w(n,s),this.object=E(r,s),this.graph=s.graph===undefined?undefined:b(s.graph,s),this.source=s.source,this},isFixed:function(){return!0},triple:function(e){return this},dump:function(){var e={},t=this.subject.value.toString(),n=this.property.value.toString();return e[t]={},e[t][n]=this.object.dump(),e},toString:function(){return this.subject+" "+this.property+" "+this.object+" ."}},e.rdf.triple.fn.init.prototype=e.rdf.triple.fn,e.rdf.triple.defaults={base:e.uri.base(),source:[document],namespaces:{}},e.rdf.resource=function(n,r){var i;return t[n]?t[n]:(i=new e.rdf.resource.fn.init(n,r),t[i]?t[i]:(t[i]=i,i))},e.rdf.resource.fn=e.rdf.resource.prototype={type:"uri",value:undefined,init:function(t,n){var r,i,s,o;if(typeof t=="string"){r=f.exec(t),o=e.extend({},e.rdf.resource.defaults,n);if(r!==null)this.value=e.uri.resolve(r[1].replace(/\\>/g,">"),o.base);else if(t.substring(0,1)===":"){s=o.namespaces[""];if(s===undefined)throw"Malformed Resource: No namespace binding for default namespace in "+t;this.value=e.uri.resolve(s+t.substring(1))}else if(t.substring(t.length-1)===":"){i=t.substring(0,t.length-1),s=o.namespaces[i];if(s===undefined)throw"Malformed Resource: No namespace binding for prefix "+i+" in "+t;this.value=e.uri.resolve(s)}else try{this.value=e.curie(t,{namespaces:o.namespaces})}catch(u){throw"Malformed Resource: Bad format for resource "+u}}else this.value=t;return this},dump:function(){return{type:"uri",value:this.value.toString()}},toString:function(){return"<"+this.value+">"}},e.rdf.resource.fn.init.prototype=e.rdf.resource.fn,e.rdf.resource.defaults={base:e.uri.base(),namespaces:{}},e.rdf.type=e.rdf.resource("<"+u+"type>"),e.rdf.label=e.rdf.resource("<"+a+"label>"),e.rdf.first=e.rdf.resource("<"+u+"first>"),e.rdf.rest=e.rdf.resource("<"+u+"rest>"),e.rdf.nil=e.rdf.resource("<"+u+"nil>"),e.rdf.subject=e.rdf.resource("<"+u+"subject>"),e.rdf.property=e.rdf.resource("<"+u+"property>"),e.rdf.object=e.rdf.resource("<"+u+"object>"),e.rdf.blank=function(t){var r;return n[t]?n[t]:(r=new e.rdf.blank.fn.init(t),n[r]?n[r]:(n[r]=r,r))},e.rdf.blank.fn=e.rdf.blank.prototype={type:"bnode",value:undefined,id:undefined,init:function(e){if(e==="[]")this.id=d(),this.value="_:"+this.id;else{if(e.substring(0,2)!=="_:")throw"Malformed Blank Node: "+e+" is not a legal format for a blank node";this.id=e.substring(2),this.value=e}return this},dump:function(){return{type:"bnode",value:this.value}},toString:function(){return this.value}},e.rdf.blank.fn.init.prototype=e.rdf.blank.fn,e.rdf.literal=function(t,n){var i;return r[t]?r[t]:(i=new e.rdf.literal.fn.init(t,n),r[i]?r[i]:(r[i]=i,i))},e.rdf.literal.fn=e.rdf.literal.prototype={type:"literal",value:undefined,lang:undefined,datatype:undefined,init:function(t,n){var r,i,s=e.extend({},e.rdf.literal.defaults,n);i=e.safeCurie(s.datatype,{namespaces:s.namespaces});if(s.lang!==undefined&&s.datatype!==undefined&&i.toString()!==u+"XMLLiteral")throw"Malformed Literal: Cannot define both a language and a datatype for a literal ("+t+")";if(s.datatype!==undefined)i=e.safeCurie(s.datatype,{namespaces:s.namespaces}),e.extend(this,e.typedValue(t.toString(),i)),i.toString()===u+"XMLLiteral"&&(this.lang=s.lang);else if(s.lang!==undefined)this.value=t.toString(),this.lang=s.lang;else if(typeof t=="boolean")e.extend(this,e.typedValue(t.toString(),o+"boolean"));else if(typeof t=="number")e.extend(this,e.typedValue(t.toString(),o+"double"));else if(t==="true"||t==="false")e.extend(this,e.typedValue(t,o+"boolean"));else if(e.typedValue.valid(t,o+"integer"))e.extend(this,e.typedValue(t,o+"integer"));else if(e.typedValue.valid(t,o+"decimal"))e.extend(this,e.typedValue(t,o+"decimal"));else if(e.typedValue.valid(t,o+"double")&&!/^\s*([\-\+]?INF|NaN)\s*$/.test(t))e.extend(this,e.typedValue(t,o+"double"));else{r=l.exec(t);if(r===null)throw"Malformed Literal: Couldn't recognise the value "+t;this.value=(r[2]||r[4]).replace(/\\"/g,'"').replace(/\\n/g,"\n").replace(/\\t/g,"	").replace(/\\r/g,"\r"),r[9]?(i=e.rdf.resource(r[9],s),e.extend(this,e.typedValue(this.value,i.value))):r[7]&&(this.lang=r[7])}return this},dump:function(){var e={type:"literal",value:this.value.toString()};return this.lang!==undefined?e.lang=this.lang:this.datatype!==undefined&&(e.datatype=this.datatype.toString()),e},toString:function(){var e='"'+this.value+'"';return this.lang!==undefined?e+="@"+this.lang:this.datatype!==undefined&&(e+="^^<"+this.datatype+">"),e}},e.rdf.literal.fn.init.prototype=e.rdf.literal.fn,e.rdf.literal.defaults={base:e.uri.base(),namespaces:{},datatype:undefined,lang:undefined}}(jQuery),function(e){e.rdf.parsers["application/json"]={parse:e.secureEvalJSON,serialize:e.toJSON,triples:function(t){var n,r,i,s,o,u,f,l,c=[];for(n in t){r=n.substring(0,2)==="_:"?e.rdf.blank(n):e.rdf.resource("<"+n+">",{base:this.baseURI});for(i in t[n]){s=e.rdf.resource("<"+i+">",{base:this.baseURI});for(f=0;f<t[n][i].length;f+=1){o=t[n][i][f];if(o.type==="uri")u=e.rdf.resource("<"+o.value+">",{base:this.baseURI});else if(o.type==="bnode")u=e.rdf.blank(o.value);else if(o.datatype!==undefined)u=e.rdf.literal(o.value,{datatype:o.datatype,base:this.baseURI});else{l={},o.lang!==undefined&&(l.lang=o.lang);var h=typeof o.value=="string"?o.value.replace(/\"/g,'\\"'):o.value;l.base=this.baseURI,u=e.rdf.literal('"'+h+'"',l)}c.push(e.rdf.triple(r,s,u))}}}return c},dump:function(e){var t={},n,r,i,s;for(n=0;n<e.length;n+=1)r=e[n],i=r.subject.value.toString(),s=r.property.value.toString(),t[i]===undefined&&(t[i]={}),t[i][s]===undefined&&(t[i][s]=[]),t[i][s].push(r.object.dump());return t}}}(jQuery),function(e){var t="http://www.w3.org/1999/02/22-rdf-syntax-ns#",n=function(e,t,n,r){var i=e.ownerDocument,s;return t!==undefined&&t!==null?i.createAttributeNS?(s=i.createAttributeNS(t,n),s.nodeValue=r,e.attributes.setNamedItemNS(s)):(s=i.createNode(2,n,t),s.nodeValue=r,e.attributes.setNamedItem(s)):(s=i.createAttribute(n),s.nodeValue=r,e.attributes.setNamedItem(s)),e},r=function(e,t,r){return t!=="http://www.w3.org/XML/1998/namespace"&&t!=="http://www.w3.org/2000/xmlns/"&&(r?n(e,"http://www.w3.org/2000/xmlns/","xmlns:"+r,t):n(e,undefined,"xmlns",t)),e},i=function(e,t){var n,i="",s,o=!1;return e!==undefined&&e!==null&&(/:/.test(t)&&(s=/([^:]+):/.exec(t)[1]),o=!0),document.implementation&&document.implementation.createDocument?(n=document.implementation.createDocument(e,t,null),o&&r(n.documentElement,e,s),n):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",s===undefined?i=' xmlns="'+e+'"':i=" xmlns:"+s+'="'+e+'"',n.loadXML("<"+t+i+"/>"),n)},s=function(e,t,n,r){var i=e.ownerDocument,s;return t!==undefined&&t!==null?s=i.createElementNS?i.createElementNS(t,n):i.createNode(1,n,t):s=i.createElement(n),r!==-1&&(o(e,"\n"),r===0?o(e,"\n"):o(e,"  ")),e.appendChild(s),s},o=function(e,t){var n=e.ownerDocument,r;return r=n.createTextNode(t),e.appendChild(r),e},u=function(e,t){var n,r,i,s;try{r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML("<temp>"+t+"</temp>")}catch(o){n=new DOMParser,r=n.parseFromString("<temp>"+t+"</temp>","text/xml")}for(i=0;i<r.documentElement.childNodes.length;i+=1)e.appendChild(r.documentElement.childNodes[i].cloneNode(!0));return e},a=function(a,f){var l=i(t,"rdf:RDF"),c=e.rdf.parsers["application/json"].dump(a),h=f.namespaces||{},p=f.indent||!1,d,v,m,g,y,w,E,S,x,T,N;for(d in h)r(l.documentElement,h[d],d);for(v in c){if(c[v][e.rdf.type.value]!==undefined){S=/(.+[#\/])([^#\/]+)/.exec(c[v][e.rdf.type.value][0].value),T=S[1],x=S[2];for(d in h)if(h[d].toString()===T){N=d;break}m=s(l.documentElement,T,N+":"+x,p?0:-1)}else m=s(l.documentElement,t,"rdf:Description",p?0:-1);/^_:/.test(v)?n(m,t,"rdf:nodeID",v.substring(2)):n(m,t,"rdf:about",v);for(g in c[v])if(g!==e.rdf.type.value.toString()||c[v][g].length>1){S=/(.+[#\/])([^#\/]+)/.exec(g),T=S[1],x=S[2];for(d in h)if(h[d].toString()===T){N=d;break}for(w=g===e.rdf.type.value.toString()?1:0;w<c[v][g].length;w+=1)E=c[v][g][w],y=s(m,T,N+":"+x,p?1:-1),E.type==="uri"?n(y,t,"rdf:resource",E.value):E.type==="literal"?E.datatype!==undefined?E.datatype==="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"?(n(y,t,"rdf:parseType","Literal"),p&&o(y,"\n    "),u(y,E.value),p&&o(y,"\n  ")):(n(y,t,"rdf:datatype",E.datatype),o(y,E.value)):E.lang!==undefined?(n(y,"http://www.w3.org/XML/1998/namespace","xml:lang",E.lang),o(y,E.value)):o(y,E.value):n(y,t,"rdf:nodeID",E.value.substring(2));p&&o(m,"\n")}}return p&&o(l.documentElement,"\n\n"),l},f=function(e){switch(e){case"http://www.w3.org/1999/02/22-rdf-syntax-ns":return"rdf";case"http://www.w3.org/XML/1998/namespace":return"xml";case"http://www.w3.org/2000/xmlns/":return"xmlns";default:throw"No default prefix mapped for namespace "+e}},l=function(e,t,n){var r;if(e.hasAttributeNS)return e.hasAttributeNS(t,n);try{return r=/:/.test(n)?/:(.+)$/.exec(n)[1]:n,e.attributes.getQualifiedItem(r,t)!==null}catch(i){return e.getAttribute(f(t)+":"+n)!==null}},c=function(e,t,n){var r;if(e.getAttributeNS)return e.getAttributeNS(t,n);try{return r=/:/.test(n)?/:(.+)$/.exec(n)[1]:n,e.attributes.getQualifiedItem(r,t).nodeValue}catch(i){return e.getAttribute(f(t)+":"+n)}},h=function(e){return e.localName||e.baseName},p=function(n,r){var i,s;return l(n,t,"about")?(i=c(n,t,"about"),s=e.rdf.resource("<"+i+">",{base:r})):l(n,t,"ID")?(i=c(n,t,"ID"),s=e.rdf.resource("<#"+i+">",{base:r})):l(n,t,"nodeID")?(i=c(n,t,"nodeID"),s=e.rdf.blank("_:"+i)):s=e.rdf.blank("[]"),s},d=function(n,r,i,s){var o,u,a,f,v,g,s,y,w,E=1,S,x,T,N=[],C,L,A={},O,M=[];s=c(n,"http://www.w3.org/XML/1998/namespace","lang")||s,i=c(n,"http://www.w3.org/XML/1998/namespace","base")||i,s!==null&&s!==undefined&&s!==""&&(A={lang:s}),o=p(n,i),r&&(n.namespaceURI!==t||h(n)!=="Description")&&(a=e.rdf.type,v=e.rdf.resource("<"+n.namespaceURI+h(n)+">"),M.push(e.rdf.triple(o,a,v)));for(y=0;y<n.attributes.length;y+=1)u=n.attributes.item(y),u.namespaceURI!==undefined&&u.namespaceURI!=="http://www.w3.org/2000/xmlns/"&&u.namespaceURI!=="http://www.w3.org/XML/1998/namespace"&&u.prefix!=="xmlns"&&u.prefix!=="xml"&&(u.namespaceURI!==t?(a=e.rdf.resource("<"+u.namespaceURI+h(u)+">"),v=e.rdf.literal(A.lang?u.nodeValue:'"'+u.nodeValue.replace(/"/g,'\\"')+'"',A),M.push(e.rdf.triple(o,a,v))):h(u)==="type"&&(a=e.rdf.type,v=e.rdf.resource("<"+u.nodeValue+">",{base:i}),M.push(e.rdf.triple(o,a,v))));var _=s;for(y=0;y<n.childNodes.length;y+=1){u=n.childNodes[y];if(u.nodeType===1){u.namespaceURI===t&&h(u)==="li"?(a=e.rdf.resource("<"+t+"_"+E+">"),E+=1):a=e.rdf.resource("<"+u.namespaceURI+h(u)+">"),s=c(u,"http://www.w3.org/XML/1998/namespace","lang")||_,s!==null&&s!==undefined&&s!==""?A={lang:s}:A={};if(l(u,t,"resource"))f=c(u,t,"resource"),v=e.rdf.resource("<"+f+">",{base:i});else if(l(u,t,"nodeID"))f=c(u,t,"nodeID"),v=e.rdf.blank("_:"+f);else if(l(u,t,"parseType")){C=c(u,t,"parseType");if(C==="Literal"){try{L=new XMLSerializer,f=L.serializeToString(u.getElementsByTagName("*")[0])}catch(D){f="";for(w=0;w<u.childNodes.length;w+=1)f+=u.childNodes[w].xml}v=e.rdf.literal(f,{datatype:t+"XMLLiteral"})}else if(C==="Resource")O=d(u,!1,i,s),O.length>0?(v=O[O.length-1].subject,M=M.concat(O)):v=e.rdf.blank("[]");else if(C==="Collection")if(u.getElementsByTagName("*").length>0){for(w=0;w<u.childNodes.length;w+=1)f=u.childNodes[w],f.nodeType===1&&N.push(f);S=e.rdf.blank("[]"),v=S;for(w=0;w<N.length;w+=1)f=N[w],O=d(f,!0,i,s),O.length>0?(T=O[O.length-1].subject,M=M.concat(O)):T=p(f),M.push(e.rdf.triple(S,e.rdf.first,T)),w===N.length-1?M.push(e.rdf.triple(S,e.rdf.rest,e.rdf.nil)):(x=e.rdf.blank("[]"),M.push(e.rdf.triple(S,e.rdf.rest,x)),S=x)}else v=e.rdf.nil}else if(l(u,t,"datatype"))f=u.childNodes[0].nodeValue?u.childNodes[0].nodeValue:"",v=e.rdf.literal(f,{datatype:c(u,t,"datatype")});else if(u.getElementsByTagName("*").length>0)for(w=0;w<u.childNodes.length;w+=1)f=u.childNodes[w],f.nodeType===1&&(O=d(f,!0,i,s),O.length>0?(v=O[O.length-1].subject,M=M.concat(O)):v=p(f));else u.childNodes.length>0?(f=u.childNodes[0].nodeValue,v=e.rdf.literal(A.lang?f:'"'+f.replace(/"/g,'\\"')+'"',A)):(O=d(u,!1,i,s),O.length>0?(v=O[O.length-1].subject,M=M.concat(O)):v=e.rdf.blank("[]"));M.push(e.rdf.triple(o,a,v)),l(u,t,"ID")&&(g=e.rdf.resource("<#"+c(u,t,"ID")+">",{base:i}),M.push(e.rdf.triple(g,e.rdf.subject,o)),M.push(e.rdf.triple(g,e.rdf.property,a)),M.push(e.rdf.triple(g,e.rdf.object,v)))}}return M},v=function(n){var r,i,s,o=[];return n.documentElement.namespaceURI===t&&h(n.documentElement)==="RDF"?(i=c(n.documentElement,"http://www.w3.org/XML/1998/namespace","lang"),base=c(n.documentElement,"http://www.w3.org/XML/1998/namespace","base")||e.uri.base(),o=e.map(n.documentElement.childNodes,function(e){return e.nodeType===1?d(e,!0,base,i):null})):o=d(n.documentElement,!0),o};e.rdf.parsers["application/rdf+xml"]={parse:function(e){var t;try{t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)}catch(n){var r=new DOMParser;t=r.parseFromString(e,"text/xml")}return t},serialize:function(e){return e.xml?e.xml.replace(/\s+$/,""):(serializer=new XMLSerializer,serializer.serializeToString(e))},triples:v,dump:a}}(jQuery),function(e){var t={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",xsd:"http://www.w3.org/2001/XMLSchema#",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},n=t.rdf+"XMLLiteral",r=e.fn.curie.defaults,s=["alternate","appendix","bookmark","cite","chapter","contents","copyright","first","glossary","help","icon","index","last","license","meta","next","p3pv1","prev","role","section","stylesheet","subsection","start","top","up"],o=/\s([^ =]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|([^ >]+))/g,u="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]",a="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]",f=new RegExp("^"+a+u+"*$"),l=e.rdf.resource("<>"),c=function(e){var t="",n,r;if(!/&/.test(e))return e;while(e.length>0){n=/([^&]*)(&([^;]+);)(.*)/g.exec(e);if(n===null){t+=e;break}t+=n[1],r=n[3],e=n[4];if(r.charAt(0)==="#")r.charAt(1)==="x"?t+=String.fromCharCode(parseInt(r.substring(2),16)):t+=String.fromCharCode(parseInt(r.substring(1),10));else switch(r){case"amp":t+="&";break;case"nbsp":t+=String.fromCharCode(160);break;case"quot":t+='"';break;case"apos":t+="'";break;default:t+="&"+r+";"}}return t},h=function(n){var r,i,s,u,a,l,h,p,d={},v={};i=n[0],v[":length"]=0;if(i.attributes&&i.attributes.getNamedItemNS){h=i.attributes;for(r=0;r<h.length;r+=1)s=h[r],/^xmlns(:(.+))?$/.test(s.nodeName)&&s.nodeValue!==""?(p=/^xmlns(:(.+))?$/.exec(s.nodeName)[2]||"",f.test(p)&&(p!=="xml"||s.nodeValue===t.xml)&&(s.nodeValue!==t.xml||p==="xml")&&p!=="xmlns"&&s.nodeValue!==t.xmlns&&(v[p]=e.uri(s.nodeValue),v[":length"]+=1)):/rel|rev|lang|xml:lang|about|href|src|resource|property|typeof|content|datatype/.test(s.nodeName)&&(d[s.nodeName]=s.nodeValue===null?undefined:s.nodeValue)}else{u=/<[^>]+>/.exec(i.outerHTML),s=o.exec(u);while(s!==null)a=s[1],l=s[2]||s[3]||s[4],/^xmlns/.test(a)&&a!=="xmlns:"&&l!==""?(p=/^xmlns(:(.+))?$/.exec(a)[2]||"",f.test(p)&&(p!=="xml"||s.nodeValue===t.xml)&&(s.nodeValue!==t.xml||p==="xml")&&p!=="xmlns"&&s.nodeValue!==t.xmlns&&(v[p]=e.uri(l),v[":length"]+=1)):/about|href|src|resource|property|typeof|content|datatype|rel|rev|lang|xml:lang/.test(a)&&(d[a]=c(l)),s=o.exec(u);o.lastIndex=0}return{atts:d,namespaces:v}},p=function(e,t){var n=e[0].getAttribute(t);return n===null?undefined:n},d=function(t){return e.rdf.resource(t)},v=function(t,n,r,i){if(t.substring(0,2)==="_:")return r?undefined:e.rdf.blank(t);try{return d(e.curie(t,i))}catch(s){return undefined}},m=function(t,n,r){var i=/^\[(.*)\]$/.exec(t),s=r.base||n.base();return i?v(i[1],n,!1,r):d(e.uri(t,s))},g=function(e,t,n,r){var i,s,o=[];e=e&&e.split?e.split(/[ \t\n\r\x0C]+/g):[];for(i=0;i<e.length;i+=1)e[i]!==""&&(s=v(e[i],t,n,r),s!==undefined&&o.push(s));return o},y=function(t,n,r){var i,s,o=[];n=n.type==="uri"?n:e.rdf.resource(n,r),t=t&&t.split?t.split(/\s+/):[];for(i=0;i<t.length;i+=1)t[i]!==""&&(s=v(t[i],null,!1,r),s!==n&&o.push(t[i]));return o.reverse().join(" ")},b=function(t,n,i){var s,o,u,a;return n=n||{},u=n.atts||h(t).atts,s=i===undefined?u.rel!==undefined||u.rev!==undefined:i,o=u.resource,o=o===undefined?u.href:o,o===undefined?o=s?e.rdf.blank("[]"):o:(a=n.curieOptions||e.extend({},r,{namespaces:t.xmlns()}),o=m(o,t,a)),o},w=function(t,n,i){var s,o,u,a,f=!1;return n=n||{},o=n.atts||h(t).atts,u=n.curieOptions||e.extend({},r,{namespaces:t.xmlns(),base:t.base()}),s=i===undefined?o.rel!==undefined||o.rev!==undefined:i,o.about!==undefined&&(a=m(o.about,t,u)),a===undefined&&o.src!==undefined&&(a=m(o.src,t,u)),!s&&a===undefined&&o.resource!==undefined&&(a=m(o.resource,t,u)),!s&&a===undefined&&o.href!==undefined&&(a=m(o.href,t,u)),a===undefined&&(/^(head|body)$/i.test(t[0].nodeName)?a=l:o["typeof"]!==undefined?a=e.rdf.blank("[]"):t[0].parentNode.nodeType===1?(a=n.object||b(t.parent())||w(t.parent()).subject,f=!s&&o.property===undefined):a=l),{subject:a,skip:f}},E=function(e,t){var n;t=t||{};if(t.atts)n=t.atts.lang,n=n||t.atts["xml:lang"];else{n=e[0].getAttribute("lang");try{n=n===null||n===""?e[0].getAttribute("xml:lang"):n}catch(r){}n=n===null||n===""?undefined:n}return n===undefined&&(t.lang?n=t.lang:e[0].parentNode.nodeType===1&&(n=E(e.parent()))),n},S=function(e){switch(e){case"<":return"&lt;";case'"':return"&quot;";case"&":return"&amp;"}},x=function(t,n){var r,i="",s,u,a,f,l;return t.contents().each(function(){var t=e(this),c=t[0];if(c.nodeType===1){a=c.nodeName.toLowerCase(),i+="<"+a;if(c.outerHTML){l=/<[^>]+>/.exec(c.outerHTML),u=o.exec(l);while(u!==null)/^jQuery/.test(u[1])||(i+=" "+u[1]+"=",i+=u[2]?u[3]:'"'+u[1]+'"'),u=o.exec(l);o.lastIndex=0}else{s=c.attributes;for(r=0;r<s.length;r+=1)u=s.item(r),i+=" "+u.nodeName+'="',i+=u.nodeValue.replace(/[<"&]/g,S),i+='"'}n||(f=t.xmlns(""),f!==undefined&&t.attr("xmlns")===undefined&&(i+=' xmlns="'+f+'"')),i+=">",i+=x(t,!0),i+="</"+a+">"}else c.nodeType===8?(i+="<!--",i+=c.nodeValue,i+="-->"):i+=c.nodeValue}),i},T=function(t){var i,o,u,a,f,l,c,p,d,v,m,y,S,N,C,k,L=[],A,O,M,_,D,P,F=this.children();t=t||{},C=t.forward||[],k=t.backward||[],A=t.callback||function(){return this},M=h(this),_=M.atts,t.atts=_,D=t.namespaces||this.xmlns();if(M.namespaces[":length"]>0){D=e.extend({},D);for(P in M.namespaces)P!==":length"&&(D[P]=M.namespaces[P])}t.curieOptions=e.extend({},r,{reserved:[],namespaces:D,base:this.base()}),O=e.extend({},t.curieOptions,{reserved:s}),o=w(this,t),a=E(this,t);if(o.skip)S=t.forward,N=t.backward,o=t.subject,u=t.object;else{o=o.subject;if(C.length>0||k.length>0){m=t.subject||w(this.parent()).subject;for(i=0;i<C.length;i+=1)v=e.rdf.triple(m,C[i],o,{source:this[0]}),v=A.call(v,this.get(0),v),v!==undefined&&v!==null&&(L=L.concat(v));for(i=0;i<k.length;i+=1)v=e.rdf.triple(o,k[i],m,{source:this[0]}),v=A.call(v,this.get(0),v),v!==undefined&&v!==null&&(L=L.concat(v))}u=b(this,t),p=g(_["typeof"],this,!1,t.curieOptions);for(i=0;i<p.length;i+=1)v=e.rdf.triple(o,e.rdf.type,p[i],{source:this[0]}),v=A.call(v,this.get(0),v),v!==undefined&&v!==null&&(L=L.concat(v));y=g(_.property,this,!0,t.curieOptions);if(y.length>0){f=_.datatype,l=_.content,c=this.text().replace(/"/g,'\\"'),f!==undefined&&f!==""?(f=e.curie(f,t.curieOptions),f.toString()===n?d=e.rdf.literal(x(this),{datatype:n}):l!==undefined?d=e.rdf.literal(l,{datatype:f}):d=e.rdf.literal(c,{datatype:f})):l!==undefined?a===undefined?d=e.rdf.literal('"'+l+'"'):d=e.rdf.literal(l,{lang:a}):F.length===0||f===""?(a=E(this,t),a===undefined?d=e.rdf.literal('"'+c+'"'):d=e.rdf.literal(c,{lang:a})):d=e.rdf.literal(x(this),{datatype:n});for(i=0;i<y.length;i+=1)v=e.rdf.triple(o,y[i],d,{source:this[0]}),v=A.call(v,this.get(0),v),v!==undefined&&v!==null&&(L=L.concat(v))}S=g(_.rel,this,!0,O),N=g(_.rev,this,!0,O);if(_.resource!==undefined||_.href!==undefined){if(S!==undefined)for(i=0;i<S.length;i+=1)v=e.rdf.triple(o,S[i],u,{source:this[0]}),v=A.call(v,this.get(0),v),v!==undefined&&v!==null&&(L=L.concat(v));S=[];if(N!==undefined)for(i=0;i<N.length;i+=1)v=e.rdf.triple(u,N[i],o,{source:this[0]}),v=A.call(v,this.get(0),v),v!==undefined&&v!==null&&(L=L.concat(v));N=[]}}return F.each(function(){L=L.concat(T.call(e(this),{forward:S,backward:N,subject:o,object:u||o,lang:a,namespaces:D,callback:A}))}),L},N=function(e){var t,n;return e&&e.about!==undefined?(n=h(this).atts,e.about===null?n.property!==undefined||n.rel!==undefined||n.rev!==undefined||n["typeof"]!==undefined:w(this,{atts:n}).subject.value===e.about):e&&e.type!==undefined?(t=p(this,"typeof"),t!==undefined?e.type===null?!0:this.curie(t)===e.type:!1):T.call(this,e)},C=1,k=function(r,i,s){var o,u,a;try{u=r.createCurie(s)}catch(f){s.toString()===n?(r.attr("xmlns:rdf",t.rdf),u="rdf:XMLLiteral"):(o=/^(.+[\/#])([^#]+)$/.exec(s),r.attr("xmlns:ns"+C,o[1]),u="ns"+C+":"+o[2],C+=1)}a=p(r,i),a!==undefined?e.inArray(u,a.split(/\s+/))===-1&&r.attr(i,a+" "+u):r.attr(i,u)},L=function(t,n,r){var i;r.type==="bnode"?i="[_:"+r.id+"]":i=e(t).base().relative(r.value),t.attr(n,i)},A=function(e,t){var n=w(e).subject;t!==n&&L(e,"about",t),e.removeData("rdfa.subject")},O=function(e,t){var n=b(e);t!==n&&L(e,"resource",t),e.removeData("rdfa.objectResource")},M=function(e,t){return e.wrapInner("<span></span>").children("span").attr("lang",t),e},_=function(t){var r,i,s,o,u,a,f,l,c,p,d,v,m,g=this.xmlns();u=this,m=h(this).atts;if(typeof t=="string")t=e.rdf.triple(t,{namespaces:g,base:this.base()});else{if(t.rdfquery)return _.call(this,t.sources().get(0)),this;if(t.length){for(v=0;v<t.length;v+=1)_.call(this,t[v]);return this}}i=m.rel!==undefined||m.rev!==undefined,s=i||m.property!==undefined||m["typeof"]!==undefined;if(t.object.type!=="literal")a=w(this,{atts:m},!0).subject,l=b(this,{atts:m},!0),o=!s&&m.resource===undefined,f=a===t.subject,c=l===t.object,t.property===e.rdf.type?f?k(this,"typeof",t.object.value):s?(u=this.wrapInner("<span />").children("span"),k(u,"typeof",t.object.value),l!==t.subject&&A(u,t.subject)):(k(this,"typeof",t.object.value),A(this,t.subject)):f?c?k(this,"rel",t.property.value):o||!s?(k(this,"rel",t.property.value),O(this,t.object)):(u=this.wrap("<span />").parent(),k(u,"rev",t.property.value),A(u,t.object)):a===t.object?l===t.subject?k(this,"rev",t.property.value):o||!s?(k(this,"rev",t.property.value),O(this,t.subject)):(u=this.wrap("<span />").parent(),k(u,"rel",t.property.value),A(u,t.subject)):c?s?(u=this.wrapInner("<span />").children("span"),k(u,"rev",t.property.value),O(u,t.subject),u=u.wrapInner("<span />").children("span"),A(u,t.object),u=this):(A(this,t.subject),k(this,"rel",t.property.value)):l===t.subject?s?(u=this.wrapInner("<span />").children("span"),k(u,"rel",this.property.value),O(u,t.object),u=u.wrapInner("<span />").children("span"),A(u,l),u=this):(A(this,t.object),k(this,"rev",t.property.value)):s?(u=this.wrapInner("<span />").children("span"),k(u,"rel",t.property.value),A(u,t.subject),O(u,t.object),u.children("*").length>0&&(u=this.wrapInner("<span />").children("span"),A(u,a)),u=this):(k(u,"rel",t.property.value),A(this,t.subject),O(this,t.object),this.children("*").length>0&&(u=this.wrapInner("<span />").children("span"),A(u,a),u=this));else{a=w(this,{atts:m}).subject,l=b(this,{atts:m}),f=a===t.subject,r=this.text()!==t.object.value;if(m.property!==undefined){d=m.content,c=d!==undefined?d===t.object.value:!r;if(!f||!c)return u=this.wrapInner("<span />").children("span"),_.call(u,t);k(this,"property",t.property.value)}else{if(l===t.subject)return u=this.wrapInner("<span />").children("span"),_.call(u,t);k(this,"property",t.property.value),A(this,t.subject),r&&(t.object.datatype&&t.object.datatype.toString()===n?this.html(t.object.value):this.attr("content",t.object.value)),p=E(this),t.object.lang?p!==t.object.lang&&(this.attr("lang",t.object.lang),r&&M(this,p)):t.object.datatype?k(this,"datatype",t.object.datatype):(r||this.attr("datatype",""),p!==undefined&&(this.attr("lang",""),r&&M(this,p)))}}return this.parents().andSelf().trigger("rdfChange"),u},D=function(e){var t,n,r,s,o,u,a=this.xmlns();n=h(this).atts;if(e.length){for(i=0;i<e.length;i+=1)D.call(this,e[i]);return this}hasRelation=n.rel!==undefined||n.rev!==undefined,hasRDFa=hasRelation||n.property!==undefined||n["typeof"]!==undefined;if(hasRDFa){e.property!==undefined&&(n.property!==undefined&&(r=y(n.property,e.property,{namespaces:a}),r===""?this.removeAttr("property"):this.attr("property",r)),n.rel!==undefined&&(s=y(n.rel,e.property,{namespaces:a}),s===""?this.removeAttr("rel"):this.attr("rel",s)),n.rev!==undefined&&(o=y(n.rev,e.property,{namespaces:a}),o===""?this.removeAttr("rev"):this.attr("rev",o))),e.type!==undefined&&n["typeof"]!==undefined&&(u=y(n["typeof"],e.type,{namespaces:a}),u===""?this.removeAttr("typeof"):this.attr("typeof",u));if(n.property===this.attr("property")&&n.rel===this.attr("rel")&&n.rev===this.attr("rev")&&n["typeof"]===this.attr("typeof"))return D.call(this.parent(),e)}return this.parents().andSelf().trigger("rdfChange"),this};e.fn.rdfa=function(t){if(t===undefined){var n=e.map(e(this),function(t){return T.call(e(t))});return e.rdf({triples:n})}return e(this).each(function(){_.call(e(this),t)}),this},e.fn.removeRdfa=function(t){return e(this).each(function(){D.call(e(this),t)}),this},e.rdf.gleaners.push(N)}(jQuery),function(e){var t=1;e.rdf.ruleset=function(t,n){return new e.rdf.ruleset.fn.init(t,n)},e.rdf.ruleset.fn=e.rdf.ruleset.prototype={init:function(t,n){var r,i=e.extend({},e.rdf.ruleset.defaults,n);t=t||[],this.baseURI=i.base,this.namespaces=e.extend({},i.namespaces),this.rules=[];for(r=0;r<t.length;r+=1)this.add.apply(this,t[r]);return this},base:function(e){return e===undefined?this.baseURI:(this.baseURI=e,this)},prefix:function(e,t){return e===undefined?this.namespaces:t===undefined?this.namespaces[e]:(this.namespaces[e]=t,this)},size:function(){return this.rules.length},add:function(t,n){var r;return n===undefined&&t.rules?this.rules=this.rules.concat(t.rules):(n===undefined&&t.lhs?r=t:r=e.rdf.rule(t,n,{namespaces:this.prefix(),base:this.base()}),e.inArray(r,this.rules)===-1&&this.rules.push(r)),this},run:function(t,n){var r,i,s,o=e.extend({limit:50},n),u=o.limit;do{s=t.size();for(r=0;r<this.rules.length;r+=1)i=this.rules[r],i.run(t);u-=1}while(t.size()>s&&u>0);return this}},e.rdf.ruleset.fn.init.prototype=e.rdf.ruleset.fn,e.rdf.ruleset.defaults={base:e.uri.base(),namespaces:{}},e.rdf.rule=function(t,n,r){return new e.rdf.rule.fn.init(t,n,r)},e.rdf.rule.fn=e.rdf.rule.prototype={init:function(t,n,r){var i=e.extend({},e.rdf.rule.defaults,r),s=[],o=!1;return typeof t=="string"&&(t=[t]),typeof n=="string"&&(n=[n]),this.lhs=e.map(t,function(t){return e.isArray(t)?[t]:e.isFunction(t)?t:(t=e.rdf.pattern(t,i),typeof t.subject=="string"&&s.push(t.subject),typeof t.property=="string"&&s.push(t.property),typeof t.object=="string"&&s.push(t.object),t)}),s=e.unique(s),e.isFunction(n)?this.rhs=n:this.rhs=e.map(n,function(t){t=e.rdf.pattern(t,i);if(typeof t.subject=="string"&&e.inArray(t.subject,s)===-1||typeof t.property=="string"&&e.inArray(t.property,s)===-1||typeof t.object=="string"&&e.inArray(t.object,s)===-1)throw"Bad Rule: Right-hand side of the rule contains a reference to an unbound wildcard";if(t.subject.type==="bnode"||t.property.type==="bnode"||t.object.type==="bnode")o=!0;return t}),this.rhsBlanks=o,this.cache={},this},run:function(n,r){var i=e.rdf({databank:n}),s,o=e.extend({limit:50},r),u=o.limit,f,l,c,h,p,d,v,m,g=this.rhsBlanks,y,w,E,S;this.cache[n.id]===undefined&&(this.cache[n.id]={});for(l=0;l<this.lhs.length;l+=1)s=this.lhs[l],e.isArray(s)?i=i.filter.apply(i,s):e.isFunction(s)?i=i.filter.call(i,s):i=i.where(this.lhs[l]);do{f=i.length,w=i.sources();for(l=0;l<f;l+=1){E=w[l],S=!0,y=this.cache[n.id];for(c=0;c<E.length;c+=1)y[E[c]]===undefined?y[E[c]]={}:c===E.length-1&&(S=!1),y=y[E[c]];if(S){m=i.eq(l);if(g){for(c=0;c<this.rhs.length;c+=1)h=this.rhs[c],p=h.subject,d=h.property,v=h.object,p.type==="bnode"&&(p=e.rdf.blank(""+p+t)),d.type==="bnode"&&(d=e.rdf.blank(""+d+t)),v.type==="bnode"&&(v=e.rdf.blank(""+v+t)),h=e.rdf.pattern(p,d,v),m.add(h);t+=1}else if(e.isFunction(this.rhs)){var x=m.map(this.rhs);for(var T=0;T<x.length;T++)x[T]instanceof e.rdf.triple&&i.add(x[T])}else for(c=0;c<this.rhs.length;c+=1)m.add(this.rhs[c])}}u-=1}while(i.length>f&&u>0);return this}},e.rdf.rule.fn.init.prototype=e.rdf.rule.fn,e.rdf.rule.defaults={base:e.uri.base(),namespaces:{}},e.extend(e.rdf.databank.fn,{reason:function(e,t){return e.run(this,t),this}}),e.extend(e.rdf.fn,{reason:function(e,t){return e.run(this.databank,t),this}})}(jQuery),define("Library/vie/lib/rdfquery/latest/jquery.rdfquery.min",function(){}),function(){var e=this,t=e.jQuery,n=e.Backbone,r=e._,i=e.VIE=function(e){this.config=e?e:{},this.services={},this.jQuery=t,this.entities=new this.Collection([],{vie:this}),this.Entity.prototype.entities=this.entities,this.Entity.prototype.entityCollection=this.Collection,this.Entity.prototype.vie=this,this.Namespaces.prototype.vie=this,this.namespaces=new this.Namespaces(this.config.baseNamespace?this.config.baseNamespace:"http://viejs.org/ns/",{owl:"http://www.w3.org/2002/07/owl#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",schema:"http://schema.org/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",dbpedia:"http://dbpedia.org/ontology/",dbprop:"http://dbpedia.org/property/",skos:"http://www.w3.org/2004/02/skos/core#",xsd:"http://www.w3.org/2001/XMLSchema#",sioc:"http://rdfs.org/sioc/ns#",dcterms:"http://purl.org/dc/terms/"}),this.Type.prototype.vie=this,this.Types.prototype.vie=this,this.Attribute.prototype.vie=this,this.Attributes.prototype.vie=this,this.types=new this.Types,this.types.add("owl:Thing"),this.config.classic===!0&&(this.RDFa=new this.ClassicRDFa(this),this.RDFaEntities=new this.ClassicRDFaEntities(this),this.EntityManager=new this.ClassicEntityManager(this),this.cleanup=function(){this.entities.reset()})};i.prototype.use=function(e,t){if(!t&&!e.name)throw new Error("Please provide a name for the service!");return e.vie=this,e.name=t?t:e.name,e.init&&e.init(),this.services[e.name]=e,this},i.prototype.service=function(e){if(!this.hasService(e))throw"Undefined service "+e;return this.services[e]},i.prototype.hasService=function(e){return this.services[e]?!0:!1},i.prototype.getServicesArray=function(){return r.map(this.services,function(e){return e})},i.prototype.load=function(e){return e||(e={}),e.vie=this,new this.Loadable(e)},i.prototype.save=function(e){return e||(e={}),e.vie=this,new this.Savable(e)},i.prototype.remove=function(e){return e||(e={}),e.vie=this,new this.Removable(e)},i.prototype.analyze=function(e){return e||(e={}),e.vie=this,new this.Analyzable(e)},i.prototype.find=function(e){return e||(e={}),e.vie=this,new this.Findable(e)},i.prototype.loadSchema=function(e,n){n=n?n:{};if(!e)throw new Error("Please provide a proper URL");var r=this;return t.getJSON(e).success(function(e){try{i.Util.loadSchemaOrg(r,e,n.baseNS),n.success&&n.success.call(r)}catch(t){n.error.call(r,t);return}}).error(function(t,i,s){n.error&&n.error.call(r,"Could not load schema from URL ("+e+"): "+i)}),this},i.prototype.getTypedEntityClass=function(e){var t=this.types.get(e);if(!t)throw new Error("Unknown type "+e);return this.typeEntityClasses[e.id]||(this.typeEntityClasses[e.id]=this.Entity.extend({defaults:{"@type":e}})),this.typeEntityClasses[e.id]},i.prototype.typeEntityClasses={},typeof exports=="object"&&(exports.VIE=i,t||(t=require("jquery")),n||(n=require("backbone"),n.$=t),r||(r=require("underscore")._)),i.prototype.Able=function(){this.init=function(e,n){return this.options=e,this.services=e.from||e.using||e.to||[],this.vie=e.vie,this.methodName=n,this.deferred=t.Deferred(),this.resolve=this.deferred.resolve,this.resolveWith=this.deferred.resolveWith,this.reject=this.deferred.reject,this.rejectWith=this.deferred.rejectWith,this.success=this.done=this.deferred.done,this.fail=this.deferred.fail,this.then=this.deferred.then,this.always=this.deferred.always,this.from=this.using,this.to=this.using,this},this.using=function(e){var t=this;return e=r.isArray(e)?e:[e],r.each(e,function(e){var n=typeof e=="string"?t.vie.service(e):e;t.services.push(n)}),this},this.execute=function(){var e=this;return r(this.services).each(function(t){t[e.methodName](e)}),this}},i.prototype.Loadable=function(e){this.init(e,"load")},i.prototype.Loadable.prototype=new i.prototype.Able,i.prototype.Savable=function(e){this.init(e,"save")},i.prototype.Savable.prototype=new i.prototype.Able,i.prototype.Removable=function(e){this.init(e,"remove")},i.prototype.Removable.prototype=new i.prototype.Able,i.prototype.Analyzable=function(e){this.init(e,"analyze")},i.prototype.Analyzable.prototype=new i.prototype.Able,i.prototype.Findable=function(e){this.init(e,"find")},i.prototype.Findable.prototype=new i.prototype.Able,i.Util={isReference:function(e){var t=new RegExp("^\\<([^\\>]*)\\>$");return t.exec(e)?!0:!1},toReference:function(e,t){if(r.isArray(e))return r.map(e,function(e){return this.toReference(e)},this);if(!r.isString(e))return e;var n=e;return e.substring(0,2)==="_:"?n=e:t&&t.isCurie(e)?(n=t.uri(e),n==="<"+t.base()+e+">"&&(n="<"+e+">")):t&&!t.isUri(e)&&(n="<"+e+">"),n},fromReference:function(e,t){return t&&!t.isUri(e)?e:e.substring(1,e.length-1)},toCurie:function(e,t,n){if(i.Util.isCurie(e,n))return e;var r=":";for(var s in n.toObj())if(e.indexOf(n.get(s))===1){var o=new RegExp("^<?"+n.get(s));return s===""&&(r=""),(t?"[":"")+e.replace(o,s+r).replace(/>$/,"")+(t?"]":"")}throw new Error("No prefix found for URI '"+e+"'!")},isCurie:function(e,t){if(i.Util.isUri(e))return!1;try{return i.Util.toUri(e,t),!0}catch(n){return!1}},toUri:function(e,t){if(i.Util.isUri(e))return e;var n=":";for(var r in t.toObj())if(r!==""&&(e.indexOf(r+":")===0||e.indexOf("["+r+":")===0)){var s=new RegExp("^\\[{0,1}"+r+n);return"<"+e.replace(s,t.get(r)).replace(/\]{0,1}$/,"")+">"}if(e.indexOf(n)===-1)return"<"+t.base()+e+">";throw new Error("No prefix found for CURIE '"+e+"'!")},isUri:function(e){return typeof e=="string"&&e.search(/^<.+>$/)===0},mapAttributeNS:function(e,t){var n=e;return!t.isUri(e)&&e.indexOf("@")!==0&&(t.isCurie(e)?n=t.uri(e):t.isUri(e)||(e.indexOf(":")===-1?n="<"+t.base()+e+">":n="<"+e+">")),n},rdf2Entities:function(e,n){if(typeof t.rdf!="function")return i.Util._rdf2EntitiesNoRdfQuery(e,n);var s={};try{var o=n instanceof t.rdf?n.base(e.vie.namespaces.base()):t.rdf().base(e.vie.namespaces.base()).load(n,{});if(e.rules){var u=t.rdf.ruleset();for(var a in e.vie.namespaces.toObj())a!==""&&u.prefix(a,e.vie.namespaces.get(a));for(var f=0;f<e.rules.length;f++)if(e.rules.hasOwnProperty(f)){var l=e.rules[f];u.add(l.left,l.right)}o=o.reason(u,10)}o.where("?subject ?property ?object").each(function(){function o(e){if(typeof e.value=="string"){if(e.lang){var t={toString:function(){return this["@value"]},"@value":e.value.replace(/^"|"$/g,""),"@language":e.lang};return t}return e.value}return e.type==="uri"?e.toString():e.value}var t=this.subject.toString();s[t]||(s[t]={"@subject":t,"@context":e.vie.namespaces.toObj(!0),"@type":[]});var n=this.property.toString(),r;try{r=e.vie.namespaces.curie(n)}catch(i){r=n}s[t][r]=s[t][r]||[],s[t][r].push(o(this.object))}),r(s).each(function(e){e["@type"]=e["@type"].concat(e["rdf:type"]),delete e["rdf:type"],r(e).each(function(t,n){t.length===1&&(e[n]=t[0])})})}catch(c){return[]}var h=[];return t.each(s,function(){try{var t=new e.vie.Entity(this);h.push(t)}catch(n){}}),h},getPreferredLangForPreferredProperty:function(e,t,n){var i,s,o,u,a,f,l,c=this;return u=[],r.each(n,function(n,s){r.each(t,function(t,s){i=null,typeof t=="string"&&e.get(t)?(i=r.flatten([e.get(t)]),r(i).each(function(e){var t,r,i,s,o;return s=i=o=0,t=e["@language"],typeof e=="string"&&(e.indexOf("@")===e.length-3||e.indexOf("@")===e.length-5)&&(t=e.replace(/(^\"*|\"*@)..(..)?$/g,"")),t?t===n?s+=o:s+=20:s+=10,r=e.toString(),r=r.replace(/(^\"*|\"*@..$)/g,""),u.push({score:s,value:r})})):typeof t=="object"&&e.get(t.property)&&(a=r.flatten([e.get(t.property)]),a=r(a).map(function(e){return e.isEntity?e.getSubject():e}),u.push({score:s,value:t.makeLabel(a)}))})}),u=r(u).sortBy(function(e){return e.score}),u.length?u[0].value:"n/a"},_rdf2EntitiesNoRdfQuery:function(e,t){var n=[];return r.forEach(t,function(e,t){var i={};i["@subject"]="<"+t+">",r.forEach(e,function(e,t){t="<"+t+">",r.forEach(e,function(e){e.type==="uri"&&(e.value="<"+e.value+">"),i[t]&&!r.isArray(i[t])&&(i[t]=[i[t]]);if(r.isArray(i[t])){i[t].push(e.value);return}i[t]=e.value})}),n.push(i)}),n},loadSchemaOrg:function(e,t,n){if(!t)throw new Error("Please load the schema.json file.");e.types.remove("<http://schema.org/Thing>");var i=n?n:e.namespaces.base();e.namespaces.base(n);var s={DataType:"xsd:anyType",Boolean:"xsd:boolean",Date:"xsd:date",DateTime:"xsd:dateTime",Time:"xsd:time",Float:"xsd:float",Integer:"xsd:integer",Number:"xsd:anySimpleType",Text:"xsd:string",URL:"xsd:anyURI"},o=function(n,r){var i=e.types.add(r,[{id:"value",range:s[r]}]);for(var u=0;u<n.length;u++){var a=e.types.get(n[u])?e.types.get(n[u]):o.call(e,t.datatypes[n[u]].supertypes,n[u]);i.inherit(a)}return i};for(var u in t.datatypes)if(!e.types.get(u)){var a=t.datatypes[u].supertypes;o.call(e,a,u)}var f=function(e){var t={};return e.label&&(t.label=e.label),e.url&&(t.url=e.url),e.comment&&(t.comment=e.comment),e.metadata&&(t=r.extend(t,e.metadata)),t},l=function(e){var n=[];return r.each(t.types[e].specific_properties,function(e){var r=t.properties[e];n.push({id:r.id,range:r.ranges,min:r.min,max:r.max,metadata:f(r)})}),n},c=function(n,r,i,s){var o=e.types.add(r,i,s);for(var u=0;u<n.length;u++){var a=e.types.get(n[u])?e.types.get(n[u]):c.call(e,t.types[n[u]].supertypes,n[u],l.call(e,n[u]),f(t.types[n[u]]));o.inherit(a)}return r==="Thing"&&!o.isof("owl:Thing")&&o.inherit("owl:Thing"),o};r.each(t.types,function(t){if(e.types.get(t.id))return;var n=t.supertypes,r=f(t);c.call(e,n,t.id,l.call(e,t.id),r)}),e.namespaces.base(i)},getEntityTypeUnion:function(e){var t=e.vie;return(new t.Type("Union")).inherit(e.get("@type"))},getFormSchemaForType:function(e,t){var n={};return r.each(e.attributes.toArray(),function(e){var t=i.Util.toCurie(e.id,!1,e.vie.namespaces);n[t]=i.Util.getFormSchemaForAttribute(e)}),r.each(n,function(e,r){e.type||delete n[r],e.type==="URL"&&(e.type="Text",e.dataType="url"),e.type==="List"&&!e.listType&&delete n[r],t||(e.type==="NestedModel"||e.listType==="NestedModel")&&delete n[r]}),n},getFormSchemaForAttribute:function(e){var t=e.range[0],n={},r=function(t){switch(t){case"xsd:anySimpleType":case"xsd:float":case"xsd:integer":return"Number";case"xsd:string":return"Text";case"xsd:date":return"Date";case"xsd:dateTime":return"DateTime";case"xsd:boolean":return"Checkbox";case"xsd:anyURI":return"URL";default:var n=e.vie.types.get(t);if(!n)return null;if(n.attributes.get("value"))return r(n.attributes.get("value").range[0]);return"NestedModel"}};return n.title=i.Util.toCurie(e.id,!1,e.vie.namespaces),e.min>0&&(n.validators=["required"]),e.max>1?(n.type="List",n.listType=r(t),n.listType==="NestedModel"&&(n.nestedModelType=t),n):(n.type=r(t),n.type==="NestedModel"&&(n.nestedModelType=t),n)},getFormSchema:function(e){if(!e||!e.isEntity)return{};var t=i.Util.getEntityTypeUnion(e),n=i.Util.getFormSchemaForType(t,!0);return r.each(n,function(t,r){if(t.type!=="NestedModel"&&t.listType!=="NestedModel")return;n[r].model=e.vie.getTypedEntityClass(t.nestedModelType)}),n},xsdDateTime:function(e){function t(e){var t=e.toString();return t.length<2?"0"+t:t}var n=e.getFullYear(),r=t(e.getMonth()+1),i=t(e.getDate()),s=t(e.getHours()),o=t(e.getMinutes()),u=t(e.getSeconds());return n+"-"+r+"-"+i+"T"+s+":"+o+":"+u},extractLanguageString:function(e,t,n){var s,o,u,a,f;if(e&&typeof e!="string"){t=r.isArray(t)?t:[t],n=r.isArray(n)?n:[n];for(s=0;s<t.length;s++)for(var l=0;l<n.length;l++){var c=n[l];o=t[s];if(e.has(o)){u=e.get(o),u=r.isArray(u)?u:[u];for(a=0;a<u.length;a++){f=u[a],f.isEntity?f=i.Util.extractLanguageString(f,t,c):typeof f=="string"?f=f:f="";if(f&&f.indexOf("@"+c)>-1)return f.replace(/"/g,"").replace(/@[a-z]+/,"").trim()}}}for(s=0;s<t.length;s++){o=t[s];if(e.has(o)){u=e.get(o),u=r.isArray(u)?u:[u];for(a=0;a<u.length;a++){f=u[a],f.isEntity&&(f=i.Util.extractLanguageString(f,t,[]));if(f&&typeof f=="string"&&f.indexOf("@")===-1)return f.replace(/"/g,"").replace(/@[a-z]+/,"").trim()}}}}return undefined},transformationRules:function(e){var n=[{left:["?subject a dbpedia:Person","?subject rdfs:label ?label"],right:function(e){return function(){return[t.rdf.triple(this.subject.toString(),"a","<"+e.base()+"Person>",{namespaces:e.toObj()}),t.rdf.triple(this.subject.toString(),"<"+e.base()+"name>",this.label,{namespaces:e.toObj()})]}}(e.vie.namespaces)},{left:["?subject a foaf:Person","?subject rdfs:label ?label"],right:function(e){return function(){return[t.rdf.triple(this.subject.toString(),"a","<"+e.base()+"Person>",{namespaces:e.toObj()}),t.rdf.triple(this.subject.toString(),"<"+e.base()+"name>",this.label,{namespaces:e.toObj()})]}}(e.vie.namespaces)},{left:["?subject a dbpedia:Place","?subject rdfs:label ?label"],right:function(e){return function(){return[t.rdf.triple(this.subject.toString(),"a","<"+e.base()+"Place>",{namespaces:e.toObj()}),t.rdf.triple(this.subject.toString(),"<"+e.base()+"name>",this.label.toString(),{namespaces:e.toObj()})]}}(e.vie.namespaces)},{left:["?subject a dbpedia:City","?subject rdfs:label ?label","?subject dbpedia:abstract ?abs","?subject dbpedia:country ?country"],right:function(e){return function(){return[t.rdf.triple(this.subject.toString(),"a","<"+e.base()+"City>",{namespaces:e.toObj()}),t.rdf.triple(this.subject.toString(),"<"+e.base()+"name>",this.label.toString(),{namespaces:e.toObj()}),t.rdf.triple(this.subject.toString(),"<"+e.base()+"description>",this.abs.toString(),{namespaces:e.toObj()}),t.rdf.triple(this.subject.toString(),"<"+e.base()+"containedIn>",this.country.toString(),{namespaces:e.toObj()})]}}(e.vie.namespaces)}];return n},getAdditionalRules:function(e){var n={Work:"CreativeWork",Film:"Movie",TelevisionEpisode:"TVEpisode",TelevisionShow:"TVSeries",Website:"WebPage",Painting:"Painting",Sculpture:"Sculpture",Event:"Event",SportsEvent:"SportsEvent",MusicFestival:"Festival",FilmFestival:"Festival",Place:"Place",Continent:"Continent",Country:"Country",City:"City",Airport:"Airport",Station:"TrainStation",Hospital:"GovernmentBuilding",Mountain:"Mountain",BodyOfWater:"BodyOfWater",Company:"Organization",Person:"Person"},i=[];return r.each(n,function(n,r){var s={left:["?subject a dbpedia:"+r,"?subject rdfs:label ?label"],right:function(e){return function(){return[t.rdf.triple(this.subject.toString(),"a","<"+e.base()+n+">",{namespaces:e.toObj()}),t.rdf.triple(this.subject.toString(),"<"+e.base()+"name>",this.label.toString(),{namespaces:e.toObj()})]}}(e.vie.namespaces)};i.push(s)}),i}},i.prototype.Entity=n.Model.extend({idAttribute:"@subject",isEntity:!0,defaults:{"@type":"owl:Thing"},initialize:function(e,t){return e||(e={}),t||(t={}),e["@subject"]?this.id=this["@subject"]=this.toReference(e["@subject"]):this.id=this["@subject"]=e["@subject"]=this.cid.replace("c","_:bnode"),this},schema:function(){return i.Util.getFormSchema(this)},get:function(e){e=i.Util.mapAttributeNS(e,this.vie.namespaces);var t=n.Model.prototype.get.call(this,e);return t=r.isArray(t)?t:[t],t.length===0?undefined:(t=r.map(t,function(t){return t!==undefined&&e==="@type"?(this.vie.types.get(t)||this.vie.types.add(t).inherit("owl:Thing"),this.vie.types.get(t)):t!==undefined&&this.vie.entities.get(t)?this.vie.entities.get(t):t},this),t=t.length===1?t[0]:t,t)},has:function(e){return e=i.Util.mapAttributeNS(e,this.vie.namespaces),n.Model.prototype.has.call(this,e)},hasRelations:function(){var e=!1;return r.each(this.attributes,function(t){t&&t.isCollection&&(e=!0)}),e},set:function(e,t,s){if(!e)return this;e["@subject"]&&(e["@subject"]=this.toReference(e["@subject"]));if(r.isString(e)){var o={};return o[e]=t,this.set(o,s)}t||(t={}),t.validate!==!1&&t.silent!==!0&&(t.validate=!0),e.attributes&&(e=e.attributes);var u;r.each(e,function(t,n){var r=i.Util.mapAttributeNS(n,this.vie.namespaces);n!==r&&(delete e[n],e[r]=t)},this),r.each(e,function(n,i){if(!n)return;if(i.indexOf("@")===-1)if(n.isCollection)n.each(function(e){this.vie.entities.addOrUpdate(e)},this);else if(n.isEntity)this.vie.entities.addOrUpdate(n),u=new this.vie.Collection(n,{vie:this.vie,predicate:i}),e[i]=u;else if(r.isArray(n)){if(this.attributes[i]&&this.attributes[i].isCollection){var s=this.attributes[i].addOrUpdate(n);e[i]=this.attributes[i],e[i].reset(s)}}else if(!n["@value"]&&r.isObject(n)&&!r.isDate(n)){var o=new this.vie.Entity(n,t);this.vie.entities.addOrUpdate(o),u=new this.vie.Collection(n,{vie:this.vie,predicate:i}),e[i]=u}},this);var a=n.Model.prototype.set.call(this,e,t);return t&&t.ignoreChanges&&(this.changed={},this._previousAttributes=r.clone(this.attributes)),a},unset:function(e,t){return e=i.Util.mapAttributeNS(e,this.vie.namespaces),n.Model.prototype.unset.call(this,e,t)},validate:function(e,t){if(t&&t.validate===!1)return;var n=this.get("@type");if(!n)return;if(r.isArray(n)){var i=[];r.each(n,function(n){var r=this.validateByType(n,e,t);r&&i.push(r)},this);if(r.isEmpty(i))return;return r.flatten(i)}return this.validateByType(n,e,t)},validateByType:function(e,t,n){var i={max:"<%= property %> cannot contain more than <%= num %> items",min:"<%= property %> must contain at least <%= num %> items",required:"<%= property %> is required"};if(!e.attributes)return;var s=function(e,t,n){return{property:e.id,constraint:t,message:r.template(i[t],r.extend({property:e.id},n))}},o=function(e,t){if(!t[e.id]||r.isEmpty(t[e.id]))return s(e,"required",{})},u=function(e,t){if(!t||!t[e.id])return;if(!t[e.id].isCollection&&!r.isArray(t[e.id]))return;if(t[e.id].length>e.max)return s(e,"max",{num:e.max})},a=[];r.each(e.attributes.list(),function(e){var n;e.max&&e.max!=-1&&(n=u(e,t),n&&a.push(n)),e.min&&e.min>0&&(n=o(e,t),n&&a.push(n))});if(r.isEmpty(a))return;return a},isNew:function(){return this.getSubjectUri().substr(0,7)==="_:bnode"?!0:!1},hasChanged:function(e){return this.markedChanged?!0:n.Model.prototype.hasChanged.call(this,e)},forceChanged:function(e){this.markedChanged=e?!0:!1},getSubject:function(){return typeof this.id=="undefined"&&(this.id=this.attributes[this.idAttribute]),typeof this.id=="string"?this.id.substr(0,7)==="http://"||this.id.substr(0,4)==="urn:"?this.toReference(this.id):this.id:this.cid.replace("c","_:bnode")},getSubjectUri:function(){return this.fromReference(this.getSubject())},isReference:function(e){return i.Util.isReference(e)},toReference:function(e){return i.Util.toReference(e,this.vie.namespaces)},fromReference:function(e){return i.Util.fromReference(e,this.vie.namespaces)},as:function(e){if(e==="JSON")return this.toJSON();if(e==="JSONLD")return this.toJSONLD();throw new Error("Unknown encoding "+e)},toJSONLD:function(){var e={};return r.each(this.attributes,function(t,n){var r=this.get(n);t instanceof this.vie.Collection&&(r=t.map(function(e){return e.getSubject()})),e[n]=r},this),e["@subject"]=this.getSubject(),e},setOrAdd:function(e,t,n){return r.isString(e)&&t?this._setOrAddOne(e,t,n):r.isObject(e)&&r.each(e,function(e,n){this._setOrAddOne(n,e,t)},this),this},_setOrAddOne:function(e,t,s){if(!e||!t)return;s=s?s:{},e=i.Util.mapAttributeNS(e,this.vie.namespaces);if(r.isArray(t)){r.each(t,function(n){this._setOrAddOne(e,t[n],s)},this);return}e==="@type"&&t instanceof this.vie.Type&&(t=t.id);var o={},u=n.Model.prototype.get.call(this,e);if(!u)o[e]=t,this.set(o,s);else if(u.isCollection){if(t.isCollection)t.each(function(e){u.add(e)});else if(t.isEntity)u.add(t);else{if(!r.isObject(t))throw new Error("you cannot add a literal to a collection of entities!");t=new this.vie.Entity(t),u.add(t)}this.trigger("change:"+e,this,t,{})}else{if(!r.isArray(u)){var f=[u];return f.push(t),o[e]=f,this.set(o,s)}if(t.isCollection)t.each(function(n){this._setOrAddOne(e,t.at(n).getSubject(),s)},this);else if(t.isEntity)this._setOrAddOne(e,t.getSubject(),s);else if(r.isObject(t))t=new this.vie.Entity(t),this._setOrAddOne(e,t,s);else{var a=u.slice(0);a.push(t),this.set(e,a)}}},hasType:function(e){return e=this.vie.types.get(e),this.hasPropertyValue("@type",e)},hasPropertyValue:function(e,t){var n=this.get(e);return r.isObject(t)||(t=this.vie.entities.get(t)),r.isArray(n)?n.indexOf(t)!==-1:n===t},isof:function(e){var t=this.get("@type");if(t===undefined)return!1;t=r.isArray(t)?t:[t],e=this.vie.types.get(e)?this.vie.types.get(e):new this.vie.Type(e);var n=!1;return r.each(t,function(t){this.vie.types.get(t).isof(e)&&(n=!0)},this),n},addTo:function(e,t){if(e instanceof this.vie.Collection)return t?e.addOrUpdate(this):e.add(this),this;throw new Error("Please provide a proper collection of type VIE.Collection as argument!")}}),i.prototype.Collection=n.Collection.extend({model:i.prototype.Entity,initialize:function(e,t){if(!t||!t.vie)throw new Error("Each collection needs a VIE reference");this.vie=t.vie,this.predicate=t.predicate},canAdd:function(e){return!0},get:function(e){return e===null?null:(e=e.getSubject?e.getSubject():e,typeof e=="string"&&e.indexOf("_:")===0?e.indexOf("bnode")===2?(e=e.replace("_:bnode","c"),this._byId[e]):this._byId["<"+e+">"]:this._byId[e]?this._byId[e]:(e=this.toReference(e),this._byId[e]))},addOrUpdate:function(e,n){n=n||{};var i=this,s;if(r.isArray(e)){var o=[];return r.each(e,function(e){o.push(i.addOrUpdate(e,n))}),o}if(e===undefined)throw new Error("No model given");r.isString(e)&&(e={"@subject":e,id:e}),e.isEntity||(e=new this.model(e)),e.id&&this.get(e.id)&&(s=this.get(e.id)),this.get(e.cid)&&(s=this.get(e.cid));if(s){var u={};return r.each(e.attributes,function(o,a){if(!s.has(a))return u[a]=o,!0;if(a==="@subject"&&e.isNew()&&!s.isNew())return!0;if(s.get(a)===o)return!0;var f=s.attributes[a],l=o;if(f instanceof i.vie.Collection)return!0;if(n.overrideAttributes)return u[a]=o,!0;a==="@context"?u[a]=t.extend(!0,{},f,l):(f=t.isArray(f)?f:[f],l=t.isArray(l)?l:[l],u[a]=r.uniq(f.concat(l)),u[a]=u[a].length===1?u[a][0]:u[a])}),r.isEmpty(u)||s.set(u,n.updateOptions),s}return this.add(e,n.addOptions),e},isReference:function(e){return i.Util.isReference(e)},toReference:function(e){return i.Util.toReference(e,this.vie.namespaces)},fromReference:function(e){return i.Util.fromReference(e,this.vie.namespaces)},isCollection:!0}),i.prototype.Type=function(e,n,r){if(e===undefined||typeof e!="string")throw"The type constructor needs an 'id' of type string! E.g., 'Person'";this.id=this.vie.namespaces.isUri(e)?e:this.vie.namespaces.uri(e);if(this.vie.types.get(this.id))throw new Error("The type "+this.id+" is already defined!");this.supertypes=new this.vie.Types,this.subtypes=new this.vie.Types,this.attributes=new this.vie.Attributes(this,n?n:[]),this.metadata=r?r:{},this.isof=function(e){e=this.vie.types.get(e);if(e)return e.subsumes(this.id);throw new Error("No valid type given")},this.subsumes=function(e){e=this.vie.types.get(e);if(e){if(this.id===e.id)return!0;var t=this.subtypes.list();for(var n=0;n<t.length;n++){var r=t[n];if(r)if(r.id===e.id||r.subsumes(e))return!0}return!1}throw new Error("No valid type given")},this.inherit=function(e){if(typeof e=="string")this.inherit(this.vie.types.get(e));else if(e instanceof this.vie.Type){e.subtypes.addOrOverwrite(this),this.supertypes.addOrOverwrite(e);try{this.attributes.list()}catch(n){throw e.subtypes.remove(this),this.supertypes.remove(e),n}}else{if(!t.isArray(e))throw new Error("Wrong argument in VIE.Type.inherit()");for(var r=0,i=e.length;r<i;r++)this.inherit(e[r])}return this},this.hierarchy=function(){var e={id:this.id,subtypes:[]},t=this.subtypes.list();for(var n=0,r=t.length;n<r;n++){var i=this.vie.types.get(t[n]);e.subtypes.push(i.hierarchy())}return e},this.instance=function(e,t){var n=this.vie.getTypedEntityClass(this);return new n(e,t)},this.toString=function(){return this.id}},i.prototype.Types=function(){this._types={},this.add=function(e,t,n){if(r.isArray(e))return r.each(e,function(e){this.add(e)},this),this;if(this.get(e))throw new Error("Type '"+e+"' already registered.");if(typeof e=="string"){var i=new this.vie.Type(e,t,n);return this._types[i.id]=i,i}if(e instanceof this.vie.Type)return this._types[e.id]=e,e;throw new Error("Wrong argument to VIE.Types.add()!")},this.addOrOverwrite=function(e,t){return this.get(e)&&this.remove(e),this.add(e,t)},this.get=function(e){if(!e)return undefined;if(typeof e=="string"){var t=this.vie.namespaces.isUri(e)?e:this.vie.namespaces.uri(e);return this._types[t]}return e instanceof this.vie.Type?this.get(e.id):undefined},this.remove=function(e){var t=this.get(e);if(!t)return this;if(!t||t.subsumes("owl:Thing"))return this;delete this._types[t.id];var n=t.subtypes.list();for(var r=0;r<n.length;r++){var i=n[r];i.supertypes.list().length===1?this.remove(i):i.supertypes.remove(t.id)}return t},this.toArray=this.list=function(){var e=[];for(var t in this._types)e.push(this._types[t]);return e},this.sort=function(e,n){var r=this;e=t.isArray(e)?e:[e],n=n?!0:!1;if(e.length===0)return[];var i=[e[0]],s,o;for(s=1,o=e.length;s<o;s++){var u=e[s],a=r.get(u);if(a)for(var f=0;f<i.length;f++){if(a.subsumes(i[f])){i.splice(f,0,u);break}f===i.length-1&&i.push(u)}}for(s=0;s<i.length;s++)i.lastIndexOf(i[s])!==s&&(i.splice(s,1),s--);return n||i.reverse(),i}},i.prototype.Attribute=function(e,t,n,i,s,o){if(e===undefined||typeof e!="string")throw new Error("The attribute constructor needs an 'id' of type string! E.g., 'Person'");if(t===undefined)throw new Error("The attribute constructor of "+e+" needs 'range'.");if(n===undefined)throw new Error("The attribute constructor of "+e+" needs a 'domain'.");this._domain=n,this.id=this.vie.namespaces.isUri(e)?e:this.vie.namespaces.uri(e),this.range=r.isArray(t)?t:[t],i=i?i:0,this.min=i>0?i:0,s=s?s:1,s===-1&&(s=Number.MAX_VALUE),this.max=s>=this.min?s:this.min,this.metadata=o?o:{},this.applies=function(e){this.vie.types.get(e)&&(e=this.vie.types.get(e));for(var t=0,n=this.range.length;t<n;t++){var r=this.vie.types.get(this.range[t]);if(r===undefined&&typeof e=="string"){if(e===this.range[t])return!0}else if(e.isof(this.range[t]))return!0}return!1}},i.prototype.Attributes=function(e,n){this._local={},this._attributes={},this.domain=e,this.add=function(e,t,n,i,s){if(r.isArray(e))return r.each(e,function(e){this.add(e)},this),this;if(this.get(e))throw new Error("Attribute '"+e+"' already registered for domain "+this.domain.id+"!");if(typeof e=="string"){var o=new this.vie.Attribute(e,t,this.domain,n,i,s);return this._local[o.id]=o,o}if(e instanceof this.vie.Attribute)return e.domain=this.domain,e.vie=this.vie,this._local[e.id]=e,e;throw new Error("Wrong argument to VIE.Types.add()!")},this.remove=function(e){var t=this.get(e);if(t.id in this._local)return delete this._local[t.id],t;throw new Error("The attribute "+e+" is inherited and cannot be removed from the domain "+this.domain.id+"!")},this.get=function(e){if(typeof e=="string"){var t=this.vie.namespaces.isUri(e)?e:this.vie.namespaces.uri(e);return this._inherit()._attributes[t]}if(e instanceof this.vie.Attribute)return this.get(e.id);throw new Error("Wrong argument in VIE.Attributes.get()")},this._inherit=function(){var e,n,i,s=t.extend(!0,{},this._local),o=r.map(this.domain.supertypes.list(),function(e){return e.attributes}),u={},a={},f,l;for(e=0,f=o.length;e<f;e++){var c=o[e].list();for(n=0,l=c.length;n<l;n++)i=c[n].id,i in s||(i in u||i in a?(a[i]||(a[i]={range:[],mins:[],maxs:[],metadatas:[]}),i in u&&(a[i].range=t.merge(a[i].range,u[i].range),a[i].mins=t.merge(a[i].mins,[u[i].min]),a[i].maxs=t.merge(a[i].maxs,[u[i].max]),a[i].metadatas=t.merge(a[i].metadatas,[u[i].metadata]),delete u[i]),a[i].range=t.merge(a[i].range,c[n].range),a[i].mins=t.merge(a[i].mins,[c[n].min]),a[i].maxs=t.merge(a[i].maxs,[c[n].max]),a[i].metadatas=t.merge(a[i].metadatas,[c[n].metadata]),a[i].range=r.uniq(a[i].range),a[i].mins=r.uniq(a[i].mins),a[i].maxs=r.uniq(a[i].maxs),a[i].metadatas=r.uniq(a[i].metadatas)):u[i]=c[n])}t.extend(s,u);for(i in a){var h=a[i].range,p=a[i].mins,d=a[i].maxs,v=a[i].metadatas,m=[];for(var g=0,y=h.length;g<y;g++){var b=this.vie.types.get(h[g]),w=!1;if(b)for(n=0;n<y;n++){if(n===g)continue;var E=this.vie.types.get(h[n]);if(E&&E.isof(b)){w=!0;break}}w||m.push(h[g])}var S=r.max(p),x=r.min(d);if(!(S<=x&&x>=0&&S>=0))throw new Error("This inheritance is not allowed because of an invalid minCount/maxCount pair!");s[i]=new this.vie.Attribute(i,m,this,S,x,v[0])}return this._attributes=s,this},this.toArray=this.list=function(e){var t=[],n=this._inherit()._attributes;for(var r in n)(!e||n[r].applies(e))&&t.push(n[r]);return t},n=r.isArray(n)?n:[n],r.each(n,function(e){this.add(e.id,e.range,e.min,e.max,e.metadata)},this)};if(i.prototype.Namespaces)throw new Error("ERROR: VIE.Namespaces is already defined. Please check your VIE installation!");i.prototype.Namespaces=function(e,t){if(!e)throw new Error("Please provide a base namespace!");this._base=e,this._namespaces=t?t:{};if(typeof this._namespaces!="object"||r.isArray(this._namespaces))throw new Error("If you want to initialise VIE namespace prefixes, please provide a proper object!")},i.prototype.Namespaces.prototype.base=function(e){if(!e)return this._base;if(typeof e=="string")return this.removeNamespace(e),this._base=e,this._base;throw new Error("Please provide a valid namespace!")},i.prototype.Namespaces.prototype.add=function(e,n){if(typeof e=="object"){for(var r in e)this.add(r,e[r]);return this}if(e==="")return this.base(n),this;if(this.contains(e)&&n!==this._namespaces[e])throw new Error("ERROR: Trying to register namespace prefix mapping ("+e+","+n+")!"+"There is already a mapping existing: '("+e+","+this.get(e)+")'!");return t.each(this._namespaces,function(t,r){if(r===n&&t!==e)throw new Error("ERROR: Trying to register namespace prefix mapping ("+e+","+n+")!"+"There is already a mapping existing: '("+t+","+n+")'!")}),this._namespaces[e]=n,this},i.prototype.Namespaces.prototype.addOrReplace=function(e,t){if(typeof e=="object"){for(var n in e)this.addOrReplace(n,e[n]);return this}return this.remove(e),this.removeNamespace(t),this.add(e,t)},i.prototype.Namespaces.prototype.get=function(e){return e===""?this.base():this._namespaces[e]},i.prototype.Namespaces.prototype.getPrefix=function(e){var n;return e.indexOf("<")===0&&(e=e.substring(1,e.length-1)),t.each(this._namespaces,function(t,r){e.indexOf(r)===0&&(n=t),e.indexOf(t+":")===0&&(n=t)}),n},i.prototype.Namespaces.prototype.contains=function(e){return e in this._namespaces},i.prototype.Namespaces.prototype.containsNamespace=function(e){return this.getPrefix(e)!==undefined},i.prototype.Namespaces.prototype.update=function(e,t){return this.remove(e),this.add(e,t)},i.prototype.Namespaces.prototype.updateNamespace=function(e,t){return this.removeNamespace(e),this.add(e,t)},i.prototype.Namespaces.prototype.remove=function(e){return e&&delete this._namespaces[e],this},i.prototype.Namespaces.prototype.removeNamespace=function(e){var t=this.getPrefix(e);return t&&delete this._namespaces[t],this},i.prototype.Namespaces.prototype.toObj=function(e){return e?t.extend({},this._namespaces):t.extend({"":this._base},this._namespaces)},i.prototype.Namespaces.prototype.curie=function(e,t){return i.Util.toCurie(e,t,this)},i.prototype.Namespaces.prototype.isCurie=function(e){return i.Util.isCurie(e,this)},i.prototype.Namespaces.prototype.uri=function(e){return i.Util.toUri(e,this)},i.prototype.Namespaces.prototype.isUri=i.Util.isUri,i.prototype.ClassicRDFa=function(e){this.vie=e},i.prototype.ClassicRDFa.prototype={readEntities:function(e){var t=[],n=this.vie.RDFaEntities.getInstances(e);return r.each(n,function(e){t.push(e.toJSONLD())}),t},findPredicateElements:function(e,t,n){return this.vie.services.rdfa.findPredicateElements(e,t,n)},getPredicate:function(e){return this.vie.services.rdfa.getElementPredicate(e)},getSubject:function(e){return this.vie.services.rdfa.getElementSubject(e)}},i.prototype.ClassicRDFaEntities=function(e){this.vie=e},i.prototype.ClassicRDFaEntities.prototype={getInstances:function(e){this.vie.services.rdfa||this.vie.use(new this.vie.RdfaService);var t=null,n=!1;this.vie.load({element:e}).from("rdfa").execute().done(function(e){t=e,n=!0});while(!n);return t},getInstance:function(e){var t=this.getInstances(e);return t&&t.length?t.pop():null}},i.prototype.ClassicEntityManager=function(e){this.vie=e,this.entities=this.vie.entities},i.prototype.ClassicEntityManager.prototype={getBySubject:function(e){return this.vie.entities.get(e)},getByJSONLD:function(e){if(typeof e=="string")try{e=t.parseJSON(e)}catch(n){return null}return this.vie.entities.addOrUpdate(e)},initializeCollection:function(){return}},function(){i.prototype.DBPediaService=function(e){var n={name:"dbpedia",namespaces:{owl:"http://www.w3.org/2002/07/owl#",yago:"http://dbpedia.org/class/yago/",foaf:"http://xmlns.com/foaf/0.1/",georss:"http://www.georss.org/georss/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",dbpedia:"http://dbpedia.org/ontology/",dbprop:"http://dbpedia.org/property/",dcelements:"http://purl.org/dc/elements/1.1/"},rules:[]};this.options=t.extend(!0,n,e?e:{}),this.vie=null,this.name=this.options.name,t.ajaxSetup({converters:{"text application/rdf+json":function(e){return JSON.parse(e)}},timeout:6e4})},i.prototype.DBPediaService.prototype={init:function(){for(var e in this.options.namespaces){var n=this.options.namespaces[e];this.vie.namespaces.add(e,n)}return this.rules=t.extend([],i.Util.transformationRules(this)),this.rules=t.merge(this.rules,this.options.rules?this.options.rules:[]),this.connector=new this.vie.DBPediaConnector(this.options),this},load:function(e){var t=this,n=e instanceof this.vie.Loadable;if(!n)throw new Error("Invalid Loadable passed");var s=function(n){n=typeof n=="string"?JSON.parse(n):n,r.defer(function(){try{var s=i.Util.rdf2Entities(t,n);s=r.isArray(s)?s:[s],r.each(s,function(e){e.set("DBPediaServiceLoad",i.Util.xsdDateTime(new Date))}),s=s.length===1?s[0]:s,e.resolve(s)}catch(o){e.reject(o)}})},o=function(t){e.reject(t)},u=e.options.entity?e.options.entity:e.options.entities;if(!u)e.reject([]);else{u=r.isArray(u)?u:[u];var a=[];for(var f=0;f<u.length;f++){var l=typeof u[f]=="string"?u[f]:u[f].id;a.push(l)}this.connector.load(a,s,o)}return this}},i.prototype.DBPediaConnector=function(e){this.options=e,this.baseUrl="http://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&timeout=0"},i.prototype.DBPediaConnector.prototype={load:function(e,n,i,s){s||(s={});var o=this.baseUrl+"&format="+encodeURIComponent("application/rdf+json")+"&query=";if(r.isArray(e)){var u="",a="";for(var f=0;f<e.length;f++){var l=/^<.+>$/.test(e[f])?e[f]:"<"+e[f]+">";f>0&&(u+=" .",a+=" UNION "),u+=" "+l+" ?prop"+f+" ?val"+f,a+=" { "+l+" ?prop"+f+" ?val"+f+" }"}o+=encodeURIComponent("CONSTRUCT {"+u+" } WHERE {"+a+" }")}else e=/^<.+>$/.test(e)?e:"<"+e+">",o+=encodeURIComponent("CONSTRUCT { "+e+" ?prop ?val } WHERE { "+e+" ?prop ?val }");var c=s.format||"application/rdf+json";return typeof exports!="undefined"&&typeof process!="undefined"?this._loadNode(o,n,i,s,c):(t.ajax({success:function(e){n(e)},error:i,type:"GET",url:o,accepts:{"application/rdf+json":"application/rdf+json"}}),this)},_loadNode:function(e,t,n,r,i){var s=require("request"),o=s({method:"GET",uri:e,headers:{Accept:i}},function(e,r,i){if(r.statusCode!==200)return n(i);t(JSON.parse(i))});return o.end(),this}}}(),function(){i.prototype.OpenCalaisService=function(e){var n={name:"opencalais",url:["http://api.opencalais.com/enlighten/rest/"],timeout:6e4,namespaces:{opencalaisc:"http://s.opencalais.com/1/pred/",opencalaiscr:"http://s.opencalais.com/1/type/er/",opencalaiscm:"http://s.opencalais.com/1/type/em/e/"},rules:[]};this.options=t.extend(!0,n,e?e:{}),this.vie=null,this.name=this.options.name,t.ajaxSetup({converters:{"text application/rdf+json":function(e){return JSON.parse(e)}},timeout:this.options.timeout})},i.prototype.OpenCalaisService.prototype={init:function(){for(var e in this.options.namespaces){var n=this.options.namespaces[e];this.vie.namespaces.add(e,n)}this.rules=t.extend([],i.Util.transformationRules(this)),this.rules=t.merge(this.rules,this.options.rules?this.options.rules:[]),this.connector=new this.vie.OpenCalaisConnector(this.options)},analyze:function(e){var n=this,s=e instanceof this.vie.Analyzable;if(!s)throw"Invalid Analyzable passed";var o=e.options.element?e.options.element:t("body"),u=n._extractText(o);if(u.length>0){var a=function(t){r.defer(function(){var r=i.Util.rdf2Entities(n,t);e.resolve(r)})},f=function(t){e.reject(t)};this.connector.analyze(u,a,f)}else console.warn("No text found in element."),e.resolve([])},_extractText:function(e){if(e.get(0)&&e.get(0).tagName&&(e.get(0).tagName=="TEXTAREA"||e.get(0).tagName=="INPUT"&&e.attr("type","text")))return e.get(0).val();var n=e.text().replace(/\s+/g," ").replace(/\0\b\n\r\f\t/g,"");return t.trim(n)}},i.prototype.OpenCalaisConnector=function(e){this.options=e,this.baseUrl=r.isArray(e.url)?e.url:[e.url],this.enhancerUrlPrefix="/"},i.prototype.OpenCalaisConnector.prototype={analyze:function(e,n,i,s){s||(s={urlIndex:0});if(s.urlIndex>=this.baseUrl.length){i("Could not connect to the given OpenCalais endpoints! Please check for their setup!");return}var o=this.baseUrl[s.urlIndex].replace(/\/$/,"");o+=this.enhancerUrlPrefix;var u=s.format||"application/rdf+json",a=function(e,t,n,i,s){return function(){console.error("OpenCalais connection error",arguments),e.analyze(t,n,i,r.extend(s,{urlIndex:s.urlIndex+1}))}}(this,e,n,i,s),f=this._prepareData(e);if(typeof exports!="undefined"&&typeof process!="undefined")return this._analyzeNode(o,f,n,a,s,u);t.ajax({success:function(e,t,r){var i=r.responseText.replace(/<!--[\s\S]*?-->/g,"");n(i)},error:a,type:"POST",url:o,data:f,accept:"text/plain"})},_analyzeNode:function(e,t,n,r,i,s){var o=require("request"),u=o({method:"POST",uri:e,body:t,headers:{Accept:s}},function(e,t,i){try{n({results:JSON.parse(i)})}catch(s){r(s)}});u.end()},_prepareData:function(e){return{licenseID:this.options.api_key,calculareRelevanceScore:"true",enableMetadataType:"GenericRelations,SocialTags",contentType:"text/html",content:e}}}}(),function(){i.prototype.RdfaRdfQueryService=function(e){var n={name:"rdfardfquery",namespaces:{},rules:[]};this.options=t.extend(!0,n,e?e:{}),this.views=[],this.vie=null,this.name=this.options.name},i.prototype.RdfaRdfQueryService.prototype={init:function(){for(var e in this.options.namespaces){var n=this.options.namespaces[e];this.vie.namespaces.add(e,n)}this.rules=t.extend([],i.Util.transformationRules(this)),this.rules=t.merge(this.rules,this.options.rules?this.options.rules:[])},analyze:function(e){return this.load(e)},load:function(e){var n=this,r=e instanceof this.vie.Loadable||e instanceof this.vie.Analyzable;if(!r)throw new Error("Invalid Loadable/Analyzable passed");var s=e.options.element?e.options.element:t(document);try{var o=t(s).find("[about],[typeof]").rdfa();t.each(t(s).xmlns(),function(e,t){n.vie.namespaces.addOrReplace(e,t.toString())});var u=i.Util.rdf2Entities(this,o);e.resolve(u)}catch(a){e.reject(a)}},save:function(e){var n=e instanceof this.vie.Savable;n||e.reject("Invalid Savable passed"),e.options.element||e.reject("Unable to write entity to RDFa, no element given"),e.options.entity||e.reject("Unable to write to RDFa, no entity given"),t.rdf||e.reject("No rdfQuery found.");var r=e.options.entity,i=[],s=r.get("@type");s=t.isArray(s)?s[0]:s,s=s.id,i.push(r.getSubject()+" a "+s),t(e.options.element).rdfa(i),e.resolve()}}}(),function(){i.prototype.RdfaService=function(e){var n={name:"rdfa",namespaces:{},subjectSelector:"[about],[typeof],[src],html",predicateSelector:"[property],[rel]",rules:[],bnodePrefix:"_a"};this.options=t.extend(!0,n,e?e:{}),this.bnodes=0,this.views=[],this.templates={},this.datatypeReaders={"<http://www.w3.org/2001/XMLSchema#boolean>":function(e){return e==="true"||e===1||e===!0?!0:!1},"<http://www.w3.org/2001/XMLSchema#dateTime>":function(e){return new Date(e)},"<http://www.w3.org/2001/XMLSchema#integer>":function(e){return parseInt(e,10)}},this.datatypeWriters={"<http://www.w3.org/2001/XMLSchema#dateTime>":function(e){return r.isDate(e)?e.toISOString():e}},this.vie=null,this.name=this.options.name},i.prototype.RdfaService.prototype={init:function(){for(var e in this.options.namespaces){var n=this.options.namespaces[e];this.vie.namespaces.add(e,n)}this.rules=t.merge([],i.Util.transformationRules(this)),this.rules=t.merge(this.rules,this.options.rules?this.options.rules:[])},analyze:function(e){return this.load(e)},load:function(e){var n=this,r=e instanceof this.vie.Loadable||e instanceof this.vie.Analyzable;if(!r)throw new Error("Invalid Loadable/Analyzable passed");var i;if(!e.options.element){if(typeof document=="undefined")return e.resolve([]);i=t(document)}else i=e.options.element;var s=this.readEntities(i);e.resolve(s)},save:function(e){var t=e instanceof this.vie.Savable;if(!t)throw"Invalid Savable passed";if(!e.options.element)throw"Unable to write entity to RDFa, no element given";if(!e.options.entity)throw"Unable to write to RDFa, no entity given";this._writeEntity(e.options.entity,e.options.element),e.resolve()},readEntities:function(e){var n=this,r=this.xmlns(e);for(var i in r)this.vie.namespaces.addOrReplace(i,r[i]);var s=[],o=t(this.options.subjectSelector,e).add(t(e).filter(this.options.subjectSelector)).each(function(){var e=n._readEntity(t(this));e&&s.push(e)});return s},_readEntity:function(e){var n=this.getElementSubject(e),i=this._getElementType(e),s=this._readEntityPredicates(n,e,!1);if(t.isEmptyObject(s))return null;var o=this.vie;r.each(s,function(e,t){if(!r.isArray(e))return;var n=new this.vie.Collection([],{vie:o,predicate:t});r.each(e,function(e){var t=o.entities.addOrUpdate({"@subject":e});n.addOrUpdate(t)}),s[t]=n},this),s["@subject"]=n,i&&(s["@type"]=i);var u=new this.vie.Entity(s);return u=this.vie.entities.addOrUpdate(u,{updateOptions:{silent:!0,ignoreChanges:!0}}),this._registerEntityView(u,e),u},_writeEntity:function(e,n){var r=this;return this.findPredicateElements(this.getElementSubject(n),n,!0).each(function(){var n=t(this),i=r.getElementPredicate(n);if(!e.has(i))return!0;var s=e.get(i);if(s&&s.isCollection)return!0;if(s===r.readElementValue(i,n))return!0;r.writeElementValue(i,n,s)}),!0},_getViewForElement:function(e,n){var r;return t.each(this.views,function(){if(t(this.el).get(0)===e.get(0))return n&&!this.template?!0:(r=this,!1)}),r},_registerEntityView:function(e,n,r){if(!n.length)return;var i=this,s=this._getViewForElement(n);return s?(e.hasRelations()&&!s.collectionsChecked&&this._registerEntityCollectionViews(e,n,s),s):(s=new this.vie.view.Entity({model:e,el:n,tagName:n.get(0).nodeName,vie:this.vie,service:this.name}),this.views.push(s),r&&t(n).find(this.options.predicateSelector).add(t(n).filter(this.options.predicateSelector)).each(function(){var n=t(this).attr("rel");if(!n)return;e.set(n,new i.vie.Collection([],{vie:i.vie,predicate:n}))}),this._registerEntityCollectionViews(e,n,s),s)},_registerEntityCollectionViews:function(e,n,i){var s=this;r.each(e.attributes,function(r,o){var u=e.fromReference(e.get(o));u&&u.isCollection&&(t.each(s.getElementByPredicate(o,n),function(){s._registerCollectionView(u,t(this),e)}),i.collectionsChecked=!0)})},setTemplate:function(e,t,n){var i;n||(n=t,t="default"),e=this.vie.namespaces.isUri(e)?e:this.vie.namespaces.uri(e),r.isFunction(n)?i=n:i=this.getElementTemplate(n),this.templates[e]||(this.templates[e]={}),this.templates[e][t]=i,r.each(this.views,function(n){if(!(n instanceof this.vie.view.Collection))return;if(n.collection.predicate!==t)return;n.templates[e]=i},this)},getTemplate:function(e,t){t||(t="default"),e=this.vie.namespaces.isUri(e)?e:this.vie.namespaces.uri(e);if(!this.templates[e])return;return this.templates[e][t]},_getElementTemplates:function(e,n,i){var s={},o=n.get("@type");if(o&&o.attributes&&o.attributes.get(i)){var u=o.attributes.get(i);r.each(u.range,function(e){var t=this.getTemplate(e,i);if(t){var n=this.vie.types.get(e);s[n.id]=t}},this);if(!r.isEmpty(s))return s}var a=this;t("[typeof]",e).each(function(){var e=t(this),n=e.attr("typeof");n=a.vie.namespaces.isUri(n)?n:a.vie.namespaces.uri(n);if(s[n])return;var r=a.getElementTemplate(e);s[n]=r,s["<http://www.w3.org/2002/07/owl#Thing>"]=r});if(r.isEmpty(s)){var f=e.children(":first-child");f.length&&(s["<http://www.w3.org/2002/07/owl#Thing>"]=a.getElementTemplate(f))}return s},getElementTemplate:function(e){r.isString(e)&&(e=t.trim(e));var n=this;return function(r,i){var s=t(e).clone(!1);s.attr("about")!==undefined&&s.attr("about",""),s.find("[about]").attr("about","");var o=n.findPredicateElements(o,s,!1).each(function(){var e=t(this),i=n.getElementPredicate(e);if(r.has(i)&&r.get(i).isCollection)return!0;n.writeElementValue(null,e,"")});i(s)}},_registerCollectionView:function(e,t,n){var r=this._getViewForElement(t,!0);return r?r:(r=new this.vie.view.Collection({owner:n,collection:e,model:e.model,el:t,templates:this._getElementTemplates(t,n,e.predicate),service:this}),this.views.push(r),r)},_getElementType:function(e){var n;return t(e).attr("typeof")!==this.options.attributeExistenceComparator?(n=t(e).attr("typeof"),n&&n.indexOf("://")!==-1?"<"+n+">":n):null},_generatebnodeId:function(){var e=this.options.bnodePrefix+":"+this.bnodes;return this.bnodes++,e},getElementSubject:function(e,n){var r=this;if(typeof document!="undefined"&&e===document)return document.baseURI;var i,s=null;return t(e).closest(this.options.subjectSelector).each(function(){s=this;if(t(this).attr("about")!==r.options.attributeExistenceComparator)return i=t(this).attr("about"),!0;if(t(this).attr("src")!==r.options.attributeExistenceComparator)return i=t(this).attr("src"),!0;if(t(this).attr("typeof")!==r.options.attributeExistenceComparator){var e=t(this);return e.data("vie-bnode")?(i=e.data("vie-bnode"),!0):(i=r._generatebnodeId(),e.data("vie-bnode",i),!0)}t(this).get(0).nodeName==="HTML"&&t("base",this).each(function(){i=t(this).attr("href")})}),i?typeof i=="object"?i:i.indexOf("_:")===0?i:i.indexOf("<")===0?i:"<"+i+">":undefined},setElementSubject:function(e,n){return t(n).attr("src")?t(n).attr("src",e):t(n).attr("about",e)},getElementPredicate:function(e){var n;return e=t(e),n=e.attr("property"),n||(n=e.attr("rel")),n},getElementBySubject:function(e,n){var r=this;return t(n).find(this.options.subjectSelector).add(t(n).filter(this.options.subjectSelector)).filter(function(){return r.getElementSubject(t(this))!==e?!1:!0})},getElementByPredicate:function(e,n){var r=this,i=this.getElementSubject(n);return t(n).find(this.options.predicateSelector).add(t(n).filter(this.options.predicateSelector)).filter(function(){var n=r.getElementPredicate(t(this));return r.vie.namespaces.curie(n)!==r.vie.namespaces.curie(e)?!1:r.getElementSubject(this)!==i?!1:!0})},_readEntityPredicates:function(e,n,r){var i=this,s={};return this.findPredicateElements(e,n,!0).each(function(){var e=t(this),n=i.getElementPredicate(e);if(n==="")return;var o=i.readElementValue(n,e);if(o===null&&!r)return;s[n]=o}),t(n).get(0).tagName!=="HTML"&&t(n).parent("[rev]").each(function(){var e=t(this).attr("rev");if(!e)return;s[t(this).attr("rev")]=i.getElementSubject(this)}),s},findSubjectElements:function(e){return t("[about]",e)},findPredicateElements:function(e,n,r){var i=this;return t(n).find(this.options.predicateSelector).add(t(n).filter(this.options.predicateSelector)).filter(function(){return i.getElementSubject(this)!==e?!1:r?!0:t(this).parents("[property]").length?!1:!0})},parseElementValue:function(e,t){if(!t.attr("datatype"))return e;var n=this.vie.namespaces.uri(t.attr("datatype"));return this.datatypeReaders[n]?this.datatypeReaders[n](e):e},generateElementValue:function(e,t){if(!t.attr("datatype"))return e;var n=this.vie.namespaces.uri(t.attr("datatype"));return this.datatypeWriters[n]?this.datatypeWriters[n](e):e},readElementValue:function(e,n){var r=n.attr("content");if(r)return this.parseElementValue(r,n);var i=n.attr("resource");if(i)return["<"+i+">"];var s=n.attr("href");if(s&&n.attr("rel")===e)return["<"+s+">"];if(n.attr("rel")){var o=[],u=this;return t(n).children(this.options.subjectSelector).each(function(){o.push(u.getElementSubject(this,!0))}),o}return this.parseElementValue(n.html(),n)},writeElementValue:function(e,t,n){n=this.generateElementValue(n,t),r.isArray(n)&&n.length>0&&(n=n[0]);var i=t.attr("content");if(i){t.attr("content",n);return}var s=t.attr("resource");s&&t.attr("resource",n),t.html(n)},xmlns:function(e){var n;if(!e){if(typeof document=="undefined")return{};n=t(document)}else n=t(e);n=n.add(n.parents());var r={};return n.each(function(e,t){if(t.attributes)for(e=0;e<t.attributes.length;e+=1){var n=t.attributes[e];if(/^xmlns(:(.+))?$/.test(n.nodeName)){var i=/^xmlns(:(.+))?$/.exec(n.nodeName)[2]||"",s=n.nodeValue;if(i===""||s!=="")r[i]=n.nodeValue}}}),r}}}(),function(){var e=["http://demo.iks-project.eu/stanbolfull","http://dev.iks-project.eu/stanbolfull"];i.prototype.StanbolService=function(n){var r={name:"stanbol",url:e,timeout:2e4,namespaces:{semdeski:"http://www.semanticdesktop.org/ontologies/2007/01/19/nie#",semdeskf:"http://www.semanticdesktop.org/ontologies/2007/03/22/nfo#",skos:"http://www.w3.org/2004/02/skos/core#",foaf:"http://xmlns.com/foaf/0.1/",opengis:"http://www.opengis.net/gml/",dbpedia:"http://dbpedia.org/ontology/",dbprop:"http://dbpedia.org/property/",owl:"http://www.w3.org/2002/07/owl#",geonames:"http://www.geonames.org/ontology#",enhancer:"http://fise.iks-project.eu/ontology/",entityhub:"http://www.iks-project.eu/ontology/rick/model/",entityhub2:"http://www.iks-project.eu/ontology/rick/query/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",schema:"http://schema.org/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#"},rules:[{left:["?subject a <http://fise.iks-project.eu/ontology/EntityAnnotation>","?subject enhancer:entity-type ?type","?subject enhancer:confidence ?confidence","?subject enhancer:entity-reference ?entity","?subject dcterms:relation ?relation","?relation a <http://fise.iks-project.eu/ontology/TextAnnotation>","?relation enhancer:selected-text ?selected-text","?relation enhancer:selection-context ?selection-context","?relation enhancer:start ?start","?relation enhancer:end ?end"],right:["?entity a ?type","?entity enhancer:hasTextAnnotation ?relation","?entity enhancer:hasEntityAnnotation ?subject"]}],enhancer:{chain:"default"},entityhub:{site:undefined}};this.options=t.extend(!0,r,n?n:{}),this.vie=null,this.name=this.options.name},i.prototype.StanbolService.prototype={init:function(){for(var e in this.options.namespaces){var n=this.options.namespaces[e];this.vie.namespaces.add(e,n)}this.rules=t.extend([],i.Util.transformationRules(this)),this.rules=t.merge(this.rules,this.options.rules?this.options.rules:[]),this.connector=new this.vie.StanbolConnector(this.options),this.vie.types.addOrOverwrite("enhancer:EntityAnnotation",[]).inherit("owl:Thing"),this.vie.types.addOrOverwrite("enhancer:TextAnnotation",[]).inherit("owl:Thing"),this.vie.types.addOrOverwrite("enhancer:Enhancement",[]).inherit("owl:Thing")},analyze:function(e){var n=this,s=e instanceof this.vie.Analyzable;if(!s)throw"Invalid Analyzable passed";var o=e.options.element?e.options.element:t("body"),u=n._extractText(o);if(u.length>0){var a=function(t){r.defer(function(){var r=i.Util.rdf2Entities(n,t);n.vie.entities.addOrUpdate(r),e.resolve(r)})},f=function(t){e.reject(t)},l={chain:e.options.chain?e.options.chain:n.options.enhancer.chain};this.connector.analyze(u,a,f,l)}else e.resolve([])},find:function(e){var t=e instanceof this.vie.Findable;if(!t)throw"Invalid Findable passed";var n=this;e.options.term||e.reject([]);var s=e.options.term,o=typeof e.options.limit=="undefined"?20:e.options.limit,u=typeof e.options.offset=="undefined"?0:e.options.offset,a=function(t){r.defer(function(){var r=i.Util.rdf2Entities(n,t);e.resolve(r)})},f=function(t){e.reject(t)};e.options.site=e.options.site?e.options.site:n.options.entityhub.site;var l=this.vie;if(e.options.properties){var c=e.options.properties;e.options.ldPath=r(c).map(function(e){return l.namespaces.isCurie(e)?l.namespaces.uri(e)+";":e}).join("")}if(e.options.field&&l.namespaces.isCurie(h)){var h=e.options.field;e.options.field=l.namespaces.uri(h)}this.connector.find(s,o,u,a,f,e.options)},load:function(e){var t=e instanceof this.vie.Loadable;if(!t)throw"Invalid Loadable passed";var n=this,s=e.options.entity;s||e.resolve([]);var o=function(t){r.defer(function(){var s=i.Util.rdf2Entities(n,t);r.each(s,function(e){n.vie.entities.addOrUpdate(e)}),e.resolve(s)})},u=function(t){e.reject(t)},a={site:e.options.site?e.options.site:n.options.entityhub.site,local:e.options.local};this.connector.load(s,o,u,a)},save:function(e){var t=e instanceof this.vie.Savable;if(!t)throw"Invalid Savable passed";var n=this,s=e.options.entity;s||e.reject("StanbolConnector: No entity to save!");var o=function(t){r.defer(function(){var r=i.Util.rdf2Entities(n,t);e.resolve(r)})},u=function(t){e.reject(t)},a={site:e.options.site?e.options.site:n.options.entityhub.site,local:e.options.local};this.connector.save(s,o,u,a)},_extractText:function(e){if(e.get(0)&&e.get(0).tagName&&(e.get(0).tagName=="TEXTAREA"||e.get(0).tagName=="INPUT"&&e.attr("type","text")))return e.get(0).val();var n=e.text().replace(/\s+/g," ").replace(/\0\b\n\r\f\t/g,"");return t.trim(n)}},i.prototype.StanbolConnector=function(n){var i={url:e,timeout:2e4,enhancer:{urlPostfix:"/enhancer",chain:"default"},entityhub:{site:undefined,urlPostfix:"/entityhub",local:!1},sparql:{urlPostfix:"/sparql"},contenthub:{urlPostfix:"/contenthub",index:"contenthub"},ontonet:{urlPostfix:"/ontonet"},factstore:{urlPostfix:"/factstore"},rules:{urlPostfix:"/rules"},cmsadapter:{urlPostfix:"/cmsadapter"}};this.options=t.extend(!0,i,n?n:{}),this.options.url=r.isArray(this.options.url)?this.options.url:[this.options.url],this._init(),this.baseUrl=r.isArray(n.url)?n.url:[n.url]},i.prototype.StanbolConnector.prototype={_init:function(){var e=this;return t.ajaxSetup({converters:{"text application/rdf+json":function(e){return JSON.parse(e)}},timeout:e.options.timeout}),this},_iterate:function(e){if(!e)return;if(e.urlIndex>=this.options.url.length){e.error.call(this,"Could not connect to the given Stanbol endpoints! Please check for their setup!");return}var t=function(e,t){return function(){t.urlIndex=t.urlIndex+1,e._iterate(t)}}(this,e);return typeof exports!="undefined"&&typeof process!="undefined"?e.methodNode.call(this,e.url.call(this,e.urlIndex,e.args.options),e.args,e.success,t):e.method.call(this,e.url.call(this,e.urlIndex,e.args.options),e.args,e.success,t)},analyze:function(e,t,n,r){r=r?r:{};var i=this;i._iterate({method:i._analyze,methodNode:i._analyzeNode,url:function(e,t){var n=t.chain?t.chain:this.options.enhancer.chain,r=this.options.url[e].replace(/\/$/,"");return r+=this.options.enhancer.urlPostfix+"/chain/"+n.replace(/\/$/,""),r},args:{text:e,format:r.format||"application/rdf+json",options:r},success:t,error:n,urlIndex:0})},_analyze:function(e,n,r,i){t.ajax({success:r,error:i,url:e,type:"POST",data:n.text,dataType:n.format,contentType:"text/plain",accepts:{"application/rdf+json":"application/rdf+json"}})},_analyzeNode:function(e,t,n,r){var i=require("request"),s=i({method:"POST",uri:e,body:t.text,headers:{Accept:t.format,"Content-Type":"text/plain"}},function(e,t,i){try{n({results:JSON.parse(i)})}catch(s){r(s)}});s.end()},load:function(e,t,n,r){var i=this;r=r?r:{},r.uri=e.replace(/^</,"").replace(/>$/,""),i._iterate({method:i._load,methodNode:i._loadNode,success:t,error:n,url:function(e,t){var n=t.site?t.site:this.options.entityhub.site;n=n?"/"+n:"s";var r=t.local,i=this.options.url[e].replace(/\/$/,"")+this.options.entityhub.urlPostfix;return r?i+="/entity?id="+encodeURIComponent(t.uri):i+="/site"+n+"/entity?id="+encodeURIComponent(t.uri),i},args:{format:r.format||"application/rdf+json",options:r},urlIndex:0})},_load:function(e,n,r,i){t.ajax({success:r,error:i,url:e,type:"GET",dataType:n.format,contentType:"text/plain",accepts:{"application/rdf+json":"application/rdf+json"}})},_loadNode:function(e,t,n,r){var i=require("request"),s=i({method:"GET",uri:e,body:t.text,headers:{Accept:t.format}},function(e,t,i){try{n({results:JSON.parse(i)})}catch(s){r(s)}});s.end()},find:function(e,t,n,r,i,s){s=s?s:{};var o=this;if(!e||e===""){i("No term given!");return}n=n?n:0,t=t?t:10,o._iterate({method:o._find,methodNode:o._findNode,success:r,error:i,url:function(e,t){var n=t.site?t.site:this.options.entityhub.site;n=n?"/"+n:"s";var r=t.local,i=this.options.url[e].replace(/\/$/,"")+this.options.entityhub.urlPostfix;return r?i+="/sites/find":i+="/site"+n+"/find",i},args:{term:e,offset:n,limit:t,format:s.format||"application/rdf+json",options:s},urlIndex:0})},_find:function(e,n,r,i){var s={name:n.term,limit:n.limit,offset:n.offset};t.ajax({success:r,error:i,url:e,type:"POST",data:t.param(s),dataType:n.format,contentType:"application/x-www-form-urlencoded",accepts:{"application/rdf+json":"application/rdf+json"}})},_findNode:function(e,t,n,r){var i=require("request"),s=i({method:"POST",uri:e,body:"name="+t.term+"&limit="+t.limit+"&offset="+t.offset,headers:{Accept:t.format}},function(e,t,i){try{n({results:JSON.parse(i)})}catch(s){r(s)}});s.end()},lookup:function(e,t,n,r){r=r?r:{};var i=this;e=e.replace(/^</,"").replace(/>$/,""),r.uri=e,r.create=r.create?r.create:!1,i._iterate({method:i._lookup,methodNode:i._lookupNode,success:t,error:n,url:function(e,t){var n=this.options.url[e].replace(/\/$/,"")+this.options.entityhub.urlPostfix;return n+="/lookup?id="+encodeURIComponent(t.uri)+"&create="+t.create,n},args:{format:r.format||"application/rdf+json",options:r},urlIndex:0})},_lookup:function(e,n,r,i){t.ajax({success:r,error:i,url:e,type:"GET",dataType:n.format,contentType:"text/plain",accepts:{"application/rdf+json":"application/rdf+json"}})},_lookupNode:function(e,t,n,r){var i=require("request"),s=i({method:"GET",uri:e,body:t.text,headers:{Accept:t.format}},function(e,t,i){try{n({results:JSON.parse(i)})}catch(s){r(s)}});s.end()},referenced:function(e,t,n){n=n?n:{};var i=this,s=function(t){r.isArray(t)||(t=JSON.parse(t));var n=[];for(var i=0,s=t.length;i<s;i++)n.push(t[i].replace(/.+\/(.+?)\/?$/,"$1"));return e(n)};i._iterate({method:i._referenced,methodNode:i._referencedNode,success:s,error:t,url:function(e,t){var n=this.options.url[e].replace(/\/$/,"");return n+=this.options.entityhub.urlPostfix+"/sites/referenced",n},args:{options:n},urlIndex:0})},_referenced:function(e,n,r,i){t.ajax({success:r,error:i,url:e,type:"GET",accepts:{"application/rdf+json":"application/rdf+json"}})},_referencedNode:function(e,t,n,r){var i=require("request"),s=i({method:"GET",uri:e,headers:{Accept:t.format}},function(e,t,i){try{n({results:JSON.parse(i)})}catch(s){r(s)}});s.end()},sparql:function(e,t,n,r){r=r?r:{};var i=this;i._iterate({method:i._sparql,methodNode:i._sparqlNode,success:t,error:n,url:function(e,t){var n=this.options.url[e].replace(/\/$/,"");return n+=this.options.sparql.urlPostfix.replace(/\/$/,""),n},args:{query:e,options:r},urlIndex:0})},_sparql:function(e,n,r,i){t.ajax({success:r,error:i,url:e,type:"POST",data:"query="+n.query,contentType:"application/x-www-form-urlencoded"})},_sparqlNode:function(e,t,n,r){var i=require("request"),s=i({method:"POST",uri:e,body:JSON.stringify({query:t.query}),headers:{Accept:t.format}},function(e,t,i){try{n({results:JSON.parse(i)})}catch(s){r(s)}});s.end()},ldpath:function(e,t,n,i,s){s=s?s:{};var o=this;t=r.isArray(t)?t:[t];var u="";for(var a=0;a<t.length;a++)u+="&context="+t[a];o._iterate({method:o._ldpath,methodNode:o._ldpathNode,success:n,error:i,url:function(e,t){var n=t.site?t.site:this.options.entityhub.site;n=n?"/"+n:"s";var r=t.local,i=this.options.url[e].replace(/\/$/,"")+this.options.entityhub.urlPostfix;return r||(i+="/site"+n),i+="/ldpath",i},args:{ldpath:e,context:u,format:s.format||"application/rdf+json",options:s},urlIndex:0})},_ldpath:function(e,n,r,i){t.ajax({success:r,error:i,url:e,type:"POST",data:"ldpath="+n.ldpath+n.context,contentType:"application/x-www-form-urlencoded",dataType:n.format,accepts:{"application/rdf+json":"application/rdf+json"}})},_ldpathNode:function(e,t,n,r){var i=require("request"),s=i({method:"POST",uri:e,body:"ldpath="+t.ldpath+t.context,headers:{Accept:t.format}},function(e,t,i){try{n({results:JSON.parse(i)})}catch(s){r(s)}});s.end()},uploadContent:function(e,t,n,r){r=r?r:{};var i=this;i._iterate({method:i._uploadContent,methodNode:i._uploadContentNode,success:t,error:n,url:function(e,t){var n=this.options.url[e].replace(/\/$/,"");n+=this.options.contenthub.urlPostfix.replace(/\/$/,"");var r=t.index?t.index:this.options.contenthub.index;return n+="/"+r.replace(/\/$/,""),n+="/store",n},args:{content:e,options:r},urlIndex:0})},_uploadContent:function(e,n,r,i){t.ajax({success:r,error:i,url:e,type:"POST",data:n.content,contentType:"text/plain"})},_uploadContentNode:function(e,t,n,r){var i=require("request"),s=i({method:"POST",uri:e,body:t.content,headers:{Accept:"application/rdf+xml","Content-Type":"text/plain"}},function(e,t,i){try{n({results:JSON.parse(i)})}catch(s){r(s)}});s.end()},createFactSchema:function(e,t,n,r,i){i=i?i:{};var s=this;i.url=e,s._iterate({method:s._createFactSchema,methodNode:s._createFactSchemaNode,success:n,error:r,url:function(e,t){var n=this.options.url[e].replace(/\/$/,"");return n+=this.options.factstore.urlPostfix.replace(/\/$/,""),n+="/facts/"+encodeURIComponent(t.url),n},args:{url:e,schema:t,options:i},urlIndex:0})},_createFactSchema:function(e,n,r,i){t.ajax({success:r,error:i,url:e,type:"PUT",data:n.schema,contentType:"application/json",dataType:"application/json"})},_createFactSchemaNode:function(e,t,n,r){var i=require("request"),s=i({method:"PUT",uri:e,body:t.schema,headers:{Accept:"application/json","Content-Type":"application/json"}},function(e,t,i){try{n({results:JSON.parse(i)})}catch(s){r(s)}});s.end()},createFact:function(e,t,n,r){r=r?r:{};var i=this;i._iterate({method:i._createFact,methodNode:i._createFactNode,success:t,error:n,url:function(e,t){var n=this.options.url[e].replace(/\/$/,"");return n+=this.options.factstore.urlPostfix.replace(/\/$/,""),n+="/facts",n},args:{fact:e,options:r},urlIndex:0})},_createFact:function(e,n,r,i){t.ajax({success:r,error:i,url:e,type:"POST",data:n.fact,contentType:"application/json",dataType:"application/json"})},_createFactNode:function(e,t,n,r){var i=require("request"),s=i({method:"POST",uri:e,body:t.fact,headers:{Accept:"application/json","Content-Type":"application/json"}},function(e,t,i){try{n({results:JSON.parse(i)})}catch(s){r(s)}});s.end()},queryFact:function(e,t,n,r){r=r?r:{};var i=this;i._iterate({method:i._queryFact,methodNode:i._queryFactNode,success:t,error:n,url:function(e,t){var n=this.options.url[e].replace(/\/$/,"");return n+=this.options.factstore.urlPostfix.replace(/\/$/,""),n+="/query",n},args:{query:e,options:r},urlIndex:0})},_queryFact:function(e,n,r,i){t.ajax({success:r,error:i,url:e,type:"POST",data:n.query,contentType:"application/json",dataType:"application/json"})},_queryFactNode:function(e,t,n,r){var i=require("request"),s=i({method:"POST",uri:e,body:t.query,headers:{Accept:"application/json","Content-Type":"application/json"}},function(e,t,i){try{n({results:JSON.parse(i)})}catch(s){r(s)}});s.end()}}}(),function(){i.prototype.ZemantaService=function(e){var n={name:"zemanta",url:["http://api.zemanta.com/services/rest/0.0/"],timeout:2e4,namespaces:{zemanta:"http://s.zemanta.com/ns#"},rules:[{left:["?subject a zemanta:Recognition","?subject zemanta:object ?object","?object owl:sameAs ?entity"],right:["?entity zemanta:hasEntityAnnotation ?subject"]}],api_key:undefined};this.options=t.extend(!0,n,e?e:{}),this.vie=null,this.name=this.options.name,t.ajaxSetup({converters:{"text application/rdf+json":function(e){return JSON.parse(e)}},timeout:this.options.timeout})},i.prototype.ZemantaService.prototype={init:function(){for(var e in this.options.namespaces){var n=this.options.namespaces[e];this.vie.namespaces.add(e,n)}this.rules=t.extend([],i.Util.transformationRules(this)),this.rules=t.merge(this.rules,this.options.rules?this.options.rules:[]),this.connector=new this.vie.ZemantaConnector(this.options),this.vie.types.addOrOverwrite("zemanta:Recognition",[]).inherit("owl:Thing")},analyze:function(e){var n=this,s=e instanceof this.vie.Analyzable;if(!s)throw"Invalid Analyzable passed";var o=e.options.element?e.options.element:t("body"),u=n._extractText(o);if(u.length>0){var a=function(t){r.defer(function(){var r=i.Util.rdf2Entities(n,t);e.resolve(r)})},f=function(t){e.reject(t)},l={};this.connector.analyze(u,a,f,l)}else e.resolve([])},_extractText:function(e){return t(e).wrap("<div>").parent().html()}},i.prototype.ZemantaConnector=function(e){var n={url:["http://api.zemanta.com/services/rest/0.0/"],timeout:2e4,api_key:undefined};this.options=t.extend(!0,n,e?e:{}),this.options.url=r.isArray(this.options.url)?this.options.url:[this.options.url],this._init(),this.baseUrl=r.isArray(e.url)?e.url:[e.url]},i.prototype.ZemantaConnector.prototype={_init:function(){var e=this;return t.ajaxSetup({converters:{"text application/rdf+json":function(e){return JSON.parse(e)}},timeout:e.options.timeout}),this},_iterate:function(e){if(!e)return;if(e.urlIndex>=this.options.url.length){e.error.call(this,"Could not connect to the given Zemanta endpoints! Please check for their setup!");return}var t=function(e,t){return function(){t.urlIndex=t.urlIndex+1,e._iterate(t)}}(this,e);return typeof exports!="undefined"&&typeof process!="undefined"?e.methodNode.call(this,e.url.call(this,e.urlIndex,e.args.options),e.args,e.success,t):e.method.call(this,e.url.call(this,e.urlIndex,e.args.options),e.args,e.success,t)},analyze:function(e,t,n,r){r=r?r:{};var i=this;i._iterate({method:i._analyze,methodNode:i._analyzeNode,success:t,error:n,url:function(e,t){var n=this.options.url[e].replace(/\/$/,"");return n},args:{text:e,format:r.format||"rdfxml",options:r},urlIndex:0})},_analyze:function(e,n,r,i){t.ajax({success:function(e,t,n){var i=n.responseText.replace(/<z:signature>.*?<\/z:signature>/,"");r(i)},error:i,url:e,type:"POST",dataType:"xml",data:{method:"zemanta.suggest",text:n.text,format:n.format,api_key:this.options.api_key,return_rdf_links:n.options.return_rdf_links},contentType:"text/plain",accepts:{"application/rdf+json":"application/rdf+json"}})},_analyzeNode:function(e,t,n,r){var i=require("request"),s=i({method:"POST",uri:e,body:t.text,headers:{Accept:t.format,"Content-Type":"text/plain"}},function(e,t,i){try{n({results:JSON.parse(i)})}catch(s){r(s)}});s.end()}}}(),i.prototype.view||(i.prototype.view={}),i.prototype.view.Collection=n.View.extend({initialize:function(){this.templates=this.options.templates,this.service=this.options.service;if(!this.service)throw"No RDFa service provided to the Collection View";this.owner=this.options.owner,this.definition=this.options.definition,this.entityViews={},this.listenTo(this.collection,"add",this.addItem),this.listenTo(this.collection,"remove",this.removeItem),this.listenTo(this.collection,"reset",this.refreshItems),this.collection.each(function(e){this.registerItem(e,this.collection)},this)},canAdd:function(e){return r.isEmpty(this.templates)?!1:e&&!this.templates[e]?!1:this.collection.canAdd(e)},addItem:function(e,t){if(t!==this.collection)return;var n=e.get("@type"),i;r.isArray(n)?r.each(n,function(e){this.canAdd(e.id)&&(i=e.id)},this):this.canAdd(n.id)&&(i=n.id);if(!i)return;var s=this;this.templates[i](e,function(n){var r=s.service._registerEntityView(e,n,!0),i=r.render().$el;e.id&&s.service.setElementSubject(e.getSubjectUri(),i);var o=t.indexOf(e);if(o===0)s.$el.prepend(i);else{var u=t.at(o-1),a=s.entityViews[u.cid];a?a.$el.after(i):s.$el.append(i)}s.findReverseRelations(e,i),s.trigger("add",r),s.entityViews[e.cid]=r,i.show()},this)},findReverseRelations:function(e,n){var r=this.service;n.parent("[rev]").each(function(){var n=t(this).attr("rev"),i={};i[n]=new r.vie.Collection([],{vie:r.vie,predicate:n});var s=r.vie.entities.get(r.getElementSubject(this));s&&i[n].addOrUpdate(s),e.set(i)})},registerItem:function(e,t){var n=this.service.getElementBySubject(e.id,this.el);if(!n)return;var r=this.service._registerEntityView(e,n);this.entityViews[e.cid]=r},removeItem:function(e){if(!this.entityViews[e.cid])return;this.trigger("remove",this.entityViews[e.cid]),t(this.entityViews[e.cid].el).remove(),delete this.entityViews[e.cid]},refreshItems:function(e){r.each(this.entityViews,function(e,n){t(e.el).remove()}),this.entityViews={},e.forEach(function(t){this.addItem(t,e)},this)}}),i.prototype.view||(i.prototype.view={}),i.prototype.view.Entity=n.View.extend({initialize:function(e){this.service=e.service?e.service:"rdfa",this.vie=e.vie,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"change:@subject",this.renderAbout)},render:function(){return this.vie.save({element:this.el,entity:this.model}).to(this.service).execute(),this},renderAbout:function(){this.vie.service(this.service).setElementSubject(this.model.getSubjectUri(),this.el)}});var e=this;(function(t){e.XDomainRequest&&t.ajaxTransport(function(e){if(e.crossDomain&&e.async){e.timeout&&(e.xdrTimeout=e.timeout,delete e.timeout);var n;return{send:function(r,i){function o(e,r,s,o){n.onload=n.onerror=n.ontimeout=t.noop,n=undefined,i(e,r,s,o)}n=new XDomainRequest;if(e.dataType){var u="header_Accept="+encodeURIComponent(e.dataType)+"&header_Content-Type=text/plain";e.url=e.url+(e.url.indexOf("?")===-1?"?":"&")+u}n.open(e.type,e.url),n.onload=function(e,t){o(200,"OK",{text:n.responseText},"Content-Type: "+n.contentType)},n.onerror=function(e){o(404,"Not Found")},e.xdrTimeout&&(n.ontimeout=function(){o(0,"timeout")},n.timeout=e.xdrTimeout),n.send(e.hasContent&&e.data||null)},abort:function(){n&&(n.onerror=t.noop(),n.abort())}}}})})(t)}(),define("Library/vie/vie",function(){}),define("vie",["jquery","jquery-ui","underscorejs","backbone","Library/vie/lib/rdfquery/latest/jquery.rdfquery.min","Library/vie/vie"],function(){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("vie")}),function(){(function(e){return e.widget("IKS.hallo",{toolbar:null,bound:!1,originalContent:"",previousContent:"",uuid:"",selection:null,_keepActivated:!1,originalHref:null,options:{editable:!0,plugins:{},toolbar:"halloToolbarContextual",parentElement:"body",buttonCssClass:null,toolbarCssClass:null,toolbarPositionAbove:!1,toolbarOptions:{},placeholder:"",forceStructured:!0,checkTouch:!0,touchScreen:null},_create:function(){var t,n,r,i=this;this.id=this._generateUUID(),this.options.checkTouch&&this.options.touchScreen===null&&this.checkTouch(),r=this.options.plugins;for(n in r)t=r[n],e.isPlainObject(t)||(t={}),e.extend(t,{editable:this,uuid:this.id,buttonCssClass:this.options.buttonCssClass}),e(this.element)[n](t);return this.element.one("halloactivated",function(){return i._prepareToolbar()}),this.originalContent=this.getContents()},_init:function(){return this.options.editable?this.enable():this.disable()},destroy:function(){var t,n,r;this.disable(),this.toolbar&&(this.toolbar.remove(),this.element[this.options.toolbar]("destroy")),r=this.options.plugins;for(n in r)t=r[n],e(this.element)[n]("destroy");return e.Widget.prototype.destroy.call(this)},disable:function(){var t=this;return this.element.attr("contentEditable",!1),this.element.off("focus",this._activated),this.element.off("blur",this._deactivated),this.element.off("keyup paste change",this._checkModified),this.element.off("keyup",this._keys),this.element.off("keyup mouseup",this._checkSelection),this.bound=!1,e(this.element).removeClass("isModified"),e(this.element).removeClass("inEditMode"),this.element.parents("a").addBack().each(function(n,r){var i;i=e(r);if(!i.is("a"))return;if(!t.originalHref)return;return i.attr("href",t.originalHref)}),this._trigger("disabled",null)},enable:function(){var t=this;return this.element.parents("a[href]").addBack().each(function(n,r){var i;i=e(r);if(!i.is("a[href]"))return;return t.originalHref=i.attr("href"),i.removeAttr("href")}),this.element.attr("contentEditable",!0),e.parseHTML(this.element.html())||(this.element.html(this.options.placeholder),this.element.css({"min-width":this.element.innerWidth(),"min-height":this.element.innerHeight()})),this.bound||(this.element.on("focus",this,this._activated),this.element.on("blur",this,this._deactivated),this.element.on("keyup paste change",this,this._checkModified),this.element.on("keyup",this,this._keys),this.element.on("keyup mouseup",this,this._checkSelection),this.bound=!0),this.options.forceStructured&&this._forceStructured(),this._trigger("enabled",null)},activate:function(){return this.element.focus()},containsSelection:function(){var e;return e=this.getSelection(),this.element.has(e.startContainer).length>0},getSelection:function(){var e,t;return t=rangy.getSelection(),e=null,t.rangeCount>0?e=t.getRangeAt(0):e=rangy.createRange(),e},restoreSelection:function(e){var t;return t=rangy.getSelection(),t.setSingleRange(e)},replaceSelection:function(e){var t,n,r,i,s;return navigator.appName==="Microsoft Internet Explorer"?(s=document.selection.createRange().text,n=document.selection.createRange(),n.pasteHTML(e(s))):(i=window.getSelection(),r=i.getRangeAt(0),t=document.createTextNode(e(r.extractContents())),r.insertNode(t),r.setStartAfter(t),i.removeAllRanges(),i.addRange(r))},removeAllSelections:function(){return navigator.appName==="Microsoft Internet Explorer"?range.empty():window.getSelection().removeAllRanges()},getPluginInstance:function(t){var n;return n=e(this.element).data("IKS-"+t),n?n:e(this.element).data(t)},getContents:function(){var t,n;for(n in this.options.plugins){t=this.getPluginInstance(n).cleanupContentClone;if(!e.isFunction(t))continue;e(this.element)[n]("cleanupContentClone",this.element)}return this.element.html()},setContents:function(e){return this.element.html(e)},isModified:function(){return this.previousContent||(this.previousContent=this.originalContent),this.previousContent!==this.getContents()},setUnmodified:function(){return e(this.element).removeClass("isModified"),this.previousContent=this.getContents()},setModified:function(){return e(this.element).addClass("isModified"),this._trigger("modified",null,{editable:this,content:this.getContents()})},restoreOriginalContent:function(){return this.element.html(this.originalContent)},execute:function(e,t){if(document.execCommand(e,!1,t))return this.element.trigger("change")},protectFocusFrom:function(e){var t=this;return e.on("mousedown",function(e){return e.preventDefault(),t._protectToolbarFocus=!0,setTimeout(function(){return t._protectToolbarFocus=!1},300)})},keepActivated:function(e){this._keepActivated=e},_generateUUID:function(){var e;return e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)},""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},_prepareToolbar:function(){var t,n,r,i;this.toolbar=e('<div class="hallotoolbar"></div>').hide(),this.options.toolbarCssClass&&this.toolbar.addClass(this.options.toolbarCssClass),t={editable:this,parentElement:this.options.parentElement,toolbar:this.toolbar,positionAbove:this.options.toolbarPositionAbove},i=e.extend({},t,this.options.toolbarOptions),this.element[this.options.toolbar](i);for(n in this.options.plugins){r=this.getPluginInstance(n).populateToolbar;if(!e.isFunction(r))continue;this.element[n]("populateToolbar",this.toolbar)}return this.element[this.options.toolbar]("setPosition"),this.protectFocusFrom(this.toolbar)},changeToolbar:function(e,t,n){var r;n==null&&(n=!1),r=this.options.toolbar,this.options.parentElement=e,t&&(this.options.toolbar=t);if(!this.toolbar)return;this.element[r]("destroy"),this.toolbar.remove(),this._prepareToolbar();if(n)return this.toolbar.hide()},_checkModified:function(e){var t;t=e.data;if(t.isModified())return t.setModified()},_keys:function(e){var t,n;n=e.data;if(e.keyCode===27)return t=n.getContents(),n.restoreOriginalContent(e),n._trigger("restored",null,{editable:n,content:n.getContents(),thrown:t}),n.turnOff()},_rangesEqual:function(e,t){return e.startContainer!==t.startContainer?!1:e.startOffset!==t.startOffset?!1:e.endContainer!==t.endContainer?!1:e.endOffset!==t.endOffset?!1:!0},_checkSelection:function(e){var t;if(e.keyCode===27)return;return t=e.data,setTimeout(function(){var n;n=t.getSelection();if(t._isEmptySelection(n)||t._isEmptyRange(n)){t.selection&&(t.selection=null,t._trigger("unselected",null,{editable:t,originalEvent:e}));return}if(!t.selection||!t._rangesEqual(n,t.selection))return t.selection=n.cloneRange(),t._trigger("selected",null,{editable:t,selection:t.selection,ranges:[t.selection],originalEvent:e})},0)},_isEmptySelection:function(e){return e.type==="Caret"?!0:!1},_isEmptyRange:function(e){return e.collapsed?!0:e.isCollapsed?typeof e.isCollapsed=="function"?e.isCollapsed():e.isCollapsed:!1},turnOn:function(){return this.getContents()===this.options.placeholder&&this.setContents(""),e(this.element).addClass("inEditMode"),this._trigger("activated",null,this)},turnOff:function(){e(this.element).removeClass("inEditMode"),this._trigger("deactivated",null,this);if(!this.getContents())return this.setContents(this.options.placeholder)},_activated:function(e){return e.data.turnOn()},_deactivated:function(t){if(t.data._keepActivated)return;return t.data._protectToolbarFocus!==!0?t.data.turnOff():setTimeout(function(){return e(t.data.element).focus()},300)},_forceStructured:function(e){var t;try{return document.execCommand("styleWithCSS",0,!1)}catch(n){t=n;try{return document.execCommand("useCSS",0,!0)}catch(n){t=n;try{return document.execCommand("styleWithCSS",!1,!1)}catch(n){t=n}}}},checkTouch:function(){return this.options.touchScreen="createTouch"in document}})})(jQuery)}.call(this),function(){(function(e){var t;return t=null,this.VIE!==void 0&&(t=new VIE,t.use(new t.StanbolService({proxyDisabled:!0,url:"http://dev.iks-project.eu:8081"}))),e.widget("IKS.halloannotate",{options:{vie:t,editable:null,toolbar:null,uuid:"",select:function(){},decline:function(){},remove:function(){},buttonCssClass:null},_create:function(){var t,n,r;r=this;if(this.options.vie===void 0)throw new Error("The halloannotate plugin requires VIE");if(typeof this.element.annotate!="function")throw new Error("The halloannotate plugin requires annotate.js");return this.state="off",this.instantiate(),n=function(){var t;return t=this,e(t).halloannotate("turnOff")},t=this.options.editable.element,t.on("hallodisabled",n)},populateToolbar:function(t){var n,r=this;return n=e('<span class="'+this.widgetName+'"></span>'),this.button=n.hallobutton({label:"Annotate",icon:"icon-tags",editable:this.options.editable,command:null,uuid:this.options.uuid,cssClass:this.options.buttonCssClass,queryState:!1}),n.on("change",function(e){if(r.state==="pending")return;return r.state==="off"?r.turnOn():r.turnOff()}),n.buttonset(),t.append(this.button)},cleanupContentClone:function(t){if(this.state==="on")return t.find(".entity:not([about])").each(function(){return e(this).replaceWith(e(this).html())})},instantiate:function(){var t;return t=this,this.options.editable.element.annotate({vie:this.options.vie,debug:!1,showTooltip:!0,select:this.options.select,remove:this.options.remove,success:this.options.success,error:this.options.error}).on("annotateselect",function(e,n){return t.options.editable.setModified()}).on("annotateremove",function(){return e.noop()})},turnPending:function(){return this.state="pending",this.button.hallobutton("checked",!1),this.button.hallobutton("disable")},turnOn:function(){var e,t,n=this;this.turnPending(),t=this;try{return this.options.editable.element.annotate("enable",function(e){if(!e)return;return n.state="on",n.button.hallobutton("checked",!0),n.button.hallobutton("enable")})}catch(r){return e=r,alert(e)}},turnOff:function(){this.options.editable.element.annotate("disable"),this.state="off";if(!this.button)return;return this.button.attr("checked",!1),this.button.find("label").removeClass("ui-state-clicked"),this.button.button("refresh")}})})(jQuery)}.call(this),function(){(function(e){return e.widget("IKS.halloblacklist",{options:{tags:[]},_init:function(){if(this.options.tags.indexOf("br")!==-1)return this.element.on("keydown",function(e){if(e.originalEvent.keyCode===13)return e.preventDefault()})},cleanupContentClone:function(t){var n,r,i,s,o;s=this.options.tags,o=[];for(r=0,i=s.length;r<i;r++)n=s[r],o.push(e(n,t).remove());return o}})})(jQuery)}.call(this),function(){(function(e){return e.widget("IKS.halloblock",{options:{editable:null,toolbar:null,uuid:"",elements:["h1","h2","h3","p","pre","blockquote"],buttonCssClass:null},populateToolbar:function(t){var n,r,i;return n=e('<span class="'+this.widgetName+'"></span>'),r=""+this.options.uuid+"-"+this.widgetName+"-data",i=this._prepareDropdown(r),t.append(n),n.hallobuttonset(),n.append(i),n.append(this._prepareButton(i))},_prepareDropdown:function(t){var n,r,i,s,o,u,a,f=this;i=e('<div id="'+t+'"></div>'),r=this.options.editable.element.get(0).tagName.toLowerCase(),n=function(t){var n,i,s;return n=e("<button class='blockselector'>          <"+t+' class="menu-item">'+t+"</"+t+">        </button>"),r===t&&n.addClass("selected"),r!=="div"&&n.addClass("disabled"),n.on("click",function(){var e;e=t.toUpperCase();if(n.hasClass("disabled"))return;if(navigator.appName==="Microsoft Internet Explorer"){f.options.editable.execute("FormatBlock","<"+e+">");return}return f.options.editable.execute("formatBlock",e)}),s=function(e){var r;r=document.queryCommandValue("formatBlock");if(r.toLowerCase()===t){n.addClass("selected");return}return n.removeClass("selected")},i="keyup paste change mouseup",f.options.editable.element.on(i,s),f.options.editable.element.on("halloenabled",function(){return f.options.editable.element.on(i,s)}),f.options.editable.element.on("hallodisabled",function(){return f.options.editable.element.off(i,s)}),n},a=this.options.elements;for(o=0,u=a.length;o<u;o++)s=a[o],i.append(n(s));return i},_prepareButton:function(t){var n;return n=e("<span></span>"),n.hallodropdownbutton({uuid:this.options.uuid,editable:this.options.editable,label:"block",icon:"icon-text-height",target:t,cssClass:this.options.buttonCssClass}),n}})})(jQuery)}.call(this),function(){(function(e){var t;return t="The hallocleanhtml plugin requires the selection save and    restore module from Rangy",e.widget("IKS.hallocleanhtml",{_create:function(){var n,r=this;if(e.htmlClean===void 0)throw new Error("The hallocleanhtml plugin requires jQuery.htmlClean");return n=this.element,n.bind("paste",this,function(i){var s,o,u;if(rangy.saveSelection===void 0)throw new Error(t);return u=i.data,u.options.editable.getSelection().deleteContents(),o=rangy.saveSelection(),s=n.html(),n.html(""),setTimeout(function(){var t,i,a,f;a=n.html(),t=e.htmlClean(a,r.options),n.html(s),rangy.restoreSelection(o);if(t!=="")try{return document.execCommand("insertHTML",!1,t)}catch(l){return i=l,f=u.options.editable.getSelection(),f.insertNode(f.createContextualFragment(t))}},4)})}})})(jQuery)}.call(this),function(){(function(e){return e.widget("IKS.halloformat",{options:{editable:null,uuid:"",formattings:{bold:!0,italic:!0,strikeThrough:!1,underline:!1},buttonCssClass:null},populateToolbar:function(t){var n,r,i,s,o,u,a=this;o=this,r=e('<span class="'+o.widgetName+'"></span>'),n=function(t){var n;return n=e("<span></span>"),n.hallobutton({label:t,editable:a.options.editable,command:t,uuid:a.options.uuid,cssClass:a.options.buttonCssClass}),r.append(n)},u=this.options.formattings;for(s in u){i=u[s];if(!i)continue;n(s)}return r.hallobuttonset(),t.append(r)}})})(jQuery)}.call(this),function(){(function(e){return e.widget("IKS.halloheadings",{options:{editable:null,uuid:"",formatBlocks:["p","h1","h2","h3"],buttonCssClass:null},populateToolbar:function(t){var n,r,i,s,o,u,a,f,l,c=this;u=this,r=e('<span class="'+u.widgetName+'"></span>'),o=navigator.appName==="Microsoft Internet Explorer",i=o?"FormatBlock":"formatBlock",n=function(t){var n;return n=e("<span></span>"),n.hallobutton({label:t,editable:c.options.editable,command:i,commandValue:o?"<"+t+">":t,uuid:c.options.uuid,cssClass:c.options.buttonCssClass,queryState:function(e){var r,s,u,a,f,l,c,h,p;try{l=document.queryCommandValue(i);if(o){u={p:"normal"},p=[1,2,3,4,5,6];for(c=0,h=p.length;c<h;c++)f=p[c],u["h"+f]=f;r=l.match(new RegExp(u[t],"i"))}else r=l.match(new RegExp(t,"i"));return a=r?!0:!1,n.hallobutton("checked",a)}catch(d){s=d}}}),n.find("button .ui-button-text").text(t.toUpperCase()),r.append(n)},l=this.options.formatBlocks;for(a=0,f=l.length;a<f;a++)s=l[a],n(s);return r.hallobuttonset(),t.append(r)}})})(jQuery)}.call(this),function(){(function(e){return e.widget("IKS.hallohtml",{options:{editable:null,toolbar:null,uuid:"",lang:"en",dialogOpts:{autoOpen:!1,width:600,height:"auto",modal:!1,resizable:!0,draggable:!0,dialogClass:"htmledit-dialog"},dialog:null,buttonCssClass:null},translations:{en:{title:"Edit HTML",update:"Update"},de:{title:"HTML bearbeiten",update:"Aktualisieren"}},texts:null,populateToolbar:function(t){var n,r,i,s,o;return o=this,this.texts=this.translations[this.options.lang],this.options.toolbar=t,s=""+this.options.uuid+"-htmledit-dialog",this.options.dialog=e("<div>").attr("id",s),r=e("<span>").addClass(o.widgetName),i=""+this.options.uuid+"-htmledit",n=e("<span>"),n.hallobutton({label:this.texts.title,icon:"icon-list-alt",editable:this.options.editable,command:null,queryState:!1,uuid:this.options.uuid,cssClass:this.options.buttonCssClass}),r.append(n),this.button=n,this.button.click(function(){return o.options.dialog.dialog("isOpen")?o._closeDialog():o._openDialog(),!1}),this.options.editable.element.on("hallodeactivated",function(){return o._closeDialog()}),t.append(r),this.options.dialog.dialog(this.options.dialogOpts),this.options.dialog.dialog("option","title",this.texts.title)},_openDialog:function(){var t,n,r,i,s,o=this;return r=this,t=e(this.options.editable.element),i=t.offset().left+t.outerWidth()+10,s=this.options.toolbar.offset().top-e(document).scrollTop(),this.options.dialog.dialog("option","position",[i,s]),this.options.editable.keepActivated(!0),this.options.dialog.dialog("open"),this.options.dialog.on("dialogclose",function(){return e("label",o.button).removeClass("ui-state-active"),o.options.editable.element.focus(),o.options.editable.keepActivated(!1)}),this.options.dialog.html(e("<textarea>").addClass("html_source")),n=this.options.editable.element.html(),this.options.dialog.children(".html_source").val(n),this.options.dialog.prepend(e("<button>"+this.texts.update+"</button>")),this.options.dialog.on("click","button",function(){return n=r.options.dialog.children(".html_source").val(),r.options.editable.element.html(n),r.options.editable.element.trigger("change"),!1})},_closeDialog:function(){return this.options.dialog.dialog("close")}})})(jQuery)}.call(this),function(){(function(e){return e.widget("IKS.halloimage",{options:{editable:null,toolbar:null,uuid:"",limit:8,search:null,searchUrl:null,suggestions:null,loaded:null,upload:null,uploadUrl:null,dialogOpts:{autoOpen:!1,width:270,height:"auto",title:"Insert Images",modal:!1,resizable:!1,draggable:!0,dialogClass:"halloimage-dialog"},dialog:null,buttonCssClass:null,entity:null,vie:null,dbPediaUrl:"http://dev.iks-project.eu/stanbolfull",maxWidth:250,maxHeight:250},populateToolbar:function(t){var n,r,i,s,o,u,a;return this.options.toolbar=t,a=this,i=""+this.options.uuid+"-image-dialog",this.options.dialog=e('<div id="'+i+'">        <div class="nav">          <ul class="tabs">          </ul>          <div id="'+this.options.uuid+'-tab-activeIndicator"            class="tab-activeIndicator" />        </div>        <div class="dialogcontent">        </div>'),u=e(".tabs",this.options.dialog),o=e(".dialogcontent",this.options.dialog),a.options.suggestions&&this._addGuiTabSuggestions(u,o),(a.options.search||a.options.searchUrl)&&this._addGuiTabSearch(u,o),(a.options.upload||a.options.uploadUrl)&&this._addGuiTabUpload(u,o),this.current=e('<div class="currentImage"></div>').halloimagecurrent({uuid:this.options.uuid,imageWidget:this,editable:this.options.editable,dialog:this.options.dialog,maxWidth:this.options.maxWidth,maxHeight:this.options.maxHeight}),e(".dialogcontent",this.options.dialog).append(this.current),r=e('<span class="'+a.widgetName+'"></span>'),s=""+this.options.uuid+"-image",n=e("<span></span>"),n.hallobutton({label:"Images",icon:"icon-picture",editable:this.options.editable,command:null,queryState:!1,uuid:this.options.uuid,cssClass:this.options.buttonCssClass}),r.append(n),this.button=n,this.button.on("click",function(e){return a.options.dialog.dialog("isOpen")?a._closeDialog():a._openDialog(),!1}),this.options.editable.element.on("hallodeactivated",function(e){return a._closeDialog()}),e(this.options.editable.element).delegate("img","click",function(e){return a._openDialog()}),t.append(r),this.options.dialog.dialog(this.options.dialogOpts),this._handleTabs()},setCurrent:function(e){return this.current.halloimagecurrent("setImage",e)},_handleTabs:function(){var t;return t=this,e(".nav li",this.options.dialog).on("click",function(){var n,r;return e("."+t.widgetName+"-tab").hide(),n=e(this).attr("id"),e("#"+n+"-content").show(),r=e(this).position().left+e(this).width()/2,e("#"+t.options.uuid+"-tab-activeIndicator").css({"margin-left":r})}),e(".nav li",this.options.dialog).first().click()},_openDialog:function(){var t,n,r,i,s,o,u,a,f=this;return o=this,t=function(){return window.setTimeout(function(){var t;return t=e(".imageThumbnail"),e(t).each(function(){var t;t=e("#"+this.id).width();if(t<=20)return e("#"+this.id).parent("li").remove()})},15e3)},i="#"+this.options.uuid+"-tab-suggestions-content",r=function(){return e(".imageThumbnailActive",i).first().attr("src")},e("#"+this.options.uuid+"-sugg-activeImage").attr("src",r()),e("#"+this.options.uuid+"-sugg-activeImageBg").attr("src",r()),this.lastSelection=this.options.editable.getSelection(),n=e(this.options.editable.element),s=e(this.options.toolbar),u=n.offset().left+n.outerWidth()-3,a=s.offset().top+s.outerHeight()+29,a-=e(document).scrollTop(),this.options.dialog.dialog("option","position",[u,a]),t(),o.options.loaded=1,this.options.editable.keepActivated(!0),this.options.dialog.dialog("open"),this.options.dialog.on("dialogclose",function(){return e("label",f.button).removeClass("ui-state-active"),f.options.editable.element.focus(),f.options.editable.keepActivated(!1)})},_closeDialog:function(){return this.options.dialog.dialog("close")},_addGuiTabSuggestions:function(t,n){var r;return t.append(e('<li id="'+this.options.uuid+'-tab-suggestions"        class="'+this.widgetName+"-tabselector "+this.widgetName+'-tab-suggestions">          <span>Suggestions</span>        </li>')),r=e('<div id="'+this.options.uuid+'-tab-suggestions-content"        class="'+this.widgetName+'-tab tab-suggestions"></div>'),n.append(r),r.halloimagesuggestions({uuid:this.options.uuid,imageWidget:this,entity:this.options.entity})},_addGuiTabSearch:function(t,n){var r,i,s;return s=this,r=""+this.options.uuid+"-image-dialog",t.append(e('<li id="'+this.options.uuid+'-tab-search"        class="'+this.widgetName+"-tabselector "+this.widgetName+'-tab-search">          <span>Search</span>        </li>')),i=e('<div id="'+this.options.uuid+'-tab-search-content"        class="'+s.widgetName+'-tab tab-search"></div>'),n.append(i),i.halloimagesearch({uuid:this.options.uuid,imageWidget:this,searchCallback:this.options.search,searchUrl:this.options.searchUrl,limit:this.options.limit,entity:this.options.entity})},_addGuiTabUpload:function(t,n){var r;return t.append(e('<li id="'+this.options.uuid+'-tab-upload"        class="'+this.widgetName+"-tabselector "+this.widgetName+'-tab-upload">          <span>Upload</span>        </li>')),r=e('<div id="'+this.options.uuid+'-tab-upload-content"        class="'+this.widgetName+'-tab tab-upload"></div>'),n.append(r),r.halloimageupload({uuid:this.options.uuid,uploadCallback:this.options.upload,uploadUrl:this.options.uploadUrl,imageWidget:this,entity:this.options.entity})}})})(jQuery)}.call(this),function(){(function(e){return e.widget("IKS.hallo-image-insert-edit",{options:{editable:null,toolbar:null,uuid:"",insert_file_dialog_ui_url:null,lang:"en",dialogOpts:{autoOpen:!1,width:560,height:"auto",modal:!1,resizable:!0,draggable:!0,dialogClass:"insert-image-dialog"},dialog:null,buttonCssClass:null},translations:{en:{title_insert:"Insert Image",title_properties:"Image Properties",insert:"Insert",chage_image:"Change Image:",source:"URL",width:"Width",height:"Height",alt:"Alt Text",padding:"Padding","float":"Float",float_left:"left",float_right:"right",float_none:"No"},de:{title_insert:"Bild einfügen",title_properties:"Bildeigenschaften",insert:"Einfügen",chage_image:"Bild ändern:",source:"URL",width:"Breite",height:"Höhe",alt:"Alt Text",padding:"Padding","float":"Float",float_left:"Links",float_right:"Rechts",float_none:"Nein"}},texts:null,dialog_image_selection_ui_loaded:!1,$image:null,populateToolbar:function(t){var n,r,i,s;return s=this,this.texts=this.translations[this.options.lang],this.options.toolbar=t,i="<div id='hallo_img_properties'></div>",this.options.insert_file_dialog_ui_url&&(i+="<div id='hallo_img_file_select_ui'></div>"),this.options.dialog=e("<div>").attr("id",""+this.options.uuid+"-insert-image-dialog").html(i),r=e("<span>").addClass(this.widgetName),n=e("<span>"),n.hallobutton({label:this.texts.title_insert,icon:"icon-picture",editable:this.options.editable,command:null,queryState:!1,uuid:this.options.uuid,cssClass:this.options.buttonCssClass}),r.append(n),this.button=n,this.button.click(function(){return s.options.dialog.dialog("isOpen")?s._closeDialog():(s.lastSelection=s.options.editable.getSelection(),s._openDialog()),!1}),this.options.editable.element.on("halloselected, hallounselected",function(){if(s.options.dialog.dialog("isOpen"))return s.lastSelection=s.options.editable.getSelection()}),this.options.editable.element.on("hallodeactivated",function(){return s._closeDialog()}),e(this.options.editable.element).on("click","img",function(t){return s._openDialog(e(this)),!1}),this.options.editable.element.on("halloselected",function(n,r){var i;i=s.options.editable.options.toolbar;if(i==="halloToolbarContextual"&&e(r.originalEvent.target).is("img"))return t.hide(),!1}),t.append(r),this.options.dialog.dialog(this.options.dialogOpts)},_openDialog:function(t){var n,r,i,s,o=this;this.$image=t,r=this,n=e(this.options.editable.element),i=n.offset().left+n.outerWidth()+10,this.$image?s=this.$image.offset().top-e(document).scrollTop():s=this.options.toolbar.offset().top-e(document).scrollTop(),this.options.dialog.dialog("option","position",[i,s]),this.options.editable.keepActivated(!0),this.options.dialog.dialog("open"),this.$image?(this.options.dialog.dialog("option","title",this.texts.title_properties),e(document).keyup(function(t){if(t.keyCode===46||t.keyCode===8)e(document).off(),r._closeDialog(),r.$image.remove(),r.$image=null;return t.preventDefault()}),this.options.editable.element.on("click",function(){return r.$image=null,r._closeDialog()})):(this.options.dialog.children("#hallo_img_properties").hide(),this.options.dialog.dialog("option","title",this.texts.title_insert),e("#hallo_img_file_select_title").length>0&&e("#hallo_img_file_select_title").text("")),this._load_dialog_image_properties_ui(),this.options.dialog.on("dialogclose",function(){var t;return e("label",o.button).removeClass("ui-state-active"),t=e(document).scrollTop(),o.options.editable.element.focus(),e(document).scrollTop(t),o.options.editable.keepActivated(!1)});if(this.options.insert_file_dialog_ui_url&&!this.dialog_image_selection_ui_loaded)return this.options.dialog.on("click",".reload_link",function(){return r._load_dialog_image_selection_ui(),!1}),this.options.dialog.on("click",".file_preview img",function(){var t;return r.$image?(t=e(this).attr("src").replace(/-thumb/,""),r.$image.attr("src",t),e("#hallo_img_source").val(t)):r._insert_image(e(this).attr("src").replace(/-thumb/,"")),!1}),this._load_dialog_image_selection_ui()},_insert_image:function(e){return this.options.editable.restoreSelection(this.lastSelection),document.execCommand("insertImage",null,e),this.options.editable.element.trigger("change"),this.options.editable.removeAllSelections(),this._closeDialog()},_closeDialog:function(){return this.options.dialog.dialog("close")},_load_dialog_image_selection_ui:function(){var t;return t=this,e.ajax({url:this.options.insert_file_dialog_ui_url,success:function(e,n,r){var i,s,o;return s="",i=t.options.dialog.children("#hallo_img_properties"),i.is(":visible")&&(s=t.texts.change_image),o="<div id='hallo_img_file_select_title'>"+s+"</div>",t.options.dialog.children("#hallo_img_file_select_ui").html(o+e),t.dialog_image_selection_ui_loaded=!0},beforeSend:function(){return t.options.dialog.children("#hallo_img_file_select_ui").html('<div class="hallo_insert_file_loader"></div>')}})},_load_dialog_image_properties_ui:function(){var t,n,r,i,s,o;s=this,t=this.options.dialog.children("#hallo_img_properties"),this.$image?(o=this.$image.is("[width]")?this.$image.attr("width"):"",r=this.$image.is("[height]")?this.$image.attr("height"):"",i=this._property_input_html("source",this.$image.attr("src"),{label:this.texts.source})+this._property_input_html("alt",this.$image.attr("alt")||"",{label:this.texts.alt})+this._property_row_html(this._property_input_html("width",o,{label:this.texts.width,row:!1})+this._property_input_html("height",r,{label:this.texts.height,row:!1}))+this._property_input_html("padding",this.$image.css("padding"),{label:this.texts.padding})+this._property_row_html(this._property_cb_html("float_left",this.$image.css("float")==="left",{label:this.texts.float_left,row:!1})+this._property_cb_html("float_right",this.$image.css("float")==="right",{label:this.texts.float_right,row:!1})+this._property_cb_html("unfloat",this.$image.css("float")==="none",{label:this.texts.float_none,row:!1}),this.texts[float]),t.html(i),t.show()):this.options.insert_file_dialog_ui_url||(t.html(this._property_input_html("source","",{label:this.texts.source})),t.show());if(this.$image)return this.options.insert_file_dialog_ui_url||e("#insert_image_btn").remove(),e("#hallo_img_file_select_title").length>0&&e("#hallo_img_file_select_title").text(this.texts.chage_image),e("#hallo_img_properties #hallo_img_source").keyup(function(){return s.$image.attr("src",this.value)}),e("#hallo_img_properties #hallo_img_alt").keyup(function(){return s.$image.attr("alt",this.value)}),e("#hallo_img_properties #hallo_img_padding").keyup(function(){return s.$image.css("padding",this.value)}),e("#hallo_img_properties #hallo_img_height").keyup(function(){return s.$image.css("height",this.value),s.$image.attr("height",this.value)}),e("#hallo_img_properties #hallo_img_width").keyup(function(){return s.$image.css("width",this.value),s.$image.attr("width",this.value)}),e("#hallo_img_properties #hallo_img_float_left").click(function(){return this.checked?(s.$image.css("float","left"),e("#hallo_img_properties #hallo_img_float_right").removeAttr("checked"),e("#hallo_img_properties #hallo_img_unfloat").removeAttr("checked")):!1}),e("#hallo_img_properties #hallo_img_float_right").click(function(){return this.checked?(s.$image.css("float","right"),e("#hallo_img_properties #hallo_img_unfloat").removeAttr("checked"),e("#hallo_img_properties #hallo_img_float_left").removeAttr("checked")):!1}),e("#hallo_img_properties #hallo_img_unfloat").click(function(){return this.checked?(s.$image.css("float","none"),e("#hallo_img_properties #hallo_img_float_right").removeAttr("checked"),e("#hallo_img_properties #hallo_img_float_left").removeAttr("checked")):!1});if(!this.options.insert_file_dialog_ui_url)return n='<button id="insert_image_btn">'+this.texts.insert+"</button>",t.after(n),e("#insert_image_btn").click(function(){var t;return t=e("#hallo_img_properties #hallo_img_source"),s._insert_image(t.val())})},_property_col_html:function(e){return"<div class='hallo_img_property_col'>"+e+"</div>"},_property_row_html:function(e,t){return t==null&&(t=""),e=this._property_col_html(t)+this._property_col_html(e),"<div class='hallo_img_property_row'>"+e+"</div>"},_property_html:function(e,t){var n;return t==null&&(t={}),t.row===!1?(t.label&&(n=""+t.label+" "+e,e="<span class='img_property_entry'>"+n+"</span>"),e):(n="<span class='img_property_entry'>"+e+"</span>",this._property_row_html(n,t.label))},_property_input_html:function(e,t,n){var r;return n==null&&(n={}),r="<input type='text' id='hallo_img_"+e+"' value='"+t+"'>",this._property_html(r,n)},_property_cb_html:function(e,t,n){var r,i;return n==null&&(n={}),i=t?"checked=checked":"",r="<input type='checkbox' id='hallo_img_"+e+"' "+i+"'>",this._property_html(r,n)}})})(jQuery)}.call(this),function(){(function(e){return e.widget("IKS.halloindicator",{options:{editable:null,className:"halloEditIndicator"},_create:function(){var e=this;return this.element.on("halloenabled",function(){return e.buildIndicator()})},populateToolbar:function(){},buildIndicator:function(){var t;return t=e('<div><i class="icon-edit"></i> Edit</div>'),t.addClass(this.options.className),t.hide(),this.element.before(t),this.bindIndicator(t),this.setIndicatorPosition(t)},bindIndicator:function(t){var n=this;return t.on("click",function(){return n.options.editable.element.focus()}),this.element.on("halloactivated",function(){return t.hide()}),this.element.on("hallodisabled",function(){return t.remove()}),this.options.editable.element.hover(function(){if(e(this).hasClass("inEditMode"))return;return t.show()},function(n){if(e(this).hasClass("inEditMode"))return;if(n.relatedTarget===t.get(0))return;return t.hide()})},setIndicatorPosition:function(e){var t;return e.css("position","absolute"),t=this.element.position(),e.css("top",t.top+2),e.css("left",t.left+2)}})})(jQuery)}.call(this),function(){(function(e){return e.widget("IKS.hallojustify",{options:{editable:null,toolbar:null,uuid:"",buttonCssClass:null},populateToolbar:function(t){var n,r,i=this;return r=e('<span class="'+this.widgetName+'"></span>'),n=function(t){var n;return n=e("<span></span>"),n.hallobutton({uuid:i.options.uuid,editable:i.options.editable,label:t,command:"justify"+t,icon:"icon-align-"+t.toLowerCase(),cssClass:i.options.buttonCssClass}),r.append(n)},n("Left"),n("Center"),n("Right"),r.hallobuttonset(),t.append(r)}})})(jQuery)}.call(this),function(){(function(e){return e.widget("IKS.hallolink",{options:{editable:null,uuid:"",link:!0,image:!0,defaultUrl:"http://",dialogOpts:{autoOpen:!1,width:540,height:95,title:"Enter Link",buttonTitle:"Insert",buttonUpdateTitle:"Update",modal:!0,resizable:!1,draggable:!1,dialogClass:"hallolink-dialog"},buttonCssClass:null},populateToolbar:function(t){var n,r,i,s,o,u,a,f,l,c,h=this;c=this,u=""+this.options.uuid+"-dialog",n=this.options.dialogOpts.buttonTitle,r=this.options.dialogOpts.buttonUpdateTitle,o=e('<div id="'+u+'">        <form action="#" method="post" class="linkForm">          <input class="url" type="text" name="url"            value="'+this.options.defaultUrl+'" />          <input type="submit" id="addlinkButton" value="'+n+'"/>        </form></div>'),l=e("input[name=url]",o).focus(function(e){return this.select()}),f=function(e){return(new RegExp(/^\s*$/)).test(e)?!0:e===c.options.defaultUrl?!0:!1},a=function(t){var n,r;return t.preventDefault(),n=l.val(),o.dialog("close"),c.options.editable.restoreSelection(c.lastSelection),f(n)?document.execCommand("unlink",null,""):(!/:\/\//.test(n)&&!/^mailto:/.test(n)&&(n="http://"+n),c.lastSelection.startContainer.parentNode.href===void 0?c.lastSelection.collapsed?(r=e("<a href='"+n+"'>"+n+"</a>")[0],c.lastSelection.insertNode(r)):document.execCommand("createLink",null,n):c.lastSelection.startContainer.parentNode.href=n),c.options.editable.element.trigger("change"),!1},o.find("input[type=submit]").click(a),s=e('<span class="'+c.widgetName+'"></span>'),i=function(t){var i,u,a;return a=""+h.options.uuid+"-"+t,u=e("<span></span>"),u.hallobutton({label:"Link",icon:"icon-link",editable:h.options.editable,command:null,queryState:!1,uuid:h.options.uuid,cssClass:h.options.buttonCssClass}),s.append(u),i=u,i.on("click",function(t){var i,s;return c.lastSelection=c.options.editable.getSelection(),l=e("input[name=url]",o),s=c.lastSelection.startContainer.parentNode,s.href?(l.val(e(s).attr("href")),i="input[type=submit]",e(l[0].form).find(i).val(r)):(l.val(c.options.defaultUrl),e(l[0].form).find("input[type=submit]").val(n)),c.options.editable.keepActivated(!0),o.dialog("open"),o.on("dialogclose",function(){return c.options.editable.restoreSelection(c.lastSelection),e("label",u).removeClass("ui-state-active"),c.options.editable.element.focus(),c.options.editable.keepActivated(!1)}),!1}),h.element.on("keyup paste change mouseup",function(t){var n,r;r=e(c.options.editable.getSelection().startContainer),r.prop("nodeName")?n=r.prop("nodeName"):n=r.parent().prop("nodeName");if(n&&n.toUpperCase()==="A"){e("label",i).addClass("ui-state-active");return}return e("label",i).removeClass("ui-state-active")})},this.options.link&&i("A");if(this.options.link)return t.append(s),s.hallobuttonset(),o.dialog(this.options.dialogOpts)}})})(jQuery)}.call(this),function(){(function(e){return e.widget("IKS.hallolists",{options:{editable:null,toolbar:null,uuid:"",lists:{ordered:!0,unordered:!0},buttonCssClass:null},populateToolbar:function(t){var n,r,i=this;return r=e('<span class="'+this.widgetName+'"></span>'),n=function(t,n){var s;return s=e("<span></span>"),s.hallobutton({uuid:i.options.uuid,editable:i.options.editable,label:n,command:"insert"+t+"List",icon:"icon-list-"+n.toLowerCase(),cssClass:i.options.buttonCssClass}),r.append(s)},this.options.lists.ordered&&n("Ordered","OL"),this.options.lists.unordered&&n("Unordered","UL"),r.hallobuttonset(),t.append(r)}})})(jQuery)}.call(this),function(){(function(e){return e.widget("Liip.hallooverlay",{options:{editable:null,toolbar:null,uuid:"",overlay:null,padding:10,background:null},_create:function(){var t;t=this;if(!this.options.bound)return this.options.bound=!0,this.options.editable.element.on("halloactivated",function(n,r){t.options.currentEditable=e(n.target);if(!t.options.visible)return t.showOverlay()}),this.options.editable.element.on("hallomodified",function(n,r){t.options.currentEditable=e(n.target);if(t.options.visible)return t.resizeOverlay()}),this.options.editable.element.on("hallodeactivated",function(n,r){t.options.currentEditable=e(n.target);if(t.options.visible)return t.hideOverlay()})},showOverlay:function(){return this.options.visible=!0,this.options.overlay===null&&(e("#halloOverlay").length>0?this.options.overlay=e("#halloOverlay"):(this.options.overlay=e('<div id="halloOverlay"            class="halloOverlay">'),e(document.body).append(this.options.overlay)),this.options.overlay.on("click",e.proxy(this.options.editable.turnOff,this.options.editable))),this.options.overlay.show(),this.options.background===null&&(e("#halloBackground").length>0?this.options.background=e("#halloBackground"):(this.options.background=e('<div id="halloBackground"            class="halloBackground">'),e(document.body).append(this.options.background))),this.resizeOverlay(),this.options.background.show(),this.options.originalZIndex||(this.options.originalZIndex=this.options.currentEditable.css("z-index")),this.options.currentEditable.css("z-index","350")},resizeOverlay:function(){var e;return e=this.options.currentEditable.offset(),this.options.background.css({top:e.top-this.options.padding,left:e.left-this.options.padding,width:this.options.currentEditable.width()+2*this.options.padding,height:this.options.currentEditable.height()+2*this.options.padding})},hideOverlay:function(){return this.options.visible=!1,this.options.overlay.hide(),this.options.background.hide(),this.options.currentEditable.css("z-index",this.options.originalZIndex)},_findBackgroundColor:function(e){var t;return t=e.css("background-color"),t!=="rgba(0, 0, 0, 0)"&&t!=="transparent"?t:e.is("body")?"white":this._findBackgroundColor(e.parent())}})})(jQuery)}.call(this),function(){(function(e){return e.widget("IKS.halloreundo",{options:{editable:null,toolbar:null,uuid:"",buttonCssClass:null},populateToolbar:function(t){var n,r,i=this;return r=e('<span class="'+this.widgetName+'"></span>'),n=function(t,n){var s;return s=e("<span></span>"),s.hallobutton({uuid:i.options.uuid,editable:i.options.editable,label:n,icon:t==="undo"?"icon-undo":"icon-repeat",command:t,queryState:!1,cssClass:i.options.buttonCssClass}),r.append(s)},n("undo","Undo"),n("redo","Redo"),r.hallobuttonset(),t.append(r)}})})(jQuery)}.call(this),function(){(function(e){return e.widget("Liip.hallotoolbarlinebreak",{options:{editable:null,uuid:"",breakAfter:[]},populateToolbar:function(t){var n,r,i,s,o,u,a,f,l,c,h;i=e(".ui-buttonset",t),s=e(),u=0,h=this.options.breakAfter;for(a=0,l=h.length;a<l;a++){o=h[a],u++,n='<div          class="halloButtonrow halloButtonrow-'+u+'" />';for(f=0,c=i.length;f<c;f++){r=i[f],s=e(s).add(e(r));if(e(r).hasClass(o)){s.wrapAll(n),i=i.not(s),s=e();break}}}if(i.length>0)return u++,n='<div          class="halloButtonrow halloButtonrow-'+u+'" />',i.wrapAll(n)}})})(jQuery)}.call(this),function(){(function(e){return e.widget("IKS.halloToolbarContextual",{toolbar:null,options:{parentElement:"body",editable:null,toolbar:null,positionAbove:!1},_create:function(){var t=this;return this.toolbar=this.options.toolbar,e(this.options.parentElement).append(this.toolbar),this._bindEvents(),e(window).resize(function(e){return t._updatePosition(t._getPosition(e))})},_getPosition:function(e,t){var n,r;if(!e)return;n=e.type;switch(n){case"keydown":case"keyup":case"keypress":return this._getCaretPosition(t);case"click":case"mousedown":case"mouseup":return r={top:e.pageY,left:e.pageX}}},_getCaretPosition:function(t){var n,r,i;return i=e("<span/>"),n=rangy.createRange(),n.setStart(t.endContainer,t.endOffset),n.insertNode(i.get(0)),r={top:i.offset().top,left:i.offset().left},i.remove(),r},setPosition:function(){return this.options.parentElement!=="body"&&(this.options.parentElement="body",e(this.options.parentElement).append(this.toolbar)),this.toolbar.css("position","absolute"),this.toolbar.css("top",this.element.offset().top-20),this.toolbar.css("left",this.element.offset().left)},_updatePosition:function(t,n){var r,i,s,o,u;n==null&&(n=null);if(!t)return;if(!t.top||!t.left)return;return s=this.toolbar.outerHeight()+10,n&&!n.collapsed&&n.nativeRange?(i=n.nativeRange.getBoundingClientRect(),this.options.positionAbove?u=i.top-s:u=i.bottom+10,o=e(window).scrollTop()+u,r=e(window).scrollLeft()+i.left):(this.options.positionAbove?u=-10-s:u=20,o=t.top+u,r=t.left-this.toolbar.outerWidth()/2+30),this.toolbar.css("top",o),this.toolbar.css("left",r)},_bindEvents:function(){var e=this;return this.element.on("halloselected",function(t,n){var r;r=e._getPosition(n.originalEvent,n.selection);if(!r)return;e._updatePosition(r,n.selection);if(e.toolbar.html()!=="")return e.toolbar.show()}),this.element.on("hallounselected",function(t,n){return e.toolbar.hide()}),this.element.on("hallodeactivated",function(t,n){return e.toolbar.hide()})}})})(jQuery)}.call(this),function(){(function(e){return e.widget("IKS.halloToolbarFixed",{toolbar:null,options:{parentElement:"body",editable:null,toolbar:null,affix:!0,affixTopOffset:2},_create:function(){var t,n,r=this;this.toolbar=this.options.toolbar,this.toolbar.show(),e(this.options.parentElement).append(this.toolbar),this._bindEvents(),e(window).resize(function(e){return r.setPosition()}),e(window).scroll(function(e){return r.setPosition()});if(this.options.parentElement==="body")return t=e(this.element),n=parseFloat(t.css("padding-left")),n+=parseFloat(t.css("padding-right")),n+=parseFloat(t.css("border-left-width")),n+=parseFloat(t.css("border-right-width")),n+=parseFloat(t.css("outline-width"))*2,n+=parseFloat(t.css("outline-offset"))*2,e(this.toolbar).css("width",t.width()+n)},_getPosition:function(e,t){var n,r,i;if(!e)return;return i=parseFloat(this.element.css("outline-width")),n=i+parseFloat(this.element.css("outline-offset")),r={top:this.element.offset().top-this.toolbar.outerHeight()-n,left:this.element.offset().left-n}},_getCaretPosition:function(t){var n,r,i;return i=e("<span/>"),n=rangy.createRange(),n.setStart(t.endContainer,t.endOffset),n.insertNode(i.get(0)),r={top:i.offset().top,left:i.offset().left},i.remove(),r},setPosition:function(){var t,n,r,i,s,o;if(this.options.parentElement!=="body")return;return this.toolbar.css("position","absolute"),this.toolbar.css("top",this.element.offset().top-this.toolbar.outerHeight()),this.options.affix&&(s=e(window).scrollTop(),i=this.element.offset(),r=this.element.height(),o=this.options.affixTopOffset,n=i.top-(this.toolbar.height()+this.options.affixTopOffset),t=r-o+(i.top-this.toolbar.height()),s>n&&s<t&&(this.toolbar.css("position","fixed"),this.toolbar.css("top",this.options.affixTopOffset))),this.toolbar.css("left",this.element.offset().left-2)},_updatePosition:function(e){},_bindEvents:function(){var e=this;return this.element.on("halloactivated",function(t,n){return e.setPosition(),e.toolbar.show()}),this.element.on("hallodeactivated",function(t,n){return e.toolbar.hide()})}})})(jQuery)}.call(this),function(){(function(e){return e.widget("IKS.hallobutton",{button:null,isChecked:!1,options:{uuid:"",label:null,icon:null,editable:null,command:null,commandValue:null,queryState:!0,cssClass:null},_create:function(){var e,t,n,r,i,s=this;return(i=(r=this.options).icon)==null&&(r.icon="icon-"+this.options.label.toLowerCase()),t=""+this.options.uuid+"-"+this.options.label,n=this.options,this.button=this._createButton(t,n.command,n.label,n.icon),this.element.append(this.button),this.options.cssClass&&this.button.addClass(this.options.cssClass),this.options.editable.options.touchScreen&&this.button.addClass("btn-large"),this.button.data("hallo-command",this.options.command),this.options.commandValue&&this.button.data("hallo-command-value",this.options.commandValue),e="ui-state-hover",this.button.on("mouseenter",function(t){if(s.isEnabled())return s.button.addClass(e)}),this.button.on("mouseleave",function(t){return s.button.removeClass(e)})},_init:function(){var e,t,n,r=this;this.button||(this.button=this._prepareButton()),this.element.append(this.button),this.options.queryState===!0?n=function(e){var t,n,i;if(!r.options.command)return;try{return r.options.commandValue?(i=document.queryCommandValue(r.options.command),t=i.match(new RegExp(r.options.commandValue,"i")),r.checked(t?!0:!1)):r.checked(document.queryCommandState(r.options.command))}catch(s){n=s}}:n=this.options.queryState,this.options.command&&this.button.on("click",function(e){return r.options.commandValue?r.options.editable.execute(r.options.command,r.options.commandValue):r.options.editable.execute(r.options.command),n(),!1});if(!this.options.queryState)return;return e=this.options.editable.element,t="keyup paste change mouseup hallomodified",e.on(t,n),e.on("halloenabled",function(){return e.on(t,n)}),e.on("hallodisabled",function(){return e.off(t,n)})},enable:function(){return this.button.removeAttr("disabled")},disable:function(){return this.button.attr("disabled","true")},isEnabled:function(){return this.button.attr("disabled")!=="true"},refresh:function(){return this.isChecked?this.button.addClass("ui-state-active"):this.button.removeClass("ui-state-active")},checked:function(e){return this.isChecked=e,this.refresh()},_createButton:function(t,n,r,i){var s;return s=["ui-button","ui-widget","ui-state-default","ui-corner-all","ui-button-text-only",""+n+"_button"],e('<button id="'+t+'"        class="'+s.join(" ")+'" title="'+r+'">          <span class="ui-button-text">            <i class="'+i+'"></i>          </span>        </button>')}}),e.widget("IKS.hallobuttonset",{buttons:null,_create:function(){return this.element.addClass("ui-buttonset")},_init:function(){return this.refresh()},refresh:function(){var e;return e=this.element.css("direction")==="rtl",this.buttons=this.element.find(".ui-button"),this.buttons.removeClass("ui-corner-all ui-corner-left ui-corner-right"),e?(this.buttons.filter(":first").addClass("ui-corner-right"),this.buttons.filter(":last").addClass("ui-corner-left")):(this.buttons.filter(":first").addClass("ui-corner-left"),this.buttons.filter(":last").addClass("ui-corner-right"))}})})(jQuery)}.call(this),function(){(function(e){return e.widget("IKS.hallodropdownbutton",{button:null,options:{uuid:"",label:null,icon:null,editable:null,target:"",cssClass:null},_create:function(){var e,t;return(t=(e=this.options).icon)!=null?t:e.icon="icon-"+this.options.label.toLowerCase()},_init:function(){var t,n=this;return t=e(this.options.target),t.css("position","absolute"),t.addClass("dropdown-menu"),t.hide(),this.button||(this.button=this._prepareButton()),this.button.on("click",function(){if(t.hasClass("open")){n._hideTarget();return}return n._showTarget()}),t.on("click",function(){return n._hideTarget()}),this.options.editable.element.on("hallodeactivated",function(){return n._hideTarget()}),this.element.append(this.button)},_showTarget:function(){var t;return t=e(this.options.target),this._updateTargetPosition(),t.addClass("open"),t.show()},_hideTarget:function(){var t;return t=e(this.options.target),t.removeClass("open"),t.hide()},_updateTargetPosition:function(){var t,n,r,i;return n=e(this.options.target),i=this.button.position(),r=i.top,t=i.left,r+=this.button.outerHeight(),n.css("top",r),n.css("left",t-20)},_prepareButton:function(){var t,n,r;return r=""+this.options.uuid+"-"+this.options.label,n=["ui-button","ui-widget","ui-state-default","ui-corner-all","ui-button-text-only"],t=e('<button id="'+r+'"       class="'+n.join(" ")+'" title="'+this.options.label+'">       <span class="ui-button-text"><i class="'+this.options.icon+'"></i></span>       </button>'),this.options.cssClass&&t.addClass(this.options.cssClass),t}})})(jQuery)}.call(this),define("hallo",function(){}),define("vie/instance",["vie","hallo"],function(){var e=new VIE;return e.namespaces.get("typo3")||e.namespaces.add("typo3","http://www.typo3.org/ns/2012/Flow/Packages/Neos/Content/"),e.namespaces.get("xsd")||e.namespaces.add("xsd","http://www.w3.org/2001/XMLSchema#"),e.use(new e.RdfaService),e}),define("aloha",["jquery","jquery-ui"],function(e,t){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("aloha");var n=window.Aloha=window.Aloha||{};n.settings={logLevels:{error:!0,warn:!0,info:!1,debug:!1},errorhandling:!1,sidebar:{disabled:!0},plugins:{load:["common/ui","common/format","common/paste","common/block","common/table","common/link"].join(","),block:{sidebarAttributeEditor:!1},format:{config:["b","i","p","h1","h2","h3","pre","removeFormat"]}},smartContentChange:{idle:500,delay:150},bundles:{neosAloha:"/_Resources/Static/Packages/TYPO3.Neos/JavaScript/alohaplugins/"},baseUrl:alohaBaseUrl,jQuery:e,predefinedModules:{jqueryui:t}},(window.T3Configuration&&window.T3Configuration.enableAloha||window.T3&&window.T3.Configuration&&window.T3.Configuration.enableAloha)&&require({context:"aloha",baseUrl:alohaBaseUrl},["aloha"],function(e){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("aloha (inner require)")})}),define("text",["module"],function(e){var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,r=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,i=typeof location!="undefined"&&location.href,s=i&&location.protocol&&location.protocol.replace(/\:/,""),o=i&&location.hostname,u=i&&(location.port||undefined),a=[],f=e.config(),l,c;return l={version:"2.0.0",strip:function(e){if(e){e=e.replace(n,"");var t=e.match(r);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var e,n,r;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(n=0;n<3;n++){r=t[n];try{e=new ActiveXObject(r)}catch(i){}if(e){t=[r];break}}return e},parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),i=e.substring(n+1,e.length);return n=i.indexOf("!"),n!==-1&&(t=i.substring(n+1,i.length),t=t==="strip",i=i.substring(0,n)),{moduleName:r,ext:i,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var i=l.xdRegExp.exec(e),s,o,u;return i?(s=i[2],o=i[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===t)&&(!o||o===n)&&(!u&&!o||u===r)):!0},finishLoad:function(e,t,n,r){n=t?l.strip(n):n,f.isBuild&&(a[e]=n),r(n)},load:function(e,t,n,r){if(r.isBuild&&!r.inlineText){n();return}f.isBuild=r.isBuild;var a=l.parseName(e),c=a.moduleName+"."+a.ext,h=t.toUrl(c),p=f.useXhr||l.useXhr;!i||p(h,s,o,u)?l.get(h,function(t){l.finishLoad(e,a.strip,t,n)},function(e){n.error&&n.error(e)}):t([c],function(e){l.finishLoad(a.moduleName+"."+a.ext,a.strip,e,n)})},write:function(e,t,n,r){if(a.hasOwnProperty(t)){var i=l.jsEscape(a[t]);n.asModule(e+"!"+t,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,t,n,r,i){var s=l.parseName(t),o=s.moduleName+"."+s.ext,u=n.toUrl(s.moduleName+"."+s.ext)+".js";l.load(o,n,function(t){var n=function(e){return r(u,e)};n.asModule=function(e,t){return r.asModule(e,u,t)},l.write(e,o,n,i)},i)}},typeof process!="undefined"&&process.versions&&!!process.versions.node?(c=require.nodeRequire("fs"),l.get=function(e,t){var n=c.readFileSync(e,"utf8");n.indexOf("﻿")===0&&(n=n.substring(1)),t(n)}):l.createXhr()?l.get=function(e,t,n){var r=l.createXhr();r.open("GET",e,!0),f.onXhr&&f.onXhr(r,e),r.onreadystatechange=function(i){var s,o;r.readyState===4&&(s=r.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=r,n(o)):t(r.responseText))},r.send(null)}:typeof Packages!="undefined"&&(l.get=function(e,t){var n="utf-8",r=new java.io.File(e),i=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),n)),o,u,a="";try{o=new java.lang.StringBuffer,u=s.readLine(),u&&u.length()&&u.charAt(0)===65279&&(u=u.substring(1)),o.append(u);while((u=s.readLine())!==null)o.append(i),o.append(u);a=String(o.toString())}finally{s.close()}t(a)}),l}),define("text!neos/templates/halloplugins/linkplugin.html",[],function(){return'{{view Ember.TextField class="t3-link-inputfield" valueBinding="view.url" }}\n{{view T3.Content.UI.Button classNames="btn-success" labelBinding="view.label" target="parentView" action="insert" }}\n{{view T3.Content.UI.Button label="Cancel" target="parentView" action="cancel" }}'}),define("halloplugins/linkplugin",["jquery","emberjs","text!neos/templates/halloplugins/linkplugin.html","jquery-ui"],function(e,t,n){(function(e){return e.widget("typo3.hallo-linkplugin",{view:null,options:{editable:null,uuid:"",link:!0,defaultUrl:"http://",dialogOpts:{autoOpen:!1,width:540,height:95,title:"Enter Link",modal:!0,resizable:!1,draggable:!1,dialogClass:"hallolink-dialog aloha-block-do-not-deactivate"},butonCssClass:null},populateToolbar:function(r){var i,s,o,u,a,f=this;a=this,u=""+this.options.uuid+"-dialog",o=e("<div />",{id:u}),a.view=t.View.create({classNames:["t3-ui"],template:t.Handlebars.compile(n),url:a.options.defaultUrl,label:"Insert",didInsertElement:function(){var t=this;this.$(".t3-link-inputfield").focus().autocomplete({source:function(t,n){TYPO3_Neos_Service_ExtDirect_V1_Controller_NodeController.searchPage(t.term,function(t){t&&t.searchResult?n(e.map(t.searchResult,function(e){return{label:e.name,value:e.url}})):n([])})},minLength:2,select:function(e,n){t.set("url",n.item.value)}},this.$(".t3-link-inputfield").keyup(function(e){e.keyCode===13&&t.insert()})),this.get("url")!==a.options.defaultUrl&&this.set("label","Update")},insert:function(){var e=this.get("url");return a.options.editable.restoreSelection(a.lastSelection),(new RegExp(/^\s*$/)).test(e)||e===a.options.defaultUrl?(a.lastSelection.collapsed&&(a.lastSelection.setStartBefore(a.lastSelection.startContainer),a.lastSelection.setEndAfter(a.lastSelection.startContainer),window.getSelection().addRange(a.lastSelection)),document.execCommand("unlink",null,"")):a.lastSelection.startContainer.parentNode.href===void 0?document.execCommand("createLink",null,e):a.lastSelection.startContainer.parentNode.href=e,a.options.editable.element.trigger("change"),a.options.editable.removeAllSelections(),o.dialog("close"),!1},cancel:function(){return o.dialog("close"),!1}}).appendTo(o),s=e('<span class="'+a.widgetName+'"></span>'),i=function(t){var n,r;return r=e("<span />"),r.hallobutton({label:"Link",icon:"icon-link",editable:f.options.editable,command:null,queryState:!1,uuid:f.options.uuid,cssClass:f.options.buttonCssClass}),s.append(r),n=r,n.bind("click",function(){return a.lastSelection=a.options.editable.getSelection(),a.options.editable.keepActivated(!0),o.dialog("open"),o.bind("dialogclose",function(){return e("label",r).removeClass("ui-state-active"),a.options.editable.element.focus(),a.options.editable.keepActivated(!1)}),a.lastSelection.startContainer.parentNode.href?(a.view.set("url",e(a.lastSelection.startContainer.parentNode).attr("href")),a.view.set("label","Update")):(a.view.set("url",a.options.defaultUrl),a.view.set("label","Insert")),!1}),f.element.bind("keyup paste change mouseup",function(t){var r,i;i=e(a.options.editable.getSelection().startContainer),r=i.prop("nodeName")?i.prop("nodeName"):i.parent().prop("nodeName");if(r&&r.toUpperCase()==="A"){e("label",n).addClass("ui-state-active");return}return e("label",n).removeClass("ui-state-active")})};if(this.options.link)return i("A"),r.append(s),s.hallobuttonset(),o.dialog(this.options.dialogOpts)},_init:function(){}})})(e)}),function(e){var t=new Array,n=new Array;e.fn.doAutosize=function(t){var n=e(this).data("minwidth"),r=e(this).data("maxwidth"),i="",s=e(this),o=e("#"+e(this).data("tester_id"));if(i===(i=s.val()))return;var u=i.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");o.html(u);var f=o.width(),l=f+t.comfortZone>=n?f+t.comfortZone:n,c=s.width(),h=l<c&&l>=n||l>n&&l<r;h&&s.width(l)},e.fn.resetAutosize=function(t){var n=e(this).data("minwidth")||t.minInputWidth||e(this).width(),r=e(this).data("maxwidth")||t.maxInputWidth||e(this).closest(".tagsinput").width()-t.inputPadding,i="",s=e(this),o=e("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:s.css("fontSize"),fontFamily:s.css("fontFamily"),fontWeight:s.css("fontWeight"),letterSpacing:s.css("letterSpacing"),whiteSpace:"nowrap"}),u=e(this).attr("id")+"_autosize_tester";!e("#"+u).length>0&&(o.attr("id",u),o.appendTo("body")),s.data("minwidth",n),s.data("maxwidth",r),s.data("tester_id",u),s.css("width",n)},e.fn.addTag=function(r,i){return i=jQuery.extend({focus:!1,callback:!0},i),this.each(function(){var s=e(this).attr("id"),o=e(this).val().split(t[s]);o[0]==""&&(o=new Array),r=jQuery.trim(r);if(i.unique){var u=e(this).tagExist(r);u==1&&e("#"+s+"_tag").addClass("not_valid")}else var u=!1;if(r!=""&&u!=1){e("<span>").addClass("tag").append(e("<span>").text(r).append("&nbsp;&nbsp;"),e("<a>",{href:"#",title:"Removing tag",text:"x"}).click(function(){return e("#"+s).removeTag(escape(r))})).insertBefore("#"+s+"_addTag"),o.push(r),e("#"+s+"_tag").val(""),i.focus?e("#"+s+"_tag").focus():e("#"+s+"_tag").blur(),e.fn.tagsInput.updateTagsField(this,o);if(i.callback&&n[s]&&n[s].onAddTag){var f=n[s].onAddTag;f.call(this,r)}if(n[s]&&n[s].onChange){var l=o.length,f=n[s].onChange;f.call(this,e(this),o[l-1])}}}),!1},e.fn.removeTag=function(r){return r=unescape(r),this.each(function(){var s=e(this).attr("id"),o=e(this).val().split(t[s]);e("#"+s+"_tagsinput .tag").remove(),str="";for(i=0;i<o.length;i++)o[i]!=r&&(str=str+t[s]+o[i]);e.fn.tagsInput.importTags(this,str);if(n[s]&&n[s].onRemoveTag){var u=n[s].onRemoveTag;u.call(this,r)}}),!1},e.fn.tagExist=function(n){var r=e(this).attr("id"),i=e(this).val().split(t[r]);return jQuery.inArray(n,i)>=0},e.fn.importTags=function(t){id=e(this).attr("id"),e("#"+id+"_tagsinput .tag").remove(),e.fn.tagsInput.importTags(this,t)},e.fn.tagsInput=function(r){var i=jQuery.extend({interactive:!0,defaultText:"add a tag",minChars:0,width:"300px",height:"100px",autocomplete:{selectFirst:!1},hide:!0,delimiter:",",unique:!0,removeWithBackspace:!0,placeholderColor:"#666666",autosize:!0,comfortZone:20,inputPadding:12},r);return this.each(function(){i.hide&&e(this).hide();var r=e(this).attr("id");if(!r||t[e(this).attr("id")])r=e(this).attr("id","tags"+(new Date).getTime()).attr("id");var s=jQuery.extend({pid:r,real_input:"#"+r,holder:"#"+r+"_tagsinput",input_wrapper:"#"+r+"_addTag",fake_input:"#"+r+"_tag"},i);t[r]=s.delimiter;if(i.onAddTag||i.onRemoveTag||i.onChange)n[r]=new Array,n[r].onAddTag=i.onAddTag,n[r].onRemoveTag=i.onRemoveTag,n[r].onChange=i.onChange;var o='<div id="'+r+'_tagsinput" class="tagsinput"><div id="'+r+'_addTag">';i.interactive&&(o=o+'<input id="'+r+'_tag" value="" data-default="'+i.defaultText+'" />'),o+='</div><div class="tags_clear"></div></div>',e(o).insertAfter(this),e(s.holder).css("width",i.width),e(s.holder).css("min-height",i.height),e(s.holder).css("height","100%"),e(s.real_input).val()!=""&&e.fn.tagsInput.importTags(e(s.real_input),e(s.real_input).val());if(i.interactive){e(s.fake_input).val(e(s.fake_input).attr("data-default")),e(s.fake_input).css("color",i.placeholderColor),e(s.fake_input).resetAutosize(i),e(s.holder).bind("click",s,function(t){e(t.data.fake_input).focus()}),e(s.fake_input).bind("focus",s,function(t){e(t.data.fake_input).val()==e(t.data.fake_input).attr("data-default")&&e(t.data.fake_input).val(""),e(t.data.fake_input).css("color","#000000")});if(i.autocomplete_url!=undefined){autocomplete_options={source:i.autocomplete_url};for(attrname in i.autocomplete)autocomplete_options[attrname]=i.autocomplete[attrname];jQuery.Autocompleter!==undefined?(e(s.fake_input).autocomplete(i.autocomplete_url,i.autocomplete),e(s.fake_input).bind("result",s,function(t,n,s){n&&e("#"+r).addTag(n[0]+"",{focus:!0,unique:i.unique})})):jQuery.ui.autocomplete!==undefined&&(e(s.fake_input).autocomplete(autocomplete_options),e(s.fake_input).bind("autocompleteselect",s,function(t,n){return e(t.data.real_input).addTag(n.item.value,{focus:!0,unique:i.unique}),!1}))}else e(s.fake_input).bind("blur",s,function(t){var n=e(this).attr("data-default");return e(t.data.fake_input).val()!=""&&e(t.data.fake_input).val()!=n?t.data.minChars<=e(t.data.fake_input).val().length&&(!t.data.maxChars||t.data.maxChars>=e(t.data.fake_input).val().length)&&e(t.data.real_input).addTag(e(t.data.fake_input).val(),{focus:!0,unique:i.unique}):(e(t.data.fake_input).val(e(t.data.fake_input).attr("data-default")),e(t.data.fake_input).css("color",i.placeholderColor)),!1});e(s.fake_input).bind("keypress",s,function(t){if(t.which==t.data.delimiter.charCodeAt(0)||t.which==13)return t.preventDefault(),t.data.minChars<=e(t.data.fake_input).val().length&&(!t.data.maxChars||t.data.maxChars>=e(t.data.fake_input).val().length)&&e(t.data.real_input).addTag(e(t.data.fake_input).val(),{focus:!0,unique:i.unique}),e(t.data.fake_input).resetAutosize(i),!1;t.data.autosize&&e(t.data.fake_input).doAutosize(i)}),s.removeWithBackspace&&e(s.fake_input).bind("keydown",function(t){if(t.keyCode==8&&e(this).val()==""){t.preventDefault();var n=e(this).closest(".tagsinput").find(".tag:last").text(),r=e(this).attr("id").replace(/_tag$/,"");n=n.replace(/[\s]+x$/,""),e("#"+r).removeTag(escape(n)),e(this).trigger("focus")}}),e(s.fake_input).blur(),s.unique&&e(s.fake_input).keydown(function(t){(t.keyCode==8||String.fromCharCode(t.which).match(/\w+|[áéíóúÁÉÍÓÚñÑ,/]+/))&&e(this).removeClass("not_valid")})}}),this},e.fn.tagsInput.updateTagsField=function(n,r){var i=e(n).attr("id");e(n).val(r.join(t[i]))},e.fn.tagsInput.importTags=function(r,s){e(r).val("");var o=e(r).attr("id"),u=s.split(t[o]);for(i=0;i<u.length;i++)e(r).addTag(u[i],{focus:!1,callback:!1});if(n[o]&&n[o].onChange){var f=n[o].onChange;f.call(r,r,u[i])}}}(jQuery),define("Library/createjs/deps/jquery.tagsinput.min",function(){}),window.rangy=function(){function e(e,t){var n=typeof e[t];return n=="function"||n=="object"&&!!e[t]||n=="unknown"}function t(e,t){return typeof e[t]=="object"&&!!e[t]}function n(e,t){return typeof e[t]!="undefined"}function r(e){return function(t,n){for(var r=n.length;r--;)if(!e(t,n[r]))return!1;return!0}}function i(e){return e&&h(e,c)&&d(e,l)}function s(e){window.alert("Rangy not supported in your browser. Reason: "+e),v.initialized=!0,v.supported=!1}function o(){if(!v.initialized){var n,r=!1,o=!1;e(document,"createRange")&&(n=document.createRange(),h(n,f)&&d(n,a)&&(r=!0),n.detach()),(n=t(document,"body")?document.body:document.getElementsByTagName("body")[0])&&e(n,"createTextRange")&&(n=n.createTextRange(),i(n)&&(o=!0)),!r&&!o&&s("Neither Range nor TextRange are implemented"),v.initialized=!0,v.features={implementsDomRange:r,implementsTextRange:o},r=g.concat(m),o=0;for(n=r.length;o<n;++o)try{r[o](v)}catch(u){t(window,"console")&&e(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",u)}}}function u(e){this.name=e,this.supported=this.initialized=!1}var a=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],f=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],l=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],c=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],h=r(e),p=r(t),d=r(n),v={version:"1.2.3",initialized:!1,supported:!0,util:{isHostMethod:e,isHostObject:t,isHostProperty:n,areHostMethods:h,areHostObjects:p,areHostProperties:d,isTextRange:i},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};v.fail=s,v.warn=function(e){e="Rangy warning: "+e,v.config.alertOnWarn?window.alert(e):typeof window.console!="undefined"&&typeof window.console.log!="undefined"&&window.console.log(e)},{}.hasOwnProperty?v.util.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}:s("hasOwnProperty not supported");var m=[],g=[];v.init=o,v.addInitListener=function(e){v.initialized?e(v):m.push(e)};var y=[];v.addCreateMissingNativeApiListener=function(e){y.push(e)},v.createMissingNativeApi=function(e){e=e||window,o();for(var t=0,n=y.length;t<n;++t)y[t](e)},u.prototype.fail=function(e){throw this.initialized=!0,this.supported=!1,Error("Module '"+this.name+"' failed to load: "+e)},u.prototype.warn=function(e){v.warn("Module "+this.name+": "+e)},u.prototype.createError=function(e){return Error("Error in Rangy "+this.name+" module: "+e)},v.createModule=function(e,t){var n=new u(e);v.modules[e]=n,g.push(function(e){t(e,n),n.initialized=!0,n.supported=!0})},v.requireModules=function(e){for(var t=0,n=e.length,r,i;t<n;++t){i=e[t],r=v.modules[i];if(!r||!(r instanceof u))throw Error("Module '"+i+"' not found");if(!r.supported)throw Error("Module '"+i+"' not supported")}};var b=!1;p=function(){b||(b=!0,v.initialized||o())};if(typeof window=="undefined")s("No window found");else{if(typeof document!="undefined")return e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",p,!1),e(window,"addEventListener")?window.addEventListener("load",p,!1):e(window,"attachEvent")?window.attachEvent("onload",p):s("Window does not have required addEventListener or attachEvent method"),v;s("No document found")}}(),rangy.createModule("DomUtil",function(e,t){function n(e){for(var t=0;e=e.previousSibling;)t++;return t}function r(e,t){var n=[],r;for(r=e;r;r=r.parentNode)n.push(r);for(r=t;r;r=r.parentNode)if(d(n,r))return r;return null}function i(e,t,n){for(n=n?e:e.parentNode;n;){e=n.parentNode;if(e===t)return n;n=e}return null}function s(e){return e=e.nodeType,e==3||e==4||e==8}function o(e,t){var n=t.nextSibling,r=t.parentNode;return n?r.insertBefore(e,n):r.appendChild(e),e}function u(e){if(e.nodeType==9)return e;if(typeof e.ownerDocument!="undefined")return e.ownerDocument;if(typeof e.document!="undefined")return e.document;if(e.parentNode)return u(e.parentNode);throw Error("getDocument: no document found for node")}function a(e){return e?s(e)?'"'+e.data+'"':e.nodeType==1?"<"+e.nodeName+(e.id?' id="'+e.id+'"':"")+">["+e.childNodes.length+"]":e.nodeName:"[No node]"}function f(e){this._next=this.root=e}function l(e,t){this.node=e,this.offset=t}function c(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var h=e.util;h.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),h.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var p=document.createElement("div");h.areHostMethods(p,["insertBefore","appendChild","cloneNode"])||t.fail("Incomplete Element implementation"),h.isHostProperty(p,"innerHTML")||t.fail("Element is missing innerHTML property"),p=document.createTextNode("test"),h.areHostMethods(p,["splitText","deleteData","insertData","appendData","cloneNode"])||t.fail("Incomplete Text Node implementation");var d=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1};f.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next,t;if(this._current)if(t=e.firstChild)this._next=t;else{for(t=null;e!==this.root&&!(t=e.nextSibling);)e=e.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},l.prototype={equals:function(e){return this.node===e.node&this.offset==e.offset},inspect:function(){return"[DomPosition("+a(this.node)+":"+this.offset+")]"}},c.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},c.prototype.toString=function(){return this.message},e.dom={arrayContains:d,isHtmlNamespace:function(e){var t;return typeof e.namespaceURI=="undefined"||(t=e.namespaceURI)===null||t=="http://www.w3.org/1999/xhtml"},parentElement:function(e){return e=e.parentNode,e.nodeType==1?e:null},getNodeIndex:n,getNodeLength:function(e){var t;return s(e)?e.length:(t=e.childNodes)?t.length:0},getCommonAncestor:r,isAncestorOf:function(e,t,n){for(t=n?t:t.parentNode;t;){if(t===e)return!0;t=t.parentNode}return!1},getClosestAncestorIn:i,isCharacterDataNode:s,insertAfter:o,splitDataNode:function(e,t){var n=e.cloneNode(!1);return n.deleteData(0,t),e.deleteData(t,e.length-t),o(n,e),n},getDocument:u,getWindow:function(e){e=u(e);if(typeof e.defaultView!="undefined")return e.defaultView;if(typeof e.parentWindow!="undefined")return e.parentWindow;throw Error("Cannot get a window object for node")},getIframeWindow:function(e){if(typeof e.contentWindow!="undefined")return e.contentWindow;if(typeof e.contentDocument!="undefined")return e.contentDocument.defaultView;throw Error("getIframeWindow: No Window object found for iframe element")},getIframeDocument:function(e){if(typeof e.contentDocument!="undefined")return e.contentDocument;if(typeof e.contentWindow!="undefined")return e.contentWindow.document;throw Error("getIframeWindow: No Document object found for iframe element")},getBody:function(e){return h.isHostObject(e,"body")?e.body:e.getElementsByTagName("body")[0]},getRootContainer:function(e){for(var t;t=e.parentNode;)e=t;return e},comparePoints:function(e,t,s,o){var u;if(e==s)return t===o?0:t<o?-1:1;if(u=i(s,e,!0))return t<=n(u)?-1:1;if(u=i(e,s,!0))return n(u)<o?-1:1;t=r(e,s),e=e===t?t:i(e,t,!0),s=s===t?t:i(s,t,!0);if(e===s)throw Error("comparePoints got to case 4 and childA and childB are the same!");for(t=t.firstChild;t;){if(t===e)return-1;if(t===s)return 1;t=t.nextSibling}throw Error("Should not be here!")},inspectNode:a,fragmentFromNodeChildren:function(e){for(var t=u(e).createDocumentFragment(),n;n=e.firstChild;)t.appendChild(n);return t},createIterator:function(e){return new f(e)},DomPosition:l},e.DOMException=c}),rangy.createModule("DomRange",function(e){function t(e,t){return e.nodeType!=3&&(P.isAncestorOf(e,t.startContainer,!0)||P.isAncestorOf(e,t.endContainer,!0))}function n(e){return P.getDocument(e.startContainer)}function r(e,t,n){if(t=e._listeners[t])for(var r=0,i=t.length;r<i;++r)t[r].call(e,{target:e,args:n})}function i(e){return new H(e.parentNode,P.getNodeIndex(e))}function s(e){return new H(e.parentNode,P.getNodeIndex(e)+1)}function o(e,t,n){var r=e.nodeType==11?e.firstChild:e;return P.isCharacterDataNode(t)?n==t.length?P.insertAfter(e,t):t.parentNode.insertBefore(e,n==0?t:P.splitDataNode(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),r}function u(e){for(var t,r,i=n(e.range).createDocumentFragment();r=e.next();){t=e.isPartiallySelectedSubtree(),r=r.cloneNode(!t),t&&(t=e.getSubtreeIterator(),r.appendChild(u(t)),t.detach(!0));if(r.nodeType==10)throw new B("HIERARCHY_REQUEST_ERR");i.appendChild(r)}return i}function a(e,t,n){var r,i;for(n=n||{stop:!1};r=e.next();)if(e.isPartiallySelectedSubtree()){if(t(r)===!1){n.stop=!0;return}r=e.getSubtreeIterator(),a(r,t,n),r.detach(!0);if(n.stop)return}else for(r=P.createIterator(r);i=r.next();)if(t(i)===!1){n.stop=!0;return}}function f(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),f(t),t.detach(!0)):e.remove()}function l(e){for(var t,r=n(e.range).createDocumentFragment(),i;t=e.next();){e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),i=e.getSubtreeIterator(),t.appendChild(l(i)),i.detach(!0)):e.remove();if(t.nodeType==10)throw new B("HIERARCHY_REQUEST_ERR");r.appendChild(t)}return r}function c(e,t,n){var r=!!t&&!!t.length,i,s=!!n;r&&(i=RegExp("^("+t.join("|")+")$"));var o=[];return a(new p(e,!1),function(e){(!r||i.test(e.nodeType))&&(!s||n(e))&&o.push(e)}),o}function h(e){return"["+(typeof e.getName=="undefined"?"Range":e.getName())+"("+P.inspectNode(e.startContainer)+":"+e.startOffset+", "+P.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function p(e,t){this.range=e,this.clonePartiallySelectedTextNodes=t;if(!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&P.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc===n&&!P.isCharacterDataNode(this.sc)?this.sc.childNodes[this.so]:P.getClosestAncestorIn(this.sc,n,!0),this._last=this.ec===n&&!P.isCharacterDataNode(this.ec)?this.ec.childNodes[this.eo-1]:P.getClosestAncestorIn(this.ec,n,!0))}}function d(e){this.code=this[e],this.codeName=e,this.message="RangeException: "+this.codeName}function v(e,t,n){this.nodes=c(e,t,n),this._next=this.nodes[0],this._position=0}function m(e){return function(t,n){for(var r,i=n?t:t.parentNode;i;){r=i.nodeType;if(P.arrayContains(e,r))return i;i=i.parentNode}return null}}function g(e,t){if(W(e,t))throw new d("INVALID_NODE_TYPE_ERR")}function y(e){if(!e.startContainer)throw new B("INVALID_STATE_ERR")}function b(e,t){if(!P.arrayContains(t,e.nodeType))throw new d("INVALID_NODE_TYPE_ERR")}function w(e,t){if(t<0||t>(P.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new B("INDEX_SIZE_ERR")}function E(e,t){if(U(e,!0)!==U(t,!0))throw new B("WRONG_DOCUMENT_ERR")}function S(e){if(z(e,!0))throw new B("NO_MODIFICATION_ALLOWED_ERR")}function x(e,t){if(!e)throw new B(t)}function T(e){return!!e.startContainer&&!!e.endContainer&&(!!P.arrayContains(F,e.startContainer.nodeType)||!!U(e.startContainer,!0))&&(!!P.arrayContains(F,e.endContainer.nodeType)||!!U(e.endContainer,!0))&&e.startOffset<=(P.isCharacterDataNode(e.startContainer)?e.startContainer.length:e.startContainer.childNodes.length)&&e.endOffset<=(P.isCharacterDataNode(e.endContainer)?e.endContainer.length:e.endContainer.childNodes.length)}function N(e){y(e);if(!T(e))throw Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}function C(){}function k(e){e.START_TO_START=K,e.START_TO_END=Q,e.END_TO_END=G,e.END_TO_START=Y,e.NODE_BEFORE=Z,e.NODE_AFTER=et,e.NODE_BEFORE_AND_AFTER=tt,e.NODE_INSIDE=nt}function L(e){k(e),k(e.prototype)}function A(e,t){return function(){N(this);var n=this.startContainer,r=this.startOffset,i=this.commonAncestorContainer,o=new p(this,!0);return n!==i&&(n=P.getClosestAncestorIn(n,i,!0),r=s(n),n=r.node,r=r.offset),a(o,S),o.reset(),i=e(o),o.detach(),t(this,n,r,n,r),i}}function O(n,r,o){function u(e,t){return function(n){y(this),b(n,j),b(R(n),F),n=(e?i:s)(n),(t?a:c)(this,n.node,n.offset)}}function a(e,t,n){var i=e.endContainer,s=e.endOffset;if(t!==e.startContainer||n!==e.startOffset){if(R(t)!=R(i)||P.comparePoints(t,n,i,s)==1)i=t,s=n;r(e,t,n,i,s)}}function c(e,t,n){var i=e.startContainer,s=e.startOffset;if(t!==e.endContainer||n!==e.endOffset){if(R(t)!=R(i)||P.comparePoints(t,n,i,s)==-1)i=t,s=n;r(e,i,s,t,n)}}n.prototype=new C,e.util.extend(n.prototype,{setStart:function(e,t){y(this),g(e,!0),w(e,t),a(this,e,t)},setEnd:function(e,t){y(this),g(e,!0),w(e,t),c(this,e,t)},setStartBefore:u(!0,!0),setStartAfter:u(!1,!0),setEndBefore:u(!0,!1),setEndAfter:u(!1,!1),collapse:function(e){N(this),e?r(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):r(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){y(this),g(e,!0),r(this,e,0,e,P.getNodeLength(e))},selectNode:function(e){y(this),g(e,!1),b(e,j);var t=i(e);e=s(e),r(this,t.node,t.offset,e.node,e.offset)},extractContents:A(l,r),deleteContents:A(f,r),canSurroundContents:function(){N(this),S(this.startContainer),S(this.endContainer);var e=new p(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},detach:function(){o(this)},splitBoundaries:function(){N(this);var e=this.startContainer,t=this.startOffset,n=this.endContainer,i=this.endOffset,s=e===n;P.isCharacterDataNode(n)&&i>0&&i<n.length&&P.splitDataNode(n,i),P.isCharacterDataNode(e)&&t>0&&t<e.length&&(e=P.splitDataNode(e,t),s?(i-=t,n=e):n==e.parentNode&&i>=P.getNodeIndex(e)&&i++,t=0),r(this,e,t,n,i)},normalizeBoundaries:function(){N(this);var e=this.startContainer,t=this.startOffset,n=this.endContainer,i=this.endOffset,s=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(n=e,i=e.length,e.appendData(t.data),t.parentNode.removeChild(t))},o=function(r){var s=r.previousSibling;if(s&&s.nodeType==r.nodeType){e=r;var o=r.length;t=s.length,r.insertData(0,s.data),s.parentNode.removeChild(s),e==n?(i+=t,n=e):n==r.parentNode&&(s=P.getNodeIndex(r),i==s?(n=r,i=o):i>s&&i--)}},u=!0;P.isCharacterDataNode(n)?n.length==i&&s(n):(i>0&&(u=n.childNodes[i-1])&&P.isCharacterDataNode(u)&&s(u),u=!this.collapsed),u?P.isCharacterDataNode(e)?t==0&&o(e):t<e.childNodes.length&&(s=e.childNodes[t])&&P.isCharacterDataNode(s)&&o(s):(e=n,t=i),r(this,e,t,n,i)},collapseToPoint:function(e,t){y(this),g(e,!0),w(e,t),(e!==this.startContainer||t!==this.startOffset||e!==this.endContainer||t!==this.endOffset)&&r(this,e,t,e,t)}}),L(n)}function M(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:P.getCommonAncestor(e.startContainer,e.endContainer)}function _(e,t,n,i,s){var o=e.startContainer!==t||e.startOffset!==n,u=e.endContainer!==i||e.endOffset!==s;e.startContainer=t,e.startOffset=n,e.endContainer=i,e.endOffset=s,M(e),r(e,"boundarychange",{startMoved:o,endMoved:u})}function D(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},M(this)}e.requireModules(["DomUtil"]);var P=e.dom,H=P.DomPosition,B=e.DOMException;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,P.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e=this._current,t,n;!P.isCharacterDataNode(e)||e!==this.sc&&e!==this.ec?e.parentNode&&e.parentNode.removeChild(e):(t=e===this.sc?this.so:0,n=e===this.ec?this.eo:e.length,t!=n&&e.deleteData(t,n-t))},isPartiallySelectedSubtree:function(){return t(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)e=this.range.cloneRange(),e.collapse();else{e=new D(n(this.range));var t=this._current,r=t,i=0,s=t,o=P.getNodeLength(t);P.isAncestorOf(t,this.sc,!0)&&(r=this.sc,i=this.so),P.isAncestorOf(t,this.ec,!0)&&(s=this.ec,o=this.eo),_(e,r,i,s,o)}return new p(e,this.clonePartiallySelectedTextNodes)},detach:function(e){e&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},d.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},d.prototype.toString=function(){return this.message},v.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var j=[1,3,4,5,7,8,10],F=[2,9,11],I=[1,3,4,5,7,8,10,11],q=[1,3,4,5,7,8],R=P.getRootContainer,U=m([9,11]),z=m([5,6,10,12]),W=m([6,10,12]),X=document.createElement("style"),V=!1;try{X.innerHTML="<b>x</b>",V=X.firstChild.nodeType==3}catch($){}e.features.htmlParsingConforms=V;var J=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],K=0,Q=1,G=2,Y=3,Z=0,et=1,tt=2,nt=3;C.prototype={attachListener:function(e,t){this._listeners[e].push(t)},compareBoundaryPoints:function(e,t){N(this),E(this.startContainer,t.startContainer);var n=e==Y||e==K?"start":"end",r=e==Q||e==K?"start":"end";return P.comparePoints(this[n+"Container"],this[n+"Offset"],t[r+"Container"],t[r+"Offset"])},insertNode:function(e){N(this),b(e,I),S(this.startContainer);if(P.isAncestorOf(e,this.startContainer,!0))throw new B("HIERARCHY_REQUEST_ERR");this.setStartBefore(o(e,this.startContainer,this.startOffset))},cloneContents:function(){N(this);var e,t;return this.collapsed?n(this).createDocumentFragment():this.startContainer===this.endContainer&&P.isCharacterDataNode(this.startContainer)?(e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),t=n(this).createDocumentFragment(),t.appendChild(e),t):(t=new p(this,!0),e=u(t),t.detach(),e)},canSurroundContents:function(){N(this),S(this.startContainer),S(this.endContainer);var e=new p(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},surroundContents:function(e){b(e,q);if(!this.canSurroundContents())throw new d("BAD_BOUNDARYPOINTS_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);o(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){N(this);for(var e=new D(n(this)),t=J.length,r;t--;)r=J[t],e[r]=this[r];return e},toString:function(){N(this);var e=this.startContainer;if(e===this.endContainer&&P.isCharacterDataNode(e))return e.nodeType==3||e.nodeType==4?e.data.slice(this.startOffset,this.endOffset):"";var t=[];return e=new p(this,!0),a(e,function(e){(e.nodeType==3||e.nodeType==4)&&t.push(e.data)}),e.detach(),t.join("")},compareNode:function(e){N(this);var t=e.parentNode,n=P.getNodeIndex(e);if(!t)throw new B("NOT_FOUND_ERR");return e=this.comparePoint(t,n),t=this.comparePoint(t,n+1),e<0?t>0?tt:Z:t>0?et:nt},comparePoint:function(e,t){return N(this),x(e,"HIERARCHY_REQUEST_ERR"),E(e,this.startContainer),P.comparePoints(e,t,this.startContainer,this.startOffset)<0?-1:P.comparePoints(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:V?function(e){var t=this.startContainer,n=P.getDocument(t);if(!t)throw new B("INVALID_STATE_ERR");var r=null;return t.nodeType==1?r=t:P.isCharacterDataNode(t)&&(r=P.parentElement(t)),r=r===null||r.nodeName=="HTML"&&P.isHtmlNamespace(P.getDocument(r).documentElement)&&P.isHtmlNamespace(r)?n.createElement("body"):r.cloneNode(!1),r.innerHTML=e,P.fragmentFromNodeChildren(r)}:function(e){y(this);var t=n(this).createElement("body");return t.innerHTML=e,P.fragmentFromNodeChildren(t)},toHtml:function(){N(this);var e=n(this).createElement("div");return e.appendChild(this.cloneContents()),e.innerHTML},intersectsNode:function(e,t){N(this),x(e,"NOT_FOUND_ERR");if(P.getDocument(e)!==n(this))return!1;var r=e.parentNode,i=P.getNodeIndex(e);x(r,"NOT_FOUND_ERR");var s=P.comparePoints(r,i,this.endContainer,this.endOffset);return r=P.comparePoints(r,i+1,this.startContainer,this.startOffset),t?s<=0&&r>=0:s<0&&r>0},isPointInRange:function(e,t){return N(this),x(e,"HIERARCHY_REQUEST_ERR"),E(e,this.startContainer),P.comparePoints(e,t,this.startContainer,this.startOffset)>=0&&P.comparePoints(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e,t){N(this);if(n(e)!=n(this))throw new B("WRONG_DOCUMENT_ERR");var r=P.comparePoints(this.startContainer,this.startOffset,e.endContainer,e.endOffset),i=P.comparePoints(this.endContainer,this.endOffset,e.startContainer,e.startOffset);return t?r<=0&&i>=0:r<0&&i>0},intersection:function(e){if(this.intersectsRange(e)){var t=P.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=P.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset),r=this.cloneRange();return t==-1&&r.setStart(e.startContainer,e.startOffset),n==1&&r.setEnd(e.endContainer,e.endOffset),r}return null},union:function(e){if(this.intersectsRange(e,!0)){var t=this.cloneRange();return P.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)==-1&&t.setStart(e.startContainer,e.startOffset),P.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)==1&&t.setEnd(e.endContainer,e.endOffset),t}throw new d("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==nt},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,P.getNodeLength(e))<=0},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);return n.length>0?(t.setStart(n[0],0),e=n.pop(),t.setEnd(e,e.length),e=this.containsRange(t),t.detach(),e):this.containsNodeContents(e)},createNodeIterator:function(e,t){return N(this),new v(this,e,t)},getNodes:function(e,t){return N(this),c(this,e,t)},getDocument:function(){return n(this)},collapseBefore:function(e){y(this),this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){y(this),this.setStartAfter(e),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(e){return D.rangesEqual(this,e)},isValid:function(){return T(this)},inspect:function(){return h(this)}},O(D,_,function(e){y(e),e.startContainer=e.startOffset=e.endContainer=e.endOffset=null,e.collapsed=e.commonAncestorContainer=null,r(e,"detach",null),e._listeners=null}),e.rangePrototype=C.prototype,D.rangeProperties=J,D.RangeIterator=p,D.copyComparisonConstants=L,D.createPrototypeRange=O,D.inspect=h,D.getRangeDocument=n,D.rangesEqual=function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},e.DomRange=D,e.RangeException=d}),rangy.createModule("WrappedRange",function(e){function t(e,t,n,r){var o=e.duplicate();o.collapse(n);var u=o.parentElement();i.isAncestorOf(t,u,!0)||(u=t);if(!u.canHaveHTML)return new s(u.parentNode,i.getNodeIndex(u));t=i.getDocument(u).createElement("span");var a,f=n?"StartToStart":"StartToEnd";do u.insertBefore(t,t.previousSibling),o.moveToElementText(t);while((a=o.compareEndPoints(f,e))>0&&t.previousSibling);f=t.nextSibling;if(a==-1&&f&&i.isCharacterDataNode(f)){o.setEndPoint(n?"EndToStart":"EndToEnd",e);if(/[\r\n]/.test(f.data)){u=o.duplicate(),n=u.text.replace(/\r\n/g,"\r").length;for(n=u.moveStart("character",n);u.compareEndPoints("StartToEnd",u)==-1;)n++,u.moveStart("character",1)}else n=o.text.length;u=new s(f,n)}else f=(r||!n)&&t.previousSibling,u=(n=(r||n)&&t.nextSibling)&&i.isCharacterDataNode(n)?new s(n,0):f&&i.isCharacterDataNode(f)?new s(f,f.length):new s(u,i.getNodeIndex(t));return t.parentNode.removeChild(t),u}function n(e,t){var n,r,s=e.offset,o=i.getDocument(e.node),u=o.body.createTextRange(),a=i.isCharacterDataNode(e.node);return a?(n=e.node,r=n.parentNode):(n=e.node.childNodes,n=s<n.length?n[s]:null,r=e.node),o=o.createElement("span"),o.innerHTML="&#feff;",n?r.insertBefore(o,n):r.appendChild(o),u.moveToElementText(o),u.collapse(!t),r.removeChild(o),a&&u[t?"moveStart":"moveEnd"]("character",s),u}e.requireModules(["DomUtil","DomRange"]);var r,i=e.dom,s=i.DomPosition,o=e.DomRange;if(e.features.implementsDomRange&&(!e.features.implementsTextRange||!e.config.preferTextRange))(function(){function t(e){for(var t=s.length,n;t--;)n=s[t],e[n]=e.nativeRange[n]}var n,s=o.rangeProperties,u,a;r=function(e){if(!e)throw Error("Range must be specified");this.nativeRange=e,t(this)},o.createPrototypeRange(r,function(e,t,n,r,i){var s=e.endContainer!==r||e.endOffset!=i;if(e.startContainer!==t||e.startOffset!=n||s)e.setEnd(r,i),e.setStart(t,n)},function(e){e.nativeRange.detach(),e.detached=!0;for(var t=s.length,n;t--;)n=s[t],e[n]=null}),n=r.prototype,n.selectNode=function(e){this.nativeRange.selectNode(e),t(this)},n.deleteContents=function(){this.nativeRange.deleteContents(),t(this)},n.extractContents=function(){var e=this.nativeRange.extractContents();return t(this),e},n.cloneContents=function(){return this.nativeRange.cloneContents()},n.surroundContents=function(e){this.nativeRange.surroundContents(e),t(this)},n.collapse=function(e){this.nativeRange.collapse(e),t(this)},n.cloneRange=function(){return new r(this.nativeRange.cloneRange())},n.refresh=function(){t(this)},n.toString=function(){return this.nativeRange.toString()};var f=document.createTextNode("test");i.getBody(document).appendChild(f);var c=document.createRange();c.setStart(f,0),c.setEnd(f,0);try{c.setStart(f,1),u=!0,n.setStart=function(e,n){this.nativeRange.setStart(e,n),t(this)},n.setEnd=function(e,n){this.nativeRange.setEnd(e,n),t(this)},a=function(e){return function(n){this.nativeRange[e](n),t(this)}}}catch(h){u=!1,n.setStart=function(e,n){try{this.nativeRange.setStart(e,n)}catch(r){this.nativeRange.setEnd(e,n),this.nativeRange.setStart(e,n)}t(this)},n.setEnd=function(e,n){try{this.nativeRange.setEnd(e,n)}catch(r){this.nativeRange.setStart(e,n),this.nativeRange.setEnd(e,n)}t(this)},a=function(e,n){return function(r){try{this.nativeRange[e](r)}catch(i){this.nativeRange[n](r),this.nativeRange[e](r)}t(this)}}}n.setStartBefore=a("setStartBefore","setEndBefore"),n.setStartAfter=a("setStartAfter","setEndAfter"),n.setEndBefore=a("setEndBefore","setStartBefore"),n.setEndAfter=a("setEndAfter","setStartAfter"),c.selectNodeContents(f),n.selectNodeContents=c.startContainer==f&&c.endContainer==f&&c.startOffset==0&&c.endOffset==f.length?function(e){this.nativeRange.selectNodeContents(e),t(this)}:function(e){this.setStart(e,0),this.setEnd(e,o.getEndOffset(e))},c.selectNodeContents(f),c.setEnd(f,3),u=document.createRange(),u.selectNodeContents(f),u.setEnd(f,4),u.setStart(f,2),n.compareBoundaryPoints=c.compareBoundaryPoints(c.START_TO_END,u)==-1&c.compareBoundaryPoints(c.END_TO_START,u)==1?function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},e.util.isHostMethod(c,"createContextualFragment")&&(n.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),i.getBody(document).removeChild(f),c.detach(),u.detach()})(),e.createNativeRange=function(e){return e=e||document,e.createRange()};else if(e.features.implementsTextRange){r=function(e){this.textRange=e,this.refresh()},r.prototype=new o(document),r.prototype.refresh=function(){var e,n,r=this.textRange;e=r.parentElement();var s=r.duplicate();s.collapse(!0),n=s.parentElement(),s=r.duplicate(),s.collapse(!1),r=s.parentElement(),n=n==r?n:i.getCommonAncestor(n,r),n=n==e?n:i.getCommonAncestor(e,n),this.textRange.compareEndPoints("StartToEnd",this.textRange)==0?n=e=t(this.textRange,n,!0,!0):(e=t(this.textRange,n,!0,!1),n=t(this.textRange,n,!1,!1)),this.setStart(e.node,e.offset),this.setEnd(n.node,n.offset)},o.copyComparisonConstants(r);var u=function(){return this}();typeof u.Range=="undefined"&&(u.Range=r),e.createNativeRange=function(e){return e=e||document,e.body.createTextRange()}}e.features.implementsTextRange&&(r.rangeToTextRange=function(e){if(e.collapsed)return n(new s(e.startContainer,e.startOffset),!0);var t=n(new s(e.startContainer,e.startOffset),!0),r=n(new s(e.endContainer,e.endOffset),!1);return e=i.getDocument(e.startContainer).body.createTextRange(),e.setEndPoint("StartToStart",t),e.setEndPoint("EndToEnd",r),e}),r.prototype.getName=function(){return"WrappedRange"},e.WrappedRange=r,e.createRange=function(t){return t=t||document,new r(e.createNativeRange(t))},e.createRangyRange=function(e){return e=e||document,new o(e)},e.createIframeRange=function(t){return e.createRange(i.getIframeDocument(t))},e.createIframeRangyRange=function(t){return e.createRangyRange(i.getIframeDocument(t))},e.addCreateMissingNativeApiListener(function(t){t=t.document,typeof t.createRange=="undefined"&&(t.createRange=function(){return e.createRange(this)}),t=t=null})}),rangy.createModule("WrappedSelection",function(e,t){function n(e){return(e||window).getSelection()}function r(e){return(e||window).document.selection}function i(e,t,n){var r=n?"end":"start";n=n?"start":"end",e.anchorNode=t[r+"Container"],e.anchorOffset=t[r+"Offset"],e.focusNode=t[n+"Container"],e.focusOffset=t[n+"Offset"]}function s(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function o(t){var n;return t instanceof g?(n=t._selectionNativeRange,n||(n=e.createNativeRange(v.getDocument(t.startContainer)),n.setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset),t._selectionNativeRange=n,t.attachListener("detach",function(){this._selectionNativeRange=null}))):t instanceof y?n=t.nativeRange:e.features.implementsDomRange&&t instanceof v.getWindow(t.startContainer).Range&&(n=t),n}function u(e){var t=e.getNodes(),n;e:if(!t.length||t[0].nodeType!=1)n=!1;else{n=1;for(var r=t.length;n<r;++n)if(!v.isAncestorOf(t[0],t[n])){n=!1;break e}n=!0}if(!n)throw Error("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return t[0]}function a(e,t){var n=new y(t);e._ranges=[n],i(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function f(t){t._ranges.length=0;if(t.docSelection.type=="None")s(t);else{var n=t.docSelection.createRange();if(n&&typeof n.text!="undefined")a(t,n);else{t.rangeCount=n.length;for(var r,o=v.getDocument(n.item(0)),u=0;u<t.rangeCount;++u)r=e.createRange(o),r.selectNode(n.item(u)),t._ranges.push(r);t.isCollapsed=t.rangeCount==1&&t._ranges[0].collapsed,i(t,t._ranges[t.rangeCount-1],!1)}}}function l(e,t){var n=e.docSelection.createRange(),r=u(t),i=v.getDocument(n.item(0));i=v.getBody(i).createControlRange();for(var s=0,o=n.length;s<o;++s)i.add(n.item(s));try{i.add(r)}catch(a){throw Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}i.select(),f(e)}function c(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function h(e,t){var n=v.getDocument(t[0].startContainer);n=v.getBody(n).createControlRange();for(var r=0,i;r<rangeCount;++r){i=u(t[r]);try{n.add(i)}catch(s){throw Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}n.select(),f(e)}function p(e,t){if(e.anchorNode&&v.getDocument(e.anchorNode)!==v.getDocument(t))throw new b("WRONG_DOCUMENT_ERR")}function d(e){var t=[],n=new w(e.anchorNode,e.anchorOffset),r=new w(e.focusNode,e.focusOffset),i=typeof e.getName=="function"?e.getName():"Selection";if(typeof e.rangeCount!="undefined")for(var s=0,o=e.rangeCount;s<o;++s)t[s]=g.inspect(e.getRangeAt(s));return"["+i+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+r.inspect()+"]"}e.requireModules(["DomUtil","DomRange","WrappedRange"]),e.config.checkSelectionRanges=!0;var v=e.dom,m=e.util,g=e.DomRange,y=e.WrappedRange,b=e.DOMException,w=v.DomPosition,E,S,x=e.util.isHostMethod(window,"getSelection"),T=e.util.isHostObject(document,"selection"),N=T&&(!x||e.config.preferTextRange);N?(E=r,e.isSelectionValid=function(e){e=(e||window).document;var t=e.selection;return t.type!="None"||v.getDocument(t.createRange().parentElement())==e}):x?(E=n,e.isSelectionValid=function(){return!0}):t.fail("Neither document.selection or window.getSelection() detected."),e.getNativeSelection=E,x=E();var C=e.createNativeRange(document),k=v.getBody(document),L=m.areHostObjects(x,m.areHostProperties(x,["anchorOffset","focusOffset"]));e.features.selectionHasAnchorAndFocus=L;var A=m.isHostMethod(x,"extend");e.features.selectionHasExtend=A;var O=typeof x.rangeCount=="number";e.features.selectionHasRangeCount=O;var M=!1,_=!0;m.areHostMethods(x,["addRange","getRangeAt","removeAllRanges"])&&typeof x.rangeCount=="number"&&e.features.implementsDomRange&&function(){var e=document.createElement("iframe");e.frameBorder=0,e.style.position="absolute",e.style.left="-10000px",k.appendChild(e);var t=v.getIframeDocument(e);t.open(),t.write("<html><head></head><body>12</body></html>"),t.close();var n=v.getIframeWindow(e).getSelection(),r=t.documentElement.lastChild.firstChild;t=t.createRange(),t.setStart(r,1),t.collapse(!0),n.addRange(t),_=n.rangeCount==1,n.removeAllRanges();var i=t.cloneRange();t.setStart(r,0),i.setEnd(r,2),n.addRange(t),n.addRange(i),M=n.rangeCount==2,t.detach(),i.detach(),k.removeChild(e)}(),e.features.selectionSupportsMultipleRanges=M,e.features.collapsedNonEditableSelectionsSupported=_;var D=!1,P;k&&m.isHostMethod(k,"createControlRange")&&(P=k.createControlRange(),m.areHostProperties(P,["item","add"])&&(D=!0)),e.features.implementsControlRange=D,S=L?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return e.rangeCount?e.getRangeAt(e.rangeCount-1).collapsed:!1};var H;m.isHostMethod(x,"getRangeAt")?H=function(e,t){try{return e.getRangeAt(t)}catch(n){return null}}:L&&(H=function(t){var n=v.getDocument(t.anchorNode);return n=e.createRange(n),n.setStart(t.anchorNode,t.anchorOffset),n.setEnd(t.focusNode,t.focusOffset),n.collapsed!==this.isCollapsed&&(n.setStart(t.focusNode,t.focusOffset),n.setEnd(t.anchorNode,t.anchorOffset)),n}),e.getSelection=function(e){e=e||window;var t=e._rangySelection,n=E(e),i=T?r(e):null;return t?(t.nativeSelection=n,t.docSelection=i,t.refresh(e)):(t=new c(n,i,e),e._rangySelection=t),t},e.getIframeSelection=function(t){return e.getSelection(v.getIframeWindow(t))},P=c.prototype;if(!N&&L&&m.areHostMethods(x,["removeAllRanges","addRange"])){P.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),s(this)};var B=function(t,n){var r=g.getRangeDocument(n);r=e.createRange(r),r.collapseToPoint(n.endContainer,n.endOffset),t.nativeSelection.addRange(o(r)),t.nativeSelection.extend(n.startContainer,n.startOffset),t.refresh()};P.addRange=O?function(t,n){if(D&&T&&this.docSelection.type=="Control")l(this,t);else if(n&&A)B(this,t);else{var r;M?r=this.rangeCount:(this.removeAllRanges(),r=0),this.nativeSelection.addRange(o(t)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==r+1?(e.config.checkSelectionRanges&&(r=H(this.nativeSelection,this.rangeCount-1))&&!g.rangesEqual(r,t)&&(t=new y(r)),this._ranges[this.rangeCount-1]=t,i(this,t,I(this.nativeSelection)),this.isCollapsed=S(this)):this.refresh()}}:function(e,t){t&&A?B(this,e):(this.nativeSelection.addRange(o(e)),this.refresh())},P.setRanges=function(e){if(D&&e.length>1)h(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else{if(!(m.isHostMethod(x,"empty")&&m.isHostMethod(C,"select")&&D&&N))return t.fail("No means of selecting a Range or TextRange was found"),!1;P.removeAllRanges=function(){try{this.docSelection.empty();if(this.docSelection.type!="None"){var e;if(this.anchorNode)e=v.getDocument(this.anchorNode);else if(this.docSelection.type=="Control"){var t=this.docSelection.createRange();t.length&&(e=v.getDocument(t.item(0)).body.createTextRange())}e&&(e.body.createTextRange().select(),this.docSelection.empty())}}catch(n){}s(this)},P.addRange=function(e){this.docSelection.type=="Control"?l(this,e):(y.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,i(this,e,!1))},P.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?h(this,e):t&&this.addRange(e[0])}}P.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new b("INDEX_SIZE_ERR");return this._ranges[e]};var j;if(N)j=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=v.getBody(t.win.document).createTextRange(),n.collapse(!0)),t.docSelection.type=="Control"?f(t):n&&typeof n.text!="undefined"?a(t,n):s(t)};else if(m.isHostMethod(x,"getRangeAt")&&typeof x.rangeCount=="number")j=function(t){if(D&&T&&t.docSelection.type=="Control")f(t);else{t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount;if(t.rangeCount){for(var n=0,r=t.rangeCount;n<r;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));i(t,t._ranges[t.rangeCount-1],I(t.nativeSelection)),t.isCollapsed=S(t)}else s(t)}};else{if(!L||typeof x.isCollapsed!="boolean"||typeof C.collapsed!="boolean"||!e.features.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;j=function(e){var t;t=e.nativeSelection,t.anchorNode?(t=H(t,0),e._ranges=[t],e.rangeCount=1,t=e.nativeSelection,e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset,e.isCollapsed=S(e)):s(e)}}P.refresh=function(e){var t=e?this._ranges.slice(0):null;j(this);if(e){e=t.length;if(e!=this._ranges.length)return!1;for(;e--;)if(!g.rangesEqual(t[e],this._ranges[e]))return!1;return!0}};var F=function(e,t){var n=e.getAllRanges(),r=!1;e.removeAllRanges();for(var i=0,o=n.length;i<o;++i)r||t!==n[i]?e.addRange(n[i]):r=!0;e.rangeCount||s(e)};P.removeRange=D?function(e){if(this.docSelection.type=="Control"){var t=this.docSelection.createRange();e=u(e);var n=v.getDocument(t.item(0));n=v.getBody(n).createControlRange();for(var r,i=!1,s=0,o=t.length;s<o;++s)r=t.item(s),r!==e||i?n.add(t.item(s)):i=!0;n.select(),f(this)}else F(this,e)}:function(e){F(this,e)};var I;!N&&L&&e.features.implementsDomRange?(I=function(e){var t=!1;return e.anchorNode&&(t=v.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)==1),t},P.isBackwards=function(){return I(this)}):I=P.isBackwards=function(){return!1},P.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},P.collapse=function(t,n){p(this,t);var r=e.createRange(v.getDocument(t));r.collapseToPoint(t,n),this.removeAllRanges(),this.addRange(r),this.isCollapsed=!0},P.collapseToStart=function(){if(!this.rangeCount)throw new b("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},P.collapseToEnd=function(){if(!this.rangeCount)throw new b("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},P.selectAllChildren=function(t){p(this,t);var n=e.createRange(v.getDocument(t));n.selectNodeContents(t),this.removeAllRanges(),this.addRange(n)},P.deleteFromDocument=function(){if(D&&T&&this.docSelection.type=="Control"){for(var e=this.docSelection.createRange(),t;e.length;)t=e.item(0),e.remove(t),t.parentNode.removeChild(t);this.refresh()}else if(this.rangeCount){e=this.getAllRanges(),this.removeAllRanges(),t=0;for(var n=e.length;t<n;++t)e[t].deleteContents();this.addRange(e[n-1])}},P.getAllRanges=function(){return this._ranges.slice(0)},P.setSingleRange=function(e){this.setRanges([e])},P.containsNode=function(e,t){for(var n=0,r=this._ranges.length;n<r;++n)if(this._ranges[n].containsNode(e,t))return!0;return!1},P.toHtml=function(){var e="";if(this.rangeCount){e=g.getRangeDocument(this._ranges[0]).createElement("div");for(var t=0,n=this._ranges.length;t<n;++t)e.appendChild(this._ranges[t].cloneContents());e=e.innerHTML}return e},P.getName=function(){return"WrappedSelection"},P.inspect=function(){return d(this)},P.detach=function(){this.win=this.anchorNode=this.focusNode=this.win._rangySelection=null},c.inspect=d,e.Selection=c,e.selectionPrototype=P,e.addCreateMissingNativeApiListener(function(t){typeof t.getSelection=="undefined"&&(t.getSelection=function(){return e.getSelection(this)}),t=null})}),define("Library/createjs/deps/rangy-core-1.2.3",function(){}),function(e,t){e.widget("Midgard.midgardCreate",{options:{toolbar:"full",saveButton:null,state:"browse",highlight:!0,highlightColor:"#67cc08",editorWidgets:{"default":"hallo"},editorOptions:{hallo:{widget:"halloWidget"}},collectionWidgets:{"default":"midgardCollectionAdd"},url:function(){},storagePrefix:"node",workflows:{url:null},notifications:{},vie:null,domService:"rdfa",stanbolUrl:null,dbPediaUrl:null,metadata:{},buttonContainer:".create-ui-toolbar-statustoolarea .create-ui-statustools",templates:{buttonContent:'<%= label %> <i class="icon-<%= icon %>"></i>',button:'<li id="<%= id %>"><a class="create-ui-btn"><%= buttonContent %></a></li>'},localize:function(e,t){return window.midgardCreate.localize(e,t)},language:null},_create:function(){this.vie=this._setupVIE(this.options),this.domService=this.vie.service(this.options.domService);var t=this;window.setTimeout(function(){t._checkSession()},10),this.options.language||(this.options.language=e("html").attr("lang")),this._enableToolbar(),this._enableMetadata(),this._saveButton(),this._editButton(),this._prepareStorage(),this.element.midgardWorkflows&&this.element.midgardWorkflows(this.options.workflows),this.element.midgardNotifications&&this.element.midgardNotifications(this.options.notifications),this._bindShortcuts()},destroy:function(){this.element.midgardStorage("destroy"),this.element.midgardToolbar("destroy"),this.domService.findSubjectElements(this.element).each(function(){e(this).midgardEditable("destroy")}),this.element.midgardWorkflows&&this.element.midgardWorkflows("destroy"),this.element.midgardNotifications&&this.element.midgardNotifications("destroy"),_.isEmpty(this.options.metadata)||this.element.midgardMetadata("destroy"),e.Widget.prototype.destroy.call(this)},_setupVIE:function(e){var t;return t=e.vie?e.vie:new VIE,t.hasService(this.options.domService)||"rdfa"!==this.options.domService||t.use(new t.RdfaService),!t.hasService("stanbol")&&e.stanbolUrl&&t.use(new t.StanbolService({proxyDisabled:!0,url:e.stanbolUrl})),!t.hasService("dbpedia")&&e.dbPediaUrl&&t.use(new t.DBPediaService({proxyDisabled:!0,url:e.dbPediaUrl})),t},_prepareStorage:function(){this.element.midgardStorage({vie:this.vie,url:this.options.url,localize:this.options.localize,language:this.options.language,storagePrefix:this.options.storagePrefix});var t=this;this.element.on("midgardstoragesave",function(){e("#midgardcreate-save a").html(_.template(t.options.templates.buttonContent,{label:t.options.localize("Saving",t.options.language),icon:"upload"}))}),this.element.on("midgardstoragesaved midgardstorageerror",function(){e("#midgardcreate-save a").html(_.template(t.options.templates.buttonContent,{label:t.options.localize("Save",t.options.language),icon:"ok"}))})},_init:function(){this.setState(this.options.state)},setState:function(e){this._setOption("state",e),"edit"===e?this._enableEdit():this._disableEdit(),this._setEditButtonState(e)},setToolbar:function(e){this.options.toolbar=e,(this.element.data("Midgard-midgardToolbar")||this.element.data("midgardToolbar"))&&this.element.midgardToolbar("setDisplay",e)},showNotification:function(e){return this.element.midgardNotifications?this.element.midgardNotifications("create",e):t},configureEditor:function(e,t,n){this.options.editorOptions[e]={widget:t,options:n}},setEditorForContentType:function(e,n){if(this.options.editorOptions[n]===t&&null!==n)throw Error("No editor "+n+" configured");this.options.editorWidgets[e]=n},setEditorForProperty:function(e,n){if(this.options.editorOptions[n]===t&&null!==n)throw Error("No editor "+n+" configured");this.options.editorWidgets[e]=n},_checkSession:function(){if(window.sessionStorage){var e=this.options.storagePrefix+"Midgard.create.toolbar";window.sessionStorage.getItem(e)&&this.setToolbar(window.sessionStorage.getItem(e));var t=this.options.storagePrefix+"Midgard.create.state";window.sessionStorage.getItem(t)&&this.setState(window.sessionStorage.getItem(t)),this.element.on("midgardcreatestatechange",function(e,n){window.sessionStorage.setItem(t,n.state)})}},_bindShortcuts:function(){if(window.Mousetrap){var e=this;window.Mousetrap.bind(["command+e","ctrl+e"],function(){"edit"!==e.options.state&&e.setState("edit")}),window.Mousetrap.bind("esc",function(t){"browse"!==e.options.state&&(t.stopPropagation(),e.setState("browse"))}),window.Mousetrap.bind(["command+s","ctrl+s"],function(t){t.preventDefault(),e.options.saveButton&&(e.options.saveButton.hasClass("ui-state-disabled")||e.options.saveButton.click())})}},_saveButton:function(){if(this.options.saveButton)return this.options.saveButton;var t=this;e(this.options.buttonContainer,this.element).append(e(_.template(this.options.templates.button,{id:"midgardcreate-save",buttonContent:_.template(this.options.templates.buttonContent,{label:t.options.localize("Save",t.options.language),icon:"ok"})}))),this.options.saveButton=e("#midgardcreate-save",this.element),this.options.saveButton.hide(),this.options.saveButton.click(function(){t.element.midgardStorage("saveRemoteAll")}),this.element.on("midgardeditablechanged midgardstorageloaded",function(){t.options.saveButton.button({disabled:!1})}),this.element.on("midgardstoragesaved",function(){t.options.saveButton.button({disabled:!0})}),this.element.on("midgardeditableenable",function(){t.options.saveButton.button({disabled:!0}),t.options.saveButton.show()}),this.element.on("midgardeditabledisable",function(){t.options.saveButton.hide()})},_editButton:function(){var n=this;e(this.options.buttonContainer,this.element).append(e(_.template(this.options.templates.button,{id:"midgardcreate-edit",buttonContent:""}))),e("#midgardcreate-edit",this.element).on("click",function(){return"edit"===n.options.state?(n.setState("browse"),t):(n.setState("edit"),t)})},_setEditButtonState:function(t){var n=this,r={edit:_.template(this.options.templates.buttonContent,{label:n.options.localize("Cancel",n.options.language),icon:"remove"}),browse:_.template(this.options.templates.buttonContent,{label:n.options.localize("Edit",n.options.language),icon:"edit"})},i=e("#midgardcreate-edit a",this.element);i&&("edit"===t&&i.addClass("selected"),i.html(r[t]))},_enableToolbar:function(){var e=this;this.element.on("midgardtoolbarstatechange",function(t,n){e.setToolbar(n.display),window.sessionStorage&&window.sessionStorage.setItem(e.options.storagePrefix+"Midgard.create.toolbar",n.display)}),this.element.midgardToolbar({display:this.options.toolbar,vie:this.vie})},_enableMetadata:function(){_.isEmpty(this.options.metadata)||e(".create-ui-tool-metadataarea",this.element).midgardMetadata({vie:this.vie,localize:this.options.localize,language:this.options.language,editors:this.options.metadata,createElement:this.element,editableNs:"midgardeditable"})},_enableEdit:function(){this._setOption("state","edit");var t=this,n={toolbarState:t.options.toolbar,disabled:!1,vie:t.vie,domService:t.options.domService,widgets:t.options.editorWidgets,editors:t.options.editorOptions,collectionWidgets:t.options.collectionWidgets,localize:t.options.localize,language:t.options.language};t.options.enableEditor&&(n.enableEditor=t.options.enableEditor),t.options.disableEditor&&(n.disableEditor=t.options.disableEditor),this.domService.findSubjectElements(this.element).each(function(){var r=this;if(t.options.highlight){var s=function(n,i){e(i.element).is(":visible")&&i.entityElement.get(0)===r&&(window.Mousetrap&&i.element.addClass("mousetrap"),i.element.stop(!0,!0),i.element.effect("highlight",{color:t.options.highlightColor},3e3))};e(this).on("midgardeditableenableproperty",s)}e(this).on("midgardeditabledisable",function(){e(this).off("midgardeditableenableproperty",s)}),e(this).midgardEditable(n)}),this._trigger("statechange",null,{state:"edit"})},_disableEdit:function(){var t=this,n={disabled:!0,vie:t.vie,domService:t.options.domService,editorOptions:t.options.editorOptions,localize:t.options.localize,language:t.options.language};this.domService.findSubjectElements(this.element).each(function(){e(this).midgardEditable(n),e(this).removeClass("ui-state-disabled")}),this._setOption("state","browse"),this._trigger("statechange",null,{state:"browse"})}})}(jQuery),function(e,t){e.widget("Midgard.midgardEditable",{options:{propertyEditors:{},collections:[],model:null,propertyEditorWidgetsConfiguration:{hallo:{widget:"halloWidget",options:{}}},propertyEditorWidgets:{"default":"hallo"},collectionWidgets:{"default":"midgardCollectionAdd"},toolbarState:"full",vie:null,domService:"rdfa",predicateSelector:"[property]",disabled:!1,localize:function(e,t){return window.midgardCreate.localize(e,t)},language:null,state:null,acceptStateChange:!0,stateChange:null,decorateEditableEntity:null,decoratePropertyEditor:null,editables:[],editors:{},widgets:{}},_params:function(e,t){var n={entity:this.options.model,editableEntity:this,entityElement:this.element,editable:this,element:this.element,instance:this.options.model},r=e?{predicate:e,propertyEditor:this.options.propertyEditors[e],propertyElement:this.options.propertyEditors[e].element,property:e,element:this.options.propertyEditors[e].element}:{};return _.extend(n,r,t)},_create:function(){if(this.options.widgets&&(this.options.propertyEditorWidgets=_.extend(this.options.propertyEditorWidgets,this.options.widgets)),this.options.editors&&(this.options.propertyEditorWidgetsConfiguration=_.extend(this.options.propertyEditorWidgetsConfiguration,this.options.editors)),this.vie=this.options.vie,this.domService=this.vie.service(this.options.domService),!this.options.model){var e=this;this.vie.load({element:this.element}).from(this.options.domService).execute().done(function(t){e.options.model=t[0]})}_.isFunction(this.options.decorateEditableEntity)&&this.options.decorateEditableEntity(this._params())},_init:function(){return this.options.widgets&&(this.options.propertyEditorWidgets=_.extend(this.options.propertyEditorWidgets,this.options.widgets)),this.options.editors&&(this.options.propertyEditorWidgetsConfiguration=_.extend(this.options.propertyEditorWidgetsConfiguration,this.options.editors)),this.options.disabled===!0?(this.setState("inactive"),t):this.options.disabled===!1&&"inactive"===this.options.state?(this.setState("candidate"),t):(this.options.disabled=!1,this.options.state?(this.setState(this.options.state),t):(this.setState("candidate"),t))},setState:function(e,n,r,i){var s=this.options.state,o=e;if(o!==s){if(this.options.acceptStateChange===t||!_.isFunction(this.options.acceptStateChange))return this._doSetState(s,o,n,r),_.isFunction(i)&&i(!0),t;var u=this;this.options.acceptStateChange(s,o,n,r,function(e){e&&u._doSetState(s,o,n,r),_.isFunction(i)&&i(e)})}},getState:function(){return this.options.state},_doSetState:function(e,t,n,r){this.options.state=t,"inactive"===t?this.disable():null!==e&&"inactive"!==e||"inactive"===t||this.enable(),this._trigger("statechange",null,this._params(n,{previous:e,current:t,context:r}))},findEditablePredicateElements:function(t){this.domService.findPredicateElements(this.options.model.id,e(this.options.predicateSelector,this.element),!1).each(t)},getElementPredicate:function(e){return this.domService.getElementPredicate(e)},enable:function(){var t=this;this.options.model&&(this.findEditablePredicateElements(function(){t._enablePropertyEditor(e(this))}),this._trigger("enable",null,this._params()),this.vie.view&&this.vie.view.Collection&&_.each(this.domService.views,function(e){if(e instanceof this.vie.view.Collection&&this.options.model===e.owner){var n=e.collection.predicate,r=_.clone(this.options);r.state=null;var i=this.enableCollection({model:this.options.model,collection:e.collection,property:n,definition:this.getAttributeDefinition(n),view:e,element:e.el,vie:t.vie,editableOptions:r});t.options.collections.push(i)}},this))},disable:function(){_.each(this.options.propertyEditors,function(e){this.disablePropertyEditor({widget:this,editable:e,entity:this.options.model,element:e.element})},this),this.options.propertyEditors={},this.options.editables=[],_.each(this.options.collections,function(e){var t=_.clone(this.options);t.state="inactive",this.disableCollection({widget:this,model:this.options.model,element:e,vie:this.vie,editableOptions:t})},this),this.options.collections=[],this._trigger("disable",null,this._params())},_enablePropertyEditor:function(e){var t=this,n=this.getElementPredicate(e);if(!n)return!0;if(this.options.model.get(n)instanceof Array)return!0;var r=this.enablePropertyEditor({widget:this,element:e,entity:this.options.model,property:n,vie:this.vie,decorate:this.options.decoratePropertyEditor,decorateParams:_.bind(this._params,this),changed:function(e){t.setState("changed",n);var r={};r[n]=e,t.options.model.set(r,{silent:!0}),t._trigger("changed",null,t._params(n))},activating:function(){t.setState("activating",n)},activated:function(){t.setState("active",n),t._trigger("activated",null,t._params(n))},deactivated:function(){t.setState("candidate",n),t._trigger("deactivated",null,t._params(n))}});if(r){var i=r.data("createWidgetName");this.options.propertyEditors[n]=r.data("Midgard-"+i),this.options.propertyEditors[n]||(this.options.propertyEditors[n]=r.data(i)),this.options.editables.push(r),this._trigger("enableproperty",null,this._params(n))}},_propertyEditorName:function(e){if(this.options.propertyEditorWidgets[e.property]!==t)return this.options.propertyEditorWidgets[e.property];var n="default",r=this.getAttributeDefinition(e.property);return r&&(n=r.range[0]),this.options.propertyEditorWidgets[n]!==t?this.options.propertyEditorWidgets[n]:this.options.propertyEditorWidgets["default"]},_propertyEditorWidget:function(e){return this.options.propertyEditorWidgetsConfiguration[e].widget},_propertyEditorOptions:function(e){return this.options.propertyEditorWidgetsConfiguration[e].options},getAttributeDefinition:function(e){var t=this.options.model.get("@type");if(t&&t.attributes)return t.attributes.get(e)},enableEditor:function(e){return this.enablePropertyEditor(e)},enablePropertyEditor:function(t){var n=this._propertyEditorName(t);if(null!==n){var r=this._propertyEditorWidget(n);if(t.editorOptions=this._propertyEditorOptions(n),t.toolbarState=this.options.toolbarState,t.disabled=!1,t.editorName=n,t.editorWidget=r,"function"!=typeof e(t.element)[r])throw Error(r+" widget is not available");return e(t.element)[r](t),e(t.element).data("createWidgetName",r),e(t.element)}},disableEditor:function(e){return this.disablePropertyEditor(e)},disablePropertyEditor:function(t){t.element[t.editable.widgetName]({disabled:!0}),e(t.element).removeClass("ui-state-disabled"),t.element.is(":focus")&&t.element.blur()},collectionWidgetName:function(e){if(this.options.collectionWidgets[e.property]!==t)return this.options.collectionWidgets[e.property];var n="default",r=this.getAttributeDefinition(e.property);return r&&(n=r.range[0]),this.options.collectionWidgets[n]!==t?this.options.collectionWidgets[n]:this.options.collectionWidgets["default"]},enableCollection:function(t){var n=this.collectionWidgetName(t);if(null!==n){if(t.disabled=!1,"function"!=typeof e(t.element)[n])throw Error(n+" widget is not available");return e(t.element)[n](t),e(t.element).data("createCollectionWidgetName",n),e(t.element)}},disableCollection:function(t){var n=e(t.element).data("createCollectionWidgetName");null!==n&&(t.disabled=!0,n&&(e(t.element)[n](t),e(t.element).removeClass("ui-state-disabled")))}})}(jQuery),function(e){e.widget("Midgard.midgardMetadata",{contentArea:null,editorElements:{},options:{vie:null,templates:{button:'<button class="create-ui-btn"><i class="icon-<%= icon %>"></i> <%= label %></button>',contentArea:'<div class="dropdown-menu"></div>'},localize:function(e,t){return window.midgardCreate.localize(e,t)},language:null,createElement:"body",editableNs:"midgardeditable"},_create:function(){this._render()},_init:function(){this._prepareEditors(),this._bindEditables()},_prepareEditors:function(){_.each(this.options.editors,function(t,n){var r=e("<div></div>").addClass(n);if(this.contentArea.append(r),!_.isFunction(r[n]))throw Error("Metadata editor widget "+n+" is not available");_.extend(t,{vie:this.options.vie,language:this.options.language,localize:this.options.localize,createElement:this.options.createElement,editableNs:this.options.editableNs}),r[n](t),this.editorElements[n]=r},this)},activateEditors:function(e){this.element.show(),_.each(this.options.editors,function(t,n){this.editorElements[n]&&this.editorElements[n][n]("activate",e)},this)},_bindEditables:function(){var t=this,n=e(this.options.createElement);n.on(this.options.editableNs+"activated",function(e,n){t.activateEditors({entity:n.entity,entityElement:n.entityElement,predicate:n.predicate})})},_prepareEditorArea:function(){var t=e(_.template(this.options.templates.contentArea,{}));return t.hide(),t},_render:function(){var t=this,n=e(_.template(this.options.templates.button,{icon:"info-sign",label:this.options.localize("Metadata",this.options.language)}));this.element.empty(),this.element.append(n),this.element.hide(),this.contentArea=this._prepareEditorArea(n),n.after(this.contentArea),n.on("click",function(e){e.preventDefault();var r=n.position();t.contentArea.css({position:"absolute",left:r.left}),t.contentArea.toggle()})}})}(jQuery),function(e){e.widget("Midgard.midgardStorage",{saveEnabled:!0,options:{localStorage:!1,storagePrefix:"",removeLocalstorageOnIgnore:!0,vie:null,url:"",autoSave:!1,autoSaveInterval:5e3,saveReferencedNew:!1,saveReferencedChanged:!1,editableNs:"midgardeditable",editSelector:"#midgardcreate-edit a",localize:function(e,t){return window.midgardCreate.localize(e,t)},language:null},_create:function(){var e=this;this.changedModels=[],window.localStorage&&(this.options.localStorage=!0),this.vie=this.options.vie,this.vie.entities.on("add",function(t){t.url=e.options.url,t.toJSON=t.toJSONLD}),e._bindEditables(),e.options.autoSave&&e._autoSave()},_autoSave:function(){var e=this;e.saveEnabled=!0;var t=function(){e.saveEnabled&&0!==e.changedModels.length&&e.saveRemoteAll({silent:!0})},n=window.setInterval(t,e.options.autoSaveInterval);this.element.on("startPreventSave",function(){n&&(window.clearInterval(n),n=null),e.disableAutoSave()}),this.element.on("stopPreventSave",function(){n||(n=window.setInterval(t,e.options.autoSaveInterval)),e.enableAutoSave()})},enableAutoSave:function(){this.saveEnabled=!0},disableAutoSave:function(){this.saveEnabled=!1},_bindEditables:function(){var e=this;this.restorables=[];var t;e.element.on(e.options.editableNs+"changed",function(t,n){-1===_.indexOf(e.changedModels,n.instance)&&e.changedModels.push(n.instance),e._saveLocal(n.instance)}),e.element.on(e.options.editableNs+"disable",function(t,n){e.revertChanges(n.instance)}),e.element.on(e.options.editableNs+"enable",function(t,n){n.instance._originalAttributes||(n.instance._originalAttributes=_.clone(n.instance.attributes)),!n.instance.isNew()&&e._checkLocal(n.instance)&&e.restorables.push(n.instance)}),e.element.on("midgardcreatestatechange",function(n,r){return"browse"===r.state||0===e.restorables.length?(e.restorables=[],t&&t.close(),undefined):(t=e.checkRestore(),undefined)}),e.element.on("midgardstorageloaded",function(t,n){-1===_.indexOf(e.changedModels,n.instance)&&e.changedModels.push(n.instance)})},checkRestore:function(){var t=this;if(0!==t.restorables.length){var n,r;n=1===t.restorables.length?_.template(t.options.localize("localModification",t.options.language),{label:t.restorables[0].getSubjectUri()}):_.template(t.options.localize("localModifications",t.options.language),{number:t.restorables.length});var i=function(){t.restoreLocalAll(),r.close()},s=function(){t.ignoreLocal(),r.close()};return r=e("body").midgardNotifications("create",{bindTo:t.options.editSelector,gravity:"TR",body:n,timeout:0,actions:[{name:"restore",label:t.options.localize("Restore",t.options.language),cb:i,className:"create-ui-btn"},{name:"ignore",label:t.options.localize("Ignore",t.options.language),cb:s,className:"create-ui-btn"}],callbacks:{beforeShow:function(){window.Mousetrap&&(window.Mousetrap.bind(["command+shift+r","ctrl+shift+r"],function(e){e.preventDefault(),i()}),window.Mousetrap.bind(["command+shift+i","ctrl+shift+i"],function(e){e.preventDefault(),s()}))},afterClose:function(){window.Mousetrap&&(window.Mousetrap.unbind(["command+shift+r","ctrl+shift+r"]),window.Mousetrap.unbind(["command+shift+i","ctrl+shift+i"]))}}})}},restoreLocalAll:function(){_.each(this.restorables,function(e){this.readLocal(e)},this),this.restorables=[]},ignoreLocal:function(){this.options.removeLocalstorageOnIgnore&&_.each(this.restorables,function(e){this._removeLocal(e)},this),this.restorables=[]},saveReferences:function(e){_.each(e.attributes,function(e){e&&e.isCollection&&e.each(function(e){return-1===this.changedModels.indexOf(e)?e.isNew()&&this.options.saveReferencedNew?e.save():e.hasChanged()&&this.options.saveReferencedChanged?e.save():undefined:undefined},this)},this)},saveRemote:function(e,t){this.saveReferences(e),this._trigger("saveentity",null,{entity:e,options:t});var n=this;e.save(null,_.extend({},t,{success:function(r,s){e._originalAttributes=_.clone(e.attributes),n._removeLocal(e),window.setTimeout(function(){n.changedModels.splice(n.changedModels.indexOf(e),1)},0),_.isFunction(t.success)&&t.success(r,s),n._trigger("savedentity",null,{entity:e,options:t})},error:function(e,n){_.isFunction(t.error)&&t.error(e,n)}}))},saveRemoteAll:function(t){var n=this;if(0!==n.changedModels.length){n._trigger("save",null,{entities:n.changedModels,options:t,models:n.changedModels});var r,i=n.changedModels.length;r=i>1?_.template(n.options.localize("saveSuccessMultiple",n.options.language),{number:i}):_.template(n.options.localize("saveSuccess",n.options.language),{label:n.changedModels[0].getSubjectUri()}),n.disableAutoSave(),_.each(n.changedModels,function(s){this.saveRemote(s,{success:function(s,u){i--,0>=i&&(n._trigger("saved",null,{options:t}),t&&_.isFunction(t.success)&&t.success(s,u),e("body").midgardNotifications("create",{body:r}),n.enableAutoSave())},error:function(r,i){t&&_.isFunction(t.error)&&t.error(r,i),e("body").midgardNotifications("create",{body:_.template(n.options.localize("saveError",n.options.language),{error:i.responseText||""}),timeout:0}),n._trigger("error",null,{instance:s})}})},this)}},_saveLocal:function(e){if(this.options.localStorage){if(e.isNew()){if(!e.primaryCollection)return;return this._saveLocalReferences(e.primaryCollection.subject,e.primaryCollection.predicate,e)}var t=this.options.storagePrefix+e.getSubjectUri();window.localStorage.setItem(t,JSON.stringify(e.toJSONLD()))}},_getReferenceId:function(e,t){return e.id+":"+t},_saveLocalReferences:function(e,t,n){if(this.options.localStorage&&e&&t){var r=this.options.storagePrefix+e+":"+t,i=n.toJSONLD();if(window.localStorage.getItem(r)){var s=JSON.parse(window.localStorage.getItem(r)),o=_.pluck(s,"@").indexOf(i["@"]);return-1!==o?s[o]=i:s.push(i),window.localStorage.setItem(r,JSON.stringify(s)),undefined}window.localStorage.setItem(r,JSON.stringify([i]))}},_checkLocal:function(e){if(!this.options.localStorage)return!1;var t=this.options.storagePrefix+e.getSubjectUri(),n=window.localStorage.getItem(t);return n?!0:!1},hasLocal:function(e){if(!this.options.localStorage)return!1;var t=this.options.storagePrefix+e.getSubjectUri();return window.localStorage.getItem(t)?!0:!1},readLocal:function(e){if(this.options.localStorage){var t=this.options.storagePrefix+e.getSubjectUri(),n=window.localStorage.getItem(t);if(n){e._originalAttributes||(e._originalAttributes=_.clone(e.attributes));var r=JSON.parse(n),i=this.vie.entities.addOrUpdate(r,{overrideAttributes:!0});this._trigger("loaded",null,{instance:i})}}},_readLocalReferences:function(e,t,n){if(this.options.localStorage){var r=this.options.storagePrefix+this._getReferenceId(e,t),i=window.localStorage.getItem(r);i&&n.add(JSON.parse(i))}},revertChanges:function(e){var t=this;if(e)return _.each(e.attributes,function(e){if(e instanceof t.vie.Collection){var n=[];e.forEach(function(e){e.isNew()&&n.push(e)}),e.remove(n)}}),e.changedAttributes()?(e.set(e.previousAttributes()),undefined):(e._originalAttributes&&e.set(e._originalAttributes),undefined)},_removeLocal:function(e){if(this.options.localStorage){var t=this.options.storagePrefix+e.getSubjectUri();window.localStorage.removeItem(t)}}})}(jQuery),function(e){e.widget("Midgard.midgardWorkflows",{options:{url:function(){},templates:{button:'<button class="create-ui-btn" id="<%= id %>"><%= label %></button>'},renderers:{button:function(t,n,r,i){var s="midgardcreate-workflow_"+n.get("name"),o=e(_.template(this.options.templates.button,{id:s,label:n.get("label")})).button();return o.on("click",function(){r(t,n,i)}),o}},action_types:{backbone_save:function(e,t,n){var r=e.url,i=e.clone();i.url=r;var s=t.get("action");s.url&&(e.url=s.url),i.save(null,{success:function(){e.url=r,e.change(),n(null,e)},error:function(t,i){e.url=r,e.change(),n(i,e)}})},backbone_destroy:function(e,t,n){var r=e.url,i=e.clone();i.url=r;var s=t.get("action");s.url&&(e.url=s.url),e.destroy({success:function(t){e.url=r,e.change(),n(null,t)},error:function(t,i){e.url=r,e.change(),n(i,e)}})},http:function(t,n,r){var i=n.get("action");if(!i.url)return r("No action url defined!");var s={};i.http&&(s=i.http);var o=e.extend({url:i.url,type:"POST",data:t.toJSON(),success:function(){t.fetch({success:function(e){r(null,e)},error:function(e,t){r(t,e)}})}},s);e.ajax(o)}}},_init:function(){this._renderers={},this._action_types={},this._parseRenderersAndTypes(),this._last_instance=null,this.ModelWorkflowModel=Backbone.Model.extend({defaults:{name:"",label:"",type:"button",action:{type:"backbone_save"}}}),this.workflows={};var t=this;e(this.element).on("midgardeditableactivated",function(e,n){t._fetchWorkflows(n.instance)})},_fetchWorkflows:function(e){var t=this;if(e.isNew())return t._trigger("changed",null,{instance:e,workflows:[]}),undefined;if(t._last_instance==e)return t.workflows[e.cid]&&t._trigger("changed",null,{instance:e,workflows:t.workflows[e.cid]}),undefined;if(t._last_instance=e,t.workflows[e.cid])return t._trigger("changed",null,{instance:e,workflows:t.workflows[e.cid]}),undefined;if(t.options.url)t._fetchModelWorkflows(e);else{var n=new(t._generateCollectionFor(e))([],{});t._trigger("changed",null,{instance:e,workflows:n})}},_parseRenderersAndTypes:function(){var t=this;e.each(this.options.renderers,function(e,n){t.setRenderer(e,n)}),e.each(this.options.action_types,function(e,n){t.setActionType(e,n)})},setRenderer:function(e,t){this._renderers[e]=t},getRenderer:function(e){return this._renderers[e]?this._renderers[e]:!1},setActionType:function(e,t){this._action_types[e]=t},getActionType:function(e){return this._action_types[e]},prepareItem:function(e,t,n){var r=this,i=this.getRenderer(t.get("type")),s=this.getActionType(t.get("action").type);return i.call(this,e,t,s,function(i,s){delete r.workflows[e.cid],r._last_instance=null,"backbone_destroy"!==t.get("action").type&&r._fetchModelWorkflows(e),n(i,s)})},_generateCollectionFor:function(e){var t={model:this.ModelWorkflowModel};return this.options.url&&(t.url=this.options.url(e)),Backbone.Collection.extend(t)},_fetchModelWorkflows:function(e){if(!e.isNew()){var t=this;t.workflows[e.cid]=new(this._generateCollectionFor(e))([],{}),t.workflows[e.cid].fetch({success:function(n){t.workflows[e.cid].reset(n.models),t._trigger("changed",null,{instance:e,workflows:t.workflows[e.cid]})},error:function(){}})}}})}(jQuery),void 0===window.midgardCreate&&(window.midgardCreate={}),window.midgardCreate.localize=function(e,t){return window.midgardCreate.locale?window.midgardCreate.locale[t]&&window.midgardCreate.locale[t][e]?window.midgardCreate.locale[t][e]:window.midgardCreate.locale.en[e]?window.midgardCreate.locale.en[e]:e:e},function(e,t){e.widget("Midgard.midgardCollectionAdd",{options:{editingWidgets:null,collection:null,model:null,definition:null,view:null,disabled:!1,vie:null,editableOptions:null,templates:{button:'<button class="btn"><i class="icon-<%= icon %>"></i> <%= label %></button>'}},_create:function(){this.addButtons=[];var e=this;if(!e.options.collection.localStorage)try{e.options.collection.url=e.options.model.url()}catch(t){window.console&&console.log(t)}e.options.collection.on("add",function(t){t.primaryCollection=e.options.collection,e.options.vie.entities.add(t),t.collection=e.options.collection}),e.options.collection.on("add remove reset",e.checkCollectionConstraints,e),e._bindCollectionView(e.options.view)},_bindCollectionView:function(e){var t=this;e.on("add",function(e){e.$el.effect("slide",function(){t._makeEditable(e)})})},_makeEditable:function(e){this.options.editableOptions.disabled=this.options.disabled,this.options.editableOptions.model=e.model,e.$el.midgardEditable(this.options.editableOptions)},_init:function(){return this.options.disabled?(this.disable(),t):(this.enable(),t)},hideButtons:function(){_.each(this.addButtons,function(e){e.hide()})},showButtons:function(){_.each(this.addButtons,function(e){e.show()})},checkCollectionConstraints:function(){return this.options.disabled?t:this.options.view.canAdd()?this.options.definition?this.options.definition.max&&-1!==this.options.definition.max?this.options.collection.length<this.options.definition.max?(this.showButtons(),t):(this.hideButtons(),t):(this.showButtons(),t):(this.showButtons(),t):(this.hideButtons(),t)},enable:function(){var t=this,n=e(_.template(this.options.templates.button,{icon:"plus",label:this.options.editableOptions.localize("Add",this.options.editableOptions.language)})).button();n.addClass("midgard-create-add"),n.click(function(){t.addItem(n)}),e(t.options.view.el).after(n),t.addButtons.push(n),t.checkCollectionConstraints()},disable:function(){_.each(this.addButtons,function(e){e.remove()}),this.addButtons=[]},_getTypeActions:function(e){var t=this,n=[];return _.each(this.options.definition.range,function(r){var s=t.options.collection.vie.namespaces.uri(r);t.options.view.canAdd(s)&&n.push({name:r,label:r,cb:function(){t.options.collection.add({"@type":r},e)},className:"create-ui-btn"})}),n},addItem:function(n,r){r===t&&(r={});var i=_.extend({},r,{validate:!1}),s={};if(this.options.definition&&this.options.definition.range){if(1!==this.options.definition.range.length)return e("body").midgardNotifications("create",{bindTo:n,gravity:"L",body:this.options.editableOptions.localize("Choose type to add",this.options.editableOptions.language),timeout:0,actions:this._getTypeActions(i)}),t;s["@type"]=this.options.definition.range[0]}else{var o=_.keys(this.options.view.templates);2==o.length&&(s["@type"]=o[0])}this.options.collection.add(s,i)}})}(jQuery),function(e){e.widget("Midgard.midgardCollectionAddBetween",e.Midgard.midgardCollectionAdd,{_bindCollectionView:function(e){var t=this;e.on("add",function(e){t._makeEditable(e),t._refreshButtons()}),e.on("remove",function(){t._refreshButtons()})},_refreshButtons:function(){var e=this;window.setTimeout(function(){e.disable(),e.enable()},1)},prepareButton:function(t){var n=this,r=e(_.template(this.options.templates.button,{icon:"plus",label:""})).button();return r.addClass("midgard-create-add"),r.click(function(){n.addItem(r,{at:t})}),r},enable:function(){var t=this,n=t.prepareButton(0);e(t.options.view.el).prepend(n),t.addButtons.push(n),e.each(t.options.view.entityViews,function(n,r){var i=t.options.collection.indexOf(r.model),s=t.prepareButton(i+1);e(r.el).append(s),t.addButtons.push(s)}),this.checkCollectionConstraints()},disable:function(){var t=this;e.each(t.addButtons,function(e,t){t.remove()}),t.addButtons=[]}})}(jQuery),function(e){e.widget("Midgard.editWidget",{options:{disabled:!1,vie:null},enable:function(){this.element.attr("contenteditable","true")},disable:function(){this.element.attr("contenteditable","false")},_create:function(){this._registerWidget(),this._initialize(),_.isFunction(this.options.decorate)&&_.isFunction(this.options.decorateParams)&&this.options.decorate(this.options.decorateParams(null,{propertyName:this.options.property,propertyEditor:this,propertyElement:this.element,editor:this,predicate:this.options.property,element:this.element}))},_init:function(){return this.options.disabled?(this.disable(),undefined):(this.enable(),undefined)},_initialize:function(){var t=this;this.element.on("focus",function(){t.options.disabled||t.options.activated()}),this.element.on("blur",function(){t.options.disabled||t.options.deactivated()});var n=this.element.html();this.element.on("keyup paste",function(){if(!t.options.disabled){var r=e(this).html();n!==r&&(n=r,t.options.changed(r))}})},_registerWidget:function(){this.element.data("createWidgetName",this.widgetName)}})}(jQuery),function(e){e.widget("Midgard.alohaWidget",e.Midgard.editWidget,{_initialize:function(){},enable:function(){var e,t=this.options,n=Aloha.jQuery(t.element.get(0)).aloha();_.each(Aloha.editables,function(t){t.obj.get(0)===n.get(0)&&(e=t)}),e&&(e.vieEntity=t.entity,Aloha.bind("aloha-editable-activated",function(n,r){r.editable===e&&t.activated()}),Aloha.bind("aloha-editable-deactivated",function(n,r){r.editable===e&&t.deactivated()}),Aloha.bind("aloha-smart-content-changed",function(n,r){if(r.editable===e){if(!r.editable.isModified())return!0;t.changed(r.editable.getContents()),r.editable.setUnmodified()}}),this.options.disabled=!1)},disable:function(){Aloha.jQuery(this.options.element.get(0)).mahalo(),this.options.disabled=!0}})}(jQuery),function(e){e.widget("Midgard.ckeditorWidget",e.Midgard.editWidget,{enable:function(){this.element.attr("contentEditable","true"),this.editor=CKEDITOR.inline(this.element.get(0)),this.options.disabled=!1;var t=this;this.editor.on("focus",function(){t.options.activated()}),this.editor.on("blur",function(){t.options.activated(),t.options.changed(t.editor.getData())}),this.editor.on("key",function(){t.options.changed(t.editor.getData())}),this.editor.on("paste",function(){t.options.changed(t.editor.getData())}),this.editor.on("afterCommandExec",function(){t.options.changed(t.editor.getData())}),this.editor.on("configLoaded",function(){e.each(t.options.editorOptions,function(e,n){t.editor.config[e]=n})})},disable:function(){this.editor&&(this.element.attr("contentEditable","false"),this.editor.destroy(),this.editor=null)},_initialize:function(){CKEDITOR.disableAutoInline=!0}})}(jQuery),function(e){e.widget("Midgard.halloWidget",e.Midgard.editWidget,{options:{editorOptions:{},disabled:!0,toolbarState:"full",vie:null,entity:null},enable:function(){e(this.element).hallo({editable:!0}),this.options.disabled=!1},disable:function(){e(this.element).hallo({editable:!1}),this.options.disabled=!0},_initialize:function(){e(this.element).hallo(this.getHalloOptions());var t=this;e(this.element).on("halloactivated",function(){t.options.activated()}),e(this.element).on("hallodeactivated",function(){t.options.deactivated()}),e(this.element).on("hallomodified",function(e,n){t.options.changed(n.content),n.editable.setUnmodified()}),e(document).on("midgardtoolbarstatechange",function(e,n){if(n.display!==t.options.toolbarState&&(t.options.toolbarState=n.display,t.element.data("IKS-hallo")||t.element.data("hallo"))){var r=t.getHalloOptions();t.element.hallo("changeToolbar",r.parentElement,r.toolbar,!0)}})},getHalloOptions:function(){var t={plugins:{halloformat:{},halloblock:{},hallolists:{},hallolink:{},halloimage:{entity:this.options.entity}},buttonCssClass:"create-ui-btn-small",placeholder:"["+this.options.property+"]"};return"function"==typeof this.element.annotate&&this.options.vie.services.stanbol&&(t.plugins.halloannotate={vie:this.options.vie}),"full"===this.options.toolbarState?(t.parentElement=e(".create-ui-toolbar-dynamictoolarea .create-ui-tool-freearea"),t.toolbar="halloToolbarFixed"):(t.parentElement="body",t.toolbar="halloToolbarContextual"),_.extend(t,this.options.editorOptions)}})}(jQuery),function(e){e.widget("Midgard.midgardGeo",{options:{layer:null,map:null,coordSystem:"EPSG:4326",defaultCenter:null,defaultZoomLevel:3,geoProperty:"http://schema.org/geo",geoCoordinateType:"http://schema.org/GeoCoordinates",geoLonProperty:"http://schema.org/longitude",geoLatProperty:"http://schema.org/latitude",marker:{url:"http://www.openlayers.org/dev/img/marker.png",size:{w:21,h:25},offset:{w:-10,h:-25}}},data:{},coordsObj:null,activate:function(e){this.data=e,this.coordsObj=null;var t=this.data.entity.get(this.options.geoProperty);if(_.isUndefined(t)){var n=this.data.entity.attributes["@type"];_.isArray(n)||(n=[n]),_.indexOf(n,"<"+this.options.geoCoordinateType+">")>0&&(this.coordsObj=this.data.entity)}else this.coordsObj=t.models[0];if(_.isNull(this.coordsObj))return this.element.hide(),undefined;this.element.show();var r=parseFloat(this.coordsObj.get(this.options.geoLatProperty)),i=parseFloat(this.coordsObj.get(this.options.geoLonProperty));this.centerMap(i,r)},_createMap:function(){if(_.isNull(this.options.map)){var t=this,n=e("<div>",{id:"midgardGeoMap",style:"height:200px; width:300px"});this.element.append(n),this.options.map=new OpenLayers.Map("midgardGeoMap"),_.isNull(this.options.layer)&&(this.options.layer=new OpenLayers.Layer.OSM("OSM")),this.options.map.addLayer(this.options.layer),this.options.markers=new OpenLayers.Layer.Markers("Markers"),this.options.map.addLayer(this.options.markers),OpenLayers.Control.Click=OpenLayers.Class(OpenLayers.Control,{defaultHandlerOptions:{single:!0,"double":!1,pixelTolerance:0,stopSingle:!1,stopDouble:!1},initialize:function(){this.handlerOptions=OpenLayers.Util.extend({},this.defaultHandlerOptions),OpenLayers.Control.prototype.initialize.apply(this,arguments),this.handler=new OpenLayers.Handler.Click(this,{click:function(e){t.mapClick(e)}},this.handlerOptions)}});var r=new OpenLayers.Control.Click;this.options.map.addControl(r),r.activate();var i=this.options.defaultCenter.clone();i.transform(new OpenLayers.Projection(this.options.coordSystem),this.options.map.getProjectionObject()),this.options.map.setCenter(i,this.options.defaultZoomLevel)}},mapClick:function(e){var t=this.options.map.getLonLatFromPixel(e.xy);t.transform(this.options.map.getProjectionObject(),new OpenLayers.Projection(this.options.coordSystem));var n=t.clone();this.centerMap(n.lon,n.lat),this.setCoordinates(t.lat,t.lon)},disable:function(){},setCoordinates:function(e,t){var n=this.data.entity.get(this.options.geoProperty),r=n.models[0];r.set(this.options.geoLatProperty,e),r.set(this.options.geoLonProperty,t)},_init:function(){this.element.hide(),this.element.append(e("<h3>GEO</h3>")),_.isNull(this.options.defaultCenter)&&(this.options.defaultCenter=new OpenLayers.LonLat(0,0)),this._createMap()},centerMap:function(e,t){var n=(new OpenLayers.LonLat(e,t)).transform(new OpenLayers.Projection(this.options.coordSystem),this.options.map.getProjectionObject());this.options.centermark&&this.options.centermark.destroy();var r=new OpenLayers.Size(this.options.marker.size.w,this.options.marker.size.h),i=new OpenLayers.Pixel(this.options.marker.offset.w,this.options.marker.offset.h),s=new OpenLayers.Icon(this.options.marker.url,r,i);this.options.centermark=new OpenLayers.Marker(n,s),this.options.markers.addMarker(this.options.centermark),this.options.map.panTo(n)}})}(jQuery),function(e,t){e.widget("Midgard.midgardTags",{enhanced:!1,options:{predicate:"skos:related",vie:null,templates:{tags:'<div class="create-ui-tags <%= type %>Tags"><h3><%= label %></h3><input type="text" class="tags" value="" /></div>'},localize:function(e,t){return window.midgardCreate.localize(e,t)},language:null},_init:function(){this.vie=this.options.vie},activate:function(e){var t=this._render(e.entity);this.loadTags(e.entity,e.predicate,t)},_normalizeSubject:function(e){return this.vie.entities.isReference(e)?e:("http://"!==e.substr(0,7)&&(e="urn:tag:"+e),e=this.vie.entities.toReference(e))},_tagLabel:function(e){return e=this.vie.entities.fromReference(e),"urn:tag:"===e.substr(0,8)&&(e=e.substr(8,e.length-1)),"http://"==e.substring(0,7)&&(e=e.substr(e.lastIndexOf("/")+1,e.length-1),e=e.replace(/_/g," ")),e},addTag:function(e,n,r,i){r===t&&(r=this._tagLabel(n)),n=this._normalizeSubject(n);var s=e.get(this.options.predicate);if(!(s&&s.isCollection&&s.get(n))){i&&!e.isReference(i)&&(i=e.toReference(i));var o=this.vie.entities.addOrUpdate({"@subject":n,"rdfs:label":r,"@type":i});return s?(s.addOrUpdate(o),t):(e.set(this.options.predicate,o),t)}},removeTag:function(e,t){var n=e.get(this.options.predicate);if(n){t=this._normalizeSubject(t);var r=n.get(t);r&&n.remove(t)}},_listenAnnotate:function(e,t){var n=this;t.on("annotateselect",function(t,r){n.addTag(e,r.linkedEntity.uri,r.linkedEntity.label,r.linkedEntity.type[0])}),t.on("annotateremove",function(t,r){n.removeTag(e,r.linkedEntity.uri)})},_render:function(t){this.element.empty();var n=e(_.template(this.options.templates.tags,{type:"article",label:this.options.localize("Item tags",this.options.language)})),r=e(_.template(this.options.templates.tags,{type:"suggested",label:this.options.localize("Suggested tags",this.options.language)}));return e("input",n).attr("id","articleTags-"+t.cid),e("input",r).attr("id","suggestedTags-"+t.cid),this.element.append(n),this.element.append(r),this._renderInputs(t,n,r),{tags:n,suggested:r}},_renderInputs:function(t,n,r){var i=this;t.getSubject(),n.tagsInput({width:"auto",height:"auto",onAddTag:function(e){i.addTag(t,e)},onRemoveTag:function(e){i.removeTag(t,e)},defaultText:this.options.localize("add a tag",this.options.language)});var s=function(){var n=e.trim(e(this).text());i.addTag(t,n),r.removeTag(n)};r.tagsInput({width:"auto",height:"auto",interactive:!1,onAddTag:function(){e(".tag span",r).off("click",s),e(".tag span",r).on("click",s)},onRemoveTag:function(){e(".tag span",r).off("click",s),e(".tag span",r).on("click",s)},remove:!1})},_getTagStrings:function(e){var t=[];return _.isString(e)?(t.push(e),t):e.isCollection?(e.each(function(e){t.push(e.get("rdfs:label"))}),t):(_.each(e,function(e){t.push(this._tagLabel(e))},this),t)},loadTags:function(t,n,r){var i=this,s=t.get(this.options.predicate);if(s){var o=this._getTagStrings(s);_.each(o,r.tags.addTag,r.tags)}this.vie.services.stanbol||e(".suggestedTags",i.element).hide()},_getLabelLang:function(e){if(!_.isArray(e))return null;var t;return _.each(e,function(e){"en"===e["@language"]&&(t=e["@value"])}),t},_addEnhancement:function(e,t){if(t.isEntity){var n=this._getLabelLang(t.get("rdfs:label"));if(n){var r=e.get(this.options.predicate);r&&r.isCollection&&-1!==r.indexOf(t)||this.suggestedTags.addTag(n)}}},enhance:function(t,n){if(!this.enhanced){this.enhanced=!0;var r=this;this.vie.analyze({element:e("[property]",n)}).using(["stanbol"]).execute().success(function(e){_.each(e,function(e){r._addEnhancement(t,e)})}).fail(function(){})}}})}(jQuery),void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.bg={Save:"Запази",Saving:"Запазване",Cancel:"Откажи",Edit:"Редактирай",localModification:'Елементът "<%= label %>" има локални модификации',localModifications:"<%= number %> елемента на тази страница имат локални модификации",Restore:"Възстанови",Ignore:"Игнорирай",saveSuccess:'Елементът "<%= label %>" беше успешно запазен',saveSuccessMultiple:"<%= number %> елемента бяха успешно запазени",saveError:"Възника грешка при запазване<br /><%= error %>","Item tags":"Етикети на елемента","Suggested tags":"Препоръчани етикети",Tags:"Етикети","add a tag":"добави етикет",Add:"Добави","Choose type to add":"Избери тип за добавяне"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.cs={Save:"Uložit",Saving:"Probíhá ukládání",Cancel:"Zrušit",Edit:"Upravit",localModification:'Blok "<%= label %>" obsahuje lokální změny',localModifications:"<%= number %> bloků na této stránce má lokální změny",Restore:"Aplikovat lokální změny",Ignore:"Zahodit lokální změny",saveSuccess:'Blok "<%= label %>" byl úspěšně uložen',saveSuccessMultiple:"<%= number %> bloků bylo úspěšně uloženo",saveError:"Při ukládání došlo k chybě<br /><%= error %>","Item tags":"Štítky bloku","Suggested tags":"Navrhované štítky",Tags:"Štítky","add a tag":"Přidat štítek",Add:"Přidat","Choose type to add":"Vyberte typ k přidání"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.da={Save:"Gem",Saving:"Gemmer",Cancel:"Annullér",Edit:"Rediger",localModification:'Element "<%= label %>" har lokale ændringer',localModifications:"<%= number %> elementer på denne side har lokale ændringer",Restore:"Gendan",Ignore:"Ignorer",saveSuccess:'Element "<%= label %>" er gemt',saveSuccessMultiple:"<%= number %> elementer er gemt",saveError:"Der opstod en fejl under lagring<br /><%= error %>","Item tags":"Element tags","Suggested tags":"Foreslåede tags",Tags:"Tags","add a tag":"tilføj et tag",Add:"Tilføj","Choose type to add":"Vælg type der skal tilføjes"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.de={Save:"Speichern",Saving:"Speichert",Cancel:"Abbrechen",Edit:"Bearbeiten",localModification:'Das Dokument "<%= label %>" auf dieser Seite hat lokale Änderungen',localModifications:"<%= number %> Dokumente auf dieser Seite haben lokale Änderungen",Restore:"Wiederherstellen",Ignore:"Ignorieren",saveSuccess:'Dokument "<%= label %>" erfolgreich gespeichert',saveSuccessMultiple:"<%= number %> Dokumente erfolgreich gespeichert",saveError:"Fehler beim Speichern<br /><%= error %>","Item tags":"Schlagwörter des Dokuments","Suggested tags":"Schlagwortvorschläge",Tags:"Schlagwörter","add a tag":"Neues Schlagwort",Add:"Hinzufügen","Choose type to add":"Typ zum Hinzufügen wählen"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.en={Save:"Save",Saving:"Saving",Cancel:"Cancel",Edit:"Edit",localModification:'Item "<%= label %>" has local modifications',localModifications:"<%= number %> items on this page have local modifications",Restore:"Restore",Ignore:"Ignore",saveSuccess:'Item "<%= label %>" saved successfully',saveSuccessMultiple:"<%= number %> items saved successfully",saveError:"Error occurred while saving<br /><%= error %>","Item tags":"Item tags","Suggested tags":"Suggested tags",Tags:"Tags","add a tag":"add a tag",Add:"Add","Choose type to add":"Choose type to add"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.es={Save:"Guardar",Saving:"Guardando",Cancel:"Cancelar",Edit:"Editar",localModification:'El elemento "<%= label %>" tiene modificaciones locales',localModifications:"<%= number %> elementos en la página tienen modificaciones locales",Restore:"Restaurar",Ignore:"Ignorar",saveSuccess:'El elemento "<%= label %>" se guardó exitosamente',saveSuccessMultiple:"<%= number %> elementos se guardaron exitosamente",saveError:"Ha ocurrido un error cuando se guardaban los datos<br /><%= error %>","Item tags":"Etiquetas de los elementos","Suggested tags":"Etiquetas sugeridas",Tags:"Etiquetas","add a tag":"añadir una etiqueta",Add:"Añadir","Choose type to add":"Escoge el tipo a añadir"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.fi={Save:"Tallenna",Saving:"Tallennetaan",Cancel:"Peruuta",Edit:"Muokkaa",localModification:'Dokumentilla "<%= label %>" on paikallisia muutoksia',localModifications:"<%= number %> dokumenttia sivulla omaa paikallisia muutoksia",Restore:"Palauta",Ignore:"Poista",saveSuccess:'Dokumentti "<%= label %>" tallennettu',saveSuccessMultiple:"<%= number %> dokumenttia tallennettu",saveError:"Virhe tallennettaessa<br /><%= error %>","Item tags":"Avainsanat","Suggested tags":"Ehdotukset",Tags:"Avainsanat","add a tag":"lisää avainsana",Add:"Lisää","Choose type to add":"Mitä haluat lisätä?"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.fr={Save:"Enregistrer",Saving:"Enregistrement en cours",Cancel:"Annuler",Edit:"Éditer",localModification:'L\'élément "<%= label %>" comporte des modifications locales',localModifications:"<%= number %> éléments sur cette page comportent des modifications locales",Restore:"Restaurer",Ignore:"Ignorer",saveSuccess:'L\'élément "<%= label %>" a été enregistré avec succès',saveSuccessMultiple:"<%= number %> éléments ont été enregistrés avec succès",saveError:"Une erreur est survenue durant l'enregistrement<br /><%= error %>","Item tags":"Tags des éléments","Suggested tags":"Tags suggérés",Tags:"Tags","add a tag":"ajouter un tag",Add:"Ajouter","Choose type to add":"Choisir le type à ajouter"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.he={Save:"שמור",Saving:"שומר",Cancel:"בטל",Edit:"ערוך",localModification:'לפריט "<%= label %>" שינויים מקומיים',localModifications:"ל<%= number %> פריטים בדף זה שינויים מקומיים",Restore:"שחזר",Ignore:"התעלם",saveSuccess:'פריט "<%= label %>" נשמר בהצלחה',saveSuccessMultiple:"<%= number %> פריטים נשמרו בהצלחה",saveError:"שגיאה בשמירה<br /><%= error %>","Item tags":"סיווגי פריט","Suggested tags":"סיווגים מומלצים",Tags:"סיווגים","add a tag":"הוסף סיווג",Add:"הוסף","Choose type to add":"בחר סוג להוספה"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.it={Save:"Salva",Saving:"Salvataggio",Cancel:"Cancella",Edit:"Modifica",localModification:'Articolo "<%= label %>" in questa pagina hanno modifiche locali',localModifications:"<%= number %> articoli in questa pagina hanno modifiche locali",Restore:"Ripristina",Ignore:"Ignora",saveSuccess:'Articolo "<%= label %>" salvato con successo',saveSuccessMultiple:"<%= number %> articoli salvati con successo",saveError:"Errore durante il salvataggio<br /><%= error %>","Item tags":"Tags articolo","Suggested tags":"Tags suggerite",Tags:"Tags","add a tag":"Aggiungi una parola chiave",Add:"Aggiungi","Choose type to add":"Scegli il tipo da aggiungere"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.nl={Save:"Opslaan",Saving:"Bezig met opslaan",Cancel:"Annuleren",Edit:"Bewerken",localModification:'Items "<%= label %>" op de pagina heeft lokale wijzigingen',localModifications:"<%= number %> items op de pagina hebben lokale wijzigingen",Restore:"Herstellen",Ignore:"Negeren",saveSuccess:'Item "<%= label %>" succesvol opgeslagen',saveSuccessMultiple:"<%= number %> items succesvol opgeslagen",saveError:"Fout opgetreden bij het opslaan<br /><%= error %>","Item tags":"Item tags","Suggested tags":"Tag suggesties",Tags:"Tags","add a tag":"tag toevoegen",Add:"Toevoegen","Choose type to add":"Kies type om toe te voegen"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.no={Save:"Lagre",Saving:"Lagrer",Cancel:"Avbryt",Edit:"Rediger",localModification:'Element "<%= label %>" på denne siden er modifisert lokalt',localModifications:"<%= number %> elementer på denne siden er modifisert lokalt",Restore:"Gjenopprett",Ignore:"Ignorer",saveSuccess:'Element "<%= label %>" ble lagret',saveSuccessMultiple:"<%= number %> elementer ble lagret",saveError:"En feil oppstod under lagring<br /><%= error %>","Item tags":"Element-tagger","Suggested tags":"Anbefalte tagger",Tags:"Tagger","add a tag":"legg til tagg",Add:"Legg til","Choose type to add":"Velg type å legge til"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.pl={Save:"Zapisz",Saving:"Zapisuję",Cancel:"Anuluj",Edit:"Edytuj",localModification:'Artykuł "<%= label %>" posiada lokalne modyfikacje',localModifications:"<%= number %> artykułów na tej stronie posiada lokalne modyfikacje",Restore:"Przywróć",Ignore:"Ignoruj",saveSuccess:'Artykuł "<%= label %>" został poprawnie zapisany',saveSuccessMultiple:"<%= number %> artykułów zostało poprawnie zapisanych",saveError:"Wystąpił błąd podczas zapisywania<br /><%= error %>","Item tags":"Tagi artykułów","Suggested tags":"Sugerowane tagi",Tags:"Tagi","add a tag":"dodaj tag",Add:"Dodaj","Choose type to add":"Wybierz typ do dodania"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.pt_BR={Save:"Salvar",Saving:"Salvando",Cancel:"Cancelar",Edit:"Editar",localModification:'Item "<%= label %>" nesta página possuem modificações locais',localModifications:"<%= number %> itens nesta página possuem modificações locais",Restore:"Restaurar",Ignore:"Ignorar",saveSuccess:'Item "<%= label %>" salvo com sucesso',saveSuccessMultiple:"<%= number %> itens salvos com sucesso",saveError:"Erro ocorrido ao salvar<br /><%= error %>","Item tags":"Tags de item","Suggested tags":"Tags sugeridas",Tags:"Tags","add a tag":"adicionar uma tag",Add:"Adicionar","Choose type to add":"Selecione o tipo para adicionar"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.ro={Save:"Salvează",Saving:"Se salvează",Cancel:"Anulează",Edit:"Editare",localModification:'Zona "<%= label %>" a fost modificată',localModifications:"<%= number %> zone din această pagină au fost modificate",Restore:"Revenire",Ignore:"Ignoră",saveSuccess:'Zona "<%= label %>" a fost salvată',saveSuccessMultiple:"<%= number %> zone au fost salvate",saveError:"S-a produs o eroare în timpul salvării<br /><%= error %>","Item tags":"Etichetele zonei","Suggested tags":"Etichete sugerate",Tags:"Etichete","add a tag":"adaugă o etichetă",Add:"Adăugare","Choose type to add":"Alegeți un tip pentru adăugare"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.ru={Save:"Сохранить",Saving:"Сохраняю",Cancel:"Отмена",Edit:"Редактировать",localModification:'В запись "<%= label %>" внесены несохранённые изменения',localModifications:"В записи на этой странице (<%= number %> шт.) внесены несохранённые изменения",Restore:"Восстановить",Ignore:"Игнорировать",saveSuccess:'Запись "<%= label %>" была успешно сохранена',saveSuccessMultiple:" Записи (<%= number %> шт.) были успешно сохранены",saveError:"Во время сохранения произошла ошибка<br /><%= error %>","Item tags":"Теги записей","Suggested tags":"Предлагаемые теги",Tags:"Теги","add a tag":"добавить тег",Add:"Добавить","Choose type to add":"Выбрать тип для добавления"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.sv={Save:"Spara",Saving:"Sparar",Cancel:"Avbryt",Edit:"Redigera",localModification:'Elementet "<%= label %>" har lokala förändringar',localModifications:"<%= number %> element på den här sidan har lokala förändringar",Restore:"Återställ",Ignore:"Ignorera",saveSuccess:'Elementet "<%= label %>" sparades',saveSuccessMultiple:"<%= number %> element sparades",saveError:"Ett fel uppstod under sparande<br /><%= error %>","Item tags":"Element-taggar","Suggested tags":"Föreslagna taggar",Tags:"Taggar","add a tag":"lägg till en tagg",Add:"Lägg till","Choose type to add":"Välj typ att lägga till"},define("createjs",function(){}),define("create/collectionWidgets/jquery.typo3.collectionWidget",["jquery","jquery-ui","createjs"],function(e){(function(e,t){e.widget("typo3.typo3CollectionWidget",e.Midgard.midgardCollectionAddBetween,{_create:function(){this.handles=[],this.options.model.url=function(){},this._super()},_destroy:function(){this.removeHandles()},enable:function(){this.addHandles()},addHandles:function(){var t=this,n=T3.Content.UI.Util.AddContentElementHandleBars(e(this.options.view.el),0,this,!0);n&&this.handles.push(n),_.each(this.options.collection.models,function(n,r){var i=n.id.substring(1,n.id.length-1),s=e('[about="'+i+'"]').first(),o=T3.Content.UI.Util.AddContentElementHandleBars(s,r+1,this,!1);o&&t.handles.push(o),T3.Content.UI.Util.AddNotInlineEditableOverlay(s,n)},this)},removeHandles:function(){_.each(this.handles,function(e){e.destroy()}),this.handles=[]}})})(e)}),define("create/typo3Notifications",["jquery","jquery-ui"],function(e){e.widget("Midgard.midgardNotifications",{create:function(e){T3.Configuration.DevelopmentMode&&console.log("Storage plugin",e.body)}})}),define("create/typo3MidgardEditable",["jquery","jquery-ui","createjs"],function(e){e.widget("typo3.midgardEditable",e.Midgard.midgardEditable,{findEditableElements:function(t){this.vie.service("rdfa").findPredicateElements(this.options.model.id,e(".t3-inline-editable[property]:not(script)",this.element),!1).each(t)}})}),define("emberjs/dictionary-object",["emberjs"],function(e){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("emberjs/dictionary-object");var t=e.Object.extend({setUnknownProperty:function(e,t){this[e]=t,this.addObserver(e,this,"anyPropertyChanged"),this.anyPropertyChanged(this,e)},anyPropertyChanged:function(e,t){this.propertyWillChange("@any"),this.propertyDidChange("@any")}});return t.reopenClass({create:function(n){var r=e.Object.create.apply(t,arguments),i;for(i in n)r.addObserver(i,r,"anyPropertyChanged");return r}}),t}),define("vie/entity",["jquery","vie/instance","emberjs","emberjs/dictionary-object"],function(e,t,n,r){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("vie/entity");var i=n.Object.extend({$element:null,modified:!1,publishable:!1,status:"",_vieEntity:null,_onStateChange:function(){this.get("modified")?this.set("status","modified"):this.get("publishable")?this.set("status","publishable"):this.set("status","")}.observes("publishable","modified"),_applyHiddenClass:function(){this.get("attributes._hidden")?this.get("$element").addClass("t3-contentelement-hidden"):this.get("$element").removeClass("t3-contentelement-hidden")}.observes("typo3:_hidden"),nodeType:function(){return i.extractNodeTypeFromVieEntity(this.get("_vieEntity"))}.property("_vieEntity").volatile(),init:function(){var n=this,r=this.get("_vieEntity");this.set("modified",!e.isEmptyObject(r.changed)),this.set("publishable",r.get(T3.ContentModule.TYPO3_NAMESPACE+"__workspacename")!=="live");var i=t.service("rdfa").getElementBySubject(r.getSubject(),e(document));i.bind("midgardeditablechanged",function(t,i){n.set("modified",!e.isEmptyObject(r.changed))}),r.on("change",function(){n.set("modified",!e.isEmptyObject(r.changed)),n.set("publishable",r.get(T3.ContentModule.TYPO3_NAMESPACE+"__workspacename")!=="live")}),this.set("$element",i)},attributes:function(e,t){if(arguments.length==1)return i.extractAttributesFromVieEntity(this.get("_vieEntity"))}.property("_vieEntity").volatile(),setAttribute:function(e,t){var n="typo3:"+e;this.propertyWillChange(n),this.get("_vieEntity").set(n,t),this.propertyDidChange(n)},nodePath:function(){var e=this.get("_vieEntity").getSubject();return e.substring(1,e.length-1)}.property("_vieEntity").cacheable(),nodeTypeSchema:function(){return T3.Configuration.Schema[this.get("nodeType")]}.property().cacheable()});return i.reopenClass({extractAttributesFromVieEntity:function(e,t){var n={};return _.each(e.attributes,function(r,i){var s=e.fromReference(i);if(s.indexOf(T3.ContentModule.TYPO3_NAMESPACE)===0){s=s.replace(T3.ContentModule.TYPO3_NAMESPACE,"");if(!t||t(s,r))n[s]=r}}),n},extractNodeTypeFromVieEntity:function(e){var t=e.get("@type"),n;return _.isArray(t)||(t=[t]),n=_.find(_.map(t,function(e){return e.toString()}),function(e){return e.indexOf("<"+T3.ContentModule.TYPO3_NAMESPACE)===0}),n&&(n=n.substr(T3.ContentModule.TYPO3_NAMESPACE.length+1),n=n.substr(0,n.length-1)),n}}),i}),define("neos/content/model",["jquery","vie/instance","vie/entity"],function(e,t,n){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("neos/content/model");var r=window.T3||{};typeof r.Content=="undefined"&&(r.Content={}),r.Content.Model={};var i=Ember.Object.extend({nodes:[],initialize:function(){t.entities.reset(),t.load({element:e("body")}).from("rdfa").execute(),this.updateSelection()},updateSelection:function(t){if(t&&t.hasClass("t3-contentelement-active"))return;var n=[],r=this;e(".t3-contentelement-active").removeClass("t3-contentelement-active");if(this._updating)return;this._updating=!0,t!==undefined?(t.is(".t3-contentsection")?t.parent().addClass("t3-contentelement-active"):t.addClass("t3-contentelement-active"),this.addNodeByElement(n,t),t.parents(".t3-contentelement[about], .t3-contentsection[about]").each(function(){r.addNodeByElement(n,this)}),e("body").addClass("t3-contentelement-selected")):e("body").removeClass("t3-contentelement-selected"),(!t||!t.is("#t3-page-metainformation"))&&this.addNodeByElement(n,e("#t3-page-metainformation")),n=n.reverse(),this.set("nodes",n),this._updating=!1},addNodeByElement:function(e,t){if(t!==undefined){var n=this._createEntityWrapper(t);n&&e.push(n)}},_entitiesBySubject:{},_createEntityWrapper:function(e){var r=t.service("rdfa").getElementSubject(e);if(!this._entitiesBySubject[r]){var i=t.entities.get(r);if(i===undefined)return;this._entitiesBySubject[r]=n.create({_vieEntity:i})}return this._entitiesBySubject[r]},selectedNode:function(){var e=this.get("nodes");return e.length>0?_.last(e):null}.property("nodes"),selectedNodeSchema:function(){var e=this.get("selectedNode");if(!e)return;return e.get("nodeTypeSchema")}.property("selectedNode"),selectNode:function(e){this.updateSelection(e.get("$element"))}}).create(),s=Ember.Object.extend({publishableEntitySubjects:[],noChanges:function(){return this.get("publishableEntitySubjects.length")==0}.property("publishableEntitySubjects.length"),initialize:function(){t.entities.on("change",this._updatePublishableEntities,this),this._updatePublishableEntities()},_updatePublishableEntities:function(){var e=[];t.entities.forEach(function(t){this._isEntityPublishable(t)&&e.push(t.id)},this),this.set("publishableEntitySubjects",e)},_isEntityPublishable:function(e){var t=n.extractAttributesFromVieEntity(e);return t.__workspacename!=="live"},publishAll:function(){r.Content.Controller.ServerConnection.sendAllToServer(this.get("publishableEntitySubjects"),function(e){var n=t.entities.get(e);return[n.fromReference(e),"live"]},TYPO3_Neos_Service_ExtDirect_V1_Controller_WorkspaceController.publishNode,null,function(e){var n=t.entities.get(e);n.set("typo3:__workspacename","live")})}}).create();r.Content.Model={PublishableNodes:s,NodeSelection:i},window.T3=r}),define("create",["jquery","vie/instance","emberjs","jquery-ui","aloha","backbone","underscorejs","hallo","halloplugins/linkplugin","Library/createjs/deps/jquery.tagsinput.min","Library/createjs/deps/rangy-core-1.2.3","createjs","create/collectionWidgets/jquery.typo3.collectionWidget","create/typo3Notifications","create/typo3MidgardEditable","neos/content/model"],function(e,t,n){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("create"),n.Object.create({_state:null,initialize:function(){var e=this;T3.Content.Controller.Preview.get("previewMode")||(Aloha.ready?Aloha.ready(function(){e.enableEdit()}):this.enableEdit()),this.initializeEntitySelection()},enableEdit:function(){var n={disabled:!1,vie:t,widgets:{"default":"hallo","typo3:title":"hallo-blockonly"},collectionWidgets:{"default":"typo3CollectionWidget"},editors:{aloha:{widget:"alohaWidget"},hallo:{widget:"halloWidget",options:{toolbar:"halloToolbarFixed",parentElement:"body",toolbarCssClass:"t3-ui",buttonCssClass:"btn btn-mini",plugins:{halloformat:{formattings:{bold:!0,italic:!0,strikeThrough:!0,underline:!0}},hallojustify:{},halloblock:{elements:["h1","h2","h3","h4","h5","h6","p","pre","blockquote","address"]},hallolists:{},"hallo-linkplugin":{},halloreundo:{}}}},"hallo-blockonly":{widget:"halloWidget",options:{toolbar:"halloToolbarFixed",parentElement:"body",toolbarCssClass:"t3-ui",buttonCssClass:"btn btn-mini",plugins:{halloblock:{elements:["h1","h2","h3","h4","h5","h6"]},"hallo-linkplugin":{},halloreundo:{},halloblacklist:{tags:["br"]}}}},"inline-only":{widget:"editWidget"}}};e("[about]").each(function(){e(this).midgardEditable(n)}),this.set("_state","edit")},disableEdit:function(){var n={disabled:!0,vie:t};e(".t3-contentelement[about]").each(function(){e(this).midgardEditable(n),e(this).removeClass("ui-state-disabled")}),this.set("_state","browse")},initializeEntitySelection:function(){var t=this;e(document).on("mouseover","body:not(.t3-ui-previewmode) .t3-contentelement",function(t){return t.result!=="hovered"&&e(this).addClass("t3-contentelement-hover"),"hovered"}).on("mouseout","body:not(.t3-ui-previewmode) .t3-contentelement",function(){e(this).removeClass("t3-contentelement-hover")}).on("click",".t3-ui, .ui-widget-overlay",function(e){e.stopPropagation()}).on("click","body:not(.t3-ui-previewmode) .t3-contentelement",function(t){return t.result!=="activated"&&T3.Content.Model.NodeSelection.updateSelection(e(this)),"activated"}).on("click",function(t){if(t.result==="activated")return;if(e(t.target).parents().length===0)return;T3.Content.Model.NodeSelection.get("selectedNode")!==null&&T3.Content.Model.NodeSelection.updateSelection()})}})}),define("text!neos/templates/content/ui/topToolbarTemplate.html",[],function(){return'<ul class="t3-toolbar-left">\n	<li>\n		{{#view T3.Content.UI.ToggleButton\n			pressedBinding="T3.Content.Controller.Preview.previewMode"\n			icon="preview"\n			title="Preview"\n		}}\n			<i class="icon-fullscreen"></i>\n		{{/view}}\n	</li>\n	<li>\n		{{#view T3.Content.UI.ToggleButton\n			pressedBinding="T3.Content.Controller.PageTree.pageTreeMode"\n			classNames="t3-pagetree-button"\n		}}\n			Pages\n		{{/view}}\n	</li>\n	<li>\n		{{#view T3.Content.UI.ToggleButton\n			pressedBinding="T3.Content.Controller.Wireframe.wireframeMode"\n			icon="wireframe"\n		}}\n			Wireframe\n		{{/view}}\n	</li>\n</ul>\n\n<ul class="t3-toolbar-right">\n	{{#view tagName="li" isVisibleBinding="T3.ContentModule.showDevelopmentFeatures"}}\n		<span style="color:white">!!! Development mode !!!</span>\n	{{/view}}\n\n	<li>\n		{{view T3.Content.UI.SaveIndicator\n			saveRunningBinding="T3.Content.Controller.ServerConnection._saveRunning"\n			lastSuccessfulTransferBinding="T3.Content.Controller.ServerConnection._lastSuccessfulTransfer"\n		}}\n	</li>\n\n	<li>\n		{{view T3.Content.UI.PublishPageButton}}\n	</li>\n</ul>'}),define("text!neos/templates/content/ui/footerTemplate.html",[],function(){return'<ul class="t3-toolbar-left">\n	<li>\n		{{view T3.Content.UI.Breadcrumb\n			contentBinding="T3.Content.Model.NodeSelection.nodes"\n		}}\n	</li>\n</ul>\n\n<ul class="t3-toolbar-right">\n	<li>\n		{{#view T3.Content.UI.ToggleButton\n			pressedBinding="T3.Content.Controller.Inspector.inspectorMode"\n		}}\n			Inspector\n		{{/view}}\n	</li>\n</ul>'}),define("text!neos/templates/common/launcher.html",[],function(){return'<div class="t3-launcher-container">\n	{{view T3.Common.Launcher.TextField openBinding="view.open" valueBinding="view.value" placeholder="Search & Navigate ›" }}\n	<div class="t3-launcher-loading"></div>\n	<div class="t3-launcher-clear"></div>\n</div>\n{{view T3.Common.Launcher.Panel openBinding="view.open" searchItemsBinding="view.searchItems"}}'}),define("text!neos/templates/common/launcherpanel.html",[],function(){return'<div class="three-columns tc-1-1-1">\n	{{#boundIf T3.ContentModule.showDevelopmentFeatures}}\n	<div class="c-1">\n		<div class="scroll-content">\n			<div class="t3-launcher-alternating-row t3-odd">\n				<h2>My tools</h2>\n				<ul class="t3-launcher-horizontal">\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/document_icon-24.png" alt="" /></div>\n						<div class="text">New article</div>\n					</li>\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/layers_1_icon-24.png" alt="" /></div>\n						<div class="text">Workspaces</div>\n					</li>\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/mail_2_icon-24.png" alt="" /></div>\n						<div class="text">Newsletter</div>\n					</li>\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/cogs_icon-24.png" alt="" /></div>\n						<div class="text">Configuration</div>\n					</li>\n				</ul>\n				<div class="t3-clear"></div>\n			</div>\n			<div class="t3-launcher-split"></div>\n			<div class="t3-launcher-alternating-row t3-even">\n				<h2>Basics</h2>\n				<ul class="t3-launcher-horizontal">\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/dashboard_icon-24.png" alt="" /></div>\n						<div class="text">Dashboard</div>\n					</li>\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/bookmark_1_icon-24.png" alt="" /></div>\n						<div class="text">Bookmarks</div>\n					</li>\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/wrench_plus_2_icon-24.png" alt="" /></div>\n						<div class="text">My settings</div>\n					</li>\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/lightbulb_icon-24.png" alt="" /></div>\n						<div class="text">Help</div>\n					</li>\n				</ul>\n				<div class="t3-clear"></div>\n			</div>\n			<div class="t3-launcher-split"></div>\n			<div class="t3-launcher-alternating-row t3-odd">\n				<h2>Web</h2>\n				<ul class="t3-launcher-horizontal">\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/dashboard_icon-24.png" alt="" /></div>\n						<div class="text">Dashboard</div>\n					</li>\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/bookmark_1_icon-24.png" alt="" /></div>\n						<div class="text">Bookmarks</div>\n					</li>\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/wrench_plus_2_icon-24.png" alt="" /></div>\n						<div class="text">My settings</div>\n					</li>\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/lightbulb_icon-24.png" alt="" /></div>\n						<div class="text">Help</div>\n					</li>\n				</ul>\n				<div class="t3-clear"></div>\n			</div>\n		</div>\n		<div class="t3-clear"></div>\n	</div>\n	<div class="c-2">\n		<h2>Recently used</h2>\n		<ul class="vertical t3-launcher-panel-lastactions">\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/doc_empty_icon-16.png" alt="" /></div>\n				<div class="text">Community</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/twitter_2_icon-16.png" alt="" /></div>\n				<div class="text">@aplusk</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/users_icon-16.png" alt="" /></div>\n				<div class="text">Editors</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/youtube_icon-16.png" alt="" /></div>\n				<div class="text">Latest YouTube video</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/user_icon-16.png" alt="" /></div>\n				<div class="text">Admin</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/doc_empty_icon-16.png" alt="" /></div>\n				<div class="text">About</div>\n			</li>\n		</ul>\n		<div class="t3-clear"></div>\n		<h2>Most used</h2>\n		<ul class="vertical t3-launcher-panel-mostused">\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/lighting_icon-16.png" alt="" /></div>\n				<div class="text">Clear cache</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/trash_icon-16.png" alt="" /></div>\n				<div class="text">Recycler</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/clock_icon-16.png" alt="" /></div>\n				<div class="text">Scheduler</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/notepad_2_icon-16.png" alt="" /></div>\n				<div class="text">Log</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/db_icon-16.png" alt="" /></div>\n				<div class="text">Database</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/Black/list_bullets_icon-16.png" alt="" /></div>\n				<div class="text">Management</div>\n			</li>\n		</ul>\n		<div class="t3-clear"></div>\n	</div>\n	{{/boundIf}}\n	<div class="c-3">\n		<h2>Search</h2>\n		{{#collection contentBinding="view.searchItems" tagName="ul" classNames="t3-launcher-panel-search"}}\n			<div class="t3-launcher-search-group-label"><span>{{view.content.label}}</span></div>\n			{{#collection contentBinding="view.content.items" tagName="ul" classNames="t3-launcher-search-group-results"}}\n				<a href="{{unbound view.content.action}}" title="{{unbound view.content.path}}" class="t3-link-ajax">\n					<img src="{{unbound view.content.icon}}" alt="" />\n					{{view.content.label}}\n				</a>\n			{{/collection}}\n			<div class="t3-clear"></div>\n		{{/collection}}\n	</div>\n</div>'}),!function(e){var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function s(){i.trigger("closed").remove()}var n=e(this),r=n.attr("data-target"),i;r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=e(r),t&&t.preventDefault(),i.length||(i=n.hasClass("alert")?n:n.parent()),i.trigger(t=e.Event("close"));if(t.isDefaultPrevented())return;i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.on(e.support.transition.end,s):s()};var r=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("alert");i||r.data("alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.alert.data-api",t,n.prototype.close)}(window.jQuery),define("bootstrap.alert",function(){}),function(e){var t=function(t,n){this.$element=e(t),this.$note=e('<div class="alert"></div>'),this.options=e.extend(!0,e.fn.notify.defaults,n,this.$element.data()),this.options.transition?this.options.transition=="fade"?this.$note.addClass("in").addClass(this.options.transition):this.$note.addClass(this.options.transition):this.$note.addClass("fade").addClass("in"),this.options.type?this.$note.addClass("alert-"+this.options.type):this.$note.addClass("alert-success"),this.options.message&&(typeof this.options.message=="string"?this.$note.html(this.options.message):typeof this.options.message=="object"&&(this.options.message.html?this.$note.html(this.options.message.html):this.options.message.text&&this.$note.text(this.options.message.text)));if(this.options.closable)var r=e('<a class="close pull-right">&times;</a>');return e(r).on("click",e.proxy(onClose,this)),this.$note.prepend(r),this};onClose=function(){this.options.onClose(),e(this.$note).remove(),this.options.onClosed()},t.prototype.show=function(){this.options.fadeOut.enabled&&this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("slow",e.proxy(onClose,this)),this.$element.append(this.$note),this.$note.alert()},t.prototype.hide=function(){this.options.fadeOut.enabled?this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("slow",e.proxy(onClose,this)):onClose.call(this)},e.fn.notify=function(e){return new t(this,e)},e.fn.notify.defaults={type:"success",closable:!0,transition:"fade",fadeOut:{enabled:!0,delay:3e3},message:null,onClose:function(){},onClosed:function(){}}}(window.jQuery),define("bootstrap.notify",function(){}),define("neos/common",["jquery","emberjs","text!neos/templates/common/launcher.html","text!neos/templates/common/launcherpanel.html","bootstrap.alert","bootstrap.notify"],function(e,t,n,r){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("neos/common");var i=window.T3||{};i.Common={},i.Common.Launcher=t.View.extend({tagName:"div",classNames:["t3-launcher"],value:"",open:!1,template:t.Handlebars.compile(n),activate:function(){this.$().find(".t3-launcher-container input").focus()}}),i.Common.Launcher.SearchController=t.Object.extend({_launcherTextField:null,_requestIndex:0,_value:"",_searching:null,_delay:300,_minLength:1,isLoading:!1,searchItems:[],keyHandler:function(t){suppressKeyPress=!1;var n=e.ui.keyCode;switch(t.keyCode){case n.UP:suppressKeyPress=!0,this._move("previous",t),t.preventDefault();break;case n.DOWN:suppressKeyPress=!0,this._move("next",t),t.preventDefault();break;case n.ENTER:case n.NUMPAD_ENTER:suppressKeyPress=!0,t.preventDefault();break;case n.TAB:this._nextGroup();break;case n.ESCAPE:this.get("_launcherTextField").cancel();break;default:this._searchTimeout(t)}},_searchTimeout:function(e){var t=this;this._searching=setTimeout(function(){var n=t.get("_launcherTextField").get("value");t._value!==n&&(t.set("_value",n),t._search(e,n))},this._delay)},_search:function(e,t){var n=this;if(t.length<this._minLength){this._clear();return}var r=++this._requestIndex;this.set("isLoading",!0),TYPO3_Neos_Service_ExtDirect_V1_Controller_LauncherController.search(t,r,function(e){var t=e.data;n._requestIndex===t.requestIndex&&(e.success?n._response(t):n._clear(),n.set("isLoading",!1))})},_response:function(n){var r=[];e.each(n.results,function(e,n){n=t.Object.create(n);var i=n.get("items").map(function(e){return t.Object.create(e)});n.set("items",i),r.push(n)}),this.set("searchItems",r)},_clear:function(){this.set("searchItems",[])}}).create(),i.Common.Launcher.TextField=t.TextField.extend({_notEmpty:function(){var e=this.$().parent(),t="not-empty";this.get("value")!==null&&this.get("value")!==""?e.addClass(t):e.removeClass(t)}.observes("value"),_loadingDidChange:function(e,t,n){var r=this.$().parent().find(".t3-launcher-loading");n===!0?r.show():r.hide()}.observes("T3.Common.Launcher.SearchController.isLoading"),init:function(){i.Common.Launcher.SearchController.set("_launcherTextField",this),this._super()},cancel:function(){i.ContentModule._launcher.set("value",""),this.$().blur()},focusIn:function(){this.set("open",!0)},focusOut:function(){this.set("open",!1),this._super()},keyDown:function(e){i.Common.Launcher.SearchController.keyHandler(e)},didInsertElement:function(){var e=this;this.$().parent().find(".t3-launcher-clear").click(function(){e.cancel()})}}),i.Common.Launcher.Panel=t.View.extend({tagName:"div",classNames:["t3-launcher-panel"],open:!1,focussed:!1,scrollingInitialized:!1,template:t.Handlebars.compile(r),_openDidChange:function(){var t=this;setTimeout(function(){var n=t.get("open");if(n)e(document).trigger("hidePopover"),e("body").addClass("t3-launcher-open"),t.scrollingInitialized||(e(".c-1 .scroll-content").lionbars("dark",!1,!0,!1),t.scrollingInitialized=!0);else{if(t.get("focussed"))return;e("body").removeClass("t3-launcher-open")}},50)}.observes("open"),focusIn:function(){this.set("focussed",!0)},focusOut:function(){this.set("focussed",!1)}}),i.Common.Notification=t.Object.extend({_timeout:5e3,_show:function(t,n,r){e(".t3-notification-container").notify({message:{html:t},type:r,fadeOut:{enabled:n,delay:this.get("_timeout")}}).show()},ok:function(e){this._show('<i class="icon-ok-sign"></i>'+e,!0,"success")},notice:function(e){this._show('<i class="icon-info-sign"></i>'+e,!0,"info")},warning:function(e){this._show('<i class="icon-warning-sign"></i>'+e,!1,"warning")},error:function(e){this._show('<i class="icon-exclamation-sign"></i>'+e,!1,"error")}}).create(),i.Common.Util=t.Object.extend({isValidJsonString:function(e){return!/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(e.replace(/"(\\.|[^"\\])*"/g,""))}}).create(),i.Common.LocalStorage=t.Object.extend({getItem:function(e){if(!this._supportsLocalStorage())return undefined;try{return JSON.parse(window.localStorage.getItem(e))}catch(t){return undefined}},setItem:function(e,t){if(!this._supportsLocalStorage())return;window.localStorage.setItem(e,JSON.stringify(t))},removeItem:function(e){if(!this._supportsLocalStorage())return;window.localStorage.removeItem(e)},_supportsLocalStorage:function(){try{return"localStorage"in window&&window.localStorage!==null}catch(e){return!1}}}).create(),window.T3=i}),define("text!neos/templates/content/ui/breadcrumb.html",[],function(){return'<div class="t3-inspect">{{view T3.Content.UI.InspectButton pressedBinding="T3.Content.Controller.Inspect.inspectMode" label="Inspect"}}</div>\n{{#collection contentBinding="view.content" tagName="ul"}}\n	{{view T3.Content.UI.BreadcrumbItem itemBinding="view.content"}}\n{{/collection}}'}),define("text!neos/templates/content/ui/inspector.html",[],function(){return'<div class="header">\n	{{#view T3.Content.UI.Button disabledBinding="T3.Content.Controller.Inspector._unmodified" target="T3.Content.Controller.Inspector" action="revert" class="t3-inspector-cancel"}}Cancel{{/view}}\n	{{#view T3.Content.UI.Button disabledBinding="T3.Content.Controller.Inspector._unmodified" target="T3.Content.Controller.Inspector" action="onApplyButtonToggle" class="t3-inspector-apply"}}Apply{{/view}}\n</div>\n<form class="t3-inspector-form" action="#">\n	{{#collection tagName="fieldset" classNames="t3-inspector-section" contentBinding="T3.Content.Controller.Inspector.sectionsAndViews"}}\n		{{#view T3.Content.UI.ToggleInspectorPanelHeadline contentBinding="view.content"}}\n			<h2>\n				{{view.content.label}}\n				<span class="pull-right">\n					{{#if view._collapsed}}\n						<i class="icon-chevron-up"></i>\n					{{else}}\n						<i class="icon-chevron-down"></i>\n					{{/if}}\n				</span>\n			</h2>\n		{{/view}}\n		{{#collection tagName="div" classNames="t3-inspector-field" contentBinding="view.content.properties"}}\n			{{#if view.content.isBoolean}}\n				<label for="{{unbound view.content.elementId}}" class="checkbox">\n					{{view T3.Content.UI.Inspector.PropertyEditor propertyDefinitionBinding="view.content"}}\n					{{view.content.ui.label}}\n				</label>\n			{{else}}\n				<label for="{{unbound view.content.elementId}}">{{view.content.ui.label}}</label>\n				{{view T3.Content.UI.Inspector.PropertyEditor propertyDefinitionBinding="view.content"}}\n			{{/if}}\n		{{/collection}}\n	{{/collection}}\n</form>\n'}),define("text!neos/templates/content/ui/inspectorDialog.html",[],function(){return'<div class="modal">\n	<div class="modal-header">\n		{{view T3.Content.UI.ButtonDialog label="&times;" class="close" target="parentView" data-dismiss="modal" action="cancel"}}\n		<h3>You are currently changing properties. Do you want to apply your changes?</h3>\n	</div>\n	<div class="modal-footer">\n		{{view T3.Content.UI.ButtonDialog label="Don\'t apply" class="t3-button btn btn-danger" target="parentView" action="dontApply"}}\n		{{view T3.Content.UI.ButtonDialog label="Cancel" class="t3-button btn" target="parentView" action="cancel"}}\n		{{view T3.Content.UI.ButtonDialog label="Apply" class="t3-button btn btn-success" target="parentView" action="apply"}}\n	</div>\n</div>\n<div class="modal-backdrop in"></div>'}),define("text!neos/templates/content/ui/pageTree.html",[],function(){return'<div class="dynatree-container" id="t3-pagetree-container">\n	<div class="t3-pagetree-action-toolbar-con">\n		<div id="t3-action-newpage" class="t3-action-newpage page-action-toolbar"></div>\n		<div id="t3-action-deletepage" href="#pagetreeDeleteDialog" data-toggle="modal" class="t3-action-deletepage page-action-toolbar"></div>\n	</div>\n	<div id="t3-dd-pagetree-con">\n		<div id="t3-dd-pagetree"></div>\n	</div>\n</div>'}),define("text!neos/templates/content/ui/deletePageDialog.html",[],function(){return'<div class="modal" id="pagetreeDeleteDialog">\n	<div class="modal-header">\n		{{view T3.Content.UI.ButtonDialog label="x" target="parentView" data-dismiss="modal" action="cancel" class="close t3-button" title="x"}}\n		<h3>Are you sure you want to delete the page "{{view.pageTitle}}"?</h3>\n		<p>\n			This will delete the page{{#if view.numberOfChildren}} and it\'s subpages{{/if}}.<br />\n			This operation can be undone in the workspace management.\n		</p>\n	</div>\n	<div class="modal-footer">\n		{{view T3.Content.UI.ButtonDialog label="Cancel" target="parentView" action="cancel" class="btn t3-button" title="Cancel"}}\n		{{view T3.Content.UI.ButtonDialog label="Delete" target="parentView" action="delete" class="btn btn-danger t3-button" title="Delete" icon="icon-trash icon-white"}}\n	</div>\n</div>\n<div class="modal-backdrop in"></div>'}),define("text!neos/templates/content/ui/inspectTree.html",[],function(){return'<div class="dynatree-container" id="t3-inspecttree-container">\n	<div id="t3-dd-inspecttree"></div>\n</div>'}),define("text!neos/templates/content/ui/saveIndicator.html",[],function(){return'{{#if view.saveRunning}}\n    <button class="t3-btn btn-mini t3-indicator"><span class="icon-white icon-refresh"></span> Saving...</button>\n{{else}}\n    {{#if view.lastSuccessfulTransfer}}\n        <button class="t3-btn btn-mini t3-indicator" {{bindAttr title="view.lastSuccessfulTransferLabel"}}><span class="icon-white icon-ok"></span> Saved</button>\n    {{/if}}\n{{/if}}'}),define("text!neos/templates/content/ui/treePanel.html",[],function(){return"{{view T3.Content.UI.PageTree}}\n"}),define("neos/content/ui/elements/toolbar",["emberjs"],function(e){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("neos/content/ui/elements/toolbar"),e.View.extend({tagName:"div",classNames:["t3-toolbar","t3-ui"],template:e.required()})}),define("neos/content/ui/elements/button",["emberjs"],function(e){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("neos/content/ui/elements/button"),e.View.extend(e.TargetActionSupport,{tagName:"button",classNames:["t3-button","btn","btn-mini"],attributeBindings:["disabled","title"],classNameBindings:["iconClass","isActive"],disabled:!1,visible:!0,isActive:!1,label:"",title:"",defaultTemplate:e.Handlebars.compile("{{view.label}}"),icon:"",iconClass:function(){var e=this.get("icon");return e!==""?"t3-icon-"+e:""}.property("icon"),mouseDown:function(){this.get("disabled")||this.set("isActive",!0)},mouseUp:function(e){this.get("isActive")&&(this.triggerAction(),this.set("isActive",!1))}})}),define("neos/content/ui/elements/toggle-button",["emberjs","neos/content/ui/elements/button"],function(e,t){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("neos/content/ui/elements/toggle-button"),t.extend({classNames:["t3-button"],classNameBindings:["pressed"],pressed:!1,toggle:function(){this.set("pressed",!this.get("pressed"))},mouseUp:function(e){if(this.get("isActive")){var t=this.get("action"),n=this.get("target");this.toggle(),n&&t&&(typeof t=="string"&&(t=n[t]),t.call(n,this.get("pressed"),this)),this.set("isActive",!1)}this._mouseDown=!1,this._mouseEntered=!1}})}),define("neos/content/ui/elements/popover-button",["jquery","neos/content/ui/elements/toggle-button"],function(e,t){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("neos/content/ui/elements/popover-button"),t.extend({popoverTitle:"",$popoverContent:e("<div></div>"),popoverPosition:"bottom",popoverAdditionalClasses:"",didInsertElement:function(){var t=this;this.$().popover({additionalClasses:this.get("popoverAdditionalClasses"),header:e("<div>"+t.get("popoverTitle")+"</div>"),content:this.$popoverContent,preventLeft:this.get("popoverPosition")==="left"?!1:!0,preventRight:this.get("popoverPosition")==="right"?!1:!0,preventTop:this.get("popoverPosition")==="top"?!1:!0,preventBottom:this.get("popoverPosition")==="bottom"?!1:!0,zindex:10090,closeEvent:function(){t.set("pressed",!1)},openEvent:function(){t.onPopoverOpen.call(t)}})},onPopoverOpen:function(){}})}),define("text!neos/templates/content/ui/contentelementHandles.html",[],function(){return'<div class="btn-toolbar">\n	<div class="btn-group">\n		{{#if view._showHide}}\n			<button {{bindAttr title="_hideToggleTitle" class=":btn :btn-mini :action-toggle-hidden view._hidden:active"}} {{action "toggleHidden" target="view"}}>\n				<i class="icon-eye-close"></i>\n			</button>\n		{{/if}}\n		{{#if view._showRemove}}\n			<button class="btn btn-mini action-remove" title="Remove" {{action "remove" target="view"}}>\n				<i class="icon-trash"></i>\n			</button>\n		{{/if}}\n		{{#if view._showCut}}\n			<button class="btn btn-mini action-cut" {{bindAttr class="view._thisElementStartedCut:active"}} title="Cut" {{action "cut" target="view"}}>\n				<i class="icon-cut"></i>\n			</button>\n		{{/if}}\n		{{#if view._showCopy}}\n			<button class="btn btn-mini action-copy" {{bindAttr class="view._thisElementStartedCopy:active"}} title="Copy" {{action "copy" target="view"}}>\n				<i class="icon-copy"></i>\n			</button>\n		{{/if}}\n		{{#if T3.Content.Controller.NodeActions.clipboardContainsContent}}\n			<button class="btn btn-mini action-paste" title="Paste after" {{action "pasteAfter" target="view"}}>\n				{{#if view._pasteInProgress}}\n					<i class="t3-handle-loading"></i>\n				{{else}}\n					<i class="icon-paste"></i>\n				{{/if}}\n			</button>\n		{{/if}}\n		<button class="btn btn-mini action-new" title="Create after" {{action "newAfter" target="view"}}>\n			{{#if view._thisElementIsAddingNewContent}}\n				<i class="t3-handle-loading"></i>\n			{{else}}\n				<i class="icon-plus"></i>\n			{{/if}}\n		</button>\n	</div>\n</div>'}),define("text!neos/templates/content/ui/newContentelementPopoverContent.html",[],function(){return'<div class="nodeTypeSelectorTabs notInitialized">\n	<ul>\n		{{#each view.data}}<li><a href="#{{unbound Ember.GUID_KEY}}{{unbound name}}">{{unbound name}}</a></li>{{/each}}\n	</ul>\n	{{#each view.data}}\n		<div id="{{unbound Ember.GUID_KEY}}{{unbound name}}" class="t3-content-new">\n			{{#each children}}\n				<div class="t3-content-new-selecttype-button">\n					<a rel="typo3:{{unbound nodeType}}" class="t3-content-new">\n						{{#if ui.icon.light}}\n							<img src="{{unbound ui.icon.light}}" />\n						{{else}}\n							<img src="/_Resources/Static/Packages/TYPO3.Neos/Images/Icons/White/square_shape_icon-16.png" />\n						{{/if}}\n						{{unbound label}}\n					</a>\n				</div>\n			{{/each}}\n		</div>\n	{{/each}}\n</div>'}),define("neos/content/ui/elements/new-contentelement-popover-content",["jquery","emberjs","text!neos/templates/content/ui/newContentelementPopoverContent.html"],function(e,t,n){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("neos/content/ui/elements/new-contentelement-popover-content"),t.View.extend({template:t.Handlebars.compile(n),_options:null,_index:null,_clickedButton:null,data:null,didInsertElement:function(){var e=this.$(".nodeTypeSelectorTabs").tabs();setTimeout(function(){e.tabs("select",0)},100)},click:function(t){var n=e(t.target).closest("a").attr("rel");if(!n)return;T3.Content.Controller.NodeActions.set("_elementIsAddingNewContent",this.get("_clickedButton._nodePath")),this.get("_options").collection.add({"@type":n},{at:this.get("_index")}),this.$().parents(".popover").trigger("hidePopover")}})}),define("neos/content/ui/elements/contentelement-handles",["jquery","vie/instance","text!neos/templates/content/ui/contentelementHandles.html","neos/content/ui/elements/new-contentelement-popover-content"],function(e,t,n,r){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("neos/content/ui/contentelement-handles"),Ember.View.extend({template:Ember.Handlebars.compile(n),_element:null,_entity:null,$newAfterPopoverContent:null,_entityCollectionIndex:null,_collection:null,popoverPosition:"right",_nodePath:null,_pasteInProgress:!1,_hidden:!0,_showHide:!1,_showRemove:!0,_showCut:!0,_showCopy:!0,_hideToggleTitle:function(){return this.get("_hidden")===!0?"Unhide":"Hide"}.property("_hidden"),_thisElementStartedCut:function(){var e=T3.Content.Controller.NodeActions.get("_clipboard");return e?e.type==="cut"&&e.nodePath===this.get("_nodePath"):!1}.property("T3.Content.Controller.NodeActions._clipboard","_nodePath"),_thisElementStartedCopy:function(){var e=T3.Content.Controller.NodeActions.get("_clipboard");return e?e.type==="copy"&&e.nodePath===this.get("_nodePath"):!1}.property("T3.Content.Controller.NodeActions._clipboard","_nodePath"),_thisElementIsAddingNewContent:function(){var e=T3.Content.Controller.NodeActions.get("_elementIsAddingNewContent");return e?e===this.get("_nodePath"):!1}.property("T3.Content.Controller.NodeActions._elementIsAddingNewContent","_nodePath"),_entityChanged:function(){this.set("_hidden",this.get("_entity").get("typo3:_hidden"))},didInsertElement:function(){var n=this,r=t.entities.get(t.service("rdfa").getElementSubject(this.get("_element")));this.set("_entity",r),this.set("_nodePath",r.getSubjectUri()),r.has("typo3:_hidden")===!0&&(this.set("_showHide",!0),this.set("_hidden",r.get("typo3:_hidden"))),r.on("change",this._entityChanged,this),this.$newAfterPopoverContent=e("<div />",{id:this.get(Ember.GUID_KEY)}),this.$().find(".action-new").popover({additionalClasses:"t3-new-contentelement-popover",content:this.$newAfterPopoverContent,preventLeft:this.get("popoverPosition")==="left"?!1:!0,preventRight:this.get("popoverPosition")==="right"?!1:!0,preventTop:this.get("popoverPosition")==="top"?!1:!0,preventBottom:this.get("popoverPosition")==="bottom"?!1:!0,positioning:"absolute",zindex:10090,closeEvent:function(){n.set("pressed",!1)},openEvent:function(){n.onPopoverOpen.call(n)}}),this.$().find(".action-remove").popover({header:"<div>Delete this element?</div>",content:e('<div class="typo3-confirmationdialog"><div class="actions"><button class="delete t3-button btn btn-mini btn-danger">Delete</button> <button class="cancel t3-button btn btn-mini">Cancel</button></div></div>'),preventLeft:this.get("popoverPosition")==="left"?!1:!0,preventRight:this.get("popoverPosition")==="right"?!1:!0,preventTop:this.get("popoverPosition")==="top"?!1:!0,preventBottom:this.get("popoverPosition")==="bottom"?!1:!0,positioning:"absolute",zindex:10090,openEvent:function(){this.popover$.find("button.delete").click(function(){n.get("_element").fadeOut(function(){n.get("_element").addClass("t3-contentelement-removed")}),T3.Content.Controller.NodeActions.remove(n.get("_entity")),n.$().find(".action-remove").trigger("hidePopover")}),this.popover$.find("button.cancel").click(function(){n.$().find(".action-remove").trigger("hidePopover")})}})},toggleHidden:function(){var e=this.get("_entity"),t=!e.get("typo3:_hidden");this.set("_hidden",t),e.set("typo3:_hidden",t),T3.Content.Controller.Inspector.nodeProperties.set("_hidden",t),T3.Content.Controller.Inspector.apply()},cut:function(){T3.Content.Controller.NodeActions.cut(this.get("_nodePath"))},copy:function(){T3.Content.Controller.NodeActions.copy(this.get("_nodePath"))},pasteAfter:function(){T3.Content.Controller.NodeActions.pasteAfter(this.get("_nodePath"))===!0&&this.set("_pasteInProgress",!0)},newAfter:function(){var e=this;this.$().find(".action-new").trigger("showPopover")},onPopoverOpen:function(){var e={};_.each(this.get("_collection").options.definition.range,function(t){var n=this.get("_collection").options.vie.types.get(t);n.metadata.nodeType=n.id.substring(1,n.id.length-1).replace(T3.ContentModule.TYPO3_NAMESPACE,""),n.metadata.ui&&n.metadata.ui.group&&(e[n.metadata.ui.group]||(e[n.metadata.ui.group]={name:n.metadata.ui.group,children:[]}),e[n.metadata.ui.group].children.push(n.metadata))},this);var t=[];T3.Configuration.nodeTypeGroups.forEach(function(n){e[n]&&t.push(e[n])}),r.create({_options:this.get("_collection").options,_index:this.get("_entityCollectionIndex"),_clickedButton:this,data:t}).replaceIn(this.$newAfterPopoverContent)},willDestroyElement:function(){this.$().find(".action-new").trigger("hidePopover")}})}),define("neos/content/ui/elements/section-handles",["jquery","vie/entity","neos/content/ui/elements/contentelement-handles"],function(e,t,n){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("neos/content/ui/section-handles"),n.extend({_showRemove:!1,_showCut:!1,_showCopy:!1,_nestedContentElementsAvailable:!1,_element:null,_collection:null,_entityCollectionIndex:null,didInsertElement:function(){this._super(),this._areNestedContentElementsAvailable(),this.get("_collection.options.collection").on("change",this._areNestedContentElementsAvailable,this)},_areNestedContentElementsAvailable:function(){var e=0;this.get("_collection.options.collection.models").forEach(function(n){var r=t.extractAttributesFromVieEntity(n);r._removed!==!0&&e++},this),this.set("_nestedContentElementsAvailable",e>0?!0:!1)},_isShown:function(){return this.get("_nestedContentElementsAvailable")?this.get("_nodePath")===T3.Content.Model.NodeSelection.get("selectedNode.nodePath"):!0}.property("T3.Content.Model.NodeSelection.selectedNode","_nodePath","_nestedContentElementsAvailable"),_toggleVisibilityOnShownChange:function(){if(!this.$())return;this.get("_isShown")?this.$().show():this.$().hide()}.observes("_isShown")})});var _canLog=!0,getDynaTreePersistData=null,DTNodeStatus_Error=-1,DTNodeStatus_Loading=1,DTNodeStatus_Ok=0;(function($){function getDtNodeFromElement(e){return alert("getDtNodeFromElement is deprecated"),$.ui.dynatree.getNode(e)}function noop(){}function _initDragAndDrop(e){var t=e.options.dnd||null;t&&(t.onDragStart||t.onDrop)&&_registerDnd(),t&&t.onDragStart&&e.$tree.draggable({addClasses:!1,appendTo:"body",containment:!1,delay:0,distance:4,revert:!1,scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToDynatree:!0,helper:function(e){var t=$.ui.dynatree.getNode(e.target);return t?t.tree._onDragEvent("helper",t,null,e,null,null):"<div></div>"},start:function(e,t){var n=t.helper.data("dtSourceNode");return!!n},_last:null}),t&&t.onDrop&&e.$tree.droppable({addClasses:!1,tolerance:"intersect",greedy:!1,_last:null})}var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}},DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(e,t,n){this.parent=e,this.tree=t,typeof n=="string"&&(n={title:n}),n.key===undefined&&(n.key="_"+t._nodeCount++),this.data=$.extend({},$.ui.dynatree.nodedatadefaults,n),this.li=null,this.span=null,this.ul=null,this.childList=null,this._isLoading=!1,this.hasSubSel=!1,this.bExpanded=!1,this.bSelected=!1},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(e,t){var n=$.extend({},this.data);n.activate=this.tree.activeNode===this,n.focus=this.tree.focusNode===this,n.expand=this.bExpanded,n.select=this.bSelected,t&&t(n);if(e&&this.childList){n.children=[];for(var r=0,i=this.childList.length;r<i;r++)n.children.push(this.childList[r].toDict(!0,t))}else delete n.children;return n},fromDict:function(e){var t=e.children;if(t===undefined){this.data=$.extend(this.data,e),this.render();return}e=$.extend({},e),e.children=undefined,this.data=$.extend(this.data,e),this.removeChildren(),this.addChild(t)},_getInnerHtml:function(){var e=this.tree,t=e.options,n=e.cache,r=this.getLevel(),i=this.data,s="";r<t.minExpandLevel?r>1&&(s+=n.tagConnector):this.hasChildren()!==!1?s+=n.tagExpander:s+=n.tagConnector,t.checkbox&&i.hideCheckbox!==!0&&!i.isStatusNode&&(s+=n.tagCheckbox),i.icon?s+="<img src='"+t.imagePath+i.icon+"' alt='' />":i.icon===!1?noop():s+=n.tagNodeIcon;var o="";t.onCustomRender&&(o=t.onCustomRender.call(e,this)||"");if(!o){var u=i.tooltip?' title="'+i.tooltip.replace(/\"/g,"&quot;")+'"':"",a=i.href||"#";t.noLink||i.noLink?o='<span style="display:inline-block;" class="'+t.classNames.title+'"'+u+">"+i.title+"</span>":o='<a href="'+a+'" class="'+t.classNames.title+'"'+u+">"+i.title+"</a>"}return s+=o,s},_fixOrder:function(){var e=this.childList;if(!e||!this.ul)return;var t=this.ul.firstChild;for(var n=0,r=e.length-1;n<r;n++){var i=e[n],s=t.dtnode;i!==s?(this.tree.logDebug("_fixOrder: mismatch at index "+n+": "+i+" != "+s),this.ul.insertBefore(i.li,s.li)):t=t.nextSibling}},render:function(e,t){var n=this.tree,r=this.parent,i=this.data,s=n.options,o=s.classNames,u=this.isLastSibling(),a=!1;if(!r&&!this.ul)this.li=this.span=null,this.ul=document.createElement("ul"),s.minExpandLevel>1?this.ul.className=o.container+" "+o.noConnector:this.ul.className=o.container;else if(r){this.li||(a=!0,this.li=document.createElement("li"),this.li.dtnode=this,i.key&&s.generateIds&&(this.li.id=s.idPrefix+i.key),this.span=document.createElement("span"),this.span.className=o.title,this.li.appendChild(this.span),r.ul||(r.ul=document.createElement("ul"),r.ul.style.display="none",r.li.appendChild(r.ul)),r.ul.appendChild(this.li)),this.span.innerHTML=this._getInnerHtml();var f=[];f.push(o.node),i.isFolder&&f.push(o.folder),this.bExpanded&&f.push(o.expanded),this.hasChildren()!==!1&&f.push(o.hasChildren),i.isLazy&&this.childList===null&&f.push(o.lazy),u&&f.push(o.lastsib),this.bSelected&&f.push(o.selected),this.hasSubSel&&f.push(o.partsel),n.activeNode===this&&f.push(o.active),i.addClass&&f.push(i.addClass),f.push(o.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(i.isLazy&&this.childList===null?"d":"")+(u?"l":"")),f.push(o.combinedIconPrefix+(this.bExpanded?"e":"c")+(i.isFolder?"f":"")),this.span.className=f.join(" "),this.li.className=u?o.lastsib:"",a&&s.onCreate&&s.onCreate.call(n,this,this.span),s.onRender&&s.onRender.call(n,this,this.span)}if((this.bExpanded||t===!0)&&this.childList){for(var l=0,c=this.childList.length;l<c;l++)this.childList[l].render(!1,t);this._fixOrder()}if(this.ul){var h=this.ul.style.display==="none",p=!!this.bExpanded;if(e&&s.fx&&h===p){var d=s.fx.duration||200;$(this.ul).animate(s.fx,d)}else this.ul.style.display=this.bExpanded||!r?"":"none"}},getKeyPath:function(e){var t=[];return this.visitParents(function(e){e.parent&&t.unshift(e.data.key)},!e),"/"+t.join(this.tree.options.keyPathSeparator)},getParent:function(){return this.parent},getChildren:function(){return this.hasChildren()===undefined?undefined:this.childList},hasChildren:function(){if(this.data.isLazy)return this.childList===null||this.childList===undefined?undefined:this.childList.length===0?!1:this.childList.length===1&&this.childList[0].isStatusNode()?undefined:!0;return!!this.childList},isFirstSibling:function(){var e=this.parent;return!e||e.childList[0]===this},isLastSibling:function(){var e=this.parent;return!e||e.childList[e.childList.length-1]===this},isLoading:function(){return!!this._isLoading},getPrevSibling:function(){if(!this.parent)return null;var e=this.parent.childList;for(var t=1,n=e.length;t<n;t++)if(e[t]===this)return e[t-1];return null},getNextSibling:function(){if(!this.parent)return null;var e=this.parent.childList;for(var t=0,n=e.length-1;t<n;t++)if(e[t]===this)return e[t+1];return null},isStatusNode:function(){return this.data.isStatusNode===!0},isChildOf:function(e){return this.parent&&this.parent===e},isDescendantOf:function(e){if(!e)return!1;var t=this.parent;while(t){if(t===e)return!0;t=t.parent}return!1},countChildren:function(){var e=this.childList;if(!e)return 0;var t=e.length;for(var n=0,r=t;n<r;n++){var i=e[n];t+=i.countChildren()}return t},sortChildren:function(e,t){var n=this.childList;if(!n)return;e=e||function(e,t){var n=e.data.title.toLowerCase(),r=t.data.title.toLowerCase();return n===r?0:n>r?1:-1},n.sort(e);if(t)for(var r=0,i=n.length;r<i;r++)n[r].childList&&n[r].sortChildren(e,"$norender$");t!=="$norender$"&&this.render()},_setStatusNode:function(e){var t=this.childList?this.childList[0]:null;if(!e){if(t&&t.isStatusNode()){try{this.ul&&(this.ul.removeChild(t.li),t.li=null)}catch(n){}this.childList.length===1?this.childList=[]:this.childList.shift()}}else t?(e.isStatusNode=!0,e.key="_statusNode",t.data=e,t.render()):(e.isStatusNode=!0,e.key="_statusNode",t=this.addChild(e))},setLazyNodeStatus:function(e,t){var n=t&&t.tooltip?t.tooltip:null,r=t&&t.info?" ("+t.info+")":"";switch(e){case DTNodeStatus_Ok:this._setStatusNode(null),$(this.span).removeClass(this.tree.options.classNames.nodeLoading),this._isLoading=!1,this.tree.options.autoFocus&&(this===this.tree.tnRoot&&this.childList&&this.childList.length>0?this.childList[0].focus():this.focus());break;case DTNodeStatus_Loading:this._isLoading=!0,$(this.span).addClass(this.tree.options.classNames.nodeLoading),this.parent||this._setStatusNode({title:this.tree.options.strings.loading+r,tooltip:n,addClass:this.tree.options.classNames.nodeWait});break;case DTNodeStatus_Error:this._isLoading=!1,this._setStatusNode({title:this.tree.options.strings.loadError+r,tooltip:n,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+e+"'."}},_parentList:function(e,t){var n=[],r=t?this:this.parent;while(r)(e||r.parent)&&n.unshift(r),r=r.parent;return n},getLevel:function(){var e=0,t=this.parent;while(t)e++,t=t.parent;return e},_getTypeForOuterNodeEvent:function(e){var t=this.tree.options.classNames,n=e.target;if(n.className.indexOf(t.node)<0)return null;var r=e.pageX-n.offsetLeft,i=e.pageY-n.offsetTop;for(var s=0,o=n.childNodes.length;s<o;s++){var u=n.childNodes[s],a=u.offsetLeft-n.offsetLeft,f=u.offsetTop-n.offsetTop,l=u.clientWidth,c=u.clientHeight;if(r>=a&&r<=a+l&&i>=f&&i<=f+c){if(u.className==t.title)return"title";if(u.className==t.expander)return"expander";if(u.className==t.checkbox)return"checkbox";if(u.className==t.nodeIcon)return"icon"}}return"prefix"},getEventTargetType:function(e){var t=e&&e.target?e.target.className:"",n=this.tree.options.classNames;return t===n.title?"title":t===n.expander?"expander":t===n.checkbox?"checkbox":t===n.nodeIcon?"icon":t===n.empty||t===n.vline||t===n.connector?"prefix":t.indexOf(n.node)>=0?this._getTypeForOuterNodeEvent(e):null},isVisible:function(){var e=this._parentList(!0,!1);for(var t=0,n=e.length;t<n;t++)if(!e[t].bExpanded)return!1;return!0},makeVisible:function(){var e=this._parentList(!0,!1);for(var t=0,n=e.length;t<n;t++)e[t]._expand(!0)},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(e){}},isFocused:function(){return this.tree.tnFocused===this},_activate:function(e,t){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",e,t,this);var n=this.tree.options;if(this.data.isStatusNode)return;if(t&&n.onQueryActivate&&n.onQueryActivate.call(this.tree,e,this)===!1)return;if(e){if(this.tree.activeNode){if(this.tree.activeNode===this)return;this.tree.activeNode.deactivate()}n.activeVisible&&this.makeVisible(),this.tree.activeNode=this,n.persist&&$.cookie(n.cookieId+"-active",this.data.key,n.cookie),this.tree.persistence.activeKey=this.data.key,$(this.span).addClass(n.classNames.active),t&&n.onActivate&&n.onActivate.call(this.tree,this)}else if(this.tree.activeNode===this){if(n.onQueryActivate&&n.onQueryActivate.call(this.tree,!1,this)===!1)return;$(this.span).removeClass(n.classNames.active),n.persist&&$.cookie(n.cookieId+"-active","",n.cookie),this.tree.persistence.activeKey=null,this.tree.activeNode=null,t&&n.onDeactivate&&n.onDeactivate.call(this.tree,this)}},activate:function(){this._activate(!0,!0)},activateSilently:function(){this._activate(!0,!1)},deactivate:function(){this._activate(!1,!0)},isActive:function(){return this.tree.activeNode===this},_userActivate:function(){var e=!0,t=!1;if(this.data.isFolder)switch(this.tree.options.clickFolderMode){case 2:e=!1,t=!0;break;case 3:e=t=!0}this.parent===null&&(t=!1),t&&(this.toggleExpand(),this.focus()),e&&this.activate()},_setSubSel:function(e){e?(this.hasSubSel=!0,$(this.span).addClass(this.tree.options.classNames.partsel)):(this.hasSubSel=!1,$(this.span).removeClass(this.tree.options.classNames.partsel))},_updatePartSelectionState:function(){var e;if(!this.hasChildren())return e=this.bSelected&&!this.data.unselectable&&!this.data.isStatusNode,this._setSubSel(!1),e;var t,n,r=this.childList,i=!0,s=!0;for(t=0,n=r.length;t<n;t++){var o=r[t],u=o._updatePartSelectionState();u!==!1&&(s=!1),u!==!0&&(i=!1)}return i?e=!0:s?e=!1:e=undefined,this._setSubSel(e===undefined),this.bSelected=e===!0,e},_fixSelectionState:function(){var e,t,n;if(this.bSelected){this.visit(function(e){e.parent._setSubSel(!0),e.data.unselectable||e._select(!0,!1,!1)}),e=this.parent;while(e){e._setSubSel(!0);var r=!0;for(t=0,n=e.childList.length;t<n;t++){var i=e.childList[t];if(!i.bSelected&&!i.data.isStatusNode&&!i.data.unselectable){r=!1;break}}r&&e._select(!0,!1,!1),e=e.parent}}else{this._setSubSel(!1),this.visit(function(e){e._setSubSel(!1),e._select(!1,!1,!1)}),e=this.parent;while(e){e._select(!1,!1,!1);var s=!1;for(t=0,n=e.childList.length;t<n;t++)if(e.childList[t].bSelected||e.childList[t].hasSubSel){s=!0;break}e._setSubSel(s),e=e.parent}}},_select:function(e,t,n){var r=this.tree.options;if(this.data.isStatusNode)return;if(this.bSelected===e)return;if(t&&r.onQuerySelect&&r.onQuerySelect.call(this.tree,e,this)===!1)return;r.selectMode==1&&e&&this.tree.visit(function(e){if(e.bSelected)return e._select(!1,!1,!1),!1}),this.bSelected=e,e?(r.persist&&this.tree.persistence.addSelect(this.data.key),$(this.span).addClass(r.classNames.selected),n&&r.selectMode===3&&this._fixSelectionState(),t&&r.onSelect&&r.onSelect.call(this.tree,!0,this)):(r.persist&&this.tree.persistence.clearSelect(this.data.key),$(this.span).removeClass(r.classNames.selected),n&&r.selectMode===3&&this._fixSelectionState(),t&&r.onSelect&&r.onSelect.call(this.tree,!1,this))},select:function(e){return this.data.unselectable?this.bSelected:this._select(e!==!1,!0,!0)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},isLazy:function(){return!!this.data.isLazy},_loadContent:function(){try{var e=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this),this.setLazyNodeStatus(DTNodeStatus_Loading),!0===e.onLazyRead.call(this.tree,this)&&(this.setLazyNodeStatus(DTNodeStatus_Ok),this.tree.logDebug("_loadContent: succeeded - %o",this))}catch(t){this.tree.logWarning("_loadContent: failed - %o",t),this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+t})}},_expand:function(e,t){if(this.bExpanded===e){this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",e,this);return}this.tree.logDebug("dtnode._expand(%o) - %o",e,this);var n=this.tree.options;if(!e&&this.getLevel()<n.minExpandLevel){this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",e,this);return}if(n.onQueryExpand&&n.onQueryExpand.call(this.tree,e,this)===!1)return;this.bExpanded=e,n.persist&&(e?this.tree.persistence.addExpand(this.data.key):this.tree.persistence.clearExpand(this.data.key));var r=(!this.data.isLazy||this.childList!==null)&&!this._isLoading&&!t;this.render(r);if(this.bExpanded&&this.parent&&n.autoCollapse){var i=this._parentList(!1,!0);for(var s=0,o=i.length;s<o;s++)i[s].collapseSiblings()}n.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()&&this.tree.activeNode.deactivate();if(e&&this.data.isLazy&&this.childList===null&&!this._isLoading){this._loadContent();return}n.onExpand&&n.onExpand.call(this.tree,e,this)},isExpanded:function(){return this.bExpanded},expand:function(e){e=e!==!1;if(!this.childList&&!this.data.isLazy&&e)return;if(this.parent===null&&!e)return;this._expand(e)},scheduleAction:function(e,t){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.logDebug("clearTimeout(%o)",this.tree.timer));var n=this;switch(e){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){n.tree.logDebug("setTimeout: trigger expand"),n.expand(!0)},t);break;case"activate":this.tree.timer=setTimeout(function(){n.tree.logDebug("setTimeout: trigger activate"),n.activate()},t);break;default:throw"Invalid mode "+e}this.tree.logDebug("setTimeout(%s, %s): %s",e,t,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(this.parent===null)return;var e=this.parent.childList;for(var t=0,n=e.length;t<n;t++)e[t]!==this&&e[t].bExpanded&&e[t]._expand(!1)},_onClick:function(e){var t=this.getEventTargetType(e);if(t==="expander")this.toggleExpand(),this.focus();else if(t==="checkbox")this.toggleSelect(),this.focus();else{this._userActivate();var n=this.span.getElementsByTagName("a");if(!n[0])return!0;$.browser.msie&&parseInt($.browser.version,10)<9||n[0].focus()}e.preventDefault()},_onDblClick:function(e){},_onKeydown:function(e){var t=!0,n;switch(e.which){case 107:case 187:this.bExpanded||this.toggleExpand();break;case 109:case 189:this.bExpanded&&this.toggleExpand();break;case 32:this._userActivate();break;case 8:this.parent&&this.parent.focus();break;case 37:this.bExpanded?(this.toggleExpand(),this.focus()):this.parent&&this.parent.parent&&this.parent.focus();break;case 39:!this.bExpanded&&(this.childList||this.data.isLazy)?(this.toggleExpand(),this.focus()):this.childList&&this.childList[0].focus();break;case 38:n=this.getPrevSibling();while(n&&n.bExpanded&&n.childList)n=n.childList[n.childList.length-1];!n&&this.parent&&this.parent.parent&&(n=this.parent),n&&n.focus();break;case 40:if(this.bExpanded&&this.childList)n=this.childList[0];else{var r=this._parentList(!1,!0);for(var i=r.length-1;i>=0;i--){n=r[i].getNextSibling();if(n)break}}n&&n.focus();break;default:t=!1}t&&e.preventDefault()},_onKeypress:function(e){},_onFocus:function(e){var t=this.tree.options;if(e.type=="blur"||e.type=="focusout")t.onBlur&&t.onBlur.call(this.tree,this),this.tree.tnFocused&&$(this.tree.tnFocused.span).removeClass(t.classNames.focused),this.tree.tnFocused=null,t.persist&&$.cookie(t.cookieId+"-focus","",t.cookie);else if(e.type=="focus"||e.type=="focusin")this.tree.tnFocused&&this.tree.tnFocused!==this&&(this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused),$(this.tree.tnFocused.span).removeClass(t.classNames.focused)),this.tree.tnFocused=this,t.onFocus&&t.onFocus.call(this.tree,this),$(this.tree.tnFocused.span).addClass(t.classNames.focused),t.persist&&$.cookie(t.cookieId+"-focus",this.data.key,t.cookie)},visit:function(e,t){var n=!0;if(t===!0){n=e(this);if(n===!1||n=="skip")return n}if(this.childList)for(var r=0,i=this.childList.length;r<i;r++){n=this.childList[r].visit(e,!0);if(n===!1)break}return n},visitParents:function(e,t){if(t&&e(this)===!1)return!1;var n=this.parent;while(n){if(e(n)===!1)return!1;n=n.parent}return!0},remove:function(){if(this===this.tree.root)throw"Cannot remove system root";return this.parent.removeChild(this)},removeChild:function(e){var t=this.childList;if(t.length==1){if(e!==t[0])throw"removeChild: invalid child";return this.removeChildren()}e===this.tree.activeNode&&e.deactivate(),this.tree.options.persist&&(e.bSelected&&this.tree.persistence.clearSelect(e.data.key),e.bExpanded&&this.tree.persistence.clearExpand(e.data.key)),e.removeChildren(!0),this.ul.removeChild(e.li);for(var n=0,r=t.length;n<r;n++)if(t[n]===e){this.childList.splice(n,1);break}},removeChildren:function(e,t){this.tree.logDebug("%s.removeChildren(%o)",this,e);var n=this.tree,r=this.childList;if(r){for(var i=0,s=r.length;i<s;i++){var o=r[i];o===n.activeNode&&!t&&o.deactivate(),this.tree.options.persist&&!t&&(o.bSelected&&this.tree.persistence.clearSelect(o.data.key),o.bExpanded&&this.tree.persistence.clearExpand(o.data.key)),o.removeChildren(!0,t),this.ul&&$("li",$(this.ul)).remove()}this.childList=null}e||(this._isLoading=!1,this.render())},setTitle:function(e){this.fromDict({title:e})},reload:function(e){throw"Use reloadChildren() instead"},reloadChildren:function(e){if(this.parent===null)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.reloadChildren() requires lazy nodes.";if(e){var t=this,n="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(n,function(r,i,s){t.tree.$tree.unbind(n),t.tree.logDebug("loaded %o, %o, %o",r,i,s);if(i!==t)throw"got invalid load event";e.call(t.tree,i,s)})}this.removeChildren(),this._loadContent()},_loadKeyPath:function(e,t){var n=this.tree;n.logDebug("%s._loadKeyPath(%s)",this,e);if(e==="")throw"Key path must not be empty";var r=e.split(n.options.keyPathSeparator);if(r[0]==="")throw"Key path must be relative (don't start with '/')";var i=r.shift();if(this.childList)for(var s=0,o=this.childList.length;s<o;s++){var u=this.childList[s];if(u.data.key===i){if(r.length===0)t.call(n,u,"ok");else if(!u.data.isLazy||u.childList!==null&&u.childList!==undefined)t.call(n,u,"loaded"),u._loadKeyPath(r.join(n.options.keyPathSeparator),t);else{n.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,e,u);var a=this;u.reloadChildren(function(i,s){s?(n.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",i,e,i),t.call(n,u,"loaded"),i._loadKeyPath(r.join(n.options.keyPathSeparator),t)):(n.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",a,e),t.call(n,u,"error"))})}return}}t.call(n,undefined,"notfound",i,r.length===0),n.logWarning("Node not found: "+i);return},resetLazy:function(){if(this.parent===null)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.resetLazy() requires lazy nodes.";this.expand(!1),this.removeChildren()},_addChildNode:function(e,t){var n=this.tree,r=n.options,i=n.persistence;e.parent=this,this.childList===null?this.childList=[]:t||this.childList.length>0&&$(this.childList[this.childList.length-1].span).removeClass(r.classNames.lastsib);if(t){var s=$.inArray(t,this.childList);if(s<0)throw"<beforeNode> must be a child of <this>";this.childList.splice(s,0,e)}else this.childList.push(e);var o=n.isInitializing();r.persist&&i.cookiesFound&&o?(i.activeKey===e.data.key&&(n.activeNode=e),i.focusedKey===e.data.key&&(n.focusNode=e),e.bExpanded=$.inArray(e.data.key,i.expandedKeyList)>=0,e.bSelected=$.inArray(e.data.key,i.selectedKeyList)>=0):(e.data.activate&&(n.activeNode=e,r.persist&&(i.activeKey=e.data.key)),e.data.focus&&(n.focusNode=e,r.persist&&(i.focusedKey=e.data.key)),e.bExpanded=e.data.expand===!0,e.bExpanded&&r.persist&&i.addExpand(e.data.key),e.bSelected=e.data.select===!0,e.bSelected&&r.persist&&i.addSelect(e.data.key)),r.minExpandLevel>=e.getLevel()&&(this.bExpanded=!0);if(e.bSelected&&r.selectMode==3){var u=this;while(u)u.hasSubSel||u._setSubSel(!0),u=u.parent}return n.bEnableUpdate&&this.render(),e},addChild:function(e,t){if(typeof e=="string")throw"Invalid data type for "+e;if(!e||e.length===0)return;if(e instanceof DynaTreeNode)return this._addChildNode(e,t);e.length||(e=[e]);var n=this.tree.enableUpdate(!1),r=null;for(var i=0,s=e.length;i<s;i++){var o=e[i],u=this._addChildNode(new DynaTreeNode(this,this.tree,o),t);r||(r=u),o.children&&u.addChild(o.children,null)}return this.tree.enableUpdate(n),r},append:function(e){return this.tree.logWarning("node.append() is deprecated (use node.addChild() instead)."),this.addChild(e,null)},appendAjax:function(e){var t=this;this.removeChildren(!1,!0),this.setLazyNodeStatus(DTNodeStatus_Loading);if(e.debugLazyDelay){var n=e.debugLazyDelay;e.debugLazyDelay=0,this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+n),setTimeout(function(){t.appendAjax(e)},n);return}var r=e.success,i=e.error,s="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key,o=$.extend({},this.tree.options.ajaxDefaults,e,{success:function(e,n,i){var u=t.tree.phase;t.tree.phase="init",o.postProcess?e=o.postProcess.call(this,e,this.dataType):e&&e.hasOwnProperty("d")&&(e=typeof e.d=="string"?$.parseJSON(e.d):e.d),(!$.isArray(e)||e.length!==0)&&t.addChild(e,null),t.tree.phase="postInit",r&&r.call(o,t,e,n),t.tree.logDebug("trigger "+s),t.tree.$tree.trigger(s,[t,!0]),t.tree.phase=u,t.setLazyNodeStatus(DTNodeStatus_Ok),$.isArray(e)&&e.length===0&&(t.childList=[],t.render())},error:function(e,n,r){t.tree.logWarning("appendAjax failed:",n,":\n",e,"\n",r),i&&i.call(o,t,e,n,r),t.tree.$tree.trigger(s,[t,!1]),t.setLazyNodeStatus(DTNodeStatus_Error,{info:n,tooltip:""+r})}});$.ajax(o)},move:function(e,t){var n;if(this===e)return;if(!this.parent)throw"Cannot move system root";if(t===undefined||t=="over")t="child";var r=this.parent,i=t==="child"?e:e.parent;if(i.isDescendantOf(this))throw"Cannot move a node to it's own descendant";if(this.parent.childList.length==1)this.parent.childList=this.parent.data.isLazy?[]:null,this.parent.bExpanded=!1;else{n=$.inArray(this,this.parent.childList);if(n<0)throw"Internal error";this.parent.childList.splice(n,1)}this.parent.ul&&this.parent.ul.removeChild(this.li),this.parent=i;if(i.hasChildren())switch(t){case"child":i.childList.push(this);break;case"before":n=$.inArray(e,i.childList);if(n<0)throw"Internal error";i.childList.splice(n,0,this);break;case"after":n=$.inArray(e,i.childList);if(n<0)throw"Internal error";i.childList.splice(n+1,0,this);break;default:throw"Invalid mode "+t}else i.childList=[this];i.ul||(i.ul=document.createElement("ul"),i.ul.style.display="none",i.li.appendChild(i.ul)),this.li&&i.ul.appendChild(this.li);if(this.tree!==e.tree)throw this.visit(function(t){t.tree=e.tree},null,!0),"Not yet implemented.";r.isDescendantOf(i)||r.render(),i.isDescendantOf(r)||i.render()},lastentry:undefined};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(e,t){var n=new DynaTreeStatus(e,t);return n.read(),n.toDict()},getDynaTreePersistData=DynaTreeStatus._getTreePersistData,DynaTreeStatus.prototype={initialize:function(e,t){e===undefined&&(e=$.ui.dynatree.prototype.options.cookieId),t=$.extend({},$.ui.dynatree.prototype.options.cookie,t),this.cookieId=e,this.cookieOpts=t,this.cookiesFound=undefined,this.activeKey=null,this.focusedKey=null,this.expandedKeyList=null,this.selectedKeyList=null},_log:function(e){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)},read:function(){this.cookiesFound=!1;var e=$.cookie(this.cookieId+"-active");this.activeKey=e===null?"":e,e!==null&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-focus"),this.focusedKey=e===null?"":e,e!==null&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-expand"),this.expandedKeyList=e===null?[]:e.split(","),e!==null&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-select"),this.selectedKeyList=e===null?[]:e.split(","),e!==null&&(this.cookiesFound=!0)},write:function(){$.cookie(this.cookieId+"-active",this.activeKey===null?"":this.activeKey,this.cookieOpts),$.cookie(this.cookieId+"-focus",this.focusedKey===null?"":this.focusedKey,this.cookieOpts),$.cookie(this.cookieId+"-expand",this.expandedKeyList===null?"":this.expandedKeyList.join(","),this.cookieOpts),$.cookie(this.cookieId+"-select",this.selectedKeyList===null?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(e){$.inArray(e,this.expandedKeyList)<0&&(this.expandedKeyList.push(e),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},clearExpand:function(e){var t=$.inArray(e,this.expandedKeyList);t>=0&&(this.expandedKeyList.splice(t,1),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},addSelect:function(e){$.inArray(e,this.selectedKeyList)<0&&(this.selectedKeyList.push(e),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},clearSelect:function(e){var t=$.inArray(e,this.selectedKeyList);t>=0&&(this.selectedKeyList.splice(t,1),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},isReloading:function(){return this.cookiesFound===!0},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:undefined};var DynaTree=Class.create();DynaTree.version="$Version: 1.2.1$",DynaTree.prototype={initialize:function(e){this.phase="init",this.$widget=e,this.options=e.options,this.$tree=e.element,this.timer=null,this.divTree=this.$tree.get(0),_initDragAndDrop(this)},_load:function(e){var t=this.$widget,n=this.options,r=this;this.bEnableUpdate=!0,this._nodeCount=1,this.activeNode=null,this.focusNode=null,n.rootVisible!==undefined&&this.logWarning("Option 'rootVisible' is no longer supported."),n.minExpandLevel<1&&(this.logWarning("Option 'minExpandLevel' must be >= 1."),n.minExpandLevel=1),n.classNames!==$.ui.dynatree.prototype.options.classNames&&(n.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,n.classNames)),n.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults&&(n.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,n.ajaxDefaults)),n.dnd!==$.ui.dynatree.prototype.options.dnd&&(n.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,n.dnd)),n.imagePath||$("script").each(function(){var e=/.*dynatree[^\/]*\.js$/i;if(this.src.search(e)>=0)return this.src.indexOf("/")>=0?n.imagePath=this.src.slice(0,this.src.lastIndexOf("/"))+"/skin/":n.imagePath="skin/",r.logDebug("Guessing imagePath from '%s': '%s'",this.src,n.imagePath),!1}),this.persistence=new DynaTreeStatus(n.cookieId,n.cookie),n.persist&&($.cookie||_log("warn","Please include jquery.cookie.js to use persistence."),this.persistence.read()),this.logDebug("DynaTree.persistence: %o",this.persistence.toDict()),this.cache={tagEmpty:"<span class='"+n.classNames.empty+"'></span>",tagVline:"<span class='"+n.classNames.vline+"'></span>",tagExpander:"<span class='"+n.classNames.expander+"'></span>",tagConnector:"<span class='"+n.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+n.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+n.classNames.checkbox+"'></span>",lastentry:undefined},(n.children||n.initAjax&&n.initAjax.url||n.initId)&&$(this.divTree).empty();var i=this.$tree.find(">ul:first").hide();this.tnRoot=new DynaTreeNode(null,this,{}),this.tnRoot.bExpanded=!0,this.tnRoot.render(),this.divTree.appendChild(this.tnRoot.ul);var s=this.tnRoot,o=n.persist&&this.persistence.isReloading(),u=!1,a=this.enableUpdate(!1);this.logDebug("Dynatree._load(): read tree structure..."),n.children?s.addChild(n.children):n.initAjax&&n.initAjax.url?(u=!0,s.data.isLazy=!0,this._reloadAjax(e)):n.initId?this._createFromTag(s,$("#"+n.initId)):(this._createFromTag(s,i),i.remove()),this._checkConsistency(),!u&&n.selectMode==3&&s._updatePartSelectionState(),this.logDebug("Dynatree._load(): render nodes..."),this.enableUpdate(a),this.logDebug("Dynatree._load(): bind events..."),this.$widget.bind(),this.logDebug("Dynatree._load(): postInit..."),this.phase="postInit",n.persist&&this.persistence.write(),this.focusNode&&this.focusNode.isVisible()&&(this.logDebug("Focus on init: %o",this.focusNode),this.focusNode.focus()),u||(n.onPostInit&&n.onPostInit.call(this,o,!1),e&&e.call(this,"ok")),this.phase="idle"},_reloadAjax:function(e){var t=this.options;if(!t.initAjax||!t.initAjax.url)throw"tree.reload() requires 'initAjax' mode.";var n=this.persistence,r=$.extend({},t.initAjax);r.addActiveKey&&(r.data.activeKey=n.activeKey),r.addFocusedKey&&(r.data.focusedKey=n.focusedKey),r.addExpandedKeyList&&(r.data.expandedKeyList=n.expandedKeyList.join(",")),r.addSelectedKeyList&&(r.data.selectedKeyList=n.selectedKeyList.join(",")),r.success&&this.logWarning("initAjax: success callback is ignored; use onPostInit instead."),r.error&&this.logWarning("initAjax: error callback is ignored; use onPostInit instead.");var i=n.isReloading();r.success=function(n,r,s){t.selectMode==3&&n.tree.tnRoot._updatePartSelectionState(),t.onPostInit&&t.onPostInit.call(n.tree,i,!1),e&&e.call(n.tree,"ok")},r.error=function(n,r,s,o){t.onPostInit&&t.onPostInit.call(n.tree,i,!0,r,s,o),e&&e.call(n.tree,"error",r,s,o)},this.logDebug("Dynatree._init(): send Ajax request..."),this.tnRoot.appendAjax(r)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(){return this.tnRoot.toDict(!0)},serializeArray:function(e){var t=this.getSelectedNodes(e),n=this.$tree.attr("name")||this.$tree.attr("id"),r=[];for(var i=0,s=t.length;i<s;i++)r.push({name:n,value:t[i].data.key});return r},getPersistData:function(){return this.persistence.toDict()},logDebug:function(e){this.options.debugLevel>=2&&(Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments))},logInfo:function(e){this.options.debugLevel>=1&&(Array.prototype.unshift.apply(arguments,["info"]),_log.apply(this,arguments))},logWarning:function(e){Array.prototype.unshift.apply(arguments,["warn"]),_log.apply(this,arguments)},isInitializing:function(){return this.phase=="init"||this.phase=="postInit"},isReloading:function(){return(this.phase=="init"||this.phase=="postInit")&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return this.phase=="userEvent"},redraw:function(){this.tnRoot.render(!1,!1)},renderInvisibleNodes:function(){this.tnRoot.render(!1,!0)},reload:function(e){this._load(e)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(e){var t=document.getElementById(this.options.idPrefix+e);if(t)return t.dtnode?t.dtnode:null;var n=null;return this.visit(function(t){if(t.data.key==e)return n=t,!1},!0),n},getActiveNode:function(){return this.activeNode},reactivate:function(e){var t=this.activeNode;t&&(this.activeNode=null,t.activate(),e&&t.focus())},getSelectedNodes:function(e){var t=[];return this.tnRoot.visit(function(n){if(n.bSelected){t.push(n);if(e===!0)return"skip"}}),t},activateKey:function(e){var t=e===null?null:this.getNodeByKey(e);return t?(t.focus(),t.activate(),t):(this.activeNode&&this.activeNode.deactivate(),this.activeNode=null,null)},loadKeyPath:function(e,t){var n=e.split(this.options.keyPathSeparator);return n[0]===""&&n.shift(),n[0]==this.tnRoot.data.key&&(this.logDebug("Removed leading root key."),n.shift()),e=n.join(this.options.keyPathSeparator),this.tnRoot._loadKeyPath(e,t)},selectKey:function(e,t){var n=this.getNodeByKey(e);return n?(n.select(t),n):null},enableUpdate:function(e){return this.bEnableUpdate==e?e:(this.bEnableUpdate=e,e&&this.redraw(),!e)},count:function(){return this.tnRoot.countChildren()},visit:function(e,t){return this.tnRoot.visit(e,t)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each(function(){var $li=$(this),$liSpan=$li.find(">span:first"),$liA=$li.find(">a:first"),title,href=null,target=null,tooltip;if($liSpan.length)title=$liSpan.html();else if($liA.length)title=$liA.html(),href=$liA.attr("href"),target=$liA.attr("target"),tooltip=$liA.attr("title");else{title=$li.html();var iPos=title.search(/<ul/i);iPos>=0?title=$.trim(title.substring(0,iPos)):title=$.trim(title)}var data={title:title,tooltip:tooltip,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};href&&(data.href=href,data.target=target),$li.attr("title")&&(data.tooltip=$li.attr("title")),$li.attr("id")&&(data.key=$li.attr("id"));if($li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){dataAttr.charAt(0)!="{"&&(dataAttr="{"+dataAttr+"}");try{$.extend(data,eval("("+dataAttr+")"))}catch(e){throw"Error parsing node data: "+e+"\ndata:\n'"+dataAttr+"'"}}}var childNode=parentTreeNode.addChild(data),$ul=$li.find(">ul:first");$ul.length&&self._createFromTag(childNode,$ul)})},_checkConsistency:function(){},_setDndStatus:function(e,t,n,r,i){var s=e?$(e.span):null,o=$(t.span);this.$dndMarker||(this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().prependTo($(this.divTree).parent()));if(r==="after"||r==="before"||r==="over"){var u=o.position();switch(r){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-before"),u.top-=8;break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-after"),u.top+=8;break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before"),this.$dndMarker.addClass("dynatree-drop-over"),o.addClass("dynatree-drop-target"),u.left+=8}this.$dndMarker.css({left:u.left,top:u.top,"z-index":1e3}).show()}else o.removeClass("dynatree-drop-target"),this.$dndMarker.hide();r==="after"?o.addClass("dynatree-drop-after"):o.removeClass("dynatree-drop-after"),r==="before"?o.addClass("dynatree-drop-before"):o.removeClass("dynatree-drop-before"),i===!0?(s&&s.addClass("dynatree-drop-accept"),o.addClass("dynatree-drop-accept"),n.addClass("dynatree-drop-accept")):(s&&s.removeClass("dynatree-drop-accept"),o.removeClass("dynatree-drop-accept"),n.removeClass("dynatree-drop-accept")),i===!1?(s&&s.addClass("dynatree-drop-reject"),o.addClass("dynatree-drop-reject"),n.addClass("dynatree-drop-reject")):(s&&s.removeClass("dynatree-drop-reject"),o.removeClass("dynatree-drop-reject"),n.removeClass("dynatree-drop-reject"))},_onDragEvent:function(e,t,n,r,i,s){var o=this.options,u=this.options.dnd,a=null,f=$(t.span),l,c;switch(e){case"helper":var h=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append($(r.target).closest("a").clone());$("ul.dynatree-container",t.tree.divTree).append(h),h.data("dtSourceNode",t),a=h;break;case"start":t.isStatusNode()?a=!1:u.onDragStart&&(a=u.onDragStart(t)),a===!1?(this.logDebug("tree.onDragStart() cancelled"),i.helper.trigger("mouseup"),i.helper.hide()):f.addClass("dynatree-drag-source");break;case"enter":a=u.onDragEnter?u.onDragEnter(t,n):null,a={over:a!==!1&&(a===!0||a==="over"||$.inArray("over",a)>=0),before:a!==!1&&(a===!0||a==="before"||$.inArray("before",a)>=0),after:a!==!1&&(a===!0||a==="after"||$.inArray("after",a)>=0)},i.helper.data("enterResponse",a);break;case"over":c=i.helper.data("enterResponse"),l=null;if(c===!1)break;if(typeof c=="string")l=c;else{var p=f.offset(),d={x:r.pageX-p.left,y:r.pageY-p.top},v={x:d.x/f.width(),y:d.y/f.height()};c.after&&v.y>.75?l="after":!c.over&&c.after&&v.y>.5?l="after":c.before&&v.y<=.25?l="before":!c.over&&c.before&&v.y<=.5?l="before":c.over&&(l="over"),u.preventVoidMoves&&(t===n?l=null:l==="before"&&n&&t===n.getNextSibling()?l=null:l==="after"&&n&&t===n.getPrevSibling()?l=null:l==="over"&&n&&n.parent===t&&n.isLastSibling()&&(l=null)),i.helper.data("hitMode",l)}l==="over"&&u.autoExpandMS&&t.hasChildren()!==!1&&!t.bExpanded&&t.scheduleAction("expand",u.autoExpandMS),l&&u.onDragOver&&(a=u.onDragOver(t,n,l)),this._setDndStatus(n,t,i.helper,l,a!==!1);break;case"drop":var m=i.helper.hasClass("dynatree-drop-reject");l=i.helper.data("hitMode"),l&&u.onDrop&&!m&&u.onDrop(t,n,l,i,s);break;case"leave":t.scheduleAction("cancel"),i.helper.data("enterResponse",null),i.helper.data("hitMode",null),this._setDndStatus(n,t,i.helper,"out",undefined),u.onDragLeave&&u.onDragLeave(t,n);break;case"stop":f.removeClass("dynatree-drag-source"),u.onDragStop&&u.onDragStop(t);break;default:throw"Unsupported drag event: "+e}return a},cancelDrag:function(){var e=$.ui.ddmanager.current;e&&e.cancel()},lastentry:undefined},$.widget("ui.dynatree",{_init:function(){if(parseFloat($.ui.version)<1.8)return this.options.debugLevel>=0&&_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher."),this._create();this.options.debugLevel>=2&&_log("debug","ui.dynatree._init() was called; no current default functionality.")},_create:function(){var e=this.options;e.debugLevel>=1&&logMsg("Dynatree._create(): version='%s', debugLevel=%o.",$.ui.dynatree.version,this.options.debugLevel),this.options.event+=".dynatree";var t=this.element.get(0);this.tree=new DynaTree(this),this.tree._load(),this.tree.logDebug("Dynatree._init(): done.")},bind:function(){function t(e){e=$.event.fix(e||window.event);var t=$.ui.dynatree.getNode(e.target);return t?t._onFocus(e):!1}this.unbind();var e="click.dynatree dblclick.dynatree";this.options.keyboard&&(e+=" keypress.dynatree keydown.dynatree"),this.element.bind(e,function(e){var t=$.ui.dynatree.getNode(e.target);if(!t)return!0;var n=t.tree,r=n.options;n.logDebug("event(%s): dtnode: %s",e.type,t);var i=n.phase;n.phase="userEvent";try{switch(e.type){case"click":return r.onClick&&r.onClick.call(n,t,e)===!1?!1:t._onClick(e);case"dblclick":return r.onDblClick&&r.onDblClick.call(n,t,e)===!1?!1:t._onDblClick(e);case"keydown":return r.onKeydown&&r.onKeydown.call(n,t,e)===!1?!1:t._onKeydown(e);case"keypress":return r.onKeypress&&r.onKeypress.call(n,t,e)===!1?!1:t._onKeypress(e)}}catch(s){var o=null;n.logWarning("bind(%o): dtnode: %o, error: %o",e,t,s)}finally{n.phase=i}});var n=this.tree.divTree;n.addEventListener?(n.addEventListener("focus",t,!0),n.addEventListener("blur",t,!0)):n.onfocusin=n.onfocusout=t},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind(),$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind(),$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:undefined}),parseFloat($.ui.version)<1.8&&($.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"),$.ui.dynatree.version="$Version: 1.2.1$",$.ui.dynatree.getNode=function(e){if(e instanceof DynaTreeNode)return e;e.selector!==undefined&&(e=e[0]);while(e){if(e.dtnode)return e.dtnode;e=e.parentNode}return null},$.ui.dynatree.getPersistData=DynaTreeStatus._getTreePersistData,$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:null,children:null,initId:null,initAjax:null,autoFocus:!0,keyboard:!0,persist:!1,autoCollapse:!1,clickFolderMode:3,activeVisible:!0,checkbox:!1,selectMode:2,fx:null,noLink:!1,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onCreate:null,onRender:null,postProcess:null,dnd:{onDragStart:null,onDragStop:null,autoExpandMS:1e3,preventVoidMoves:!0,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:!1,timeout:0,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:!1,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:1,lastentry:undefined},parseFloat($.ui.version)<1.8&&($.ui.dynatree.defaults=$.ui.dynatree.prototype.options),$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:!1,isLazy:!1,tooltip:null,href:null,icon:null,addClass:null,noLink:!1,activate:!1,focus:!1,expand:!1,select:!1,hideCheckbox:!1,unselectable:!1,children:null,lastentry:undefined};var didRegisterDnd=!1,_registerDnd=function(){if(didRegisterDnd)return;$.ui.plugin.add("draggable","connectToDynatree",{start:function(e,t){var n=$(this).data("draggable"),r=t.helper.data("dtSourceNode")||null;if(r)return n.offset.click.top=-2,n.offset.click.left=16,r.tree._onDragEvent("start",r,null,e,t,n)},drag:function(e,t){var n=$(this).data("draggable"),r=t.helper.data("dtSourceNode")||null,i=t.helper.data("dtTargetNode")||null,s=$.ui.dynatree.getNode(e.target);if(e.target&&!s){var o=$(e.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0;if(o)return}t.helper.data("dtTargetNode",s),i&&i!==s&&i.tree._onDragEvent("leave",i,r,e,t,n),s&&(s.tree.options.dnd.onDrop?s===i?s.tree._onDragEvent("over",s,r,e,t,n):s.tree._onDragEvent("enter",s,r,e,t,n):noop())},stop:function(e,t){var n=$(this).data("draggable"),r=t.helper.data("dtSourceNode")||null,i=t.helper.data("dtTargetNode")||null,s=n._mouseDownEvent,o=e.type,u=o=="mouseup"&&e.which==1;u||logMsg("Drag was cancelled"),i&&(u&&i.tree._onDragEvent("drop",i,r,e,t,n),i.tree._onDragEvent("leave",i,r,e,t,n)),r&&r.tree._onDragEvent("stop",r,null,e,t,n)}}),didRegisterDnd=!0}})(jQuery),define("jquery.dynatree",function(){}),define("neos/content/ui/elements/page-tree",["jquery","emberjs","vie/instance","vie/entity","text!neos/templates/content/ui/pageTree.html","text!neos/templates/content/ui/deletePageDialog.html","jquery.dynatree"],function(e,t,n,r,i,s){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("neos/content/ui/elements/page-tree"),t.View.extend({classNames:["t3-pagetree","t3-ui"],template:t.Handlebars.compile(i),$tree:null,editNodeTitleMode:!1,isDblClick:!1,didInsertElement:function(){this._initializeTree()},_initializeTree:function(){if(this.$tree)return;var t=this,n=e("#t3-page-metainformation"),r=n.data("__siteroot"),i=e("#t3-page-metainformation").attr("about");this.$tree=this.$("#t3-dd-pagetree").dynatree({keyboard:!0,minExpandLevel:1,classNames:{title:"dynatree-title"},clickFolderMode:1,debugLevel:0,strings:{loading:"Loading…",loadError:"Load error!"},children:[{title:n.data("__sitename"),key:n.data("__siteroot"),isFolder:!0,expand:!1,isLazy:!0,select:!1,active:!1,unselectable:!0,addClass:"typo3_neos_nodetypes-root"}],dnd:{autoExpandMS:1e3,preventVoidMoves:!0,onDragStart:function(e){return e.data.key!==r?!0:!1},onDragEnter:function(e,t){return!0},onDragOver:function(e,t,n){return e.isDescendantOf(t)?!1:!0},onDrop:function(e,t,n,r,i){var s=n==="over"?"into":n;t.move(e,n),TYPO3_Neos_Service_ExtDirect_V1_Controller_NodeController.move(t.data.key,e.data.key,s,function(e){e!==null&&e.success===!0?(t.data.href=e.data.nextUri,t.data.key=e.data.newNodePath,T3.ContentModule.loadPage(t.data.href)):T3.Common.Notification.error("Unexpected error while moving node: "+JSON.stringify(e))})}},onLazyRead:function(e){if(e._currentlySendingExtDirectAjaxRequest)return;e._currentlySendingExtDirectAjaxRequest=!0,TYPO3_Neos_Service_ExtDirect_V1_Controller_NodeController.getChildNodesForTree(e.data.key,"TYPO3.TYPO3CR:Folder",0,function(n){e._currentlySendingExtDirectAjaxRequest=!1,n!==null&&n.success===!0?(e.setLazyNodeStatus(DTNodeStatus_Ok),e.addChild(n.data)):(e.setLazyNodeStatus(DTNodeStatus_Error),T3.Common.Notification.error("Page Tree loading error.")),e.getLevel()===1&&t.$tree.dynatree("getTree").activateKey(i)})},onClick:function(e,n){return t.editNodeTitleMode===!0?!1:(e.data.key!==r&&(e.getEventTargetType(n)==="title"||e.getEventTargetType(n)==="icon")&&setTimeout(function(){t.isDblClick||T3.ContentModule.loadPage(e.data.href)},300),n.preventDefault(),!0)},onDblClick:function(e,n){e.getEventTargetType(n)==="title"&&e.getLevel()!==1&&(t.isDblClick=!0,setTimeout(function(){t.isDblClick=!1,t.editNode(e)},300))},onKeydown:function(e,n){switch(n.which){case 113:return t.editNode(e),!1;case 13:return t.editNode(e),!1}}}),this._initializePagePropertyObservers(),T3.ContentModule.on("pageLoaded",function(){t._initializePagePropertyObservers()}),this.$tree.dynatree("getRoot").getChildren()[0].expand(!0),this.$tree.click(function(){return t.editNodeTitleMode===!0?!1:!0}),this.$("#t3-action-newpage").click(function(){var e=t.$tree.dynatree("getActiveNode");return e!==null?t.createAndEditNode(e):T3.Common.Notification.notice("You have to select a page"),!1}),this.$("#t3-action-deletepage").click(function(){var e=t.$tree.dynatree("getActiveNode");e!==null?e.data.key!==r?t.showDeletePageDialog(e):T3.Common.Notification.notice("The Root page cannot be deleted."):T3.Common.Notification.notice("You have to select a page")})},_initializePagePropertyObservers:function(){var t=this,n=T3.Content.Model.NodeSelection._createEntityWrapper(e("#t3-page-metainformation"));if(!n)return;var i=this.getPageTreeNode();i&&i.activate(),n.addObserver("typo3:title",function(){t.synchronizePageTreeTitle(r.extractAttributesFromVieEntity(n._vieEntity))}),n.addObserver("typo3:_name",function(){t.synchronizePageTreeNodeName(r.extractAttributesFromVieEntity(n._vieEntity))}),n.addObserver("typo3:_hidden",function(){t.synchronizePageTreeVisibility(r.extractAttributesFromVieEntity(n._vieEntity))}),n.addObserver("typo3:_hiddenInIndex",function(){t.synchronizePageTreeVisibility(r.extractAttributesFromVieEntity(n._vieEntity))}),n.addObserver("typo3:_hiddenBeforeDateTime",function(){t.synchronizePageTreeVisibility(r.extractAttributesFromVieEntity(n._vieEntity))}),n.addObserver("typo3:_hiddenAfterDateTime",function(){t.synchronizePageTreeVisibility(r.extractAttributesFromVieEntity(n._vieEntity))})},synchronizePageTreeTitle:function(e){var t=this.getPageTreeNode();t&&t.setTitle(e.title)},synchronizePageTreeVisibility:function(t){var n=(new Date).getTime(),r=this.getPageTreeNode();if(r){var i=r.data.addClass;t._hidden===!0?(i=e.trim(i.replace(/timedVisibility/g,"")),i+=" hidden"):t._hiddenBeforeDateTime!==""&&(new Date(t._hiddenBeforeDateTime)).getTime()>n||t._hiddenAfterDateTime!==""?i+=" timedVisibility":(i=e.trim(i.replace(/timedVisibility/g,"")),i=e.trim(i.replace(/hidden/g,""))),t._hiddenInIndex===!0?i+=" hiddenInIndex":i=e.trim(i.replace(/hiddenInIndex/g,"")),r.data.addClass=i,r.render()}},synchronizePageTreeNodeName:function(e){var t=this.getPageTreeNode();t&&(t.data.key=t.data.key.replace(t.data.name+"@",e._name+"@"),t.data.href=t.data.href.replace(t.data.name+"@",e._name+"@"),t.data.name=e._name,t.render(),t.hasChildren()===!0&&(t.data.isLazy=!0,t.removeChildren(),t.setLazyNodeStatus(DTNodeStatus_Loading),T3.ContentModule.on("pageLoaded",this,"reloadPageNodeChildren")))},reloadPageNodeChildren:function(){var e=this.getPageTreeNode();e&&e.reloadChildren(),T3.ContentModule.off("pageLoaded",this,"reloadPageNodeChildren")},getPageTreeNode:function(){if(this.$tree&&this.$tree.children().length>0){var t=this.$tree.dynatree("getTree"),n=e("#t3-page-metainformation").attr("about");return t.getNodeByKey(n)}return null},showDeletePageDialog:function(e){var n=this,r=t.View.create({classNames:["t3-ui"],template:t.Handlebars.compile(s),pageTitle:e.data.title,numberOfChildren:e.data.children?e.data.children.length:0,didInsertElement:function(){},cancel:function(){var e=this.$();this.destroy(),e.remove()},"delete":function(){var t=this.$();n.deleteNode(e),this.destroy(),t.remove()}});r.appendTo("body")},editNode:function(t){var n=t.data.title,r=t.tree,i=this;i.editNodeTitleMode=!0,r.$widget.unbind(),e(".dynatree-title",t.span).html(e("<input />").attr({id:"editNode",value:n})),e("input#editNode").focus().keydown(function(t){switch(t.which){case 27:e("input#editNode").val(n),e(this).blur();break;case 13:e(this).blur()}}).blur(function(s){var o=e("input#editNode").val(),u;r.$widget.bind(),t.focus(),n===o||o===""?(u=n,i.editNodeTitleMode=!1):u=o,i.editNodeTitleMode===!0&&(i.editNodeTitleMode=!1,TYPO3_Neos_Service_ExtDirect_V1_Controller_NodeController.update({__contextNodePath:t.data.key,title:u},function(e){e!==null&&e.success===!0?(T3.Content.Controller.Inspector.nodeProperties.set("title",u),T3.Content.Controller.Inspector.apply()):T3.Common.Notification.error("Unexpected error while updating node: "+JSON.stringify(e))})),t.focus()})},createAndEditNode:function(t){var n=this,r="into",i=t.addChild({title:"[New Page]",nodeType:"TYPO3.Neos.NodeTypes:Page",addClass:"typo3_neos_nodetypes-page",expand:!0}),s=i.data.title,o=i.tree;n.editNodeTitleMode=!0,o.$widget.unbind(),e(".dynatree-title",i.span).html(e("<input />").attr({id:"editCreatedNode",value:s})),e("input#editCreatedNode").focus().select().keydown(function(t){switch(t.which){case 27:e("input#editNode").val(s),e(this).blur();break;case 13:e(this).blur()}}).blur(function(u){var a=e("input#editCreatedNode").val(),f;s===a||a===""?f=s:f=a,n.editNodeTitleMode&&(n.editNodeTitleMode=!1,i.activate(),i.setTitle(f),TYPO3_Neos_Service_ExtDirect_V1_Controller_NodeController.createNodeForTheTree(t.data.key,{nodeType:"TYPO3.Neos.NodeTypes:Page",properties:{title:f}},r,function(e){e!==null&&e.success===!0?(i.data.key=e.data.key,i.data.name=e.data.name,i.data.title=e.data.title,i.data.href=e.data.href,i.data.isFolder=e.data.isFolder,i.data.isLazy=e.data.isLazy,i.data.nodeType=e.data.nodeType,i.data.expand=e.data.expand,i.data.addClass=e.data.addClass,o.$widget.bind(),T3.ContentModule.loadPage(i.data.href)):T3.Common.notification.error("Unexpected error while creating node: "+JSON.stringify(e))}))})},deleteNode:function(e){TYPO3_Neos_Service_ExtDirect_V1_Controller_NodeController["delete"](e.data.key,function(t){if(t!==null&&t.success===!0){var n=e.getParent();n.focus(),n.activate(),e.remove(),T3.ContentModule.loadPage(n.data.href)}else T3.Common.notification.error("Unexpected error while deleting node: "+JSON.stringify(t))})}})}),function(e){e.fn.popover=function(t){function i(t){if(!t.altKey&&!t.ctrlKey&&!t.shiftKey)switch(t.keyCode){case n:e.fn.popover.openedPopup!=null}}function s(e,t){var n={left:!1,right:!1,top:!1,bottom:!1};return t.buttonOffset.top+t.buttonHeight+t.triangleSize+t.popoverHeight<=t.docHeight-r.padding&&(n.bottom=!0),t.buttonOffset.top-t.triangleSize-t.popoverHeight>=r.padding&&(n.top=!0),t.buttonOffset.left+t.buttonWidth+t.triangleSize+t.popoverWidth<=t.docWidth-r.padding&&(n.right=!0),t.buttonOffset.left-t.triangleSize-t.popoverWidth>=r.padding&&(n.left=!0),n}function o(e){r.preventBottom&&(e.bottom=!1),r.preventTop&&(e.top=!1),r.preventLeft&&(e.left=!1),r.preventRight&&(e.right=!1);var t={right:!0,bottom:!0,top:!0,left:!0};return r.preventRight&&delete t.right,r.preventBottom&&delete t.bottom,r.preventTop&&delete t.top,r.preventTop&&delete t.left,dir=Object.keys(t)[0],e.right?dir="right":e.bottom?dir="bottom":e.left?dir="left":e.top&&(dir="top"),dir}function u(t){r.popover$.css("display","block");var n={popoverDir:"bottom",popoverX:0,popoverY:0,deltaX:0,deltaY:0,triangleX:0,triangleY:0,triangleSize:20,docWidth:e("body").width(),docHeight:e("body").height(),popoverWidth:r.popover$.outerWidth(),popoverHeight:r.popover$.outerHeight(),buttonWidth:t.outerWidth(),buttonHeight:t.outerHeight(),buttonOffset:t.offset()};r.positioning==="fixed"&&(n.buttonOffset.top-=e(document).scrollTop());var i=s(t,n);return n.popoverDir=o(i),n.popoverDir=="bottom"?n.popoverY=n.buttonOffset.top+n.buttonHeight+n.triangleSize:n.popoverDir=="top"?n.popoverY=n.buttonOffset.top-n.triangleSize-n.popoverHeight:n.popoverY=n.buttonOffset.top+(n.buttonHeight-n.popoverHeight)/2,n.popoverDir=="bottom"||n.popoverDir=="top"?(n.popoverX=n.buttonOffset.left+(n.buttonWidth-n.popoverWidth)/2,n.popoverX<r.padding?n.deltaX=n.popoverX-r.padding:n.popoverX+n.popoverWidth>n.docWidth-r.padding&&(n.deltaX=n.popoverX+n.popoverWidth-n.docWidth+r.padding),n.triangleX=n.popoverWidth/2-n.triangleSize+n.deltaX,n.triangleY=0):(n.popoverDir=="right"?n.popoverX=n.buttonOffset.left+n.buttonWidth+n.triangleSize:n.popoverX=n.buttonOffset.left-n.triangleSize-n.popoverWidth,n.popoverY<r.padding?n.deltaY=n.popoverY-r.padding:n.popoverY+n.popoverHeight>n.docHeight-r.padding&&(n.deltaY=n.popoverY+n.popoverHeight-n.docHeight+r.padding-36),n.triangleX=0,n.triangleY=n.popoverHeight/2-n.triangleSize+n.deltaY),r.popover$.css("display",""),n}function a(e){r.triangle$.removeClass("left top right bottom"),r.triangle$.addClass(e.popoverDir);if(e.popoverDir==="top"||e.popoverDir==="bottom")e.triangleX>0?r.triangle$.css("left",e.triangleX>e.popoverWidth-34?e.popoverWidth-34:e.triangleX):r.triangle$.css("left",-8);if(e.popoverDir==="left"||e.popoverDir==="right")e.triangleY>2?r.triangle$.css("top",e.triangleY>e.popoverHeight-34?e.popoverHeight-34:e.triangleY):r.triangle$.css("top",2);r.popover$.css({top:e.popoverY-e.deltaY+r.offsetY,left:e.popoverX-e.deltaX+r.offsetX}),r.popover$.css("position",r.positioning),r.positioning==="absolute"&&(r.zindex=10001),r.popover$.addClass("t3-popover-"+r.positioning),r.popover$.css("z-index",r.zindex).show()}function f(t){return e.fn.popover.openedPopup===t?(e.fn.popover.openedPopup.trigger("hidePopover"),!1):(e.fn.popover.openedPopup!=null&&e.fn.popover.openedPopup.trigger("hidePopover"),r.triangle$.click(function(){t.trigger("hidePopover")}),r.triangle$.attr("style",""),a(u(t)),setTimeout(function(){r.popover$.addClass("active")},0),e.isFunction(r.openEvent)&&r.openEvent(),e.fn.popover.openedPopup=t,t.addClass("popover-on active"),e(document).trigger("popoverOpened"),!1)}var n=27,r=e.extend({id:"",openEvent:null,closeEvent:null,offsetX:0,offsetY:0,zindex:1e5,padding:18,closeOnEsc:!0,preventLeft:!1,preventRight:!1,preventTop:!1,preventBottom:!1,positioning:"fixed",additionalClasses:""},t||{});return r.popover$=e('<div class="popover"'+(r.id!==""?' id="'+r.id+'"':"")+">"+'<div class="triangle"></div>'+'<div class="header"></div>'+'<div class="content"></div>'+"</div>").appendTo("body"),e(".header",r.popover$).append(e(r.header).detach()),r.popover$.addClass("t3-ui"),r.popover$.addClass(r.additionalClasses),e(".header",r.popover$).html()===""&&e(".header",r.popover$).detach(),e(".content",r.popover$).append(e(r.content).detach()),r.triangle$=e(".triangle",r.popover$),e.fn.popover.openedPopup=typeof e.fn.popover.openedPopup=="undefined"?null:e.fn.popover.openedPopup,e(document).unbind("click.popover").bind("click.popover",function(t){var n=e(t.target);e.fn.popover.openedPopup!=null&&n.parents(".popover").length===0&&!n.hasClass("popover")&&!n.hasClass("popover-button")&&n.parents(".popover-button").length===0&&!n.hasClass("dynatree-expander")&&e.fn.popover.openedPopup.trigger("hidePopover")}),e(document).unbind("hidePopover").bind("hidePopover",function(t){e.fn.popover.openedPopup!=null&&e.fn.popover.openedPopup.trigger("hidePopover")}),this.each(function(){var t=e(this);t.addClass("popover-button"),r.closeOnEsc&&e(document).bind("keydown",i),t.bind("click",function(){return f(t),!1}),t.bind("showPopover",function(){return f(t),!1}),t.bind("hidePopover",function(){return t.removeClass("popover-on active"),r.popover$.removeClass("active"),r.popover$.attr("style",""),e.fn.popover.openedPopup=null,e(document).trigger("popoverClosed"),e.isFunction(r.closeEvent)&&r.closeEvent(),!1})})}}(jQuery),define("jquery.popover",function(){}),define("neos/content/ui/elements",["jquery","neos/content/ui/elements/toolbar","neos/content/ui/elements/button","neos/content/ui/elements/toggle-button","neos/content/ui/elements/popover-button","neos/content/ui/elements/contentelement-handles","neos/content/ui/elements/section-handles","neos/content/ui/elements/page-tree","jquery.popover"],function(e,t,n,r,i,s,o,u){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("neos/content/ui/elements");var a=window.T3||{};typeof a.Content=="undefined"&&(a.Content={}),a.Content.UI=a.Content.UI||{},a.Content.UI.Toolbar=t,a.Content.UI.Button=n,a.Content.UI.Image=Ember.View.extend({tagName:"img",attributeBindings:["src"]}),a.Content.UI.ToggleButton=r,a.Content.UI.PopoverButton=i,a.Content.UI.ContentElementHandle=s,a.Content.UI.SectionHandle=o,a.Content.UI.PageTree=u}),define("text!neos/templates/content/ui/fileUpload.html",[],function(){return'<div class="typo3-fileupload" id="{{unbound view._containerId}}">\n	<button id="{{unbound view._browseButtonId}}" class="t3-button typo3-fileupload-pickfiles" type="button">\n		{{view.fileChooserLabel}}\n	</button>\n\n	{{view T3.Content.UI.Button isVisibleBinding="view._uploadButtonShown" target="parentView" action="upload" labelBinding="view.uploaderLabel" allowedFileTypesBinding="view.allowedFileTypes"}}\n</div>\n'}),define("text!neos/templates/content/ui/imageUpload.html",[],function(){return'<div class="t3-inspector-image-thumbnail-container">\n	<div class="t3-inspector-image-thumbnail">\n		<div class="t3-inspector-image-thumbnail-inner">\n			{{view T3.Content.UI.Image srcBinding="view._previewImageUri" isVisibleBinding="view._uploadPreviewNotShown"}}\n		</div>\n	</div>\n	<div class="t3-inspector-image-uploadthumbnail">\n		{{view T3.Content.UI.Image srcBinding="view._uploadPreviewImageSource" isVisibleBinding="view._uploadPreviewShown"}}\n	</div>\n</div>\n\n<div class="t3-inspector-image-upload" id="{{unbound view._containerId}}">\n	<button id="{{unbound view._browseButtonId}}" class="t3-button btn btn-mini t3-inspector-image-upload-files" {{bindAttr disabled="view._uploadInProgress:disabled"}}>\n		{{view.fileChooserLabel}}\n	</button>\n	{{view T3.Content.UI.Button isVisibleBinding="view._uploadButtonShown" target="parentView" class="t3-inspector-image-upload-button" action="upload" labelBinding="view.uploaderLabel" allowedFileTypesBinding="view.allowedFileTypes" disabledBinding="view._uploadInProgress"}}\n	{{view T3.Content.UI.Button isVisibleBinding="view._uploadPreviewNotShown" target="parentView" class="t3-inspector-image-crop-button" labelBinding="view.cropLabel"}}\n</div>\n\n<div class="t3-inspector-image-width">\n	<label for="image-width">Width:</label>\n	<div class="input-prepend input-append">\n		<span class="add-on">{{view T3.Content.UI.Editor.Checkbox checkedBinding="view._imageWidthToggle"}}</span>\n		<span>\n			{{view T3.Content.UI.Editor.TextField elementId="image-width" type="number" pattern="\\d*" step="1" min="0" name="width" valueBinding="view._finalImageScale.w"}}\n		</span>\n		<span class="add-on">px</span>\n	</div>\n</div>\n<div class="t3-inspector-image-height">\n	<label for="image-height">Height:</label>\n	<div class="input-prepend input-append">\n		<span class="add-on">{{view T3.Content.UI.Editor.Checkbox checkedBinding="view._imageHeightToggle"}}</span>\n		<span>\n			{{view T3.Content.UI.Editor.TextField elementId="image-height" type="number" pattern="\\d*" step="1" min="0" name="height" valueBinding="view._finalImageScale.computedHeight"}}\n		</span>\n		<span class="add-on">px</span>\n	</div>\n</div>'}),define("neos/content/ui/editors",["jquery","text!neos/templates/content/ui/fileUpload.html","text!neos/templates/content/ui/imageUpload.html","neos/content/ui/elements"],function(e,t,n){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("neos/content/ui/editors");var r=window.T3||{};typeof r.Content=="undefined"&&(r.Content={}),r.Content.UI=r.Content.UI||{},r.Content.UI.Editor=r.Content.UI.Editor||{},Ember.TextSupport.reopen({attributeBindings:["name","required","pattern","step","min","max"]}),r.Content.UI.Editor.TextField=Ember.TextField.extend({classNames:["input-small"]}),r.Content.UI.Editor.Checkbox=Ember.Checkbox.extend({value:function(e,t){return arguments.length===2?(this.set("checked",t),t):this.get("checked")}.property("checked")}),r.Content.UI.Editor.DateField=Ember.TextField.extend({classNames:["input-small"],didInsertElement:function(){this.$().attr("placeholder","No date set"),this.$().datepicker({dateFormat:e.datepicker.W3C,beforeShow:function(t,n){e(n.dpDiv).addClass("t3-ui")}})}}),r.Content.UI.Editor.SelectboxOption=Ember.View.extend({tagName:"option",attributeBindings:["value","selected"],valueBinding:"content.value",selectedBinding:"content.selected",template:Ember.Handlebars.compile("{{view.content.label}}")}),r.Content.UI.Editor.Selectbox=Ember.CollectionView.extend({classNames:["typo3-form-selectbox"],tagName:"select",contentBinding:"options",itemViewClass:r.Content.UI.Editor.SelectboxOption,value:"",allowEmpty:!1,placeholder:"",attributeBindings:["size","disabled"],values:[],options:function(){var t=[],n=this.get("value");return this.get("allowEmpty")&&t.push(Ember.Object.create({value:"",label:this.get("placeholder")})),e.each(this.get("values"),function(r){t.push(Ember.Object.create(e.extend({selected:r===n,value:r},this)))}),t}.property("values","value","placeholder","allowEmpty"),onItemsChange:function(){this.$().trigger("liszt:updated")}.observes("values"),didInsertElement:function(){var e=this;this.get("placeholder")&&this.$().attr("data-placeholder",this.get("placeholder")),require(["chosen"],function(){e.$().addClass("chzn-select").chosen({allow_single_deselect:!0}).change(function(){e.set("value",e.$().val())})})}}),r.Content.UI.Editor.HtmlEditor=r.Content.UI.PopoverButton.extend({_editorInitialized:!1,_editor:null,$popoverContent:e("<div />").attr("class","t3-ui t3-htmleditor-window"),label:"HTML Editor",popoverTitle:"HTML Editor",popoverPosition:"left",classNames:["t3-primary-editor-action"],onPopoverOpen:function(){var t=this,n=this.get(Ember.GUID_KEY);if(!this._editorInitialized){var r=e("<textarea />",{id:"typo3-htmleditor-"+n}).html(t.get("value"));this.$popoverContent.append(r),require(["codemirror","codemirror.xml","codemirror.css","codemirror.javascript","codemirror.htmlmixed"],function(){var e=!1;t._editor=CodeMirror.fromTextArea(r.get(0),{mode:"text/html",tabMode:"indent",lineNumbers:!0,onChange:function(){t._editor&&e&&t.set("value",t._editor.getValue())}});var n=t._editor.lineCount();for(var i=0;i<n;i++)t._editor.indentLine(i);e=!0}),this._editorInitialized=!0}},willDestroyElement:function(){this._editorInitialized&&(this.$().trigger("hidePopover"),this._editor.toTextArea(),e("#typo3-htmleditor-"+this.get(Ember.GUID_KEY)).remove(),this._editorInitialized=!1)}}),r.Content.UI.Editor.FileUpload=Ember.View.extend({value:"",fileChooserLabel:"Choose file",uploaderLabel:"Upload",cropLabel:"Crop",allowedFileTypes:null,_uploader:null,_uploadInProgress:!1,_containerId:null,_browseButtonId:null,_uploadButtonShown:!1,_uploadButtonNotShown:function(){return!this.get("_uploadButtonShown")}.property("_uploadButtonShown"),template:Ember.Handlebars.compile(t),init:function(){var e=this.get(Ember.GUID_KEY);return this._containerId="typo3-fileupload"+e,this._browseButtonId="typo3-fileupload-browsebutton"+e,this._super()},didInsertElement:function(){this._initializeUploader()},_initializeUploader:function(){var e=this;this._uploader=new plupload.Uploader({runtimes:"html5",browse_button:this._browseButtonId,container:this._containerId,max_file_size:"10mb",url:"/neos/content/uploadImage",multipart_params:{}}),this.allowedFileTypes&&(this._uploader.settings.filters=[{title:"Allowed files",extensions:this.allowedFileTypes}]),this._uploader.bind("FilesAdded",function(t,n){n.length>0?e.set("_uploadButtonShown",!0):e.set("_uploadButtonShown",!1)}),this._uploader.bind("Error",function(t,n){e.set("_uploadInProgress",!1),r.Common.Notification.error(n.message),n.code===plupload.FILE_EXTENSION_ERROR&&e.set("_uploadButtonShown",!1)}),this._uploader.bind("BeforeUpload",function(e,t){e.settings.multipart_params["image[type]"]="plupload",e.settings.multipart_params["image[fileName]"]=t.name}),this._uploader.bind("FileUploaded",function(t,n,i){r.Common.Notification.ok('Uploaded file "'+n.name+'".'),e.fileUploaded(i.response)}),this._uploader.init(),this._uploaderInitialized()},_uploaderInitialized:function(){var e=this;this.$().find('input[type=file][id^="'+this._uploader.id+'"]').change(function(t){e.filesScheduledForUpload(t.target.files)})},filesScheduledForUpload:function(e){},fileUploaded:function(e){this.set("_uploadInProgress",!1),this.set("_uploadButtonShown",!1)},upload:function(){this.set("_uploadInProgress",!0),this._uploader.start()}}),r.Content.UI.Editor.Image=r.Content.UI.Editor.FileUpload.extend({fileChooserLabel:"Choose Image",uploaderLabel:"Upload!",imagePreviewMaximumDimensions:{w:178,h:178},allowedFileTypes:"jpg,jpeg,png,gif",template:Ember.Handlebars.compile(n),_uploadPreviewShown:!0,_uploadPreviewNotShown:function(){return!this.get("_uploadPreviewShown")}.property("_uploadPreviewShown"),_uploadPreviewImageSource:"",_defaultUploadPreviewImageSource:"/_Resources/Static/Packages/TYPO3.Neos/Images/dummy-image.png",_imageFullyLoaded:!1,_originalImageUuid:null,_originalImageSize:null,_previewImageUri:null,_previewImageSize:null,_cropProperties:null,_finalImageScale:null,_loadPreviewImageHandler:null,loadingindicator:null,init:function(){var e=this;this._super(),this.set("_uploadPreviewImageSource",this.get("_defaultUploadPreviewImageSource")),this.set("_finalImageScale",Ember.Object.extend({w:null,h:null,_updateValueIfWidthAndHeightChange:function(){e._updateValue()}.observes("w","h"),computedHeight:function(t,n){return arguments.length===1?this.get("h"):(this.set("w",Math.ceil(e.get("_cropProperties.aspectRatio")*n)),n)}.property("h")}).create()),this.set("_cropProperties",Ember.Object.extend({x:null,y:null,w:null,h:null,full:function(){return{x:this.get("x"),y:this.get("y"),w:this.get("w"),h:this.get("h")}}.property("w","h","x","y"),initialized:function(){return this.get("w")!==null&&this.get("h")!==null&&this.get("x")!==null&&this.get("y")!==null}.property("w","h","x","y"),aspectRatio:function(){return isNaN(this.get("w"))||isNaN(this.get("h"))||this.get("w")===0||this.get("h")===0?1:parseFloat(this.get("w"))/parseFloat(this.get("h"))}.property("w","h")}).create())},_imageWidthToggle:function(e,t){return typeof t=="boolean"&&(t===!1?(this.set("_finalImageScale.w",null),this.set("_finalImageScale.h",null)):(this.set("_finalImageScale.w",this.get("_originalImageSize.w")),this.set("_finalImageScale.h",this.get("_originalImageSize.h")))),this.get("_finalImageScale.w")>0?!0:(this.set("_finalImageScale.w",null),this.set("_finalImageScale.h",null),!1)}.property("_finalImageScale.w"),_imageHeightToggle:function(e,t){return typeof t=="boolean"&&(t===!1?(this.set("_finalImageScale.w",null),this.set("_finalImageScale.h",null)):(this.set("_finalImageScale.w",this.get("_originalImageSize.w")),this.set("_finalImageScale.h",this.get("_originalImageSize.h")))),this.get("_finalImageScale.w")>0?!0:(this.set("_finalImageScale.w",null),this.set("_finalImageScale.h",null),!1)}.property("_finalImageScale.h"),_aspectRatioChanged:function(){this.set("_finalImageScale.h",parseInt(this.get("_finalImageScale.w")/this.get("_cropProperties.aspectRatio")))}.observes("_finalImageScale.w","_cropProperties.aspectRatio"),didInsertElement:function(){this._super(),this.$().find(".t3-inspector-image-thumbnail-inner").css({width:this.imagePreviewMaximumDimensions.w+"px",height:this.imagePreviewMaximumDimensions.h+"px"}),this.$().find(".t3-inspector-image-thumbnail-container").css({width:this.imagePreviewMaximumDimensions.w+"px",height:this.imagePreviewMaximumDimensions.h+"px"}),this._readAndDeserializeValue()},willDestroyElement:function(){this.$().find(".t3-inspector-image-crop-button").trigger("hidePopover"),this.get("_loadPreviewImageHandler")&&this.get("_loadPreviewImageHandler").abort()},filesScheduledForUpload:function(e){var t=this;if(e.length>0){var n=e[0];if(window.FileReader){var r=new FileReader;r.onload=function(e){var n=e.target.result;t.set("_uploadPreviewImageSource",n);var r=new window.Image;r.onload=function(){var e,n,i=t.$().find(".t3-inspector-image-uploadthumbnail img");r.width>r.height?(i.addClass("t3-inspector-image-uploadthumbnail-landscape").removeClass("t3-inspector-image-uploadthumbnail-portrait"),e=t.get("imagePreviewMaximumDimensions.w")/r.width,n=(t.get("imagePreviewMaximumDimensions.h")-r.height*e)/2,i.css({"margin-top":parseInt(n)+"px","margin-left":0})):(i.removeClass("t3-inspector-image-uploadthumbnail-landscape").addClass("t3-inspector-image-uploadthumbnail-portrait"),e=t.get("imagePreviewMaximumDimensions.h")/r.height,n=(t.get("imagePreviewMaximumDimensions.w")-r.width*e)/2,i.css({"margin-left":parseInt(n)+"px","margin-top":0})),t.set("_uploadPreviewShown",!0)},r.src=n},r.readAsDataURL(n)}}else t.set("_uploadPreviewShown",!1),t.set("_uploadButtonShown",!1)},fileUploaded:function(e){if(!r.Common.Util.isValidJsonString(e)){r.Common.Notification.error("Tried to fetch image metadata: Unexpected result format.");return}this._super();var t=JSON.parse(e);this.set("_originalImageUuid",t.imageUuid),this._setPreviewImage(t),this.set("_finalImageScale.w",t.originalSize.w),this._resetCropPropertiesToCurrentPreviewImageSize(),this.set("_imageFullyLoaded",!0),this._updateValue()},_setPreviewImage:function(e){Ember.beginPropertyChanges(),this.set("_originalImageSize",e.originalSize),this.set("_previewImageSize",e.previewSize),this.set("_previewImageUri",e.previewImageResourceUri),this.set("_uploadPreviewShown",!1),Ember.endPropertyChanges()},_resetCropPropertiesToCurrentPreviewImageSize:function(){this.set("_cropProperties.x",0),this.set("_cropProperties.y",0),this.set("_cropProperties.w",this.get("_previewImageSize.w")),this.set("_cropProperties.h",this.get("_previewImageSize.h"))},_initializePopover:function(){var t=this,n=e('<div class="t3-inspector-image-crop" />'),r=e("<img />"),i=t.get("_previewImageSize");n.append(r),n.css({width:i.w+10+"px",height:i.h+10+"px"}),this.$().find(".t3-inspector-image-thumbnail").click(function(){t.$().find(".t3-inspector-image-crop-button").trigger("hidePopover")}),this.$().find(".t3-inspector-image-crop-button").popover({content:n,header:"<span>Crop Image</span>",preventTop:!0,preventBottom:!0,preventRight:!0,offsetY:-111,offsetX:-140,openEvent:function(){r.attr("src",t.get("_previewImageUri")),this.popover$.addClass("t3-ui");var e={onSelect:function(e){Ember.beginPropertyChanges(),t.set("_cropProperties.x",e.x),t.set("_cropProperties.y",e.y),t.set("_cropProperties.w",e.w),t.set("_cropProperties.h",e.h),Ember.endPropertyChanges(),t._updateValue()}};if(t.get("_cropProperties.initialized")){var n=t.get("_cropProperties.full");e.setSelect=[n.x,n.y,n.x+n.w,n.y+n.h]}r.Jcrop(e)}})}.observes("_previewImageUri"),_updateCropPreviewImage:function(){if(!this.get("_previewImageUri"))return;var e=this.get("_cropProperties.full"),t=this.imagePreviewMaximumDimensions.w/e.w,n=this.imagePreviewMaximumDimensions.h/e.h,r=Math.min(t,n),i={w:Math.floor(e.w*r),h:Math.floor(e.h*r)};this.$().find(".t3-inspector-image-thumbnail-inner").css({width:i.w+"px",height:i.h+"px",position:"absolute",left:(this.imagePreviewMaximumDimensions.w-i.w)/2+"px",top:(this.imagePreviewMaximumDimensions.h-i.h)/2+"px"}),this.$().find(".t3-inspector-image-thumbnail-inner img").css({width:Math.floor(this.get("_previewImageSize").w*r)+"px",height:Math.floor(this.get("_previewImageSize").h*r)+"px",marginLeft:"-"+e.x*r+"px",marginTop:"-"+e.y*r+"px"})}.observes("_cropProperties.x","_cropProperties.y","_cropProperties.w","_cropProperties.h","_previewImageUri"),_updateValue:function(){if(!this.get("_cropProperties.initialized"))return;if(!this.get("_imageFullyLoaded"))return;var e=this._convertCropOptionsFromPreviewImageCoordinates(this.get("_cropProperties.full")),t=this.get("_finalImageScale.w"),n=this.get("_finalImageScale.h"),r=[{command:"crop",options:{start:{x:e.x,y:e.y},size:{width:e.w,height:e.h}}}];t>0&&n>0&&r.push({command:"resize",options:{size:{width:t,height:n}}}),this.set("value",JSON.stringify({originalImage:this.get("_originalImageUuid"),processingInstructions:r}))},_readAndDeserializeValue:function(){var t=this,n=this.get("value");if(!n||!r.Common.Util.isValidJsonString(n))return;try{n=JSON.parse(n)}catch(i){return}n&&(this._displayImageLoader(),this.set("_uploadPreviewShown",!1),t.set("_loadPreviewImageHandler",e.get("/neos/content/imageWithMetadata/"+n.originalImage,function(r){t._hideImageLoader();var i=JSON.parse(r);t.beginPropertyChanges(),t._setPreviewImage(i),t.set("_originalImageUuid",n.originalImage),e.each(n.processingInstructions,function(e,n){if(n.command==="crop"){var r={x:Ember.get(n,"options.start.x"),y:Ember.get(n,"options.start.y"),w:Ember.get(n,"options.size.width"),h:Ember.get(n,"options.size.height")},i=t._convertCropOptionsToPreviewImageCoordinates(r);t.set("_cropProperties.x",i.x),t.set("_cropProperties.y",i.y),t.set("_cropProperties.w",i.w),t.set("_cropProperties.h",i.h)}else n.command==="resize"&&t.set("_finalImageScale.w",Ember.get(n,"options.size.width"))}),t.endPropertyChanges(),t.set("_imageFullyLoaded",!0)})))},_displayImageLoader:function(){if(this.loadingindicator!==null){this.loadingindicator.spin(e.$().find(".t3-inspector-image-thumbnail-container").get(0));return}var e=this;require(["spinjs"],function(t){e.loadingindicator=(new t({lines:13,length:15,width:4,radius:10,corners:1,rotate:0,color:"#fff",speed:1,trail:64,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"})).spin(e.$().find(".t3-inspector-image-thumbnail-container").get(0))})},_hideImageLoader:function(){this.loadingindicator.stop()},_convertCropOptionsFromPreviewImageCoordinates:function(e){var t=this.get("_previewImageSize"),n=this.get("_originalImageSize");return{x:e.x*(n.w/t.w),y:e.y*(n.h/t.h),w:e.w*(n.w/t.w),h:e.h*(n.h/t.h)}},_convertCropOptionsToPreviewImageCoordinates:function(e){var t=this.get("_previewImageSize"),n=this.get("_originalImageSize");return{x:parseInt(e.x/(n.w/t.w)),y:parseInt(e.y/(n.h/t.h)),w:parseInt(e.w/(n.w/t.w)),h:parseInt(e.h/(n.h/t.h))}}})}),function(e){e.Jcrop=function(t,n){function r(e){return Math.round(e)+"px"}function i(e){return H.baseClass+"-"+e}function s(){return e.fx.step.hasOwnProperty("backgroundColor")}function o(t){var n=e(t).offset();return[n.left,n.top]}function u(e){return[e.pageX-B[0],e.pageY-B[1]]}function f(t){typeof t!="object"&&(t={}),H=e.extend(H,t),e.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){typeof H[t]!="function"&&(H[t]=function(){})})}function l(e,t,n){B=o(W),mt.setCursor(e==="move"?e:e+"-resize");if(e==="move")return mt.activateHandlers(h(t),g,n);var r=pt.getFixed(),i=p(e),s=pt.getCorner(p(i));pt.setPressed(pt.getCorner(i)),pt.setCurrent(s),mt.activateHandlers(c(e,r),g,n)}function c(e,t){return function(n){if(!H.aspectRatio)switch(e){case"e":n[1]=t.y2;break;case"w":n[1]=t.y2;break;case"n":n[0]=t.x2;break;case"s":n[0]=t.x2}else switch(e){case"e":n[1]=t.y+1;break;case"w":n[1]=t.y+1;break;case"n":n[0]=t.x+1;break;case"s":n[0]=t.x+1}pt.setCurrent(n),vt.update()}}function h(e){var t=e;return gt.watchKeys(),function(e){pt.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,vt.update()}}function p(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function d(e){return function(t){return H.disabled?!1:e==="move"&&!H.allowMove?!1:(B=o(W),ft=!0,l(e,u(t)),t.stopPropagation(),t.preventDefault(),!1)}}function v(e,t,n){var r=e.width(),i=e.height();r>t&&t>0&&(r=t,i=t/e.width()*e.height()),i>n&&n>0&&(i=n,r=n/e.height()*e.width()),ot=e.width()/r,ut=e.height()/i,e.width(r).height(i)}function m(e){return{x:e.x*ot,y:e.y*ut,x2:e.x2*ot,y2:e.y2*ut,w:e.w*ot,h:e.h*ut}}function g(e){var t=pt.getFixed();t.w>H.minSelect[0]&&t.h>H.minSelect[1]?(vt.enableHandles(),vt.done()):vt.release(),mt.setCursor(H.allowSelect?"crosshair":"default")}function y(e){if(H.disabled)return!1;if(!H.allowSelect)return!1;ft=!0,B=o(W),vt.disableHandles(),mt.setCursor("crosshair");var t=u(e);return pt.setPressed(t),vt.update(),mt.activateHandlers(b,g,e.type.substring(0,5)==="touch"),gt.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function b(e){pt.setCurrent(e),vt.update()}function w(){var t=e("<div></div>").addClass(i("tracker"));return F&&t.css({opacity:0,backgroundColor:"white"}),t}function E(e){$.removeClass().addClass(i("holder")).addClass(e)}function S(e,t){function n(){window.setTimeout(b,c)}var r=e[0]/ot,i=e[1]/ut,s=e[2]/ot,o=e[3]/ut;if(lt)return;var u=pt.flipCoords(r,i,s,o),a=pt.getFixed(),f=[a.x,a.y,a.x2,a.y2],l=f,c=H.animationDelay,h=u[0]-f[0],p=u[1]-f[1],d=u[2]-f[2],v=u[3]-f[3],m=0,g=H.swingSpeed;r=l[0],i=l[1],s=l[2],o=l[3],vt.animMode(!0);var y,b=function(){return function(){m+=(100-m)/g,l[0]=Math.round(r+m/100*h),l[1]=Math.round(i+m/100*p),l[2]=Math.round(s+m/100*d),l[3]=Math.round(o+m/100*v),m>=99.8&&(m=100),m<100?(T(l),n()):(vt.done(),vt.animMode(!1),typeof t=="function"&&t.call(yt))}}();n()}function x(e){T([e[0]/ot,e[1]/ut,e[2]/ot,e[3]/ut]),H.onSelect.call(yt,m(pt.getFixed())),vt.enableHandles()}function T(e){pt.setPressed([e[0],e[1]]),pt.setCurrent([e[2],e[3]]),vt.update()}function N(){return m(pt.getFixed())}function C(){return pt.getFixed()}function k(e){f(e),P()}function L(){H.disabled=!0,vt.disableHandles(),vt.setCursor("default"),mt.setCursor("default")}function A(){H.disabled=!1,P()}function O(){vt.done(),mt.activateHandlers(null,null)}function M(){$.remove(),R.show(),R.css("visibility","visible"),e(t).removeData("Jcrop")}function _(e,t){vt.release(),L();var n=new Image;n.onload=function(){var r=n.width,i=n.height,s=H.boxWidth,o=H.boxHeight;W.width(r).height(i),W.attr("src",e),J.attr("src",e),v(W,s,o),X=W.width(),V=W.height(),J.width(X).height(V),Z.width(X+Y*2).height(V+Y*2),$.width(X).height(V),dt.resize(X,V),A(),typeof t=="function"&&t.call(yt)},n.src=e}function D(e,t,n){var r=t||H.bgColor;H.bgFade&&s()&&H.fadeTime&&!n?e.animate({backgroundColor:r},{queue:!1,duration:H.fadeTime}):e.css("backgroundColor",r)}function P(e){H.allowResize?e?vt.enableOnly():vt.enableHandles():vt.disableHandles(),mt.setCursor(H.allowSelect?"crosshair":"default"),vt.setCursor(H.allowMove?"move":"default"),H.hasOwnProperty("trueSize")&&(ot=H.trueSize[0]/X,ut=H.trueSize[1]/V),H.hasOwnProperty("setSelect")&&(x(H.setSelect),vt.done(),delete H.setSelect),dt.refresh(),H.bgColor!=et&&(D(H.shade?dt.getShades():$,H.shade?H.shadeColor||H.bgColor:H.bgColor),et=H.bgColor),tt!=H.bgOpacity&&(tt=H.bgOpacity,H.shade?dt.refresh():vt.setBgOpacity(tt)),nt=H.maxSize[0]||0,rt=H.maxSize[1]||0,it=H.minSize[0]||0,st=H.minSize[1]||0,H.hasOwnProperty("outerImage")&&(W.attr("src",H.outerImage),delete H.outerImage),vt.refresh()}var H=e.extend({},e.Jcrop.defaults),B,j=navigator.userAgent.toLowerCase(),F=/msie/.test(j),I=/msie [1-6]\./.test(j);typeof t!="object"&&(t=e(t)[0]),typeof n!="object"&&(n={}),f(n);var q={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},R=e(t),U=!0;if(t.tagName=="IMG"){if(R[0].width!=0&&R[0].height!=0)R.width(R[0].width),R.height(R[0].height);else{var z=new Image;z.src=R[0].src,R.width(z.width),R.height(z.height)}var W=R.clone().removeAttr("id").css(q).show();W.width(R.width()),W.height(R.height()),R.after(W).hide()}else W=R.css(q).show(),U=!1,H.shade===null&&(H.shade=!0);v(W,H.boxWidth,H.boxHeight);var X=W.width(),V=W.height(),$=e("<div />").width(X).height(V).addClass(i("holder")).css({position:"relative",backgroundColor:H.bgColor}).insertAfter(R).append(W);H.addClass&&$.addClass(H.addClass);var J=e("<div />"),K=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),Q=e("<div />").width("100%").height("100%").css("zIndex",320),G=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=pt.getFixed();H.onDblClick.call(yt,e)}).insertBefore(W).append(K,Q);U&&(J=e("<img />").attr("src",W.attr("src")).css(q).width(X).height(V),K.append(J)),I&&G.css({overflowY:"hidden"});var Y=H.boundary,Z=w().width(X+Y*2).height(V+Y*2).css({position:"absolute",top:r(-Y),left:r(-Y),zIndex:290}).mousedown(y),et=H.bgColor,tt=H.bgOpacity,nt,rt,it,st,ot,ut,at=!0,ft,lt,ct;B=o(W);var ht=function(){function e(){var e={},t=["touchstart","touchmove","touchend"],n=document.createElement("div"),r;try{for(r=0;r<t.length;r++){var i=t[r];i="on"+i;var s=i in n;s||(n.setAttribute(i,"return;"),s=typeof n[i]=="function"),e[t[r]]=s}return e.touchstart&&e.touchend&&e.touchmove}catch(o){return!1}}function t(){return H.touchSupport===!0||H.touchSupport===!1?H.touchSupport:e()}return{createDragger:function(e){return function(t){return H.disabled?!1:e==="move"&&!H.allowMove?!1:(B=o(W),ft=!0,l(e,u(ht.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1)}},newSelection:function(e){return y(ht.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:t()}}(),pt=function(){function e(e){e=o(e),h=l=e[0],p=c=e[1]}function t(e){e=o(e),d=e[0]-h,v=e[1]-p,h=e[0],p=e[1]}function n(){return[d,v]}function r(e){var t=e[0],n=e[1];0>l+t&&(t-=t+l),0>c+n&&(n-=n+c),V<p+n&&(n+=V-(p+n)),X<h+t&&(t+=X-(h+t)),l+=t,h+=t,c+=n,p+=n}function i(e){var t=s();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function s(){if(!H.aspectRatio)return a();var e=H.aspectRatio,t=H.minSize[0]/ot,n=H.maxSize[0]/ot,r=H.maxSize[1]/ut,i=h-l,s=p-c,o=Math.abs(i),d=Math.abs(s),v=o/d,m,g,y,b;return n===0&&(n=X*10),r===0&&(r=V*10),v<e?(g=p,y=d*e,m=i<0?l-y:y+l,m<0?(m=0,b=Math.abs((m-l)/e),g=s<0?c-b:b+c):m>X&&(m=X,b=Math.abs((m-l)/e),g=s<0?c-b:b+c)):(m=h,b=o/e,g=s<0?c-b:c+b,g<0?(g=0,y=Math.abs((g-c)*e),m=i<0?l-y:y+l):g>V&&(g=V,y=Math.abs(g-c)*e,m=i<0?l-y:y+l)),m>l?(m-l<t?m=l+t:m-l>n&&(m=l+n),g>c?g=c+(m-l)/e:g=c-(m-l)/e):m<l&&(l-m<t?m=l-t:l-m>n&&(m=l-n),g>c?g=c+(l-m)/e:g=c-(l-m)/e),m<0?(l-=m,m=0):m>X&&(l-=m-X,m=X),g<0?(c-=g,g=0):g>V&&(c-=g-V,g=V),f(u(l,c,m,g))}function o(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>X&&(e[0]=X),e[1]>V&&(e[1]=V),[Math.round(e[0]),Math.round(e[1])]}function u(e,t,n,r){var i=e,s=n,o=t,u=r;return n<e&&(i=n,s=e),r<t&&(o=r,u=t),[i,o,s,u]}function a(){var e=h-l,t=p-c,n;return nt&&Math.abs(e)>nt&&(h=e>0?l+nt:l-nt),rt&&Math.abs(t)>rt&&(p=t>0?c+rt:c-rt),st/ut&&Math.abs(t)<st/ut&&(p=t>0?c+st/ut:c-st/ut),it/ot&&Math.abs(e)<it/ot&&(h=e>0?l+it/ot:l-it/ot),l<0&&(h-=l,l-=l),c<0&&(p-=c,c-=c),h<0&&(l-=h,h-=h),p<0&&(c-=p,p-=p),h>X&&(n=h-X,l-=n,h-=n),p>V&&(n=p-V,c-=n,p-=n),l>X&&(n=l-V,p-=n,c-=n),c>V&&(n=c-V,p-=n,c-=n),f(u(l,c,h,p))}function f(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var l=0,c=0,h=0,p=0,d,v;return{flipCoords:u,setPressed:e,setCurrent:t,getOffset:n,moveOffset:r,getCorner:i,getFixed:s}}(),dt=function(){function t(e,t){v.left.css({height:r(t)}),v.right.css({height:r(t)})}function n(){return i(pt.getFixed())}function i(e){v.top.css({left:r(e.x),width:r(e.w),height:r(e.y)}),v.bottom.css({top:r(e.y2),left:r(e.x),width:r(e.w),height:r(V-e.y2)}),v.right.css({left:r(e.x2),width:r(X-e.x2)}),v.left.css({width:r(e.x)})}function s(){return e("<div />").css({position:"absolute",backgroundColor:H.shadeColor||H.bgColor}).appendTo(d)}function o(){p||(p=!0,d.insertBefore(W),n(),vt.setBgOpacity(1,0,1),J.hide(),u(H.shadeColor||H.bgColor,1),vt.isAwake()?l(H.bgOpacity,1):l(1,1))}function u(e,t){D(h(),e,t)}function f(){p&&(d.remove(),J.show(),p=!1,vt.isAwake()?vt.setBgOpacity(H.bgOpacity,1,1):(vt.setBgOpacity(1,1,1),vt.disableHandles()),D($,0,1))}function l(e,t){p&&(H.bgFade&&!t?d.animate({opacity:1-e},{queue:!1,duration:H.fadeTime}):d.css({opacity:1-e}))}function c(){H.shade?o():f(),vt.isAwake()&&l(H.bgOpacity)}function h(){return d.children()}var p=!1,d=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),v={top:s(),left:s().height(V),right:s().height(V),bottom:s()};return{update:n,updateRaw:i,getShades:h,setBgColor:u,enable:o,disable:f,resize:t,refresh:c,opacity:l}}(),vt=function(){function t(t){var n=e("<div />").css({position:"absolute",opacity:H.borderOpacity}).addClass(i(t));return K.append(n),n}function n(t,n){var r=e("<div />").mousedown(d(t)).css({cursor:t+"-resize",position:"absolute",zIndex:n}).addClass("ord-"+t);return ht.support&&r.bind("touchstart.jcrop",ht.createDragger(t)),Q.append(r),r}function s(e){var t=H.handleSize,r=n(e,L++).css({opacity:H.handleOpacity}).addClass(i("handle"));return t&&r.width(t).height(t),r}function o(e){return n(e,L++).addClass("jcrop-dragbar")}function u(e){var t;for(t=0;t<e.length;t++)M[e[t]]=o(e[t])}function f(e){var n,r;for(r=0;r<e.length;r++){switch(e[r]){case"n":n="hline";break;case"s":n="hline bottom";break;case"e":n="vline right";break;case"w":n="vline"}A[e[r]]=t(n)}}function l(e){var t;for(t=0;t<e.length;t++)O[e[t]]=s(e[t])}function c(e,t){H.shade||J.css({top:r(-t),left:r(-e)}),G.css({top:r(t),left:r(e)})}function h(e,t){G.width(Math.round(e)).height(Math.round(t))}function p(){var e=pt.getFixed();pt.setPressed([e.x,e.y]),pt.setCurrent([e.x2,e.y2]),v()}function v(e){if(k)return g(e)}function g(e){var t=pt.getFixed();h(t.w,t.h),c(t.x,t.y),H.shade&&dt.updateRaw(t),k||b(),e?H.onSelect.call(yt,m(t)):H.onChange.call(yt,m(t))}function y(e,t,n){if(!k&&!t)return;H.bgFade&&!n?W.animate({opacity:e},{queue:!1,duration:H.fadeTime}):W.css("opacity",e)}function b(){G.show(),H.shade?dt.opacity(tt):y(tt,!0),k=!0}function E(){T(),G.hide(),H.shade?dt.opacity(1):y(1),k=!1,H.onRelease.call(yt)}function S(){_&&Q.show()}function x(){_=!0;if(H.allowResize)return Q.show(),!0}function T(){_=!1,Q.hide()}function N(e){e?(lt=!0,T()):(lt=!1,x())}function C(){N(!1),p()}var k,L=370,A={},O={},M={},_=!1;H.dragEdges&&e.isArray(H.createDragbars)&&u(H.createDragbars),e.isArray(H.createHandles)&&l(H.createHandles),H.drawBorders&&e.isArray(H.createBorders)&&f(H.createBorders),e(document).bind("touchstart.jcrop-ios",function(t){e(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()});var D=w().mousedown(d("move")).css({cursor:"move",position:"absolute",zIndex:360});return ht.support&&D.bind("touchstart.jcrop",ht.createDragger("move")),K.append(D),T(),{updateVisible:v,update:g,release:E,refresh:p,isAwake:function(){return k},setCursor:function(e){D.css("cursor",e)},enableHandles:x,enableOnly:function(){_=!0},showHandles:S,disableHandles:T,animMode:N,setBgOpacity:y,done:C}}(),mt=function(){function t(t){Z.css({zIndex:450}),t?e(document).bind("touchmove.jcrop",o).bind("touchend.jcrop",f):p&&e(document).bind("mousemove.jcrop",r).bind("mouseup.jcrop",i)}function n(){Z.css({zIndex:290}),e(document).unbind(".jcrop")}function r(e){return c(u(e)),!1}function i(e){return e.preventDefault(),e.stopPropagation(),ft&&(ft=!1,h(u(e)),vt.isAwake()&&H.onSelect.call(yt,m(pt.getFixed())),n(),c=function(){},h=function(){}),!1}function s(e,n,r){return ft=!0,c=e,h=n,t(r),!1}function o(e){return c(u(ht.cfilter(e))),!1}function f(e){return i(ht.cfilter(e))}function l(e){Z.css("cursor",e)}var c=function(){},h=function(){},p=H.trackDocument;return p||Z.mousemove(r).mouseup(i).mouseout(i),W.before(Z),{activateHandlers:s,setCursor:l}}(),gt=function(){function t(){H.keySupport&&(s.show(),s.focus())}function n(e){s.hide()}function r(e,t,n){H.allowMove&&(pt.moveOffset([t,n]),vt.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function i(e){if(e.ctrlKey||e.metaKey)return!0;ct=e.shiftKey?!0:!1;var t=ct?10:1;switch(e.keyCode){case 37:r(e,-t,0);break;case 39:r(e,t,0);break;case 38:r(e,0,-t);break;case 40:r(e,0,t);break;case 27:H.allowSelect&&vt.release();break;case 9:return!0}return!1}var s=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),o=e("<div />").css({position:"absolute",overflow:"hidden"}).append(s);return H.keySupport&&(s.keydown(i).blur(n),I||!H.fixedSupport?(s.css({position:"absolute",left:"-20px"}),o.append(s).insertBefore(W)):s.insertBefore(W)),{watchKeys:t}}();ht.support&&Z.bind("touchstart.jcrop",ht.newSelection),Q.hide(),P(!0);var yt={setImage:_,animateTo:S,setSelect:x,setOptions:k,tellSelect:N,tellScaled:C,setClass:E,disable:L,enable:A,cancel:O,release:vt.release,destroy:M,focus:gt.watchKeys,getBounds:function(){return[X*ot,V*ut]},getWidgetSize:function(){return[X,V]},getScaleFactor:function(){return[ot,ut]},getOptions:function(){return H},ui:{holder:$,selection:G}};return F&&$.bind("selectstart",function(){return!1}),R.data("Jcrop",yt),yt},e.fn.Jcrop=function(t,n){var r;return this.each(function(){if(e(this).data("Jcrop")){if(t==="api")return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else this.tagName=="IMG"?e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"}),r=e.Jcrop(this,t),e.isFunction(n)&&n.call(r)}):(e(this).css({display:"block",visibility:"hidden"}),r=e.Jcrop(this,t),e.isFunction(n)&&n.call(r))}),this},e.Jcrop.Loader=function(t,n,r){function i(){o.complete?(s.unbind(".jcloader"),e.isFunction(n)&&n.call(o)):window.setTimeout(i,50)}var s=e(t),o=s[0];s.bind("load.jcloader",i).bind("error.jcloader",function(t){s.unbind(".jcloader"),e.isFunction(r)&&r.call(o)}),o.complete&&e.isFunction(n)&&(s.unbind(".jcloader"),n.call(o))},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),define("jquery.jcrop",function(){}),function(){function l(){this.returnValue=!1}function c(){this.cancelBubble=!0}var e=0,t=[],n={},r={},i={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},s=/[<>&\"\']/g,o,u=window.setTimeout,a={},f;(function(e){var t=e.split(/,/),n,i,s;for(n=0;n<t.length;n+=2){s=t[n+1].split(/ /);for(i=0;i<s.length;i++)r[s[i]]=t[n]}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats,docx pptx xlsx,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/html,htm html xhtml,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/vnd.rn-realvideo,rv,text/csv,csv,text/plain,asc txt text diff log,application/octet-stream,exe");var h={VERSION:"1.5b",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:r,extend:function(e){return h.each(arguments,function(t,n){n>0&&h.each(t,function(t,n){e[n]=t})}),e},cleanName:function(e){var t,n;n=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(t=0;t<n.length;t+=2)e=e.replace(n[t],n[t+1]);return e=e.replace(/\s+/g,"_"),e=e.replace(/[^a-z0-9_\-\.]+/gi,""),e},addRuntime:function(e,n){return n.name=e,t[e]=n,t.push(n),n},guid:function(){var t=(new Date).getTime().toString(32),n;for(n=0;n<5;n++)t+=Math.floor(Math.random()*65535).toString(32);return(h.guidPrefix||"p")+t+(e++).toString(32)},buildUrl:function(e,t){var n="";return h.each(t,function(e,t){n+=(n?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)}),n&&(e+=(e.indexOf("?")>0?"&":"?")+n),e},each:function(e,t){var n,r,i;if(e){n=e.length;if(n===o){for(r in e)if(e.hasOwnProperty(r)&&t(e[r],r)===!1)return}else for(i=0;i<n;i++)if(t(e[i],i)===!1)return}},formatSize:function(e){return e===o||/\D/.test(e)?h.translate("N/A"):e>1073741824?Math.round(e/1073741824,1)+" GB":e>1048576?Math.round(e/1048576,1)+" MB":e>1024?Math.round(e/1024,1)+" KB":e+" b"},getPos:function(e,t){function a(e){var t,n,r=0,i=0;return e&&(n=e.getBoundingClientRect(),t=s.compatMode==="CSS1Compat"?s.documentElement:s.body,r=n.left+t.scrollLeft,i=n.top+t.scrollTop),{x:r,y:i}}var n=0,r=0,i,s=document,o,u;e=e,t=t||s.body;if(e&&e.getBoundingClientRect&&navigator.userAgent.indexOf("MSIE")>0&&s.documentMode!==8)return o=a(e),u=a(t),{x:o.x-u.x,y:o.y-u.y};i=e;while(i&&i!=t&&i.nodeType)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;i=e.parentNode;while(i&&i!=t&&i.nodeType)n-=i.scrollLeft||0,r-=i.scrollTop||0,i=i.parentNode;return{x:n,y:r}},getSize:function(e){return{w:e.offsetWidth||e.clientWidth,h:e.offsetHeight||e.clientHeight}},parseSize:function(e){var t;return typeof e=="string"&&(e=/^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g,"")),t=e[2],e=+e[1],t=="g"&&(e*=1073741824),t=="m"&&(e*=1048576),t=="k"&&(e*=1024)),e},xmlEncode:function(e){return e?(""+e).replace(s,function(e){return i[e]?"&"+i[e]+";":e}):e},toArray:function(e){var t,n=[];for(t=0;t<e.length;t++)n[t]=e[t];return n},addI18n:function(e){return h.extend(n,e)},translate:function(e){return n[e]||e},isEmptyObj:function(e){if(e===o)return!0;for(var t in e)return!1;return!0},hasClass:function(e,t){var n;return e.className==""?!1:(n=new RegExp("(^|\\s+)"+t+"(\\s+|$)"),n.test(e.className))},addClass:function(e,t){h.hasClass(e,t)||(e.className=e.className==""?t:e.className.replace(/\s+$/,"")+" "+t)},removeClass:function(e,t){var n=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e.className=e.className.replace(n,function(e,t,n){return t===" "&&n===" "?" ":""})},getStyle:function(e,t){if(e.currentStyle)return e.currentStyle[t];if(window.getComputedStyle)return window.getComputedStyle(e,null)[t]},addEvent:function(e,t,n){var r,i,s,u;u=arguments[3],t=t.toLowerCase(),f===o&&(f="Plupload_"+h.guid()),e.addEventListener?(r=n,e.addEventListener(t,r,!1)):e.attachEvent&&(r=function(){var e=window.event;e.target||(e.target=e.srcElement),e.preventDefault=l,e.stopPropagation=c,n(e)},e.attachEvent("on"+t,r)),e[f]===o&&(e[f]=h.guid()),a.hasOwnProperty(e[f])||(a[e[f]]={}),i=a[e[f]],i.hasOwnProperty(t)||(i[t]=[]),i[t].push({func:r,orig:n,key:u})},removeEvent:function(e,t){var n,r,i;typeof arguments[2]=="function"?r=arguments[2]:i=arguments[2],t=t.toLowerCase();if(!(e[f]&&a[e[f]]&&a[e[f]][t]))return;n=a[e[f]][t];for(var s=n.length-1;s>=0;s--)if(n[s].key===i||n[s].orig===r){e.detachEvent?e.detachEvent("on"+t,n[s].func):e.removeEventListener&&e.removeEventListener(t,n[s].func,!1),n[s].orig=null,n[s].func=null,n.splice(s,1);if(r!==o)break}n.length||delete a[e[f]][t];if(h.isEmptyObj(a[e[f]])){delete a[e[f]];try{delete e[f]}catch(u){e[f]=o}}},removeAllEvents:function(e){var t=arguments[1];if(e[f]===o||!e[f])return;h.each(a[e[f]],function(n,r){h.removeEvent(e,r,t)})}};h.Uploader=function(e){function a(){var e,t=0,n;if(this.state==h.STARTED){for(n=0;n<i.length;n++)!e&&i[n].status==h.QUEUED?(e=i[n],e.status=h.UPLOADING,this.trigger("BeforeUpload",e)&&this.trigger("UploadFile",e)):t++;t==i.length&&(this.trigger("UploadComplete",i),this.stop())}}function f(){var e,t;r.reset();for(e=0;e<i.length;e++)t=i[e],t.size!==o?(r.size+=t.size,r.loaded+=t.loaded):r.size=o,t.status==h.DONE?r.uploaded++:t.status==h.FAILED?r.failed++:r.queued++;r.size===o?r.percent=i.length>0?Math.ceil(r.uploaded/i.length*100):0:(r.bytesPerSec=Math.ceil(r.loaded/((+(new Date)-s||1)/1e3)),r.percent=r.size>0?Math.ceil(r.loaded/r.size*100):0)}var n={},r,i=[],s;r=new h.QueueProgress,e=h.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},e),h.extend(this,{state:h.STOPPED,runtime:"",features:{},files:i,settings:e,total:r,id:h.guid(),init:function(){function m(){var e=l[d++],t,r,i;if(e){t=e.getFeatures(),r=n.settings.required_features;if(r){r=r.split(",");for(i=0;i<r.length;i++)if(!t[r[i]]){m();return}}e.init(n,function(r){r&&r.success?(n.features=t,n.runtime=e.name,n.trigger("Init",{runtime:e.name}),n.trigger("PostInit"),n.refresh()):m()})}else n.trigger("Error",{code:h.INIT_ERROR,message:h.translate("Init error.")})}var n=this,r,l,c,d=0,v;typeof e.preinit=="function"?e.preinit(n):h.each(e.preinit,function(e,t){n.bind(t,e)}),e.page_url=e.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/"),/^(\w+:\/\/|\/)/.test(e.url)||(e.url=e.page_url+e.url),e.chunk_size=h.parseSize(e.chunk_size),e.max_file_size=h.parseSize(e.max_file_size),n.bind("FilesAdded",function(t,r){var s,a,f=0,l,c=e.filters;c&&c.length&&(l=[],h.each(c,function(e){h.each(e.extensions.split(/,/),function(e){/^\s*\*\s*$/.test(e)?l.push("\\.*"):l.push("\\."+e.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),l=new RegExp(l.join("|")+"$","i"));for(s=0;s<r.length;s++){a=r[s],a.loaded=0,a.percent=0,a.status=h.QUEUED;if(l&&!l.test(a.name)){t.trigger("Error",{code:h.FILE_EXTENSION_ERROR,message:h.translate("File extension error."),file:a});continue}if(a.size!==o&&a.size>e.max_file_size){t.trigger("Error",{code:h.FILE_SIZE_ERROR,message:h.translate("File size error."),file:a});continue}i.push(a),f++}if(!f)return!1;u(function(){n.trigger("QueueChanged"),n.refresh()},1)}),e.unique_names&&n.bind("UploadFile",function(e,t){var n=t.name.match(/\.([^.]+)$/),r="tmp";n&&(r=n[1]),t.target_name=t.id+"."+r}),n.bind("UploadProgress",function(e,t){t.percent=t.size>0?Math.ceil(t.loaded/t.size*100):100,f()}),n.bind("StateChanged",function(e){if(e.state==h.STARTED)s=+(new Date);else if(e.state==h.STOPPED)for(r=e.files.length-1;r>=0;r--)e.files[r].status==h.UPLOADING&&(e.files[r].status=h.QUEUED,f())}),n.bind("QueueChanged",f),n.bind("Error",function(e,t){t.file&&(t.file.status=h.FAILED,f(),e.state==h.STARTED&&u(function(){a.call(n)},1))}),n.bind("FileUploaded",function(e,t){t.status=h.DONE,t.loaded=t.size,e.trigger("UploadProgress",t),u(function(){a.call(n)},1)});if(e.runtimes){l=[],v=e.runtimes.split(/\s?,\s?/);for(r=0;r<v.length;r++)t[v[r]]&&l.push(t[v[r]])}else l=t;m(),typeof e.init=="function"?e.init(n):h.each(e.init,function(e,t){n.bind(t,e)})},refresh:function(){this.trigger("Refresh")},start:function(){this.state!=h.STARTED&&(this.state=h.STARTED,this.trigger("StateChanged"),a.call(this))},stop:function(){this.state!=h.STOPPED&&(this.state=h.STOPPED,this.trigger("StateChanged"))},getFile:function(e){var t;for(t=i.length-1;t>=0;t--)if(i[t].id===e)return i[t]},removeFile:function(e){var t;for(t=i.length-1;t>=0;t--)if(i[t].id===e.id)return this.splice(t,1)[0]},splice:function(e,t){var n;return n=i.splice(e===o?0:e,t===o?i.length:t),this.trigger("FilesRemoved",n),this.trigger("QueueChanged"),n},trigger:function(e){var t=n[e.toLowerCase()],r,i;if(t){i=Array.prototype.slice.call(arguments),i[0]=this;for(r=0;r<t.length;r++)if(t[r].func.apply(t[r].scope,i)===!1)return!1}return!0},hasEventListener:function(e){return!!n[e.toLowerCase()]},bind:function(e,t,r){var i;e=e.toLowerCase(),i=n[e]||[],i.push({func:t,scope:r||this}),n[e]=i},unbind:function(e){e=e.toLowerCase();var t=n[e],r,i=arguments[1];if(t){if(i!==o){for(r=t.length-1;r>=0;r--)if(t[r].func===i){t.splice(r,1);break}}else t=[];t.length||delete n[e]}},unbindAll:function(){var e=this;h.each(n,function(t,n){e.unbind(n)})},destroy:function(){this.trigger("Destroy"),this.unbindAll()}})},h.File=function(e,t,n){var r=this;r.id=e,r.name=t,r.size=n,r.loaded=0,r.percent=0,r.status=0},h.Runtime=function(){this.getFeatures=function(){},this.init=function(e,t){}},h.QueueProgress=function(){var e=this;e.size=0,e.loaded=0,e.uploaded=0,e.failed=0,e.queued=0,e.percent=0,e.bytesPerSec=0,e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}},h.runtimes={},window.plupload=h}(),define("jquery.plupload",function(){}),function(e,t,n,r){function u(t,n){var r;if(!("FileReader"in e))return n(t.getAsDataURL());r=new FileReader,r.readAsDataURL(t),r.onload=function(){n(r.result)}}function a(t,n){var r;if(!("FileReader"in e))return n(t.getAsBinary());r=new FileReader,r.readAsBinaryString(t),r.onload=function(){n(r.result)}}function f(e,n,r,i){var o,a,f,l,p=this;u(s[e.id],function(s){o=t.createElement("canvas"),o.style.display="none",t.body.appendChild(o),a=o.getContext("2d"),f=new Image,f.onerror=f.onabort=function(){i({success:!1})},f.onload=function(){var t,u,d,v,m;n.width||(n.width=f.width),n.height||(n.height=f.height),l=Math.min(n.width/f.width,n.height/f.height);if(l<1||l===1&&r==="image/jpeg"){t=Math.round(f.width*l),u=Math.round(f.height*l),o.width=t,o.height=u,a.drawImage(f,0,0,t,u);if(r==="image/jpeg"){v=new c(atob(s.substring(s.indexOf("base64,")+7))),v.headers&&v.headers.length&&(m=new h,m.init(v.get("exif")[0])&&(m.setExif("PixelXDimension",t),m.setExif("PixelYDimension",u),v.set("exif",m.getBinary()),p.hasEventListener("ExifData")&&p.trigger("ExifData",e,m.EXIF()),p.hasEventListener("GpsData")&&p.trigger("GpsData",e,m.GPS())));if(n.quality)try{s=o.toDataURL(r,n.quality/100)}catch(g){s=o.toDataURL(r)}}else s=o.toDataURL(r);s=s.substring(s.indexOf("base64,")+7),s=atob(s),v&&v.headers&&v.headers.length&&(s=v.restore(s),v.purge()),o.parentNode.removeChild(o),i({success:!0,data:s})}else i({success:!1})},f.src=s})}function l(){function n(n,r){var i=e?0:-8*(r-1),s=0,o;for(o=0;o<r;o++)s|=t.charCodeAt(n+o)<<Math.abs(i+o*8);return s}function i(e,n,r){var r=arguments.length===3?r:t.length-n-1;t=t.substr(0,n)+e+t.substr(r+n)}function s(t,n,r){var s="",o=e?0:-8*(r-1),u;for(u=0;u<r;u++)s+=String.fromCharCode(n>>Math.abs(o+u*8)&255);i(s,t,r)}var e=!1,t;return{II:function(t){if(t===r)return e;e=t},init:function(n){e=!1,t=n},SEGMENT:function(e,n,r){switch(arguments.length){case 1:return t.substr(e,t.length-e-1);case 2:return t.substr(e,n);case 3:i(r,e,n);break;default:return t}},BYTE:function(e){return n(e,1)},SHORT:function(e){return n(e,2)},LONG:function(e,t){if(t===r)return n(e,4);s(e,t,4)},SLONG:function(e){var t=n(e,4);return t>2147483647?t-4294967296:t},STRING:function(e,t){var r="";for(t+=e;e<t;e++)r+=String.fromCharCode(n(e,1));return r}}}function c(e){var t={65505:{app:"EXIF",name:"APP1",signature:"Exif\0"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\0"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\0"}},n=[],i,s,o=r,u=0,a;i=new l,i.init(e);if(i.SHORT(0)!==65496)return;s=2,a=Math.min(1048576,e.length);while(s<=a){o=i.SHORT(s);if(o>=65488&&o<=65495){s+=2;continue}if(o===65498||o===65497)break;u=i.SHORT(s+2)+2,t[o]&&i.STRING(s+4,t[o].signature.length)===t[o].signature&&n.push({hex:o,app:t[o].app.toUpperCase(),name:t[o].name.toUpperCase(),start:s,length:u,segment:i.SEGMENT(s,u)}),s+=u}return i.init(null),{headers:n,restore:function(e){i.init(e);var t=new c(e);if(!t.headers)return!1;for(var r=t.headers.length;r>0;r--){var o=t.headers[r-1];i.SEGMENT(o.start,o.length,"")}t.purge(),s=i.SHORT(2)==65504?4+i.SHORT(4):2;for(var r=0,u=n.length;r<u;r++)i.SEGMENT(s,0,n[r].segment),s+=n[r].length;return i.SEGMENT()},get:function(e){var t=[];for(var r=0,i=n.length;r<i;r++)n[r].app===e.toUpperCase()&&t.push(n[r].segment);return t},set:function(e,t){var r=[];typeof t=="string"?r.push(t):r=t;for(var i=ii=0,s=n.length;i<s;i++){n[i].app===e.toUpperCase()&&(n[i].segment=r[ii],n[i].length=r[ii].length,ii++);if(ii>=r.length)break}},purge:function(){n=[],i.init(null)}}}function h(){function o(t,i){var o=e.SHORT(t),u,a,f,l,c,h,p,d,v=[],m={};for(u=0;u<o;u++){p=h=t+12*u+2,f=i[e.SHORT(p)];if(f===r)continue;l=e.SHORT(p+=2),c=e.LONG(p+=2),p+=4,v=[];switch(l){case 1:case 7:c>4&&(p=e.LONG(p)+n.tiffHeader);for(a=0;a<c;a++)v[a]=e.BYTE(p+a);break;case 2:c>4&&(p=e.LONG(p)+n.tiffHeader),m[f]=e.STRING(p,c-1);continue;case 3:c>2&&(p=e.LONG(p)+n.tiffHeader);for(a=0;a<c;a++)v[a]=e.SHORT(p+a*2);break;case 4:c>1&&(p=e.LONG(p)+n.tiffHeader);for(a=0;a<c;a++)v[a]=e.LONG(p+a*4);break;case 5:p=e.LONG(p)+n.tiffHeader;for(a=0;a<c;a++)v[a]=e.LONG(p+a*4)/e.LONG(p+a*4+4);break;case 9:p=e.LONG(p)+n.tiffHeader;for(a=0;a<c;a++)v[a]=e.SLONG(p+a*4);break;case 10:p=e.LONG(p)+n.tiffHeader;for(a=0;a<c;a++)v[a]=e.SLONG(p+a*4)/e.SLONG(p+a*4+4);break;default:continue}d=c==1?v[0]:v,s.hasOwnProperty(f)&&typeof d!="object"?m[f]=s[f][d]:m[f]=d}return m}function u(){var i=r,s=n.tiffHeader;return e.II(e.SHORT(s)==18761),e.SHORT(s+=2)!==42?!1:(n.IFD0=n.tiffHeader+e.LONG(s+=2),i=o(n.IFD0,t.tiff),n.exifIFD="ExifIFDPointer"in i?n.tiffHeader+i.ExifIFDPointer:r,n.gpsIFD="GPSInfoIFDPointer"in i?n.tiffHeader+i.GPSInfoIFDPointer:r,!0)}function a(r,s,o){var u,a,f,l=0;if(typeof s=="string"){var c=t[r.toLowerCase()];for(hex in c)if(c[hex]===s){s=hex;break}}u=n[r.toLowerCase()+"IFD"],a=e.SHORT(u);for(i=0;i<a;i++){f=u+12*i+2;if(e.SHORT(f)==s){l=f+8;break}}return l?(e.LONG(l,o),!0):!1}var e,t,n={},s;return e=new l,t={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},s={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(t){return n={tiffHeader:10},t===r||!t.length?!1:(e.init(t),e.SHORT(0)===65505&&e.STRING(4,5).toUpperCase()==="EXIF\0"?u():!1)},EXIF:function(){var e;return e=o(n.exifIFD,t.exif),e.ExifVersion&&(e.ExifVersion=String.fromCharCode(e.ExifVersion[0],e.ExifVersion[1],e.ExifVersion[2],e.ExifVersion[3])),e},GPS:function(){var e;return e=o(n.gpsIFD,t.gps),e.GPSVersionID&&(e.GPSVersionID=e.GPSVersionID.join(".")),e},setExif:function(e,t){return e!=="PixelXDimension"&&e!=="PixelYDimension"?!1:a("exif",e,t)},getBinary:function(){return e.SEGMENT()}}}var s={},o;n.runtimes.Html5=n.addRuntime("html5",{getFeatures:function(){var n,r,i,s,u,a,f;return f=function(){var t=navigator,n=t.userAgent,r=t.vendor,i,s,o;return i=/WebKit/.test(n),o=i&&r.indexOf("Apple")!==-1,s=e.opera&&e.opera.buildNumber,{ie:!i&&!s&&/MSIE/gi.test(n)&&/Explorer/gi.test(t.appName),webkit:i,gecko:!i&&/Gecko/.test(n),safari:o,safariwin:o&&navigator.platform.indexOf("Win")!==-1,opera:!!s}}(),r=i=u=a=!1,e.XMLHttpRequest&&(n=new XMLHttpRequest,i=!!n.upload,r=!!n.sendAsBinary||!!n.upload),r&&(s=!!(n.sendAsBinary||e.Uint8Array&&e.ArrayBuffer),u=!(!File||!File.prototype.getAsDataURL&&!e.FileReader||!s),a=!!File&&!!(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),o=f.safariwin,{html5:r,dragdrop:function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}(),jpgresize:u,pngresize:u,multipart:u||!!e.FileReader||!!e.FormData,canSendBinary:s,cantSendBlobInFormData:!!(f.gecko&&e.FormData&&e.FileReader&&!FileReader.prototype.readAsArrayBuffer),progress:i,chunks:a,multi_selection:!f.safariwin,triggerDialog:f.gecko&&e.FormData||f.webkit}},init:function(r,i){function l(e){var t,i,o=[],u,a={};for(i=0;i<e.length;i++){t=e[i];if(a[t.name])continue;a[t.name]=!0,u=n.guid(),s[u]=t,o.push(new n.File(u,t.fileName||t.name,t.fileSize||t.size))}o.length&&r.trigger("FilesAdded",o)}var u;u=this.getFeatures();if(!u.html5){i({success:!1});return}r.bind("Init",function(e){var i,s,o=[],u,a,f=e.settings.filters,c,h,p=t.body,d;i=t.createElement("div"),i.id=e.id+"_html5_container",n.extend(i.style,{position:"absolute",background:r.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:r.settings.shim_bgcolor?"":0}),i.className="plupload html5",r.settings.container&&(p=t.getElementById(r.settings.container),n.getStyle(p,"position")==="static"&&(p.style.position="relative")),p.appendChild(i);e:for(u=0;u<f.length;u++){c=f[u].extensions.split(/,/);for(a=0;a<c.length;a++){if(c[a]==="*"){o=[];break e}h=n.mimeTypes[c[a]],h&&o.push(h)}}i.innerHTML='<input id="'+r.id+'_html5" '+' style="font-size:999px"'+' type="file" accept="'+o.join(",")+'" '+(r.settings.multi_selection&&r.features.multi_selection?'multiple="multiple"':"")+" />",i.scrollTop=100,d=t.getElementById(r.id+"_html5"),e.features.triggerDialog?n.extend(d.style,{position:"absolute",width:"100%",height:"100%"}):n.extend(d.style,{cssFloat:"right",styleFloat:"right"}),d.onchange=function(){l(this.files)},s=t.getElementById(e.settings.browse_button);if(s){var v=e.settings.browse_button_hover,m=e.settings.browse_button_active,g=e.features.triggerDialog?s:i;v&&(n.addEvent(g,"mouseover",function(){n.addClass(s,v)},e.id),n.addEvent(g,"mouseout",function(){n.removeClass(s,v)},e.id)),m&&(n.addEvent(g,"mousedown",function(){n.addClass(s,m)},e.id),n.addEvent(t.body,"mouseup",function(){n.removeClass(s,m)},e.id)),e.features.triggerDialog&&n.addEvent(s,"click",function(n){t.getElementById(e.id+"_html5").click(),n.preventDefault()},e.id)}}),r.bind("PostInit",function(){var e=t.getElementById(r.settings.drop_element);if(e){if(o){n.addEvent(e,"dragenter",function(i){var s,o,u;s=t.getElementById(r.id+"_drop"),s||(s=t.createElement("input"),s.setAttribute("type","file"),s.setAttribute("id",r.id+"_drop"),s.setAttribute("multiple","multiple"),n.addEvent(s,"change",function(){l(this.files),n.removeEvent(s,"change",r.id),s.parentNode.removeChild(s)},r.id),e.appendChild(s)),o=n.getPos(e,t.getElementById(r.settings.container)),u=n.getSize(e),n.getStyle(e,"position")==="static"&&n.extend(e.style,{position:"relative"}),n.extend(s.style,{position:"absolute",display:"block",top:0,left:0,width:u.w+"px",height:u.h+"px",opacity:0})},r.id);return}n.addEvent(e,"dragover",function(e){e.preventDefault()},r.id),n.addEvent(e,"drop",function(e){var t=e.dataTransfer;t&&t.files&&l(t.files),e.preventDefault()},r.id)}}),r.bind("Refresh",function(e){var i,s,o,u,a;i=t.getElementById(r.settings.browse_button),i&&(s=n.getPos(i,t.getElementById(e.settings.container)),o=n.getSize(i),u=t.getElementById(r.id+"_html5_container"),n.extend(u.style,{top:s.y+"px",left:s.x+"px",width:o.w+"px",height:o.h+"px"}),r.features.triggerDialog&&(n.getStyle(i,"position")==="static"&&n.extend(i.style,{position:"relative"}),a=parseInt(n.getStyle(i,"z-index"),10),isNaN(a)&&(a=0),n.extend(i.style,{zIndex:a}),n.extend(u.style,{zIndex:a-1})))}),r.bind("UploadFile",function(t,r){function c(e,t,n){var r;if(!File.prototype.slice)return(r=File.prototype.webkitSlice||File.prototype.mozSlice)?r.call(e,t,n):null;try{return e.slice(),e.slice(t,n)}catch(i){return e.slice(t,n-t)}}function h(s){function h(){function E(i){var s=0,f=new XMLHttpRequest,c=f.upload,d="----pluploadboundary"+n.guid(),E,S="--",x="\r\n",T="";c&&(c.onprogress=function(e){r.loaded=Math.min(r.size,a+e.loaded-s),t.trigger("UploadProgress",r)}),f.onreadystatechange=function(){var e,s;if(f.readyState==4){try{e=f.status}catch(u){e=0}if(e>=400)t.trigger("Error",{code:n.HTTP_ERROR,message:n.translate("HTTP Error."),file:r,status:e});else{if(v){s={chunk:o,chunks:v,response:f.responseText,status:e},t.trigger("ChunkUploaded",r,s),a+=y;if(s.cancelled){r.status=n.FAILED;return}r.loaded=Math.min(r.size,(o+1)*g)}else r.loaded=r.size;t.trigger("UploadProgress",r),i=p=E=T=null,!v||++o>=v?(r.status=n.DONE,t.trigger("FileUploaded",r,{response:f.responseText,status:e})):h()}f=null}};if(t.settings.multipart&&u.multipart){m.name=r.target_name||r.name,f.open("post",w,!0),n.each(t.settings.headers,function(e,t){f.setRequestHeader(t,e)});if(!l&&!!e.FormData){E=new FormData,n.each(n.extend(m,t.settings.multipart_params),function(e,t){E.append(t,e)}),E.append(t.settings.file_data_name,i),f.send(E);return}if(l){f.setRequestHeader("Content-Type","multipart/form-data; boundary="+d),n.each(n.extend(m,t.settings.multipart_params),function(e,t){T+=S+d+x+'Content-Disposition: form-data; name="'+t+'"'+x+x,T+=unescape(encodeURIComponent(e))+x}),b=n.mimeTypes[r.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",T+=S+d+x+'Content-Disposition: form-data; name="'+t.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(r.name))+'"'+x+"Content-Type: "+b+x+x+i+x+S+d+S+x,s=T.length-i.length,i=T;if(f.sendAsBinary)f.sendAsBinary(i);else if(u.canSendBinary){var N=new Uint8Array(i.length);for(var C=0;C<i.length;C++)N[C]=i.charCodeAt(C)&255;f.send(N.buffer)}return}}w=n.buildUrl(t.settings.url,n.extend(m,t.settings.multipart_params)),f.open("post",w,!0),f.setRequestHeader("Content-Type","application/octet-stream"),n.each(t.settings.headers,function(e,t){f.setRequestHeader(t,e)}),f.send(i)}var p,d,v,m,g,y,b,w=t.settings.url;if(r.status==n.DONE||r.status==n.FAILED||t.state==n.STOPPED)return;m={name:r.target_name||r.name},i.chunk_size&&r.size>i.chunk_size&&(u.chunks||typeof s=="string")?(g=i.chunk_size,v=Math.ceil(r.size/g),y=Math.min(g,r.size-o*g),typeof s=="string"?p=s.substring(o*g,o*g+y):p=c(s,o*g,o*g+y),m.chunk=o,m.chunks=v):(y=r.size,p=s),f&&u.cantSendBlobInFormData&&u.chunks&&t.settings.chunk_size?(f.onload=function(){l=!0,E(f.result)},f.readAsBinaryString(p)):E(p)}var o=0,a=0,f="FileReader"in e?new FileReader:null,l=typeof s=="string";h()}var i=t.settings,o,l;o=s[r.id],u.jpgresize&&t.settings.resize&&/\.(png|jpg|jpeg)$/i.test(r.name)?f.call(t,r,t.settings.resize,/\.png$/i.test(r.name)?"image/png":"image/jpeg",function(e){e.success?(r.size=e.data.length,h(e.data)):h(o)}):!u.chunks&&u.jpgresize?a(o,h):h(o)}),r.bind("Destroy",function(e){var r,i,s=t.body,o={inputContainer:e.id+"_html5_container",inputFile:e.id+"_html5",browseButton:e.settings.browse_button,dropElm:e.settings.drop_element};for(r in o)i=t.getElementById(o[r]),i&&n.removeAllEvents(i,e.id);n.removeAllEvents(t.body,e.id),e.settings.container&&(s=t.getElementById(e.settings.container)),s.removeChild(t.getElementById(o.inputContainer))}),i({success:!0})}})}(window,document,plupload),define("jquery.plupload.html5",function(){}),jQuery.cookie=function(e,t,n){if(typeof t=="undefined"){var a=null;if(document.cookie&&document.cookie!=""){var f=document.cookie.split(";");for(var l=0;l<f.length;l++){var c=jQuery.trim(f[l]);if(c.substring(0,e.length+1)==e+"="){a=decodeURIComponent(c.substring(e.length+1));break}}}return a}n=n||{},t===null&&(t="",n=$.extend({},n),n.expires=-1);var r="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var i;typeof n.expires=="number"?(i=new Date,i.setTime(i.getTime()+n.expires*24*60*60*1e3)):i=n.expires,r="; expires="+i.toUTCString()}var s=n.path?"; path="+n.path:"",o=n.domain?"; domain="+n.domain:"",u=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),r,s,o,u].join("")},define("jquery.cookie",function(){}),!function(e){function r(){e(t).each(function(){i(e(this)).removeClass("open")})}function i(t){var n=t.attr("data-target"),r;n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),r=n&&e(n);if(!r||!r.length)r=t.parent();return r}var t="[data-toggle=dropdown]",n=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};n.prototype={constructor:n,toggle:function(t){var n=e(this),s,o;if(n.is(".disabled, :disabled"))return;return s=i(n),o=s.hasClass("open"),r(),o||s.toggleClass("open"),n.focus(),!1},keydown:function(n){var r,s,o,u,a,f;if(!/(38|40|27)/.test(n.keyCode))return;r=e(this),n.preventDefault(),n.stopPropagation();if(r.is(".disabled, :disabled"))return;u=i(r),a=u.hasClass("open");if(!a||a&&n.keyCode==27)return n.which==27&&u.find(t).focus(),r.click();s=e("[role=menu] li:not(.divider):visible a",u);if(!s.length)return;f=s.index(s.filter(":focus")),n.keyCode==38&&f>0&&f--,n.keyCode==40&&f<s.length-1&&f++,~f||(f=0),s.eq(f).focus()}};var s=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var r=e(this),i=r.data("dropdown");i||r.data("dropdown",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.dropdown.Constructor=n,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.dropdown.data-api",r).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api",t,n.prototype.toggle).on("keydown.dropdown.data-api",t+", [role=menu]",n.prototype.keydown)}(window.jQuery),define("bootstrap.dropdown",function(){}),define("neos/content/ui",["jquery","emberjs","vie/instance","vie/entity","text!neos/templates/content/ui/breadcrumb.html","text!neos/templates/content/ui/inspector.html","text!neos/templates/content/ui/inspectorDialog.html","text!neos/templates/content/ui/pageTree.html","text!neos/templates/content/ui/deletePageDialog.html","text!neos/templates/content/ui/inspectTree.html","text!neos/templates/content/ui/saveIndicator.html","text!neos/templates/content/ui/treePanel.html","neos/content/ui/elements","neos/content/ui/editors","jquery.popover","jquery.jcrop","jquery.plupload","jquery.plupload.html5","jquery.cookie","jquery.dynatree","bootstrap.dropdown"],function(e,t,n,r,i,s,o,u,a,f,l,c){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("neos/content/ui");var h=window.T3||{};typeof h.Content=="undefined"&&(h.Content={}),h.Content.UI=h.Content.UI||{},h.Content.UI.Breadcrumb=t.View.extend({tagName:"div",classNames:["t3-breadcrumb"],template:t.Handlebars.compile(i)}),h.Content.UI.BreadcrumbItem=t.View.extend({tagName:"a",href:"#",attributeBindings:["href"],template:t.Handlebars.compile('{{view.item.nodeTypeSchema.ui.label}} {{#if view.item.status}}<span class="t3-breadcrumbitem-status">({{view.item.status}})</span>{{/if}}'),click:function(e){e.preventDefault();var t=this.get("item");return h.Content.Model.NodeSelection.selectNode(t),!1}}),h.Content.UI.Inspector=t.View.extend({template:t.Handlebars.compile(s),$clickProtectionLayer:null,keyDown:function(e){if(e.keyCode===13)return h.Content.Controller.Inspector.apply(),!1},_onModifiedChange:function(){var t;h.Content.Controller.Inspector.get("_modified")?(t=this.$().css("z-index")-1,this.$clickProtectionLayer=e("<div />").addClass("t3-inspector-clickprotection").addClass("t3-ui").css({"z-index":t}),this.$clickProtectionLayer.click(this._showUnappliedDialog),e("body").append(this.$clickProtectionLayer)):this.$clickProtectionLayer.remove()}.observes("T3.Content.Controller.Inspector._modified"),_showUnappliedDialog:function(){var e=t.View.create({classNames:["t3-ui","inspector-dialog"],template:t.Handlebars.compile(o),cancel:function(){e.destroy()},apply:function(){h.Content.Controller.Inspector.apply(),e.destroy()},dontApply:function(){h.Content.Controller.Inspector.revert(),e.destroy()}});e.appendTo("body")}}),h.Content.UI.ToggleInspectorPanelHeadline=t.View.extend({tagName:"div",_collapsed:!1,_nodeType:"",_automaticallyCollapsed:!1,didInsertElement:function(){var e=h.Content.Model.NodeSelection.get("selectedNode").$element.attr("typeof").replace(/\./g,"_"),t=h.Content.Controller.Inspector.get("configuration."+e+"."+this.get("content.group"));this.set("_nodeType",e),t&&(this.$().next().hide(),this.set("_collapsed",!0),this.set("_automaticallyCollapsed",!0))},click:function(){this.toggleCollapsed()},toggleCollapsed:function(){this.set("_collapsed",!this.get("_collapsed")),h.Content.Controller.Inspector.get("configuration."+this.get("_nodeType"))||h.Content.Controller.Inspector.set("configuration."+this.get("_nodeType"),{}),h.Content.Controller.Inspector.set("configuration."+this.get("_nodeType")+"."+this.content.group,this.get("_collapsed")),t.propertyDidChange(h.Content.Controller.Inspector,"configuration")},_onCollapsedChange:function(){var e=this.$().next();this.get("_collapsed")===!0?e.slideUp(200):e.slideDown(200)}.observes("_collapsed")}),h.Content.UI.TreePanel=t.View.extend({template:t.Handlebars.compile(c)}),h.Content.UI.Inspector.PropertyEditor=t.ContainerView.extend({propertyDefinition:null,render:function(){var n=h.Configuration.UserInterface[this.propertyDefinition.type];t.assert('Type defaults for "'+this.propertyDefinition.type+'" not found!',!!n);var r=t.get(this.propertyDefinition,"ui.inspector.editor")||n.editor;t.assert('Editor class name for property "'+this.propertyDefinition.key+'" not found.',r);var i=e.extend({valueBinding:"T3.Content.Controller.Inspector.nodeProperties."+this.propertyDefinition.key,elementId:this.propertyDefinition.elementId},n.editorOptions||{},t.get(this.propertyDefinition,"ui.inspector.editorOptions")||{}),s=t.get(r);t.assert('Editor class "'+r+'" not found',!!s);var o=s.create(i);this.appendChild(o)}}),h.Content.UI.ButtonDialog=t.View.extend(t.TargetActionSupport,{tagName:"button",attributeBindings:["disabled"],classNameBindings:["iconClass"],label:"",disabled:!1,visible:!0,icon:"",template:t.Handlebars.compile('{{#if icon}}<i class="{{unbound icon}}"></i> {{/if}}{{{view.label}}}'),iconClass:function(){var e=this.get("icon");return e!==""?"t3-icon-"+e:""}.property("icon"),click:function(){this.triggerAction()}}),h.Content.UI.InspectButton=h.Content.UI.PopoverButton.extend({popoverTitle:"Content Structure",$popoverContent:f,popoverPosition:"top",popoverAdditionalClasses:"t3-inspecttree",_ignoreCloseOnPageLoad:!1,inspectTree:null,init:function(){this._super();var t=this;h.ContentModule.on("pageLoaded",function(){entityWrapper=h.Content.Model.NodeSelection._createEntityWrapper(e("#t3-page-metainformation")),entityWrapper.addObserver("typo3:title",function(){var e=r.extractAttributesFromVieEntity(entityWrapper._vieEntity);t.synchronizeInspectTreeTitle(e)})})},synchronizeInspectTreeTitle:function(e){var t=this.getInspectTreeRootNode();t&&t.setTitle(e.title)},getInspectTreeRootNode:function(){var t=e("#t3-page-metainformation").attr("about");if(e("#t3-dd-inspecttree").children().length>0){var n=e("#t3-dd-inspecttree").dynatree("getTree"),r=n.getNodeByKey(t);return r}return null},isLoadingLayerActive:function(){if(h.ContentModule.get("_isLoadingPage")){if(this.get("_ignoreCloseOnPageLoad")){this.set("_ignoreCloseOnPageLoad",!1);return}this.resetInspectTree()}}.observes("T3.ContentModule.currentUri"),resetInspectTree:function(){e(".t3-inspect > button.pressed").click(),this.inspectTree!==null&&(e("#t3-dd-inspecttree").dynatree("destroy"),this.inspectTree=null)},onPopoverOpen:function(){var t=n.entities.get(n.service("rdfa").getElementSubject(e("#t3-page-metainformation"))),r=t.get(h.ContentModule.TYPO3_NAMESPACE+"title"),i=e("#t3-page-metainformation").attr("about");this.inspectTree&&i!==e("#t3-dd-inspecttree").dynatree("getTree").getRoot().getChildren()[0].data.key&&e("#t3-dd-inspecttree").dynatree("destroy"),this.inspectTree=e("#t3-dd-inspecttree").dynatree({debugLevel:0,cookieId:null,persist:!1,children:[{title:r,key:i,isFolder:!0,expand:!1,isLazy:!0,autoFocus:!0,select:!1,active:!1,unselectable:!0,addClass:"typo3_neos_nodetypes-page"}],dnd:{autoExpandMS:1e3,preventVoidMoves:!0,onDragStart:function(e){},onDragEnter:function(e,t){return e.data.nodeType==="TYPO3.Neos.NodeTypes:Section"?["before","after","over"]:["before","after"]},onDragOver:function(e,t,n){if(e.isDescendantOf(t))return!1},onDrop:function(e,t,n,r,i){var s=n==="over"?"into":n;t.move(e,n),h.ContentModule.showPageLoader(),TYPO3_Neos_Service_ExtDirect_V1_Controller_NodeController.move(t.data.key,e.data.key,s,function(e){e!==null&&e.success===!0?(t.data.key=e.data.newNodePath,h.ContentModule.reloadPage()):h.Common.notification.error("Unexpected error while moving node: "+JSON.stringify(e))})},onDragStop:function(){}},onLazyRead:function(e){if(e._currentlySendingExtDirectAjaxRequest)return;e._currentlySendingExtDirectAjaxRequest=!0,TYPO3_Neos_Service_ExtDirect_V1_Controller_NodeController.getChildNodesForTree(e.data.key,"!TYPO3.TYPO3CR:Folder",0,function(t){e._currentlySendingExtDirectAjaxRequest=!1,t!==null&&t.success===!0?(e.setLazyNodeStatus(DTNodeStatus_Ok),e.addChild(t.data)):(e.setLazyNodeStatus(DTNodeStatus_Error),h.Common.Notification.error("Page Tree loading error."))})},onClick:function(t,n){var r=t.data.key,i=150,s=e('[about="'+r+'"]');h.Content.Model.NodeSelection.updateSelection(s),e("html, body").animate({scrollTop:s.offset().top-i},500)}}),this.inspectTree.dynatree("getRoot").getChildren()[0].expand(!0)}}),h.Content.UI.SaveIndicator=t.View.extend({saveRunning:!1,lastSuccessfulTransfer:null,template:t.Handlebars.compile(l),lastSuccessfulTransferLabel:function(){var e=this.get("lastSuccessfulTransfer");if(e!==null){function t(e){return e<10?"0"+e:e}return"Saved at "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())}return""}.property("lastSuccessfulTransfer")}),h.Content.UI.PublishPageButton=h.Content.UI.Button.extend({label:"Publish Page",disabled:function(){return this.get("_noChanges")||this.get("_saveRunning")}.property("_noChanges","_saveRunning"),target:"T3.Content.Model.PublishableNodes",action:"publishAll",_connectionFailedBinding:"T3.Content.Controller.ServerConnection._failedRequest",_saveRunningBinding:"T3.Content.Controller.ServerConnection._saveRunning",_noChangesBinding:"T3.Content.Model.PublishableNodes.noChanges",classNameBindings:["connectionStatusClass"],classNames:["btn-publish"],connectionStatusClass:function(){var e="t3-connection-status-";return e+=this.get("_connectionFailed")?"down":"up",e}.property("_connectionFailed")}),h.Content.UI.Util=h.Content.UI.Util||{},h.Content.UI.Util.AddContentElementHandleBars=function(t,n,r,i){var s,o;if(i===!0){s="t3-section-handle-container";if(t.prev()&&t.prev().hasClass(s))return;return o=e("<div />",{"class":"t3-ui "+s}).insertBefore(t),h.Content.UI.SectionHandle.create({_element:t,_collection:r,_entityCollectionIndex:n}).appendTo(o)}s="t3-contentelement-handle-container";if(!t||t.find("> ."+s).length>0)return;return o=e("<div />",{"class":"t3-ui "+s}).prependTo(t),t.height()<16&&t.css("min-height","16px"),h.Content.UI.ContentElementHandle.create({_element:t,_collection:r,_entityCollectionIndex:n}).appendTo(o)},h.Content.UI.Util.AddNotInlineEditableOverlay=function(n,r){var i=function(){window.setTimeout(function(){n.find("> .t3-contentelement-overlay").css({width:n.width(),height:n.height()})},10)};if(n.hasClass("t3-not-inline-editable")){var s=e("<div />",{"class":"t3-contentelement-overlay",click:function(n){e(".t3-primary-editor-action").length>0&&setTimeout(function(){e(".t3-primary-editor-action").click(),t.View.views[jQuery(".t3-primary-editor-action").attr("id")]&&t.View.views[jQuery(".t3-primary-editor-action").attr("id")].toggle&&t.View.views[jQuery(".t3-primary-editor-action").attr("id")].toggle()},1),n.preventDefault()}}).insertBefore(n.find("> .t3-contentelement-handle-container"));e("<span />",{"class":"t3-contentelement-overlay-icon"}).appendTo(s),i(),r.on("change",function(){i()})}}}),define("neos/content/controller",["jquery","create","vie/entity","neos/common","neos/content/model"],function(e,t,n){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("neos/content/controller");var r=window.T3||{};r.Content=r.Content||{};var i=Ember.Object.extend({previewMode:!1,init:function(){r.Common.LocalStorage.getItem("previewMode")===!0&&this.togglePreview()},togglePreview:function(){this.set("previewMode",!this.get("previewMode"))},onTogglePreviewMode:function(){var n=this.get("previewMode");n?t.disableEdit():t.enableEdit(),e("body").toggleClass("t3-ui-previewmode t3-ui-controls")}.observes("previewMode"),onPreviewModeChange:function(){r.Common.LocalStorage.setItem("previewMode",this.get("previewMode"))}.observes("previewMode")}).create(),s=Ember.Object.extend({wireframeMode:!1,init:function(){r.Common.LocalStorage.getItem("wireframeMode")===!0&&(this.toggleWireframeMode(),e("#t3-ui-createsection-input").keypress(function(t){(t.keyCode||t.which)===13&&e("#t3-ui-createsection-button").click()}),e("#t3-ui-createsection-button").click(function(){var t=e("#t3-ui-createsection-input").val();t===""?r.Common.Notification.error("You need to give a name for the new content section."):r.Content.Controller.Wireframe.createSection(t)}))},toggleWireframeMode:function(){this.set("wireframeMode",!this.get("wireframeMode"))},onWireframeModeChange:function(){var e;e=this.get("wireframeMode"),typeof TYPO3_Neos_Service_ExtDirect_V1_Controller_UserController=="object"&&(r.ContentModule.showPageLoader(),TYPO3_Neos_Service_ExtDirect_V1_Controller_UserController.updatePreferences({"contentEditing.wireframeMode":e},function(){r.Common.LocalStorage.setItem("wireframeMode",e),window.location.reload(!1)}))}.observes("wireframeMode"),createSection:function(t){var n=e("#t3-page-metainformation").attr("about");r.ContentModule.showPageLoader(),TYPO3_Neos_Service_ExtDirect_V1_Controller_NodeController.create(n,{nodeType:"TYPO3.Neos.NodeTypes:Section",nodeName:t},"into",function(t){t.success==1&&(e("#t3-ui-createsection-input").val(""),r.ContentModule.reloadPage())})}}).create(),o=Ember.Object.extend({pageTreeMode:!1,init:function(){r.Common.LocalStorage.getItem("pageTreeMode")===!0&&(e("body").addClass("t3-tree-panel-open"),this.togglePageTreeMode())},togglePageTreeMode:function(){this.set("pageTreeMode",!this.get("pageTreeMode"))},onPageTreeModeChange:function(){var t=this.get("pageTreeMode");typeof TYPO3_Neos_Service_ExtDirect_V1_Controller_UserController=="object"&&(t===!0?e("body").addClass("t3-tree-panel-open"):e("body").removeClass("t3-tree-panel-open"),TYPO3_Neos_Service_ExtDirect_V1_Controller_UserController.updatePreferences({"contentEditing.pageTreeMode":t},function(){r.Common.LocalStorage.setItem("pageTreeMode",t)}))}.observes("pageTreeMode")}).create(),u=Ember.Object.extend({inspectMode:!1,onInspectModeChange:function(){var e=this.get("inspectMode");e?jQuery("body").addClass("t3-inspect-active"):jQuery("body").removeClass("t3-inspect-active")}.observes("inspectMode")}).create(),a=Ember.Object.extend({_modified:!1,_unmodified:function(){return!this.get("_modified")}.property("_modified"),inspectorMode:!0,nodeProperties:null,configuration:null,selectedNode:null,cleanProperties:null,init:function(){this.set("nodeProperties",Ember.Object.create()),this.set("configuration",r.Common.LocalStorage.getItem("inspectorConfiguration")||{}),Ember.addObserver(this,"configuration",function(){e.isEmptyObject(this.get("configuration"))===!1&&r.Common.LocalStorage.setItem("inspectorConfiguration",this.get("configuration"))}),r.Common.LocalStorage.getItem("inspectorMode")===!1?this.toggleInspectorMode():e("body").addClass("t3-inspector-panel-open")},toggleInspectorMode:function(){this.set("inspectorMode",!this.get("inspectorMode"))},onInspectorModeChange:function(){var t=this.get("inspectorMode");typeof TYPO3_Neos_Service_ExtDirect_V1_Controller_UserController=="object"&&(t===!0?e("body").addClass("t3-inspector-panel-open"):e("body").removeClass("t3-inspector-panel-open"),TYPO3_Neos_Service_ExtDirect_V1_Controller_UserController.updatePreferences({"contentEditing.inspectorMode":t},function(){r.Common.LocalStorage.setItem("inspectorMode",t)}))}.observes("inspectorMode"),sectionsAndViews:function(){var e=r.Content.Model.NodeSelection.get("selectedNodeSchema");if(!e||!e.properties)return[];var t=Ember.get(e,"ui.inspector.groups");if(!t)return[];var n=[];return jQuery.each(t,function(t,r){var i=[];jQuery.each(e.properties,function(e,n){Ember.get(n,"ui.inspector.group")===t&&i.push(jQuery.extend({key:e,elementId:Ember.generateGuid(),isBoolean:n.type==="boolean"},n))}),i.sort(function(e,t){return(Ember.get(e,"ui.inspector.position")||9999)-(Ember.get(t,"ui.inspector.position")||9999)}),n.push(jQuery.extend({},r,{properties:i,group:t}))}),n.sort(function(e,t){return(e.position||9999)-(t.position||9999)}),n}.property("T3.Content.Model.NodeSelection.selectedNodeSchema"),onSelectedNodeChange:function(){var e=r.Content.Model.NodeSelection.get("selectedNode"),t={};this.set("selectedNode",e),e&&(t=e.get("attributes")),this.set("cleanProperties",t),this.set("nodeProperties",Ember.Object.create(t))}.observes("T3.Content.Model.NodeSelection.selectedNode"),onNodePropertiesChange:function(){var e=this,t=this.get("selectedNode"),n,r=[],i;t&&(n=t.get("nodeTypeSchema"),i=this.get("nodeProperties"),n.properties&&jQuery.each(n.properties,function(e,t){(!t.ui||t.ui.inlineEditable!==!0)&&r.push(e)}),r.length>0&&jQuery.each(r,function(t,n){i.addObserver(n,null,function(){e._somePropertyChanged()})}))}.observes("nodeProperties"),_somePropertyChanged:function(){var e=this,t=!1;_.each(this.get("cleanProperties"),function(n,r){e.get("nodeProperties").get(r)!==n&&(t=!0)}),this.set("_modified",t)},onApplyButtonToggle:function(e){e&&this.apply()},apply:function(){var e=this,t,n=r.Content.Model.NodeSelection.get("selectedNodeSchema"),i=!1;_.each(this.get("cleanProperties"),function(t,r){e.get("nodeProperties").get(r)!==t&&(e.get("selectedNode").setAttribute(r,e.get("nodeProperties").get(r)),Ember.get(n,"properties."+r+".ui.reloadIfChanged")&&(i=!0))}),i===!0&&r.ContentModule.showPageLoader(),Backbone.sync("update",this.get("selectedNode._vieEntity"),{success:function(e,t){i===!0&&(t&&t.data&&t.data.nextUri?r.ContentModule.loadPage(t.data.nextUri):r.ContentModule.reloadPage())}}),this.set("_modified",!1),t=this.get("selectedNode.attributes"),this.set("cleanProperties",t),this.set("nodeProperties",Ember.Object.create(t))},revert:function(){this.set("nodeProperties",Ember.Object.create(this.get("cleanProperties"))),this.set("_modified",!1)}}).create(),f=Ember.Object.extend({_clipboard:null,_elementIsAddingNewContent:null,clipboardContainsContent:function(){return this.get("_clipboard")!==null}.property("_clipboard"),init:function(){r.Common.LocalStorage.getItem("clipboard")&&this.set("_clipboard",r.Common.LocalStorage.getItem("clipboard"))},cut:function(e){this.get("_clipboard.type")==="cut"&&this.get("_clipboard.nodePath")===e?this.set("_clipboard",null):this.set("_clipboard",{type:"cut",nodePath:e})},copy:function(e){this.get("_clipboard.type")==="copy"&&this.get("_clipboard.nodePath")===e?this.set("_clipboard",null):this.set("_clipboard",{type:"copy",nodePath:e})},pasteAfter:function(e){return this._paste(e,"after")},_paste:function(e,t){var n=this,i=this.get("_clipboard");if(!i.nodePath)return r.Common.Notification.notice("No node found on the clipboard"),!1;if(i.nodePath===e&&i.type==="cut")return r.Common.Notification.notice("It is not possible to paste a node "+t+" itself."),!1;var s=i.type==="cut"?"move":"copy";return TYPO3_Neos_Service_ExtDirect_V1_Controller_NodeController[s].call(n,i.nodePath,e,t,function(e){e.success&&(n.set("_clipboard",null),r.ContentModule.reloadPage())}),!0},remove:function(e){e.set("typo3:_removed",!0),e.save(null),r.Content.Model.NodeSelection.updateSelection()},addAbove:function(e,t,n){this._add(e,t,"before",n)},addBelow:function(e,t,n){this._add(e,t,"after",n)},addInside:function(e,t,n){this._add(e,t,"into",n)},_add:function(t,n,r,i){var s=this;TYPO3_Neos_Service_ExtDirect_V1_Controller_NodeController.createAndRender(n.getSubject().substring(1,n.getSubject().length-1),n.get("typo3:_typoscriptPath"),{nodeType:t,properties:{}},r,function(t){var n=e(t.collectionContent).find('[about="'+t.nodePath+'"]').first();i(t.nodePath,n),s.set("_elementIsAddingNewContent",null)})},pasteBefore:function(e,t){return this._paste(e,t,"before")},removeFromClipboard:function(t,n){var i=r.Content.Model.BlockManager.getBlockByNodePath(t),s=this.get("_clipboard");s.nodePath===t&&this.set("_clipboard",null),i.hideHandle("remove-from-cut"),i.hideHandle("remove-from-copy"),e(".t3-paste-before-handle, .t3-paste-after-handle").addClass("t3-handle-hidden"),e(".t3-add-above-handle, .t3-add-below-handle").removeClass("t3-handle-hidden"),i.showHandle("cut"),i.showHandle("copy")},onClipboardChange:function(){var e=this.get("_clipboard");r.Common.LocalStorage.setItem("clipboard",e)}.observes("_clipboard")}).create(),l=Ember.Object.extend({_lastSuccessfulTransfer:null,_failedRequest:!1,_pendingSave:!1,_saveRunning:!1,sendAllToServer:function(e,t,n,i,s){var o=this,u=e.get("length"),a=function(e){return function(t,n){if(!n.result||n.result.success!==!0){r.Common.Notification.error("Server communication error, reload the page to return to a safe state if another publish does not work"),o.set("_failedRequest",!0);return}o.set("_failedRequest",!1),o.set("_lastSuccessfulTransfer",new Date),s&&s(e,n),u--,u<=0&&(o.set("_saveRunning",!1),i&&i())}};e.forEach(function(e){var r=t(e).slice();r.push(a(e)),o.set("_saveRunning",!0),n.apply(window,r)})},statusClass:function(){return this.set("_saveRunning",!1),"t3-connection-status-"+this.get("_failedRequest")?"down":"up"}.observes("_failedRequest")}).create();r.Content.Controller={Preview:i,PageTree:o,Wireframe:s,Inspect:u,NodeActions:f,Inspector:a,ServerConnection:l},window.T3=r}),define("jquery.hotkeys",["jquery"],function(e){function r(t){if(typeof t.data!="string")return;var n=t.handler,r=t.data.toLowerCase().split(" ");t.handler=function(t){if(!(this===t.target||!/textarea|select/i.test(t.target.nodeName)&&t.target.type!=="text"))return;var i=t.type!=="keypress"&&e.hotkeys.specialKeys[t.which],s=String.fromCharCode(t.which).toLowerCase(),o,u="",a={};t.altKey&&i!=="alt"&&(u+="alt+"),t.ctrlKey&&i!=="ctrl"&&(u+="ctrl+"),t.metaKey&&!t.ctrlKey&&i!=="meta"&&(u+="meta+"),t.shiftKey&&i!=="shift"&&(u+="shift+"),i?a[u+i]=!0:(a[u+s]=!0,a[u+e.hotkeys.shiftNums[s]]=!0,u==="shift+"&&(a[e.hotkeys.shiftNums[s]]=!0));for(var f=0,l=r.length;f<l;f++)if(a[r[f]])return n.apply(this,arguments)}}var t=window.T3||{},n=e;e.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:r}})}),define("neos/contentmodule",["jquery","vie/instance","emberjs","create","text!./templates/content/ui/topToolbarTemplate.html","text!./templates/content/ui/footerTemplate.html","neos/common","neos/content/model","neos/content/ui","neos/content/controller","jquery.hotkeys"],function(e,t,n,r,i,s){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("neos/contentmodule"),n.Application.extend(n.Evented,{TYPO3_NAMESPACE:"http://www.typo3.org/ns/2012/Flow/Packages/Neos/Content/",showDevelopmentFeatures:!1,currentUri:window.location.href,_isLoadingPage:null,_launcher:null,vie:null,_activeEntity:null,_vieOptions:{stanbolUrl:null,dbPediaUrl:null},$loader:null,spinner:null,bootstrap:function(){this.set("vie",t),this._initializeInspector(),this._initializeToolbar(),this._initializeTreePanel(),this._initializeFooter(),this._initializeLauncher(),this._initializeAjaxPageReload(),this._initializeVie(),this._initializeDevelopmentFeatures(),this._initializeNotifications(),e("body").toggleClass("t3-ui-controls t3-backend"),this._setPagePosition(),this._initializeShortcuts(),this._initializeHistoryManagement(),e(".aloha-sidebar-bar").remove()},_initializeNotifications:function(){e("body").append('<div class="t3-notification-container t3-ui"></div>'),e("body").midgardNotifications()},_initializeDevelopmentFeatures:function(){var e=this;window.addEventListener("hashchange",function(){e._enableDevelopmentFeaturesIfNeeded()},!1),this._enableDevelopmentFeaturesIfNeeded()},_initializeDoubleClickEdit:function(){e(".t3-contentelement").live("dblclick",function(t){e(".t3-primary-editor-action").length>0&&e(".t3-primary-editor-action").click(),t.preventDefault()})},_initializeVie:function(){var n=this;this.get("_vieOptions").stanbolUrl&&t.use(new t.StanbolService({proxyDisabled:!0,url:this.get("_vieOptions").stanbolUrl})),this.get("_vieOptions").dbPediaUrl&&t.use(new t.DBPediaService({proxyDisabled:!0,url:this.get("_vieOptions").dbPediaUrl})),e.when(T3.ResourceCache.get(T3.Configuration.VieSchemaUri),T3.ResourceCache.get(T3.Configuration.NodeTypeSchemaUri)).done(function(e,r){var i=JSON.parse(e);VIE.Util.loadSchemaOrg(t,i,null),T3.Configuration.Schema=JSON.parse(r),n._initializeVieAfterSchemaIsLoaded(t)}).fail(function(e,t,n){console.warn("Error loading schemas.",e,t,n)})},_initializeVieAfterSchemaIsLoaded:function(){T3.Content.Model.NodeSelection.initialize(),T3.Content.Model.PublishableNodes.initialize(),this.trigger("pageLoaded"),this._registerVieNodeTypeTemplateCallbacks(),this._initializeCreateJs()},_registerVieNodeTypeTemplateCallbacks:function(){_.each(t.types.toArray(),function(n){var i=n.id.substring(1,n.id.length-1).replace(T3.ContentModule.TYPO3_NAMESPACE,""),s=t.namespaces.getPrefix(n.id);s==="typo3"&&t.service("rdfa").setTemplate("typo3:"+i,"typo3:content-collection",function(n,i,s){var o=n.get("@type"),u=o.id.substring(1,o.id.length-1).replace(T3.ContentModule.TYPO3_NAMESPACE,""),a=null,f=null,l=function(e,s){n.set("@subject",e),t.load({element:s}).from("rdfa").execute(),i(s),r.enableEdit()};_.each(s.collection.models,function(e){n===e&&f?(a=f,T3.Content.Controller.NodeActions.addBelow(u,a,l)):f=e}),a===null&&(s.collection.models.length===1?T3.Content.Controller.NodeActions.addInside(u,t.entities.get(e(s.el).attr("about")),l):T3.Content.Controller.NodeActions.addAbove(u,s.collection.models[1],l))})})},_initializeCreateJs:function(){e("body").midgardStorage({vie:t,url:function(){},localStorage:!0,autoSave:!0}),r.initialize()},_initializeShortcuts:function(){var t=this;e(document).bind("keydown","alt+p",function(){return T3.Content.Controller.Preview.togglePreview(),!1}).bind("keydown","alt+l",function(n){if(e(n.target).closest(".t3-inline-editable").length>0)return;return t._launcher.activate(),!1})},_initializeHistoryManagement:function(){var e=this;window.history&&window.history.replaceState({uri:window.location.href},document.title,window.location.href),window.addEventListener("popstate",function(t){t.state&&e.loadPage(t.state.uri,!0)})},_enableDevelopmentFeaturesIfNeeded:function(){window.location.hash==="#dev"?(this.set("showDevelopmentFeatures",!0),T3.Common.LocalStorage.setItem("showDevelopmentFeatures",!0)):window.location.hash==="#nodev"?(this.set("showDevelopmentFeatures",!1),T3.Common.LocalStorage.removeItem("showDevelopmentFeatures")):T3.Common.LocalStorage.getItem("showDevelopmentFeatures")&&this.set("showDevelopmentFeatures",!0)},_initializeInspector:function(){var t=T3.Content.UI.Inspector.create({elementId:"t3-inspector",classNames:["t3-ui","t3-inspector"]});t.appendTo(e("body"))},_initializeToolbar:function(){var t=T3.Content.UI.Toolbar.extend({elementId:"t3-toolbar",template:n.Handlebars.compile(i)}).create();t.appendTo(e("body"))},_initializeLauncher:function(){this._launcher=T3.Common.Launcher.create({searchItemsBinding:"T3.Common.Launcher.SearchController.searchItems"}),this._launcher.appendTo(e("#t3-launcher"))},_initializeTreePanel:function(){var t=T3.Content.UI.TreePanel.create({elementId:"t3-tree-panel",classNames:["t3-ui"]});t.appendTo(e("body"))},_initializeFooter:function(){var t=T3.Content.UI.Toolbar.create({elementId:"t3-footer",template:n.Handlebars.compile(s)});t.appendTo(e("body"))},_initializeAjaxPageReload:function(){this._linkInterceptionHandler(e("a:not(.t3-ui a, .aloha-floatingmenu a)")),this._linkInterceptionHandler("a.t3-link-ajax",!0)},_setPagePosition:function(){var t=location.hash;if(t.length>0){var n=e("#"+t.substring(1));n.length>0&&window.scroll(0,n.position().top-e("body").offset().top)}},reloadPage:function(){this.loadPage(T3.ContentModule.currentUri)},_linkInterceptionHandler:function(t,n){function i(t,n){t.preventDefault();var i=e(n);!i.attr("href").match(/[a-z]*:\/\//)&&i.parents(".t3-contentelement-active").length===0&&i.parents(".t3-inline-editable").length===0&&r.loadPage(i.attr("href"))}var r=this;n===!0?e(document).delegate(t,"click",function(e){i(e,this)}):e(t).click(function(e){i(e,this)})},loadPage:function(t,n){e(".t3-new-contentelement-popover").remove();var i=this;if(t==="#"){var s=e("#t3-page-metainformation").attr("data-__siteroot"),o=s.substr(s.lastIndexOf("@")+1);t="@"+o}var u=[];e(".t3-reloadable-content").each(function(){if(!e(this).parents(".t3-reloadable-content").length){var t=e(this).attr("id");if(!t)throw"You have marked a DOM element with the CSS class t3-reloadable-content; but this element has no ID.";u.push("#"+t)}});if(u.length===0){window.location.href=t;return}this.showPageLoader(),this.set("_isLoadingPage",!0),window.history&&!n&&window.history.pushState({uri:t},document.title,t);var a=e(".t3-contentelement-active").attr("about");e.get(t,function(n,s){if(s==="success"){var o=e(n);e.each(u,function(n,r){o.find(r).length>0?e(r).replaceWith(o.find(r)):o.filter(r).length>0?e(r).replaceWith(o.filter(r)):(typeof console!="undefined"&&console.log("Target HTML selector was not found because of a different page structure"),window.location.href=t),i._linkInterceptionHandler(e(r).find("a"))});var f=o.filter("#t3-page-metainformation");f.length===0?window.location.href=t:T3.ContentModule.set("currentUri",t),e("#t3-page-metainformation").replaceWith(f),e("title").html(o.filter("title").html()),i._setPagePosition(),T3.Content.Model.NodeSelection.initialize(),T3.Content.Model.PublishableNodes.initialize(),i.trigger("pageLoaded"),r.enableEdit();var l=e('[about="'+a+'"]');l.length===1&&T3.Content.Model.NodeSelection.updateSelection(l)}else window.location.href=t;i.set("_isLoadingPage",!1),i.hidePageLoader()})},showPageLoader:function(){if(this.$loader!==null){this.$loader.fadeTo("fast",.8),this.spinner.spin(this.$loader.get(0));return}var t=this;require(["spinjs"],function(n){t.$loader=e("<div />").addClass("t3-pageloader-wrapper").fadeTo(0,.8).appendTo(e("body")),t.spinner=(new n({lines:13,length:15,width:4,radius:10,corners:1,rotate:0,color:"#000",speed:1,trail:64,shadow:!1,hwaccel:!1,className:"t3-pageloader",zIndex:2e9,top:"auto",left:"auto"})).spin(t.$loader.get(0))})},hidePageLoader:function(){var e=this;this.$loader.fadeOut("fast",function(){e.spinner.stop()})},hidePageLoaderSpinner:function(){this.spinner!==null&&this.spinner.stop()}}).create()}),define("neos/resourcecache",["jquery"],function(e){function r(t){if(n[t]!==undefined)return;var r,i=window.sessionStorage?window.sessionStorage.getItem(t):null;n[t]=new e.Deferred,i===null?r=e.ajax(t,{dataType:"text",success:function(e){window.sessionStorage&&window.sessionStorage.setItem(t,e),n[t].resolve(e)},error:function(e,r,i){n[t].reject(e,r,i)}}):n[t].resolve(i)}function i(e){return n[e]===undefined&&r(e),n[e]}window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("neos/resourcecache");var t=window.T3||{},n={};t.ResourceCache={preload:r,get:i},window.T3=t}),define("storage",["vie/entity","neos/content/controller","neos/content/model","backbone"],function(e){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("storage"),Backbone.sync=function(t,n,r){var i={create:function(e,t){console.log("CREATE",arguments)},read:function(e,t){console.log("READ",arguments)},update:function(e,t){var n=this._convertModelToJson(e);T3.Content.Controller.ServerConnection.set("_saveRunning",!0),window.TYPO3_Neos_Service_ExtDirect_V1_Controller_NodeController.update(n,function(n){T3.Content.Controller.ServerConnection.set("_saveRunning",!1),n!==undefined&&(e.set("typo3:__workspacename",n.data.workspaceNameOfNode,{silent:!0}),T3.Content.Controller.ServerConnection.set("_lastSuccessfulTransfer",new Date),T3.Content.Model.PublishableNodes._updatePublishableEntities(),t&&t.success&&t.success(e,n))})},"delete":function(e,t){console.log("DELETE",arguments)},_convertModelToJson:function(t){var n=t.fromReference(t.id),r=e.extractAttributesFromVieEntity(t,function(t,n){return t[0]==="_"&&t[1]==="_"?!1:!0});return r.__contextNodePath=n,r}};i[t].call(i,n,r)}}),function(e){e.fn.lionbars=function(t,n,r,i){function k(e,t,n,r,i,s,o,u,a,f,l){var c,h,p,d;e.hasClass("vertical")?(d=o+l-a,h=d,h=h<2?2:h,h=h>e.siblings(".scrollbar_bg.vertical").height()-(e.height()+2)?e.siblings(".scrollbar_bg.vertical").height()-(e.height()+2):h,e.css({top:h}),t.scrollTop(d/r)):(p=s+f-u,c=p,c=c<2?2:c,c=c>e.siblings(".scrollbar_bg.horizontal").width()-(e.width()+2)?e.siblings(".scrollbar_bg.horizontal").width()-(e.width()+2):c,e.css({left:c}),t.scrollLeft(p/i))}function L(t){t=e(t);var n=t.find(".nWrap"),r,i,s,o;n.hasClass("hscroll")?(r=n.siblings(".scrollbar.vertical"),i=(t.height()-9-(r.height()-2))/(n[0].scrollHeight-t.height())):(r=n.siblings(".scrollbar.vertical"),i=(t.height()-(r.height()-2))/(n[0].scrollHeight-t.height())),n.attr("scrollfactorV",i),n.hasClass("vscroll")?(s=n.siblings(".scrollbar.horizontal"),o=(t.width()-9-(s.width()-2))/(n[0].scrollWidth-t.width())):(s=n.siblings(".scrollbar.horizontal"),o=(t.width()-(s.width()-2))/(n[0].scrollWidth-t.width())),n.attr("scrollfactorH",o)}function A(n,s,o,u){n=e(n);var a='<div class="scrollbar vertical nbar"></div><div class="scrollbar_bg vertical nbar"></div>',f='<div class="scrollbar horizontal nbar"></div><div class="scrollbar_bg horizontal nbar"></div>',l=n.find(".nWrap");s===1&&(n.prepend(a),l.css({width:l.width()+o}).addClass("vscroll")),s===2&&(n.prepend(f),l.css({height:l.height()+u}).addClass("hscroll")),s===3&&(n.prepend(a,f),l.css({width:l.width()+o,height:l.height()+u}).addClass("vscroll hscroll"));var c=25,h=n.find(".nWrap")[0].scrollHeight,p=n.find(".nWrap")[0].scrollWidth,d=n.height(),v=n.width();l.hasClass("vscroll")&&(p+=15),l.hasClass("hscroll")&&(h+=15),u=d*(d/h),o=v*(v/p),u=u<c?c:u,o=o<c?c:o,n.find(".scrollbar.vertical").css({height:u}),n.find(".scrollbar.horizontal").css({width:o}),l.hasClass("hscroll")?n.find(".scrollbar_bg.vertical").css({height:n.find(".scrollbar_bg.vertical").height()-13}):n.find(".scrollbar_bg.vertical").css({height:n.find(".scrollbar_bg.vertical").height()-4}),l.hasClass("vscroll")?n.find(".scrollbar_bg.horizontal").css({width:n.find(".scrollbar_bg.horizontal").width()-13}):n.find(".scrollbar_bg.horizontal").css({width:n.find(".scrollbar_bg.horizontal").width()-4}),t==="light"?(n.find(".scrollbar").addClass("light"),n.find(".scrollbar_bg").addClass("light")):(n.find(".scrollbar").addClass("dark"),n.find(".scrollbar_bg").addClass("dark")),r&&n.find(".scrollbar").css({opacity:1}),i&&n.find(".scrollbar_bg").css({opacity:1})}function O(t){t=e(t);var n=[],r=0,i,s;return t.css({overflow:"auto"}).prepend('<div class="nCheck"></div>'),t.find(".nCheck").css({width:"100%",height:1,opacity:1,background:"red"}),t.width()>t.find(".nCheck").width()&&(r+=1,i=t.width()-t.find(".nCheck").width()),t.find(".nCheck").css({width:1,height:"100%"}),t.height()>t.find(".nCheck").height()&&(r+=2,s=t.height()-t.find(".nCheck").height()),t.find(".nCheck").remove(),[r,i,s]}function M(t,n){t=e(t),content=t.html(),t.html(""),t.append('<div class="nWrap" id="'+n+'"></div>'),nWrap=t.find(".nWrap"),e(nWrap).html(content);var r=t.css("padding-top"),i=t.css("padding-right"),s=t.css("padding-bottom"),o=t.css("padding-left");r=parseInt(r.replace("px",""),10),i=parseInt(i.replace("px",""),10),s=parseInt(s.replace("px",""),10),o=parseInt(o.replace("px",""),10),t.css({padding:0,width:t.width()+o+i,height:t.height()+r+s,overflow:"hidden",position:"relative"}),nWrap.css({"padding-top":r,"padding-left":o,"padding-bottom":s,"padding-right":i,width:t.width()-o-i,height:t.height()-r-s})}var s=e(this),o=0;s.each(function(){var t=e(this),n=O(t);o+=1,n!==0&&(M(t,o),A(t,n[0],n[1],n[2]),L(t))});var u,a,f,l,c=!1,h=0,p,d,v=!1,m=!1,g,y,b,w,E,S,x,T,N=!1,C=!0;return e(".nWrap").mouseover(function(){n&&e(this).siblings(".scrollbar").stop().animate({opacity:1},200)}),e(".nWrap").mouseout(function(){var t=e(this);!c&&!v&&(c=!0,setTimeout(function(){h=0,c=!1,n&&e(".nbar").stop().animate({opacity:0},400),!n&&r&&t.siblings(".scrollbar_bg").stop().animate({opacity:0},400)},1e3))}),e(".nWrap").scroll(function(t){v||(e(h).attr("id")!==e(this).attr("id")&&(h=e(this),r||h.siblings(".scrollbar").stop().animate({opacity:1},200),p=h.attr("scrollfactorV"),d=h.attr("scrollfactorH"),u=h.siblings(".scrollbar.vertical"),a=h.siblings(".scrollbar.horizontal")),f=h.scrollTop()*p,f=f<2?2:f,u.css({top:f}),l=h.scrollLeft()*d,l=l<2?2:l,a.css({left:l}),!c&&!r&&(c=!0,setTimeout(function(){h=0,c=!1,e(".nbar").stop().animate({opacity:0},400)},1e3)))}),e(".scrollbar").mouseover(function(t){var n=e(this);i||n.siblings(".scrollbar_bg").stop().animate({opacity:1},400),r||n.add(n.siblings(".scrollbar")).stop().animate({opacity:1},400),N=!0}),e(".scrollbar").mouseout(function(t){N=!1,!c&&!v&&(c=!0,setTimeout(function(){c=!1,!N&&!r?e(".nbar").stop().animate({opacity:0},400):!N&&!i&&e(".scrollbar_bg").stop().animate({opacity:0},400)},1e3))}),e(".scrollbar").mousedown(function(t){t.preventDefault(),v=!0,g=e(this),E=t.pageX,S=t.pageY,b=e(this).position().left,w=e(this).position().top}),e(document).mousemove(function(e){v&&!m&&(m=!0,y=g.siblings(".nWrap"),d=y.attr("scrollfactorh"),p=y.attr("scrollfactorv")),v&&(x=e.pageX,T=e.pageY,k(g,y,e,p,d,b,w,E,S,x,T))}),e(document).mouseup(function(t){v&&(v=!1,m=!1,!c&&!v&&(c=!0,setTimeout(function(){c=!1,!N&&!r?e(".nbar").stop().animate({opacity:0},400):!N&&!i&&e(".scrollbar_bg").stop().animate({opacity:0},400)},1e3)))}),this.each(function(){var t=e(this)})}}(jQuery),define("jquery.lionbars",function(){}),window._requirejsLoadingTrace=[],window.renderLoadingTrace=function(){return JSON.stringify(window._requirejsLoadingTrace)},require({baseUrl:window.neosJavascriptBasePath,urlArgs:window.localStorage.showDevelopmentFeatures?"bust="+(new Date).getTime():"",paths:{Library:"../Library/",spinjs:"../Library/spinjs/spin.min",chosen:"../Library/chosen/chosen/chosen.jquery.min","jquery.lionbars":"../Library/jquery-lionbars/jQuery.lionbars.0.2.1","jquery.hotkeys":"../Library/jquery-hotkeys/jquery.hotkeys","jquery.popover":"../Library/jquery-popover/jquery.popover","jquery.jcrop":"../Library/jcrop/js/jquery.Jcrop.min","jquery.plupload":"../Library/plupload/js/plupload","jquery.plupload.html5":"../Library/plupload/js/plupload.html5","bootstrap.dropdown":"../Library/twitter-bootstrap/js/bootstrap-dropdown","bootstrap.alert":"../Library/twitter-bootstrap/js/bootstrap-alert","bootstrap.notify":"../Library/bootstrap-notify/js/bootstrap-notify",codemirror:"../Library/codemirror2/lib/codemirror","codemirror.xml":"../Library/codemirror2/mode/xml/xml","codemirror.css":"../Library/codemirror2/mode/css/css","codemirror.javascript":"../Library/codemirror2/mode/javascript/javascript","codemirror.htmlmixed":"../Library/codemirror2/mode/htmlmixed/htmlmixed","jquery.cookie":"../Library/jquery-cookie/jquery.cookie","jquery.dynatree":"../Library/jquery-dynatree/js/jquery.dynatree",hallo:"../Library/hallo/hallo",createjs:"../Library/createjs/create",backbone:"../Library/vie/lib/backboneJS/backbone.min",underscorejs:"../Library/vie/lib/underscoreJS/underscore.min",handlebars:"../Library/handlebars/handlebars-1.0.0-rc.3","emberjs-lib":"../Library/emberjs/ember-1.0.0-rc.3"},shim:{emberjs:{deps:["jquery","handlebars"],exports:"Ember"},"neos/contentmodule":["emberjs"],"jquery.lionbars":["jquery"],"jquery-ui":["jquery"],"jquery.cookie":["jquery"],"jquery.dynatree":["jquery-ui"],"jquery.plupload.html5":["jquery.plupload"],"jquery.plupload":["jquery"],"jquery.popover":["jquery"],"jquery.jcrop":["jquery"],"jquery.hotkeys":["jquery"],"bootstrap.dropdown":["jquery"],underscorejs:{exports:"_"},createjs:["jquery-ui"],hallo:["jquery-ui"],backbone:["underscorejs"],"Library/vie/lib/rdfquery/latest/jquery.rdfquery.min":["jquery"],"Library/vie/vie":["jquery","backbone"],"halloplugins/linkplugin":["hallo"]},locale:"en"},["jquery","neos/contentmodule","neos/resourcecache","emberjs","storage","jquery-ui","jquery.lionbars"],function(e,t){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("contentmodule-main");var n=window.T3;n.Configuration=window.T3Configuration,n.ContentModule=t,delete window.T3Configuration,n.ResourceCache.preload(n.Configuration.VieSchemaUri),n.ResourceCache.preload(n.Configuration.NodeTypeSchemaUri),Ember.$(document).ready(function(){n.ContentModule.bootstrap(),Ext.Direct.on("exception",function(e){n.Content.Controller.ServerConnection.set("_failedRequest",!0),n.Common.Notification.error("ExtDirect error: "+e.message),n.ContentModule.hidePageLoaderSpinner()}),ExtDirectInitialization()})}),define("contentmodule-main",function(){})