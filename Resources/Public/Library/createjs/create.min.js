/* Create.js 1.0.0alpha4 - Inline editing toolkit
by Henri Bergius and contributors. Available under the MIT license.
See http://createjs.org for more information
*/(function(e,t){"use strict";e.widget("Midgard.midgardCreate",{options:{toolbar:"full",saveButton:null,state:"browse",highlight:!0,highlightColor:"#67cc08",editorWidgets:{"default":"hallo"},editorOptions:{hallo:{widget:"halloWidget"}},collectionWidgets:{"default":"midgardCollectionAdd"},url:function(){},storagePrefix:"node",workflows:{url:null},notifications:{},vie:null,domService:"rdfa",stanbolUrl:null,dbPediaUrl:null,metadata:{},buttonContainer:".create-ui-toolbar-statustoolarea .create-ui-statustools",templates:{buttonContent:'<%= label %> <i class="icon-<%= icon %>"></i>',button:'<li id="<%= id %>"><a class="create-ui-btn"><%= buttonContent %></a></li>'},localize:function(e,t){return window.midgardCreate.localize(e,t)},language:null},_create:function(){this.vie=this._setupVIE(this.options),this.domService=this.vie.service(this.options.domService);var t=this;window.setTimeout(function(){t._checkSession()},10),this.options.language||(this.options.language=e("html").attr("lang")),this._enableToolbar(),this._enableMetadata(),this._saveButton(),this._editButton(),this._prepareStorage(),this.element.midgardWorkflows&&this.element.midgardWorkflows(this.options.workflows),this.element.midgardNotifications&&this.element.midgardNotifications(this.options.notifications),this._bindShortcuts()},destroy:function(){this.element.midgardStorage("destroy"),this.element.midgardToolbar("destroy"),this.domService.findSubjectElements(this.element).each(function(){e(this).midgardEditable("destroy")}),this.element.midgardWorkflows&&this.element.midgardWorkflows("destroy"),this.element.midgardNotifications&&this.element.midgardNotifications("destroy"),_.isEmpty(this.options.metadata)||this.element.midgardMetadata("destroy"),e.Widget.prototype.destroy.call(this)},_setupVIE:function(e){var t;return t=e.vie?e.vie:new VIE,t.hasService(this.options.domService)||"rdfa"!==this.options.domService||t.use(new t.RdfaService),!t.hasService("stanbol")&&e.stanbolUrl&&t.use(new t.StanbolService({proxyDisabled:!0,url:e.stanbolUrl})),!t.hasService("dbpedia")&&e.dbPediaUrl&&t.use(new t.DBPediaService({proxyDisabled:!0,url:e.dbPediaUrl})),t},_prepareStorage:function(){this.element.midgardStorage({vie:this.vie,url:this.options.url,localize:this.options.localize,language:this.options.language,storagePrefix:this.options.storagePrefix});var t=this;this.element.on("midgardstoragesave",function(){e("#midgardcreate-save a").html(_.template(t.options.templates.buttonContent,{label:t.options.localize("Saving",t.options.language),icon:"upload"}))}),this.element.on("midgardstoragesaved midgardstorageerror",function(){e("#midgardcreate-save a").html(_.template(t.options.templates.buttonContent,{label:t.options.localize("Save",t.options.language),icon:"ok"}))})},_init:function(){this.setState(this.options.state)},setState:function(e){this._setOption("state",e),"edit"===e?this._enableEdit():this._disableEdit(),this._setEditButtonState(e)},setToolbar:function(e){this.options.toolbar=e,(this.element.data("Midgard-midgardToolbar")||this.element.data("midgardToolbar"))&&this.element.midgardToolbar("setDisplay",e)},showNotification:function(e){return this.element.midgardNotifications?this.element.midgardNotifications("create",e):t},configureEditor:function(e,t,i){this.options.editorOptions[e]={widget:t,options:i}},setEditorForContentType:function(e,i){if(this.options.editorOptions[i]===t&&null!==i)throw Error("No editor "+i+" configured");this.options.editorWidgets[e]=i},setEditorForProperty:function(e,i){if(this.options.editorOptions[i]===t&&null!==i)throw Error("No editor "+i+" configured");this.options.editorWidgets[e]=i},_checkSession:function(){if(window.sessionStorage){var e=this.options.storagePrefix+"Midgard.create.toolbar";window.sessionStorage.getItem(e)&&this.setToolbar(window.sessionStorage.getItem(e));var t=this.options.storagePrefix+"Midgard.create.state";window.sessionStorage.getItem(t)&&this.setState(window.sessionStorage.getItem(t)),this.element.on("midgardcreatestatechange",function(e,i){window.sessionStorage.setItem(t,i.state)})}},_bindShortcuts:function(){if(window.Mousetrap){var e=this;window.Mousetrap.bind(["command+e","ctrl+e"],function(){"edit"!==e.options.state&&e.setState("edit")}),window.Mousetrap.bind("esc",function(t){"browse"!==e.options.state&&(t.stopPropagation(),e.setState("browse"))}),window.Mousetrap.bind(["command+s","ctrl+s"],function(t){t.preventDefault(),e.options.saveButton&&(e.options.saveButton.hasClass("ui-state-disabled")||e.options.saveButton.click())})}},_saveButton:function(){if(this.options.saveButton)return this.options.saveButton;var t=this;e(this.options.buttonContainer,this.element).append(e(_.template(this.options.templates.button,{id:"midgardcreate-save",buttonContent:_.template(this.options.templates.buttonContent,{label:t.options.localize("Save",t.options.language),icon:"ok"})}))),this.options.saveButton=e("#midgardcreate-save",this.element),this.options.saveButton.hide(),this.options.saveButton.click(function(){t.element.midgardStorage("saveRemoteAll")}),this.element.on("midgardeditablechanged midgardstorageloaded",function(){t.options.saveButton.button({disabled:!1})}),this.element.on("midgardstoragesaved",function(){t.options.saveButton.button({disabled:!0})}),this.element.on("midgardeditableenable",function(){t.options.saveButton.button({disabled:!0}),t.options.saveButton.show()}),this.element.on("midgardeditabledisable",function(){t.options.saveButton.hide()})},_editButton:function(){var i=this;e(this.options.buttonContainer,this.element).append(e(_.template(this.options.templates.button,{id:"midgardcreate-edit",buttonContent:""}))),e("#midgardcreate-edit",this.element).on("click",function(){return"edit"===i.options.state?(i.setState("browse"),t):(i.setState("edit"),t)})},_setEditButtonState:function(t){var i=this,o={edit:_.template(this.options.templates.buttonContent,{label:i.options.localize("Cancel",i.options.language),icon:"remove"}),browse:_.template(this.options.templates.buttonContent,{label:i.options.localize("Edit",i.options.language),icon:"edit"})},n=e("#midgardcreate-edit a",this.element);n&&("edit"===t&&n.addClass("selected"),n.html(o[t]))},_enableToolbar:function(){var e=this;this.element.on("midgardtoolbarstatechange",function(t,i){e.setToolbar(i.display),window.sessionStorage&&window.sessionStorage.setItem(e.options.storagePrefix+"Midgard.create.toolbar",i.display)}),this.element.midgardToolbar({display:this.options.toolbar,vie:this.vie})},_enableMetadata:function(){_.isEmpty(this.options.metadata)||e(".create-ui-tool-metadataarea",this.element).midgardMetadata({vie:this.vie,localize:this.options.localize,language:this.options.language,editors:this.options.metadata,createElement:this.element,editableNs:"midgardeditable"})},_enableEdit:function(){this._setOption("state","edit");var t=this,i={toolbarState:t.options.toolbar,disabled:!1,vie:t.vie,domService:t.options.domService,widgets:t.options.editorWidgets,editors:t.options.editorOptions,collectionWidgets:t.options.collectionWidgets,localize:t.options.localize,language:t.options.language};t.options.enableEditor&&(i.enableEditor=t.options.enableEditor),t.options.disableEditor&&(i.disableEditor=t.options.disableEditor),this.domService.findSubjectElements(this.element).each(function(){var o=this;if(t.options.highlight){var n=function(i,n){e(n.element).is(":visible")&&n.entityElement.get(0)===o&&(window.Mousetrap&&n.element.addClass("mousetrap"),n.element.stop(!0,!0),n.element.effect("highlight",{color:t.options.highlightColor},3e3))};e(this).on("midgardeditableenableproperty",n)}e(this).on("midgardeditabledisable",function(){e(this).off("midgardeditableenableproperty",n)}),e(this).midgardEditable(i)}),this._trigger("statechange",null,{state:"edit"})},_disableEdit:function(){var t=this,i={disabled:!0,vie:t.vie,domService:t.options.domService,editorOptions:t.options.editorOptions,localize:t.options.localize,language:t.options.language};this.domService.findSubjectElements(this.element).each(function(){e(this).midgardEditable(i),e(this).removeClass("ui-state-disabled")}),this._setOption("state","browse"),this._trigger("statechange",null,{state:"browse"})}})})(jQuery),function(e,t){"use strict";e.widget("Midgard.midgardEditable",{options:{propertyEditors:{},collections:[],model:null,propertyEditorWidgetsConfiguration:{hallo:{widget:"halloWidget",options:{}}},propertyEditorWidgets:{"default":"hallo"},collectionWidgets:{"default":"midgardCollectionAdd"},toolbarState:"full",vie:null,domService:"rdfa",predicateSelector:"[property]",disabled:!1,localize:function(e,t){return window.midgardCreate.localize(e,t)},language:null,state:null,acceptStateChange:!0,stateChange:null,decorateEditableEntity:null,decoratePropertyEditor:null,editables:[],editors:{},widgets:{}},_params:function(e,t){var i={entity:this.options.model,editableEntity:this,entityElement:this.element,editable:this,element:this.element,instance:this.options.model},o=e?{predicate:e,propertyEditor:this.options.propertyEditors[e],propertyElement:this.options.propertyEditors[e].element,property:e,element:this.options.propertyEditors[e].element}:{};return _.extend(i,o,t)},_create:function(){if(this.options.widgets&&(this.options.propertyEditorWidgets=_.extend(this.options.propertyEditorWidgets,this.options.widgets)),this.options.editors&&(this.options.propertyEditorWidgetsConfiguration=_.extend(this.options.propertyEditorWidgetsConfiguration,this.options.editors)),this.vie=this.options.vie,this.domService=this.vie.service(this.options.domService),!this.options.model){var e=this;this.vie.load({element:this.element}).from(this.options.domService).execute().done(function(t){e.options.model=t[0]})}_.isFunction(this.options.decorateEditableEntity)&&this.options.decorateEditableEntity(this._params())},_init:function(){return this.options.widgets&&(this.options.propertyEditorWidgets=_.extend(this.options.propertyEditorWidgets,this.options.widgets)),this.options.editors&&(this.options.propertyEditorWidgetsConfiguration=_.extend(this.options.propertyEditorWidgetsConfiguration,this.options.editors)),this.options.disabled===!0?(this.setState("inactive"),t):this.options.disabled===!1&&"inactive"===this.options.state?(this.setState("candidate"),t):(this.options.disabled=!1,this.options.state?(this.setState(this.options.state),t):(this.setState("candidate"),t))},setState:function(e,i,o,n){var a=this.options.state,s=e;if(s!==a){if(this.options.acceptStateChange===t||!_.isFunction(this.options.acceptStateChange))return this._doSetState(a,s,i,o),_.isFunction(n)&&n(!0),t;var r=this;this.options.acceptStateChange(a,s,i,o,function(e){e&&r._doSetState(a,s,i,o),_.isFunction(n)&&n(e)})}},getState:function(){return this.options.state},_doSetState:function(e,t,i,o){this.options.state=t,"inactive"===t?this.disable():null!==e&&"inactive"!==e||"inactive"===t||this.enable(),this._trigger("statechange",null,this._params(i,{previous:e,current:t,context:o}))},findEditablePredicateElements:function(t){this.domService.findPredicateElements(this.options.model.id,e(this.options.predicateSelector,this.element),!1).each(t)},getElementPredicate:function(e){return this.domService.getElementPredicate(e)},enable:function(){var t=this;this.options.model&&(this.findEditablePredicateElements(function(){t._enablePropertyEditor(e(this))}),this._trigger("enable",null,this._params()),this.vie.view&&this.vie.view.Collection&&_.each(this.domService.views,function(e){if(e instanceof this.vie.view.Collection&&this.options.model===e.owner){var i=e.collection.predicate,o=_.clone(this.options);o.state=null;var n=this.enableCollection({model:this.options.model,collection:e.collection,property:i,definition:this.getAttributeDefinition(i),view:e,element:e.el,vie:t.vie,editableOptions:o});t.options.collections.push(n)}},this))},disable:function(){_.each(this.options.propertyEditors,function(e){this.disablePropertyEditor({widget:this,editable:e,entity:this.options.model,element:e.element})},this),this.options.propertyEditors={},this.options.editables=[],_.each(this.options.collections,function(e){var t=_.clone(this.options);t.state="inactive",this.disableCollection({widget:this,model:this.options.model,element:e,vie:this.vie,editableOptions:t})},this),this.options.collections=[],this._trigger("disable",null,this._params())},_enablePropertyEditor:function(e){var t=this,i=this.getElementPredicate(e);if(!i)return!0;if(this.options.model.get(i)instanceof Array)return!0;var o=this.enablePropertyEditor({widget:this,element:e,entity:this.options.model,property:i,vie:this.vie,decorate:this.options.decoratePropertyEditor,decorateParams:_.bind(this._params,this),changed:function(e){t.setState("changed",i);var o={};o[i]=e,t.options.model.set(o,{silent:!0}),t._trigger("changed",null,t._params(i))},activating:function(){t.setState("activating",i)},activated:function(){t.setState("active",i),t._trigger("activated",null,t._params(i))},deactivated:function(){t.setState("candidate",i),t._trigger("deactivated",null,t._params(i))}});if(o){var n=o.data("createWidgetName");this.options.propertyEditors[i]=o.data("Midgard-"+n),this.options.propertyEditors[i]||(this.options.propertyEditors[i]=o.data(n)),this.options.editables.push(o),this._trigger("enableproperty",null,this._params(i))}},_propertyEditorName:function(e){if(this.options.propertyEditorWidgets[e.property]!==t)return this.options.propertyEditorWidgets[e.property];var i="default",o=this.getAttributeDefinition(e.property);return o&&(i=o.range[0]),this.options.propertyEditorWidgets[i]!==t?this.options.propertyEditorWidgets[i]:this.options.propertyEditorWidgets["default"]},_propertyEditorWidget:function(e){return this.options.propertyEditorWidgetsConfiguration[e].widget},_propertyEditorOptions:function(e){return this.options.propertyEditorWidgetsConfiguration[e].options},getAttributeDefinition:function(e){var t=this.options.model.get("@type");if(t&&t.attributes)return t.attributes.get(e)},enableEditor:function(e){return this.enablePropertyEditor(e)},enablePropertyEditor:function(t){var i=this._propertyEditorName(t);if(null!==i){var o=this._propertyEditorWidget(i);if(t.editorOptions=this._propertyEditorOptions(i),t.toolbarState=this.options.toolbarState,t.disabled=!1,t.editorName=i,t.editorWidget=o,"function"!=typeof e(t.element)[o])throw Error(o+" widget is not available");return e(t.element)[o](t),e(t.element).data("createWidgetName",o),e(t.element)}},disableEditor:function(e){return this.disablePropertyEditor(e)},disablePropertyEditor:function(t){t.element[t.editable.widgetName]({disabled:!0}),e(t.element).removeClass("ui-state-disabled"),t.element.is(":focus")&&t.element.blur()},collectionWidgetName:function(e){if(this.options.collectionWidgets[e.property]!==t)return this.options.collectionWidgets[e.property];var i="default",o=this.getAttributeDefinition(e.property);return o&&(i=o.range[0]),this.options.collectionWidgets[i]!==t?this.options.collectionWidgets[i]:this.options.collectionWidgets["default"]},enableCollection:function(t){var i=this.collectionWidgetName(t);if(null!==i){if(t.disabled=!1,"function"!=typeof e(t.element)[i])throw Error(i+" widget is not available");return e(t.element)[i](t),e(t.element).data("createCollectionWidgetName",i),e(t.element)}},disableCollection:function(t){var i=e(t.element).data("createCollectionWidgetName");null!==i&&(t.disabled=!0,i&&(e(t.element)[i](t),e(t.element).removeClass("ui-state-disabled")))}})}(jQuery),function(e){"use strict";e.widget("Midgard.midgardMetadata",{contentArea:null,editorElements:{},options:{vie:null,templates:{button:'<button class="create-ui-btn"><i class="icon-<%= icon %>"></i> <%= label %></button>',contentArea:'<div class="dropdown-menu"></div>'},localize:function(e,t){return window.midgardCreate.localize(e,t)},language:null,createElement:"body",editableNs:"midgardeditable"},_create:function(){this._render()},_init:function(){this._prepareEditors(),this._bindEditables()},_prepareEditors:function(){_.each(this.options.editors,function(t,i){var o=e("<div></div>").addClass(i);if(this.contentArea.append(o),!_.isFunction(o[i]))throw Error("Metadata editor widget "+i+" is not available");_.extend(t,{vie:this.options.vie,language:this.options.language,localize:this.options.localize,createElement:this.options.createElement,editableNs:this.options.editableNs}),o[i](t),this.editorElements[i]=o},this)},activateEditors:function(e){this.element.show(),_.each(this.options.editors,function(t,i){this.editorElements[i]&&this.editorElements[i][i]("activate",e)},this)},_bindEditables:function(){var t=this,i=e(this.options.createElement);i.on(this.options.editableNs+"activated",function(e,i){t.activateEditors({entity:i.entity,entityElement:i.entityElement,predicate:i.predicate})})},_prepareEditorArea:function(){var t=e(_.template(this.options.templates.contentArea,{}));return t.hide(),t},_render:function(){var t=this,i=e(_.template(this.options.templates.button,{icon:"info-sign",label:this.options.localize("Metadata",this.options.language)}));this.element.empty(),this.element.append(i),this.element.hide(),this.contentArea=this._prepareEditorArea(i),i.after(this.contentArea),i.on("click",function(e){e.preventDefault();var o=i.position();t.contentArea.css({position:"absolute",left:o.left}),t.contentArea.toggle()})}})}(jQuery),function(e){"use strict";e.widget("Midgard.midgardStorage",{saveEnabled:!0,options:{localStorage:!1,storagePrefix:"",removeLocalstorageOnIgnore:!0,vie:null,url:"",autoSave:!1,autoSaveInterval:5e3,saveReferencedNew:!1,saveReferencedChanged:!1,editableNs:"midgardeditable",editSelector:"#midgardcreate-edit a",localize:function(e,t){return window.midgardCreate.localize(e,t)},language:null},_create:function(){var e=this;this.changedModels=[],window.localStorage&&(this.options.localStorage=!0),this.vie=this.options.vie,this.vie.entities.on("add",function(t){t.url=e.options.url,t.toJSON=t.toJSONLD}),e._bindEditables(),e.options.autoSave&&e._autoSave()},_autoSave:function(){var e=this;e.saveEnabled=!0;var t=function(){e.saveEnabled&&0!==e.changedModels.length&&e.saveRemoteAll({silent:!0})},i=window.setInterval(t,e.options.autoSaveInterval);this.element.on("startPreventSave",function(){i&&(window.clearInterval(i),i=null),e.disableAutoSave()}),this.element.on("stopPreventSave",function(){i||(i=window.setInterval(t,e.options.autoSaveInterval)),e.enableAutoSave()})},enableAutoSave:function(){this.saveEnabled=!0},disableAutoSave:function(){this.saveEnabled=!1},_bindEditables:function(){var e=this;this.restorables=[];var t;e.element.on(e.options.editableNs+"changed",function(t,i){-1===_.indexOf(e.changedModels,i.instance)&&e.changedModels.push(i.instance),e._saveLocal(i.instance)}),e.element.on(e.options.editableNs+"disable",function(t,i){e.revertChanges(i.instance)}),e.element.on(e.options.editableNs+"enable",function(t,i){i.instance._originalAttributes||(i.instance._originalAttributes=_.clone(i.instance.attributes)),!i.instance.isNew()&&e._checkLocal(i.instance)&&e.restorables.push(i.instance)}),e.element.on("midgardcreatestatechange",function(i,o){return"browse"===o.state||0===e.restorables.length?(e.restorables=[],t&&t.close(),undefined):(t=e.checkRestore(),undefined)}),e.element.on("midgardstorageloaded",function(t,i){-1===_.indexOf(e.changedModels,i.instance)&&e.changedModels.push(i.instance)})},checkRestore:function(){var t=this;if(0!==t.restorables.length){var i,o;i=1===t.restorables.length?_.template(t.options.localize("localModification",t.options.language),{label:t.restorables[0].getSubjectUri()}):_.template(t.options.localize("localModifications",t.options.language),{number:t.restorables.length});var n=function(){t.restoreLocalAll(),o.close()},a=function(){t.ignoreLocal(),o.close()};return o=e("body").midgardNotifications("create",{bindTo:t.options.editSelector,gravity:"TR",body:i,timeout:0,actions:[{name:"restore",label:t.options.localize("Restore",t.options.language),cb:n,className:"create-ui-btn"},{name:"ignore",label:t.options.localize("Ignore",t.options.language),cb:a,className:"create-ui-btn"}],callbacks:{beforeShow:function(){window.Mousetrap&&(window.Mousetrap.bind(["command+shift+r","ctrl+shift+r"],function(e){e.preventDefault(),n()}),window.Mousetrap.bind(["command+shift+i","ctrl+shift+i"],function(e){e.preventDefault(),a()}))},afterClose:function(){window.Mousetrap&&(window.Mousetrap.unbind(["command+shift+r","ctrl+shift+r"]),window.Mousetrap.unbind(["command+shift+i","ctrl+shift+i"]))}}})}},restoreLocalAll:function(){_.each(this.restorables,function(e){this.readLocal(e)},this),this.restorables=[]},ignoreLocal:function(){this.options.removeLocalstorageOnIgnore&&_.each(this.restorables,function(e){this._removeLocal(e)},this),this.restorables=[]},saveReferences:function(e){_.each(e.attributes,function(e){e&&e.isCollection&&e.each(function(e){return-1===this.changedModels.indexOf(e)?e.isNew()&&this.options.saveReferencedNew?e.save():e.hasChanged()&&this.options.saveReferencedChanged?e.save():undefined:undefined},this)},this)},saveRemote:function(e,t){this.saveReferences(e),this._trigger("saveentity",null,{entity:e,options:t});var i=this;e.save(null,_.extend({},t,{success:function(o,n){e._originalAttributes=_.clone(e.attributes),i._removeLocal(e),window.setTimeout(function(){i.changedModels.splice(i.changedModels.indexOf(e),1)},0),_.isFunction(t.success)&&t.success(o,n),i._trigger("savedentity",null,{entity:e,options:t})},error:function(e,i){_.isFunction(t.error)&&t.error(e,i)}}))},saveRemoteAll:function(t){var i=this;if(0!==i.changedModels.length){i._trigger("save",null,{entities:i.changedModels,options:t,models:i.changedModels});var o,n=i.changedModels.length;o=n>1?_.template(i.options.localize("saveSuccessMultiple",i.options.language),{number:n}):_.template(i.options.localize("saveSuccess",i.options.language),{label:i.changedModels[0].getSubjectUri()}),i.disableAutoSave(),_.each(i.changedModels,function(a){this.saveRemote(a,{success:function(a,s){n--,0>=n&&(i._trigger("saved",null,{options:t}),t&&_.isFunction(t.success)&&t.success(a,s),e("body").midgardNotifications("create",{body:o}),i.enableAutoSave())},error:function(o,n){t&&_.isFunction(t.error)&&t.error(o,n),e("body").midgardNotifications("create",{body:_.template(i.options.localize("saveError",i.options.language),{error:n.responseText||""}),timeout:0}),i._trigger("error",null,{instance:a})}})},this)}},_saveLocal:function(e){if(this.options.localStorage){if(e.isNew()){if(!e.primaryCollection)return;return this._saveLocalReferences(e.primaryCollection.subject,e.primaryCollection.predicate,e)}var t=this.options.storagePrefix+e.getSubjectUri();window.localStorage.setItem(t,JSON.stringify(e.toJSONLD()))}},_getReferenceId:function(e,t){return e.id+":"+t},_saveLocalReferences:function(e,t,i){if(this.options.localStorage&&e&&t){var o=this.options.storagePrefix+e+":"+t,n=i.toJSONLD();if(window.localStorage.getItem(o)){var a=JSON.parse(window.localStorage.getItem(o)),s=_.pluck(a,"@").indexOf(n["@"]);return-1!==s?a[s]=n:a.push(n),window.localStorage.setItem(o,JSON.stringify(a)),undefined}window.localStorage.setItem(o,JSON.stringify([n]))}},_checkLocal:function(e){if(!this.options.localStorage)return!1;var t=this.options.storagePrefix+e.getSubjectUri(),i=window.localStorage.getItem(t);return i?!0:!1},hasLocal:function(e){if(!this.options.localStorage)return!1;var t=this.options.storagePrefix+e.getSubjectUri();return window.localStorage.getItem(t)?!0:!1},readLocal:function(e){if(this.options.localStorage){var t=this.options.storagePrefix+e.getSubjectUri(),i=window.localStorage.getItem(t);if(i){e._originalAttributes||(e._originalAttributes=_.clone(e.attributes));var o=JSON.parse(i),n=this.vie.entities.addOrUpdate(o,{overrideAttributes:!0});this._trigger("loaded",null,{instance:n})}}},_readLocalReferences:function(e,t,i){if(this.options.localStorage){var o=this.options.storagePrefix+this._getReferenceId(e,t),n=window.localStorage.getItem(o);n&&i.add(JSON.parse(n))}},revertChanges:function(e){var t=this;if(e)return _.each(e.attributes,function(e){if(e instanceof t.vie.Collection){var i=[];e.forEach(function(e){e.isNew()&&i.push(e)}),e.remove(i)}}),e.changedAttributes()?(e.set(e.previousAttributes()),undefined):(e._originalAttributes&&e.set(e._originalAttributes),undefined)},_removeLocal:function(e){if(this.options.localStorage){var t=this.options.storagePrefix+e.getSubjectUri();window.localStorage.removeItem(t)}}})}(jQuery),function(e){"use strict";e.widget("Midgard.midgardWorkflows",{options:{url:function(){},templates:{button:'<button class="create-ui-btn" id="<%= id %>"><%= label %></button>'},renderers:{button:function(t,i,o,n){var a="midgardcreate-workflow_"+i.get("name"),s=e(_.template(this.options.templates.button,{id:a,label:i.get("label")})).button();return s.on("click",function(){o(t,i,n)}),s}},action_types:{backbone_save:function(e,t,i){var o=e.url,n=e.clone();n.url=o;var a=t.get("action");a.url&&(e.url=a.url),n.save(null,{success:function(){e.url=o,e.change(),i(null,e)},error:function(t,n){e.url=o,e.change(),i(n,e)}})},backbone_destroy:function(e,t,i){var o=e.url,n=e.clone();n.url=o;var a=t.get("action");a.url&&(e.url=a.url),e.destroy({success:function(t){e.url=o,e.change(),i(null,t)},error:function(t,n){e.url=o,e.change(),i(n,e)}})},http:function(t,i,o){var n=i.get("action");if(!n.url)return o("No action url defined!");var a={};n.http&&(a=n.http);var s=e.extend({url:n.url,type:"POST",data:t.toJSON(),success:function(){t.fetch({success:function(e){o(null,e)},error:function(e,t){o(t,e)}})}},a);e.ajax(s)}}},_init:function(){this._renderers={},this._action_types={},this._parseRenderersAndTypes(),this._last_instance=null,this.ModelWorkflowModel=Backbone.Model.extend({defaults:{name:"",label:"",type:"button",action:{type:"backbone_save"}}}),this.workflows={};var t=this;e(this.element).on("midgardeditableactivated",function(e,i){t._fetchWorkflows(i.instance)})},_fetchWorkflows:function(e){var t=this;if(e.isNew())return t._trigger("changed",null,{instance:e,workflows:[]}),undefined;if(t._last_instance==e)return t.workflows[e.cid]&&t._trigger("changed",null,{instance:e,workflows:t.workflows[e.cid]}),undefined;if(t._last_instance=e,t.workflows[e.cid])return t._trigger("changed",null,{instance:e,workflows:t.workflows[e.cid]}),undefined;if(t.options.url)t._fetchModelWorkflows(e);else{var i=new(t._generateCollectionFor(e))([],{});t._trigger("changed",null,{instance:e,workflows:i})}},_parseRenderersAndTypes:function(){var t=this;e.each(this.options.renderers,function(e,i){t.setRenderer(e,i)}),e.each(this.options.action_types,function(e,i){t.setActionType(e,i)})},setRenderer:function(e,t){this._renderers[e]=t},getRenderer:function(e){return this._renderers[e]?this._renderers[e]:!1},setActionType:function(e,t){this._action_types[e]=t},getActionType:function(e){return this._action_types[e]},prepareItem:function(e,t,i){var o=this,n=this.getRenderer(t.get("type")),a=this.getActionType(t.get("action").type);return n.call(this,e,t,a,function(n,a){delete o.workflows[e.cid],o._last_instance=null,"backbone_destroy"!==t.get("action").type&&o._fetchModelWorkflows(e),i(n,a)})},_generateCollectionFor:function(e){var t={model:this.ModelWorkflowModel};return this.options.url&&(t.url=this.options.url(e)),Backbone.Collection.extend(t)},_fetchModelWorkflows:function(e){if(!e.isNew()){var t=this;t.workflows[e.cid]=new(this._generateCollectionFor(e))([],{}),t.workflows[e.cid].fetch({success:function(i){t.workflows[e.cid].reset(i.models),t._trigger("changed",null,{instance:e,workflows:t.workflows[e.cid]})},error:function(){}})}}})}(jQuery),void 0===window.midgardCreate&&(window.midgardCreate={}),window.midgardCreate.localize=function(e,t){return window.midgardCreate.locale?window.midgardCreate.locale[t]&&window.midgardCreate.locale[t][e]?window.midgardCreate.locale[t][e]:window.midgardCreate.locale.en[e]?window.midgardCreate.locale.en[e]:e:e},function(e,t){"use strict";e.widget("Midgard.midgardCollectionAdd",{options:{editingWidgets:null,collection:null,model:null,definition:null,view:null,disabled:!1,vie:null,editableOptions:null,templates:{button:'<button class="btn"><i class="icon-<%= icon %>"></i> <%= label %></button>'}},_create:function(){this.addButtons=[];var e=this;if(!e.options.collection.localStorage)try{e.options.collection.url=e.options.model.url()}catch(t){window.console&&console.log(t)}e.options.collection.on("add",function(t){t.primaryCollection=e.options.collection,e.options.vie.entities.add(t),t.collection=e.options.collection}),e.options.collection.on("add remove reset",e.checkCollectionConstraints,e),e._bindCollectionView(e.options.view)},_bindCollectionView:function(e){var t=this;e.on("add",function(e){e.$el.effect("slide",function(){t._makeEditable(e)})})},_makeEditable:function(e){this.options.editableOptions.disabled=this.options.disabled,this.options.editableOptions.model=e.model,e.$el.midgardEditable(this.options.editableOptions)},_init:function(){return this.options.disabled?(this.disable(),t):(this.enable(),t)},hideButtons:function(){_.each(this.addButtons,function(e){e.hide()})},showButtons:function(){_.each(this.addButtons,function(e){e.show()})},checkCollectionConstraints:function(){return this.options.disabled?t:this.options.view.canAdd()?this.options.definition?this.options.definition.max&&-1!==this.options.definition.max?this.options.collection.length<this.options.definition.max?(this.showButtons(),t):(this.hideButtons(),t):(this.showButtons(),t):(this.showButtons(),t):(this.hideButtons(),t)},enable:function(){var t=this,i=e(_.template(this.options.templates.button,{icon:"plus",label:this.options.editableOptions.localize("Add",this.options.editableOptions.language)})).button();i.addClass("midgard-create-add"),i.click(function(){t.addItem(i)}),e(t.options.view.el).after(i),t.addButtons.push(i),t.checkCollectionConstraints()},disable:function(){_.each(this.addButtons,function(e){e.remove()}),this.addButtons=[]},_getTypeActions:function(e){var t=this,i=[];return _.each(this.options.definition.range,function(o){var n=t.options.collection.vie.namespaces.uri(o);t.options.view.canAdd(n)&&i.push({name:o,label:o,cb:function(){t.options.collection.add({"@type":o},e)},className:"create-ui-btn"})}),i},addItem:function(i,o){o===t&&(o={});var n=_.extend({},o,{validate:!1}),a={};if(this.options.definition&&this.options.definition.range){if(1!==this.options.definition.range.length)return e("body").midgardNotifications("create",{bindTo:i,gravity:"L",body:this.options.editableOptions.localize("Choose type to add",this.options.editableOptions.language),timeout:0,actions:this._getTypeActions(n)}),t;a["@type"]=this.options.definition.range[0]}else{var s=_.keys(this.options.view.templates);2==s.length&&(a["@type"]=s[0])}this.options.collection.add(a,n)}})}(jQuery),function(e){"use strict";e.widget("Midgard.midgardCollectionAddBetween",e.Midgard.midgardCollectionAdd,{_bindCollectionView:function(e){var t=this;e.on("add",function(e){t._makeEditable(e),t._refreshButtons()}),e.on("remove",function(){t._refreshButtons()})},_refreshButtons:function(){var e=this;window.setTimeout(function(){e.disable(),e.enable()},1)},prepareButton:function(t){var i=this,o=e(_.template(this.options.templates.button,{icon:"plus",label:""})).button();return o.addClass("midgard-create-add"),o.click(function(){i.addItem(o,{at:t})}),o},enable:function(){var t=this,i=t.prepareButton(0);e(t.options.view.el).prepend(i),t.addButtons.push(i),e.each(t.options.view.entityViews,function(i,o){var n=t.options.collection.indexOf(o.model),a=t.prepareButton(n+1);e(o.el).append(a),t.addButtons.push(a)}),this.checkCollectionConstraints()},disable:function(){var t=this;e.each(t.addButtons,function(e,t){t.remove()}),t.addButtons=[]}})}(jQuery),function(e){"use strict";e.widget("Midgard.editWidget",{options:{disabled:!1,vie:null},enable:function(){this.element.attr("contenteditable","true")},disable:function(){this.element.attr("contenteditable","false")},_create:function(){this._registerWidget(),this._initialize(),_.isFunction(this.options.decorate)&&_.isFunction(this.options.decorateParams)&&this.options.decorate(this.options.decorateParams(null,{propertyName:this.options.property,propertyEditor:this,propertyElement:this.element,editor:this,predicate:this.options.property,element:this.element}))
},_init:function(){return this.options.disabled?(this.disable(),undefined):(this.enable(),undefined)},_initialize:function(){var t=this;this.element.on("focus",function(){t.options.disabled||t.options.activated()}),this.element.on("blur",function(){t.options.disabled||t.options.deactivated()});var i=this.element.html();this.element.on("keyup paste",function(){if(!t.options.disabled){var o=e(this).html();i!==o&&(i=o,t.options.changed(o))}})},_registerWidget:function(){this.element.data("createWidgetName",this.widgetName)}})}(jQuery),function(e){"use strict";e.widget("Midgard.alohaWidget",e.Midgard.editWidget,{_initialize:function(){},enable:function(){var e,t=this.options,i=Aloha.jQuery(t.element.get(0)).aloha();_.each(Aloha.editables,function(t){t.obj.get(0)===i.get(0)&&(e=t)}),e&&(e.vieEntity=t.entity,Aloha.bind("aloha-editable-activated",function(i,o){o.editable===e&&t.activated()}),Aloha.bind("aloha-editable-deactivated",function(i,o){o.editable===e&&t.deactivated()}),Aloha.bind("aloha-smart-content-changed",function(i,o){if(o.editable===e){if(!o.editable.isModified())return!0;t.changed(o.editable.getContents()),o.editable.setUnmodified()}}),this.options.disabled=!1)},disable:function(){Aloha.jQuery(this.options.element.get(0)).mahalo(),this.options.disabled=!0}})}(jQuery),function(e){"use strict";e.widget("Midgard.ckeditorWidget",e.Midgard.editWidget,{enable:function(){this.element.attr("contentEditable","true"),this.editor=CKEDITOR.inline(this.element.get(0)),this.options.disabled=!1;var t=this;this.editor.on("focus",function(){t.options.activated()}),this.editor.on("blur",function(){t.options.activated(),t.options.changed(t.editor.getData())}),this.editor.on("key",function(){t.options.changed(t.editor.getData())}),this.editor.on("paste",function(){t.options.changed(t.editor.getData())}),this.editor.on("afterCommandExec",function(){t.options.changed(t.editor.getData())}),this.editor.on("configLoaded",function(){e.each(t.options.editorOptions,function(e,i){t.editor.config[e]=i})})},disable:function(){this.editor&&(this.element.attr("contentEditable","false"),this.editor.destroy(),this.editor=null)},_initialize:function(){CKEDITOR.disableAutoInline=!0}})}(jQuery),function(e){"use strict";e.widget("Midgard.halloWidget",e.Midgard.editWidget,{options:{editorOptions:{},disabled:!0,toolbarState:"full",vie:null,entity:null},enable:function(){e(this.element).hallo({editable:!0}),this.options.disabled=!1},disable:function(){e(this.element).hallo({editable:!1}),this.options.disabled=!0},_initialize:function(){e(this.element).hallo(this.getHalloOptions());var t=this;e(this.element).on("halloactivated",function(){t.options.activated()}),e(this.element).on("hallodeactivated",function(){t.options.deactivated()}),e(this.element).on("hallomodified",function(e,i){t.options.changed(i.content),i.editable.setUnmodified()}),e(document).on("midgardtoolbarstatechange",function(e,i){if(i.display!==t.options.toolbarState&&(t.options.toolbarState=i.display,t.element.data("IKS-hallo")||t.element.data("hallo"))){var o=t.getHalloOptions();t.element.hallo("changeToolbar",o.parentElement,o.toolbar,!0)}})},getHalloOptions:function(){var t={plugins:{halloformat:{},halloblock:{},hallolists:{},hallolink:{},halloimage:{entity:this.options.entity}},buttonCssClass:"create-ui-btn-small",placeholder:"["+this.options.property+"]"};return"function"==typeof this.element.annotate&&this.options.vie.services.stanbol&&(t.plugins.halloannotate={vie:this.options.vie}),"full"===this.options.toolbarState?(t.parentElement=e(".create-ui-toolbar-dynamictoolarea .create-ui-tool-freearea"),t.toolbar="halloToolbarFixed"):(t.parentElement="body",t.toolbar="halloToolbarContextual"),_.extend(t,this.options.editorOptions)}})}(jQuery),function(e){"use strict";e.widget("Midgard.midgardGeo",{options:{layer:null,map:null,coordSystem:"EPSG:4326",defaultCenter:null,defaultZoomLevel:3,geoProperty:"http://schema.org/geo",geoCoordinateType:"http://schema.org/GeoCoordinates",geoLonProperty:"http://schema.org/longitude",geoLatProperty:"http://schema.org/latitude",marker:{url:"http://www.openlayers.org/dev/img/marker.png",size:{w:21,h:25},offset:{w:-10,h:-25}}},data:{},coordsObj:null,activate:function(e){this.data=e,this.coordsObj=null;var t=this.data.entity.get(this.options.geoProperty);if(_.isUndefined(t)){var i=this.data.entity.attributes["@type"];_.isArray(i)||(i=[i]),_.indexOf(i,"<"+this.options.geoCoordinateType+">")>0&&(this.coordsObj=this.data.entity)}else this.coordsObj=t.models[0];if(_.isNull(this.coordsObj))return this.element.hide(),undefined;this.element.show();var o=parseFloat(this.coordsObj.get(this.options.geoLatProperty)),n=parseFloat(this.coordsObj.get(this.options.geoLonProperty));this.centerMap(n,o)},_createMap:function(){if(_.isNull(this.options.map)){var t=this,i=e("<div>",{id:"midgardGeoMap",style:"height:200px; width:300px"});this.element.append(i),this.options.map=new OpenLayers.Map("midgardGeoMap"),_.isNull(this.options.layer)&&(this.options.layer=new OpenLayers.Layer.OSM("OSM")),this.options.map.addLayer(this.options.layer),this.options.markers=new OpenLayers.Layer.Markers("Markers"),this.options.map.addLayer(this.options.markers),OpenLayers.Control.Click=OpenLayers.Class(OpenLayers.Control,{defaultHandlerOptions:{single:!0,"double":!1,pixelTolerance:0,stopSingle:!1,stopDouble:!1},initialize:function(){this.handlerOptions=OpenLayers.Util.extend({},this.defaultHandlerOptions),OpenLayers.Control.prototype.initialize.apply(this,arguments),this.handler=new OpenLayers.Handler.Click(this,{click:function(e){t.mapClick(e)}},this.handlerOptions)}});var o=new OpenLayers.Control.Click;this.options.map.addControl(o),o.activate();var n=this.options.defaultCenter.clone();n.transform(new OpenLayers.Projection(this.options.coordSystem),this.options.map.getProjectionObject()),this.options.map.setCenter(n,this.options.defaultZoomLevel)}},mapClick:function(e){var t=this.options.map.getLonLatFromPixel(e.xy);t.transform(this.options.map.getProjectionObject(),new OpenLayers.Projection(this.options.coordSystem));var i=t.clone();this.centerMap(i.lon,i.lat),this.setCoordinates(t.lat,t.lon)},disable:function(){},setCoordinates:function(e,t){var i=this.data.entity.get(this.options.geoProperty),o=i.models[0];o.set(this.options.geoLatProperty,e),o.set(this.options.geoLonProperty,t)},_init:function(){this.element.hide(),this.element.append(e("<h3>GEO</h3>")),_.isNull(this.options.defaultCenter)&&(this.options.defaultCenter=new OpenLayers.LonLat(0,0)),this._createMap()},centerMap:function(e,t){var i=new OpenLayers.LonLat(e,t).transform(new OpenLayers.Projection(this.options.coordSystem),this.options.map.getProjectionObject());this.options.centermark&&this.options.centermark.destroy();var o=new OpenLayers.Size(this.options.marker.size.w,this.options.marker.size.h),n=new OpenLayers.Pixel(this.options.marker.offset.w,this.options.marker.offset.h),a=new OpenLayers.Icon(this.options.marker.url,o,n);this.options.centermark=new OpenLayers.Marker(i,a),this.options.markers.addMarker(this.options.centermark),this.options.map.panTo(i)}})}(jQuery),function(e,t){"use strict";e.widget("Midgard.midgardTags",{enhanced:!1,options:{predicate:"skos:related",vie:null,templates:{tags:'<div class="create-ui-tags <%= type %>Tags"><h3><%= label %></h3><input type="text" class="tags" value="" /></div>'},localize:function(e,t){return window.midgardCreate.localize(e,t)},language:null},_init:function(){this.vie=this.options.vie},activate:function(e){var t=this._render(e.entity);this.loadTags(e.entity,e.predicate,t)},_normalizeSubject:function(e){return this.vie.entities.isReference(e)?e:("http://"!==e.substr(0,7)&&(e="urn:tag:"+e),e=this.vie.entities.toReference(e))},_tagLabel:function(e){return e=this.vie.entities.fromReference(e),"urn:tag:"===e.substr(0,8)&&(e=e.substr(8,e.length-1)),"http://"==e.substring(0,7)&&(e=e.substr(e.lastIndexOf("/")+1,e.length-1),e=e.replace(/_/g," ")),e},addTag:function(e,i,o,n){o===t&&(o=this._tagLabel(i)),i=this._normalizeSubject(i);var a=e.get(this.options.predicate);if(!(a&&a.isCollection&&a.get(i))){n&&!e.isReference(n)&&(n=e.toReference(n));var s=this.vie.entities.addOrUpdate({"@subject":i,"rdfs:label":o,"@type":n});return a?(a.addOrUpdate(s),t):(e.set(this.options.predicate,s),t)}},removeTag:function(e,t){var i=e.get(this.options.predicate);if(i){t=this._normalizeSubject(t);var o=i.get(t);o&&i.remove(t)}},_listenAnnotate:function(e,t){var i=this;t.on("annotateselect",function(t,o){i.addTag(e,o.linkedEntity.uri,o.linkedEntity.label,o.linkedEntity.type[0])}),t.on("annotateremove",function(t,o){i.removeTag(e,o.linkedEntity.uri)})},_render:function(t){this.element.empty();var i=e(_.template(this.options.templates.tags,{type:"article",label:this.options.localize("Item tags",this.options.language)})),o=e(_.template(this.options.templates.tags,{type:"suggested",label:this.options.localize("Suggested tags",this.options.language)}));return e("input",i).attr("id","articleTags-"+t.cid),e("input",o).attr("id","suggestedTags-"+t.cid),this.element.append(i),this.element.append(o),this._renderInputs(t,i,o),{tags:i,suggested:o}},_renderInputs:function(t,i,o){var n=this;t.getSubject(),i.tagsInput({width:"auto",height:"auto",onAddTag:function(e){n.addTag(t,e)},onRemoveTag:function(e){n.removeTag(t,e)},defaultText:this.options.localize("add a tag",this.options.language)});var a=function(){var i=e.trim(e(this).text());n.addTag(t,i),o.removeTag(i)};o.tagsInput({width:"auto",height:"auto",interactive:!1,onAddTag:function(){e(".tag span",o).off("click",a),e(".tag span",o).on("click",a)},onRemoveTag:function(){e(".tag span",o).off("click",a),e(".tag span",o).on("click",a)},remove:!1})},_getTagStrings:function(e){var t=[];return _.isString(e)?(t.push(e),t):e.isCollection?(e.each(function(e){t.push(e.get("rdfs:label"))}),t):(_.each(e,function(e){t.push(this._tagLabel(e))},this),t)},loadTags:function(t,i,o){var n=this,a=t.get(this.options.predicate);if(a){var s=this._getTagStrings(a);_.each(s,o.tags.addTag,o.tags)}this.vie.services.stanbol||e(".suggestedTags",n.element).hide()},_getLabelLang:function(e){if(!_.isArray(e))return null;var t;return _.each(e,function(e){"en"===e["@language"]&&(t=e["@value"])}),t},_addEnhancement:function(e,t){if(t.isEntity){var i=this._getLabelLang(t.get("rdfs:label"));if(i){var o=e.get(this.options.predicate);o&&o.isCollection&&-1!==o.indexOf(t)||this.suggestedTags.addTag(i)}}},enhance:function(t,i){if(!this.enhanced){this.enhanced=!0;var o=this;this.vie.analyze({element:e("[property]",i)}).using(["stanbol"]).execute().success(function(e){_.each(e,function(e){o._addEnhancement(t,e)})}).fail(function(){})}}})}(jQuery),void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.bg={Save:"Запази",Saving:"Запазване",Cancel:"Откажи",Edit:"Редактирай",localModification:'Елементът "<%= label %>" има локални модификации',localModifications:"<%= number %> елемента на тази страница имат локални модификации",Restore:"Възстанови",Ignore:"Игнорирай",saveSuccess:'Елементът "<%= label %>" беше успешно запазен',saveSuccessMultiple:"<%= number %> елемента бяха успешно запазени",saveError:"Възника грешка при запазване<br /><%= error %>","Item tags":"Етикети на елемента","Suggested tags":"Препоръчани етикети",Tags:"Етикети","add a tag":"добави етикет",Add:"Добави","Choose type to add":"Избери тип за добавяне"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.cs={Save:"Uložit",Saving:"Probíhá ukládání",Cancel:"Zrušit",Edit:"Upravit",localModification:'Blok "<%= label %>" obsahuje lokální změny',localModifications:"<%= number %> bloků na této stránce má lokální změny",Restore:"Aplikovat lokální změny",Ignore:"Zahodit lokální změny",saveSuccess:'Blok "<%= label %>" byl úspěšně uložen',saveSuccessMultiple:"<%= number %> bloků bylo úspěšně uloženo",saveError:"Při ukládání došlo k chybě<br /><%= error %>","Item tags":"Štítky bloku","Suggested tags":"Navrhované štítky",Tags:"Štítky","add a tag":"Přidat štítek",Add:"Přidat","Choose type to add":"Vyberte typ k přidání"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.da={Save:"Gem",Saving:"Gemmer",Cancel:"Annullér",Edit:"Rediger",localModification:'Element "<%= label %>" har lokale ændringer',localModifications:"<%= number %> elementer på denne side har lokale ændringer",Restore:"Gendan",Ignore:"Ignorer",saveSuccess:'Element "<%= label %>" er gemt',saveSuccessMultiple:"<%= number %> elementer er gemt",saveError:"Der opstod en fejl under lagring<br /><%= error %>","Item tags":"Element tags","Suggested tags":"Foreslåede tags",Tags:"Tags","add a tag":"tilføj et tag",Add:"Tilføj","Choose type to add":"Vælg type der skal tilføjes"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.de={Save:"Speichern",Saving:"Speichert",Cancel:"Abbrechen",Edit:"Bearbeiten",localModification:'Das Dokument "<%= label %>" auf dieser Seite hat lokale Änderungen',localModifications:"<%= number %> Dokumente auf dieser Seite haben lokale Änderungen",Restore:"Wiederherstellen",Ignore:"Ignorieren",saveSuccess:'Dokument "<%= label %>" erfolgreich gespeichert',saveSuccessMultiple:"<%= number %> Dokumente erfolgreich gespeichert",saveError:"Fehler beim Speichern<br /><%= error %>","Item tags":"Schlagwörter des Dokuments","Suggested tags":"Schlagwortvorschläge",Tags:"Schlagwörter","add a tag":"Neues Schlagwort",Add:"Hinzufügen","Choose type to add":"Typ zum Hinzufügen wählen"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.en={Save:"Save",Saving:"Saving",Cancel:"Cancel",Edit:"Edit",localModification:'Item "<%= label %>" has local modifications',localModifications:"<%= number %> items on this page have local modifications",Restore:"Restore",Ignore:"Ignore",saveSuccess:'Item "<%= label %>" saved successfully',saveSuccessMultiple:"<%= number %> items saved successfully",saveError:"Error occurred while saving<br /><%= error %>","Item tags":"Item tags","Suggested tags":"Suggested tags",Tags:"Tags","add a tag":"add a tag",Add:"Add","Choose type to add":"Choose type to add"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.es={Save:"Guardar",Saving:"Guardando",Cancel:"Cancelar",Edit:"Editar",localModification:'El elemento "<%= label %>" tiene modificaciones locales',localModifications:"<%= number %> elementos en la página tienen modificaciones locales",Restore:"Restaurar",Ignore:"Ignorar",saveSuccess:'El elemento "<%= label %>" se guardó exitosamente',saveSuccessMultiple:"<%= number %> elementos se guardaron exitosamente",saveError:"Ha ocurrido un error cuando se guardaban los datos<br /><%= error %>","Item tags":"Etiquetas de los elementos","Suggested tags":"Etiquetas sugeridas",Tags:"Etiquetas","add a tag":"añadir una etiqueta",Add:"Añadir","Choose type to add":"Escoge el tipo a añadir"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.fi={Save:"Tallenna",Saving:"Tallennetaan",Cancel:"Peruuta",Edit:"Muokkaa",localModification:'Dokumentilla "<%= label %>" on paikallisia muutoksia',localModifications:"<%= number %> dokumenttia sivulla omaa paikallisia muutoksia",Restore:"Palauta",Ignore:"Poista",saveSuccess:'Dokumentti "<%= label %>" tallennettu',saveSuccessMultiple:"<%= number %> dokumenttia tallennettu",saveError:"Virhe tallennettaessa<br /><%= error %>","Item tags":"Avainsanat","Suggested tags":"Ehdotukset",Tags:"Avainsanat","add a tag":"lisää avainsana",Add:"Lisää","Choose type to add":"Mitä haluat lisätä?"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.fr={Save:"Enregistrer",Saving:"Enregistrement en cours",Cancel:"Annuler",Edit:"Éditer",localModification:'L\'élément "<%= label %>" comporte des modifications locales',localModifications:"<%= number %> éléments sur cette page comportent des modifications locales",Restore:"Restaurer",Ignore:"Ignorer",saveSuccess:'L\'élément "<%= label %>" a été enregistré avec succès',saveSuccessMultiple:"<%= number %> éléments ont été enregistrés avec succès",saveError:"Une erreur est survenue durant l'enregistrement<br /><%= error %>","Item tags":"Tags des éléments","Suggested tags":"Tags suggérés",Tags:"Tags","add a tag":"ajouter un tag",Add:"Ajouter","Choose type to add":"Choisir le type à ajouter"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.he={Save:"שמור",Saving:"שומר",Cancel:"בטל",Edit:"ערוך",localModification:'לפריט "<%= label %>" שינויים מקומיים',localModifications:"ל<%= number %> פריטים בדף זה שינויים מקומיים",Restore:"שחזר",Ignore:"התעלם",saveSuccess:'פריט "<%= label %>" נשמר בהצלחה',saveSuccessMultiple:"<%= number %> פריטים נשמרו בהצלחה",saveError:"שגיאה בשמירה<br /><%= error %>","Item tags":"סיווגי פריט","Suggested tags":"סיווגים מומלצים",Tags:"סיווגים","add a tag":"הוסף סיווג",Add:"הוסף","Choose type to add":"בחר סוג להוספה"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.it={Save:"Salva",Saving:"Salvataggio",Cancel:"Cancella",Edit:"Modifica",localModification:'Articolo "<%= label %>" in questa pagina hanno modifiche locali',localModifications:"<%= number %> articoli in questa pagina hanno modifiche locali",Restore:"Ripristina",Ignore:"Ignora",saveSuccess:'Articolo "<%= label %>" salvato con successo',saveSuccessMultiple:"<%= number %> articoli salvati con successo",saveError:"Errore durante il salvataggio<br /><%= error %>","Item tags":"Tags articolo","Suggested tags":"Tags suggerite",Tags:"Tags","add a tag":"Aggiungi una parola chiave",Add:"Aggiungi","Choose type to add":"Scegli il tipo da aggiungere"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.nl={Save:"Opslaan",Saving:"Bezig met opslaan",Cancel:"Annuleren",Edit:"Bewerken",localModification:'Items "<%= label %>" op de pagina heeft lokale wijzigingen',localModifications:"<%= number %> items op de pagina hebben lokale wijzigingen",Restore:"Herstellen",Ignore:"Negeren",saveSuccess:'Item "<%= label %>" succesvol opgeslagen',saveSuccessMultiple:"<%= number %> items succesvol opgeslagen",saveError:"Fout opgetreden bij het opslaan<br /><%= error %>","Item tags":"Item tags","Suggested tags":"Tag suggesties",Tags:"Tags","add a tag":"tag toevoegen",Add:"Toevoegen","Choose type to add":"Kies type om toe te voegen"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.no={Save:"Lagre",Saving:"Lagrer",Cancel:"Avbryt",Edit:"Rediger",localModification:'Element "<%= label %>" på denne siden er modifisert lokalt',localModifications:"<%= number %> elementer på denne siden er modifisert lokalt",Restore:"Gjenopprett",Ignore:"Ignorer",saveSuccess:'Element "<%= label %>" ble lagret',saveSuccessMultiple:"<%= number %> elementer ble lagret",saveError:"En feil oppstod under lagring<br /><%= error %>","Item tags":"Element-tagger","Suggested tags":"Anbefalte tagger",Tags:"Tagger","add a tag":"legg til tagg",Add:"Legg til","Choose type to add":"Velg type å legge til"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.pl={Save:"Zapisz",Saving:"Zapisuję",Cancel:"Anuluj",Edit:"Edytuj",localModification:'Artykuł "<%= label %>" posiada lokalne modyfikacje',localModifications:"<%= number %> artykułów na tej stronie posiada lokalne modyfikacje",Restore:"Przywróć",Ignore:"Ignoruj",saveSuccess:'Artykuł "<%= label %>" został poprawnie zapisany',saveSuccessMultiple:"<%= number %> artykułów zostało poprawnie zapisanych",saveError:"Wystąpił błąd podczas zapisywania<br /><%= error %>","Item tags":"Tagi artykułów","Suggested tags":"Sugerowane tagi",Tags:"Tagi","add a tag":"dodaj tag",Add:"Dodaj","Choose type to add":"Wybierz typ do dodania"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.pt_BR={Save:"Salvar",Saving:"Salvando",Cancel:"Cancelar",Edit:"Editar",localModification:'Item "<%= label %>" nesta página possuem modificações locais',localModifications:"<%= number %> itens nesta página possuem modificações locais",Restore:"Restaurar",Ignore:"Ignorar",saveSuccess:'Item "<%= label %>" salvo com sucesso',saveSuccessMultiple:"<%= number %> itens salvos com sucesso",saveError:"Erro ocorrido ao salvar<br /><%= error %>","Item tags":"Tags de item","Suggested tags":"Tags sugeridas",Tags:"Tags","add a tag":"adicionar uma tag",Add:"Adicionar","Choose type to add":"Selecione o tipo para adicionar"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.ro={Save:"Salvează",Saving:"Se salvează",Cancel:"Anulează",Edit:"Editare",localModification:'Zona "<%= label %>" a fost modificată',localModifications:"<%= number %> zone din această pagină au fost modificate",Restore:"Revenire",Ignore:"Ignoră",saveSuccess:'Zona "<%= label %>" a fost salvată',saveSuccessMultiple:"<%= number %> zone au fost salvate",saveError:"S-a produs o eroare în timpul salvării<br /><%= error %>","Item tags":"Etichetele zonei","Suggested tags":"Etichete sugerate",Tags:"Etichete","add a tag":"adaugă o etichetă",Add:"Adăugare","Choose type to add":"Alegeți un tip pentru adăugare"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.ru={Save:"Сохранить",Saving:"Сохраняю",Cancel:"Отмена",Edit:"Редактировать",localModification:'В запись "<%= label %>" внесены несохранённые изменения',localModifications:"В записи на этой странице (<%= number %> шт.) внесены несохранённые изменения",Restore:"Восстановить",Ignore:"Игнорировать",saveSuccess:'Запись "<%= label %>" была успешно сохранена',saveSuccessMultiple:" Записи (<%= number %> шт.) были успешно сохранены",saveError:"Во время сохранения произошла ошибка<br /><%= error %>","Item tags":"Теги записей","Suggested tags":"Предлагаемые теги",Tags:"Теги","add a tag":"добавить тег",Add:"Добавить","Choose type to add":"Выбрать тип для добавления"},void 0===window.midgardCreate&&(window.midgardCreate={}),void 0===window.midgardCreate.locale&&(window.midgardCreate.locale={}),window.midgardCreate.locale.sv={Save:"Spara",Saving:"Sparar",Cancel:"Avbryt",Edit:"Redigera",localModification:'Elementet "<%= label %>" har lokala förändringar',localModifications:"<%= number %> element på den här sidan har lokala förändringar",Restore:"Återställ",Ignore:"Ignorera",saveSuccess:'Elementet "<%= label %>" sparades',saveSuccessMultiple:"<%= number %> element sparades",saveError:"Ett fel uppstod under sparande<br /><%= error %>","Item tags":"Element-taggar","Suggested tags":"Föreslagna taggar",Tags:"Taggar","add a tag":"lägg till en tagg",Add:"Lägg till","Choose type to add":"Välj typ att lägga till"};